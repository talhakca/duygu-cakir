function _defineProperty(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _slicedToArray(t,e){return _arrayWithHoles(t)||_iterableToArrayLimit(t,e)||_unsupportedIterableToArray(t,e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArrayLimit(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,i=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);r=!0);}catch(u){i=!0,o=u}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}return n}}function _arrayWithHoles(t){if(Array.isArray(t))return t}function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_unsupportedIterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArray(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}function _wrapNativeSuper(t){var e="function"==typeof Map?new Map:void 0;return(_wrapNativeSuper=function(t){if(null===t||!_isNativeFunction(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return _construct(t,arguments,_getPrototypeOf(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),_setPrototypeOf(n,t)})(t)}function _isNativeFunction(t){return-1!==Function.toString.call(t).indexOf("[native code]")}function _createForOfIteratorHelper(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=_unsupportedIterableToArray(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return s=t.done,t},e:function(t){a=!0,o=t},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw o}}}}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(t,e):void 0}}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function _construct(t,e,n){return(_construct=_isNativeReflectConstruct()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&_setPrototypeOf(i,n.prototype),i}).apply(null,arguments)}function _get(t,e,n){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=_superPropBase(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function _superPropBase(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=_getPrototypeOf(t)););return t}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _createSuper(t){var e=_isNativeReflectConstruct();return function(){var n,r=_getPrototypeOf(t);if(e){var i=_getPrototypeOf(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _possibleConstructorReturn(this,n)}}function _possibleConstructorReturn(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?_assertThisInitialized(t):e}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"/6Yf":function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return s}));var r=n("mrSG"),i=n("qOnz"),o=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t}(),s=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return t.prototype.get=function(t){void 0===t&&(t="[DEFAULT]");var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new i.a;this.instancesDeferred.set(e,n);try{var r=this.getOrInitializeService(e);r&&n.resolve(r)}catch(o){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=Object(r.a)({identifier:"[DEFAULT]",optional:!1},t),n=e.optional,i=this.normalizeInstanceIdentifier(e.identifier);try{var o=this.getOrInitializeService(i);if(!o){if(n)return null;throw Error("Service "+this.name+" is not available")}return o}catch(s){if(n)return null;throw s}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService("[DEFAULT]")}catch(l){}try{for(var i=Object(r.k)(this.instancesDeferred.entries()),o=i.next();!o.done;o=i.next()){var s=Object(r.g)(o.value,2),a=s[1],u=this.normalizeInstanceIdentifier(s[0]);try{var c=this.getOrInitializeService(u);a.resolve(c)}catch(l){}}}catch(h){e={error:h}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}},t.prototype.clearInstance=function(t){void 0===t&&(t="[DEFAULT]"),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return Object(r.b)(this,void 0,void 0,(function(){var t;return Object(r.e)(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(Object(r.i)(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})),t.filter((function(t){return"_delete"in t})).map((function(t){return t._delete()}))))];case 1:return e.sent(),[2]}}))}))},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.getOrInitializeService=function(t){var e=this.instances.get(t);return!e&&this.component&&(e=this.component.instanceFactory(this.container,function(t){return"[DEFAULT]"===t?void 0:t}(t)),this.instances.set(t,e)),e||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:"[DEFAULT]":t},t}(),a=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new s(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}()},0:function(t,e,n){t.exports=n("zUnb")},"3UD+":function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},"6Uf2":function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return gn}));var r,i=n("zIRd"),o=n("mrSG"),s=n("qOnz"),a=n("q/0M"),u=n("/6Yf"),c=function(){function t(t){this.domStorage_=t,this.prefix_="firebase:"}return t.prototype.set=function(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),Object(s.G)(e))},t.prototype.get=function(t){var e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:Object(s.A)(e)},t.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},t.prototype.prefixedName_=function(t){return this.prefix_+t},t.prototype.toString=function(){return this.domStorage_.toString()},t}(),l=function(){function t(){this.cache_={},this.isInMemoryStorage=!0}return t.prototype.set=function(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e},t.prototype.get=function(t){return Object(s.i)(this.cache_,t)?this.cache_[t]:null},t.prototype.remove=function(t){delete this.cache_[t]},t}(),h=function(t){try{if("undefined"!=typeof window&&void 0!==window[t]){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new c(e)}}catch(n){}return new l},f=h("localStorage"),d=h("sessionStorage"),p=new a.b("@firebase/database"),v=(r=1,function(){return r++}),y=function(t){var e=Object(s.F)(t),n=new s.d;n.update(e);var r=n.digest();return s.g.encodeByteArray(r)},g=function t(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];for(var r="",i=0;i<e.length;i++){var o=e[i];Array.isArray(o)||o&&"object"==typeof o&&"number"==typeof o.length?r+=t.apply(null,o):r+="object"==typeof o?Object(s.G)(o):o,r+=" "}return r},m=null,_=!0,b=function(t,e){Object(s.e)(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(p.logLevel=a.a.VERBOSE,m=p.log.bind(p),e&&d.set("logging_enabled",!0)):"function"==typeof t?m=t:(m=null,d.remove("logging_enabled"))},w=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(!0===_&&(_=!1,null===m&&!0===d.get("logging_enabled")&&b(!0)),m){var n=g.apply(null,t);m(n)}},C=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];w.apply(void 0,Object(o.i)([t],e))}},k=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE INTERNAL ERROR: "+g.apply(void 0,Object(o.i)(t));p.error(n)},E=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE FATAL ERROR: "+g.apply(void 0,Object(o.i)(t));throw p.error(n),new Error(n)},S=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE WARNING: "+g.apply(void 0,Object(o.i)(t));p.warn(n)},T=function(t){return"number"==typeof t&&(t!=t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},O="[MIN_NAME]",I="[MAX_NAME]",x=function(t,e){if(t===e)return 0;if(t===O||e===I)return-1;if(e===O||t===I)return 1;var n=Q(t),r=Q(e);return null!==n?null!==r?n-r==0?t.length-e.length:n-r:-1:null!==r?1:t<e?-1:1},A=function(t,e){return t===e?0:t<e?-1:1},P=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Object(s.G)(e))},R=function t(e){if("object"!=typeof e||null===e)return Object(s.G)(e);var n=[];for(var r in e)n.push(r);n.sort();for(var i="{",o=0;o<n.length;o++)0!==o&&(i+=","),i+=Object(s.G)(n[o]),i+=":",i+=t(e[n[o]]);return i+"}"},N=function(t,e){var n=t.length;if(n<=e)return[t];for(var r=[],i=0;i<n;i+=e)r.push(t.substring(i,i+e>n?n:i+e));return r};function D(t,e){for(var n in t)t.hasOwnProperty(n)&&e(n,t[n])}var z,j,L,F,M,V,U,B,q,H,W=function(t){var e,n,r,i,o;Object(s.e)(!T(t),"Invalid JSON number"),0===t?(n=0,r=0,e=1/t==-1/0?1:0):(e=t<0,(t=Math.abs(t))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(t)/Math.LN2),1023))+1023,r=Math.round(t*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(t/Math.pow(2,-1074))));var a=[];for(o=52;o;o-=1)a.push(r%2?1:0),r=Math.floor(r/2);for(o=11;o;o-=1)a.push(n%2?1:0),n=Math.floor(n/2);a.push(e?1:0),a.reverse();var u=a.join(""),c="";for(o=0;o<64;o+=8){var l=parseInt(u.substr(o,8),2).toString(16);1===l.length&&(l="0"+l),c+=l}return c.toLowerCase()},G=new RegExp("^-?(0*)\\d{1,10}$"),Q=function(t){if(G.test(t)){var e=Number(t);if(e>=-2147483648&&e<=2147483647)return e}return null},K=function(t){try{t()}catch(e){setTimeout((function(){throw S("Exception was thrown by user callback.",e.stack||""),e}),Math.floor(0))}},Y=function(t,e){var n=setTimeout(t,e);return"object"==typeof n&&n.unref&&n.unref(),n},$=function(){function t(t,e){if(void 0===e){this.pieces_=t.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}return Object.defineProperty(t,"Empty",{get:function(){return new t("")},enumerable:!1,configurable:!0}),t.prototype.getFront=function(){return this.pieceNum_>=this.pieces_.length?null:this.pieces_[this.pieceNum_]},t.prototype.getLength=function(){return this.pieces_.length-this.pieceNum_},t.prototype.popFront=function(){var e=this.pieceNum_;return e<this.pieces_.length&&e++,new t(this.pieces_,e)},t.prototype.getBack=function(){return this.pieceNum_<this.pieces_.length?this.pieces_[this.pieces_.length-1]:null},t.prototype.toString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"},t.prototype.toUrlEncodedString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+encodeURIComponent(String(this.pieces_[e])));return t||"/"},t.prototype.slice=function(t){return void 0===t&&(t=0),this.pieces_.slice(this.pieceNum_+t)},t.prototype.parent=function(){if(this.pieceNum_>=this.pieces_.length)return null;for(var e=[],n=this.pieceNum_;n<this.pieces_.length-1;n++)e.push(this.pieces_[n]);return new t(e,0)},t.prototype.child=function(e){for(var n=[],r=this.pieceNum_;r<this.pieces_.length;r++)n.push(this.pieces_[r]);if(e instanceof t)for(r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{var i=e.split("/");for(r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new t(n,0)},t.prototype.isEmpty=function(){return this.pieceNum_>=this.pieces_.length},t.relativePath=function(e,n){var r=e.getFront(),i=n.getFront();if(null===r)return n;if(r===i)return t.relativePath(e.popFront(),n.popFront());throw new Error("INTERNAL ERROR: innerPath ("+n+") is not within outerPath ("+e+")")},t.comparePaths=function(t,e){for(var n=t.slice(),r=e.slice(),i=0;i<n.length&&i<r.length;i++){var o=x(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1},t.prototype.equals=function(t){if(this.getLength()!==t.getLength())return!1;for(var e=this.pieceNum_,n=t.pieceNum_;e<=this.pieces_.length;e++,n++)if(this.pieces_[e]!==t.pieces_[n])return!1;return!0},t.prototype.contains=function(t){var e=this.pieceNum_,n=t.pieceNum_;if(this.getLength()>t.getLength())return!1;for(;e<this.pieces_.length;){if(this.pieces_[e]!==t.pieces_[n])return!1;++e,++n}return!0},t}(),X=function(){function t(t,e){this.errorPrefix_=e,this.parts_=t.slice(),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=Object(s.E)(this.parts_[n]);this.checkValid_()}return Object.defineProperty(t,"MAX_PATH_DEPTH",{get:function(){return 32},enumerable:!1,configurable:!0}),Object.defineProperty(t,"MAX_PATH_LENGTH_BYTES",{get:function(){return 768},enumerable:!1,configurable:!0}),t.prototype.push=function(t){this.parts_.length>0&&(this.byteLength_+=1),this.parts_.push(t),this.byteLength_+=Object(s.E)(t),this.checkValid_()},t.prototype.pop=function(){var t=this.parts_.pop();this.byteLength_-=Object(s.E)(t),this.parts_.length>0&&(this.byteLength_-=1)},t.prototype.checkValid_=function(){if(this.byteLength_>t.MAX_PATH_LENGTH_BYTES)throw new Error(this.errorPrefix_+"has a key path longer than "+t.MAX_PATH_LENGTH_BYTES+" bytes ("+this.byteLength_+").");if(this.parts_.length>t.MAX_PATH_DEPTH)throw new Error(this.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+t.MAX_PATH_DEPTH+") or object contains a cycle "+this.toErrorString())},t.prototype.toErrorString=function(){return 0===this.parts_.length?"":"in property '"+this.parts_.join(".")+"'"},t}(),Z=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=!1),void 0===o&&(o=""),void 0===s&&(s=!1),this.secure=e,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=s,this.host=t.toLowerCase(),this.domain=this.host.substr(this.host.indexOf(".")+1),this.internalHost=f.get("host:"+t)||this.host}return t.prototype.needsQueryParam=function(){return this.host!==this.internalHost||this.isCustomHost()||this.includeNamespaceInQueryParams},t.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},t.prototype.isDemoHost=function(){return"firebaseio-demo.com"===this.domain},t.prototype.isCustomHost=function(){return"firebaseio.com"!==this.domain&&"firebaseio-demo.com"!==this.domain},t.prototype.updateHost=function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&f.set("host:"+this.host,this.internalHost))},t.prototype.connectionURL=function(t,e){var n;if(Object(s.e)("string"==typeof t,"typeof type must == string"),Object(s.e)("object"==typeof e,"typeof params must == object"),"websocket"===t)n=(this.secure?"wss://":"ws://")+this.internalHost+"/.ws?";else{if("long_polling"!==t)throw new Error("Unknown connection type: "+t);n=(this.secure?"https://":"http://")+this.internalHost+"/.lp?"}this.needsQueryParam()&&(e.ns=this.namespace);var r=[];return D(e,(function(t,e){r.push(t+"="+e)})),n+r.join("&")},t.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},t.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host},t}(),J=function(t,e){var n=tt(t),r=n.namespace;return"firebase.com"===n.domain&&E(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||E("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&S("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new Z(n.host,n.secure,r,e,"ws"===n.scheme||"wss"===n.scheme,"",r!==n.subdomain),path:new $(n.pathString)}},tt=function(t){var e="",n="",r="",i="",s="",a=!0,u="https",c=443;if("string"==typeof t){var l=t.indexOf("//");l>=0&&(u=t.substring(0,l-1),t=t.substring(l+2));var h=t.indexOf("/");-1===h&&(h=t.length);var f=t.indexOf("?");-1===f&&(f=t.length),e=t.substring(0,Math.min(h,f)),h<f&&(i=function(t){for(var e="",n=t.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(o){}e+="/"+i}return e}(t.substring(h,f)));var d=function(t){var e,n,r={};"?"===t.charAt(0)&&(t=t.substring(1));try{for(var i=Object(o.k)(t.split("&")),s=i.next();!s.done;s=i.next()){var a=s.value;if(0!==a.length){var u=a.split("=");2===u.length?r[decodeURIComponent(u[0])]=decodeURIComponent(u[1]):S("Invalid query segment '"+a+"' in query '"+t+"'")}}}catch(c){e={error:c}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}(t.substring(Math.min(t.length,f)));(l=e.indexOf(":"))>=0?(a="https"===u||"wss"===u,c=parseInt(e.substring(l+1),10)):l=e.length;var p=e.slice(0,l);if("localhost"===p.toLowerCase())n="localhost";else if(p.split(".").length<=2)n=p;else{var v=e.indexOf(".");r=e.substring(0,v).toLowerCase(),n=e.substring(v+1),s=r}"ns"in d&&(s=d.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:a,scheme:u,pathString:i,namespace:s}},et=/[\[\].#$\/\u0000-\u001F\u007F]/,nt=/[\[\].#$\u0000-\u001F\u007F]/,rt=function(t){return"string"==typeof t&&0!==t.length&&!et.test(t)},it=function(t){return"string"==typeof t&&0!==t.length&&!nt.test(t)},ot=function(t){return null===t||"string"==typeof t||"number"==typeof t&&!T(t)||t&&"object"==typeof t&&Object(s.i)(t,".sv")},st=function(t,e,n,r,i){i&&void 0===n||at(Object(s.m)(t,e,i),n,r)},at=function t(e,n,r){var i=r instanceof $?new X(r,e):r;if(void 0===n)throw new Error(e+"contains undefined "+i.toErrorString());if("function"==typeof n)throw new Error(e+"contains a function "+i.toErrorString()+" with contents = "+n.toString());if(T(n))throw new Error(e+"contains "+n.toString()+" "+i.toErrorString());if("string"==typeof n&&n.length>10485760/3&&Object(s.E)(n)>10485760)throw new Error(e+"contains a string greater than 10485760 utf8 bytes "+i.toErrorString()+" ('"+n.substring(0,50)+"...')");if(n&&"object"==typeof n){var o=!1,a=!1;if(D(n,(function(n,r){if(".value"===n)o=!0;else if(".priority"!==n&&".sv"!==n&&(a=!0,!rt(n)))throw new Error(e+" contains an invalid key ("+n+") "+i.toErrorString()+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');i.push(n),t(e,r,i),i.pop()})),o&&a)throw new Error(e+' contains ".value" child '+i.toErrorString()+" in addition to actual children.")}},ut=function(t,e,n,r,i){if(!i||void 0!==n){var o=Object(s.m)(t,e,i);if(!n||"object"!=typeof n||Array.isArray(n))throw new Error(o+" must be an object containing the children to replace.");var a=[];D(n,(function(t,e){var n=new $(t);if(at(o,e,r.child(n)),".priority"===n.getBack()&&!ot(e))throw new Error(o+"contains an invalid value for '"+n.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(n)})),function(t,e){var n,r;for(n=0;n<e.length;n++)for(var i=(r=e[n]).slice(),o=0;o<i.length;o++)if(".priority"===i[o]&&o===i.length-1);else if(!rt(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');e.sort($.comparePaths);var s=null;for(n=0;n<e.length;n++){if(r=e[n],null!==s&&s.contains(r))throw new Error(t+"contains a path "+s.toString()+" that is ancestor of another path "+r.toString());s=r}}(o,a)}},ct=function(t,e,n,r){if(!r||void 0!==n){if(T(n))throw new Error(Object(s.m)(t,e,r)+"is "+n.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!ot(n))throw new Error(Object(s.m)(t,e,r)+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},lt=function(t,e,n,r){if(!r||void 0!==n)switch(n){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(Object(s.m)(t,e,r)+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},ht=function(t,e,n,r){if(!(r&&void 0===n||rt(n)))throw new Error(Object(s.m)(t,e,r)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},ft=function(t,e,n,r){if(!(r&&void 0===n||it(n)))throw new Error(Object(s.m)(t,e,r)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},dt=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),ft(t,e,n,r)},pt=function(t,e){if(".info"===e.getFront())throw new Error(t+" failed = Can't modify data under /.info/")},vt=function(t,e,n){var r=n.path.toString();if("string"!=typeof n.repoInfo.host||0===n.repoInfo.host.length||!rt(n.repoInfo.namespace)&&"localhost"!==n.repoInfo.host.split(":")[0]||0!==r.length&&!function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),it(t)}(r))throw new Error(Object(s.m)(t,e,!1)+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},yt=function(t,e,n,r){if((!r||void 0!==n)&&"boolean"!=typeof n)throw new Error(Object(s.m)(t,e,r)+"must be a boolean.")},gt=function(){function t(t,e){this.repo_=t,this.path_=e}return t.prototype.cancel=function(t){Object(s.H)("OnDisconnect.cancel",0,1,arguments.length),Object(s.I)("OnDisconnect.cancel",1,t,!0);var e=new s.a;return this.repo_.onDisconnectCancel(this.path_,e.wrapCallback(t)),e.promise},t.prototype.remove=function(t){Object(s.H)("OnDisconnect.remove",0,1,arguments.length),pt("OnDisconnect.remove",this.path_),Object(s.I)("OnDisconnect.remove",1,t,!0);var e=new s.a;return this.repo_.onDisconnectSet(this.path_,null,e.wrapCallback(t)),e.promise},t.prototype.set=function(t,e){Object(s.H)("OnDisconnect.set",1,2,arguments.length),pt("OnDisconnect.set",this.path_),st("OnDisconnect.set",1,t,this.path_,!1),Object(s.I)("OnDisconnect.set",2,e,!0);var n=new s.a;return this.repo_.onDisconnectSet(this.path_,t,n.wrapCallback(e)),n.promise},t.prototype.setWithPriority=function(t,e,n){Object(s.H)("OnDisconnect.setWithPriority",2,3,arguments.length),pt("OnDisconnect.setWithPriority",this.path_),st("OnDisconnect.setWithPriority",1,t,this.path_,!1),ct("OnDisconnect.setWithPriority",2,e,!1),Object(s.I)("OnDisconnect.setWithPriority",3,n,!0);var r=new s.a;return this.repo_.onDisconnectSetWithPriority(this.path_,t,e,r.wrapCallback(n)),r.promise},t.prototype.update=function(t,e){if(Object(s.H)("OnDisconnect.update",1,2,arguments.length),pt("OnDisconnect.update",this.path_),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,S("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}ut("OnDisconnect.update",1,t,this.path_,!1),Object(s.I)("OnDisconnect.update",2,e,!0);var i=new s.a;return this.repo_.onDisconnectUpdate(this.path_,t,i.wrapCallback(e)),i.promise},t}(),mt=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return Object(s.H)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}(),_t=(z="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",j=0,L=[],function(t){var e,n=t===j;j=t;var r=new Array(8);for(e=7;e>=0;e--)r[e]=z.charAt(t%64),t=Math.floor(t/64);Object(s.e)(0===t,"Cannot push at time == 0");var i=r.join("");if(n){for(e=11;e>=0&&63===L[e];e--)L[e]=0;L[e]++}else for(e=0;e<12;e++)L[e]=Math.floor(64*Math.random());for(e=0;e<12;e++)i+=z.charAt(L[e]);return Object(s.e)(20===i.length,"nextPushId: Length should be 20."),i}),bt=function(){function t(t,e){this.name=t,this.node=e}return t.Wrap=function(e,n){return new t(e,n)},t}(),wt=function(){function t(){}return t.prototype.getCompare=function(){return this.compare.bind(this)},t.prototype.indexedValueChanged=function(t,e){var n=new bt(O,t),r=new bt(O,e);return 0!==this.compare(n,r)},t.prototype.minPost=function(){return bt.MIN},t}(),Ct=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(o.d)(e,t),Object.defineProperty(e,"__EMPTY_NODE",{get:function(){return F},set:function(t){F=t},enumerable:!1,configurable:!0}),e.prototype.compare=function(t,e){return x(t.name,e.name)},e.prototype.isDefinedOn=function(t){throw Object(s.f)("KeyIndex.isDefinedOn not expected to be called.")},e.prototype.indexedValueChanged=function(t,e){return!1},e.prototype.minPost=function(){return bt.MIN},e.prototype.maxPost=function(){return new bt(I,F)},e.prototype.makePost=function(t,e){return Object(s.e)("string"==typeof t,"KeyIndex indexValue must always be a string."),new bt(t,F)},e.prototype.toString=function(){return".key"},e}(wt),kt=new Ct,Et=function(t){return"number"==typeof t?"number:"+W(t):"string:"+t},St=function(t){if(t.isLeafNode()){var e=t.val();Object(s.e)("string"==typeof e||"number"==typeof e||"object"==typeof e&&Object(s.i)(e,".sv"),"Priority must be a string or number.")}else Object(s.e)(t===M||t.isEmpty(),"priority of unexpected type.");Object(s.e)(t===M||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},Tt=function(){function t(e,n){void 0===n&&(n=t.__childrenNodeConstructor.EMPTY_NODE),this.value_=e,this.priorityNode_=n,this.lazyHash_=null,Object(s.e)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),St(this.priorityNode_)}return Object.defineProperty(t,"__childrenNodeConstructor",{get:function(){return V},set:function(t){V=t},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!0},t.prototype.getPriority=function(){return this.priorityNode_},t.prototype.updatePriority=function(e){return new t(this.value_,e)},t.prototype.getImmediateChild=function(e){return".priority"===e?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.getChild=function(e){return e.isEmpty()?this:".priority"===e.getFront()?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.hasChild=function(){return!1},t.prototype.getPredecessorChildName=function(t,e){return null},t.prototype.updateImmediateChild=function(e,n){return".priority"===e?this.updatePriority(n):n.isEmpty()&&".priority"!==e?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)},t.prototype.updateChild=function(e,n){var r=e.getFront();return null===r?n:n.isEmpty()&&".priority"!==r?this:(Object(s.e)(".priority"!==r||1===e.getLength(),".priority must be the last token in a path"),this.updateImmediateChild(r,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(e.popFront(),n)))},t.prototype.isEmpty=function(){return!1},t.prototype.numChildren=function(){return 0},t.prototype.forEachChild=function(t,e){return!1},t.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.priorityNode_.isEmpty()||(t+="priority:"+Et(this.priorityNode_.val())+":");var e=typeof this.value_;t+=e+":",t+="number"===e?W(this.value_):this.value_,this.lazyHash_=y(t)}return this.lazyHash_},t.prototype.getValue=function(){return this.value_},t.prototype.compareTo=function(e){return e===t.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof t.__childrenNodeConstructor?-1:(Object(s.e)(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))},t.prototype.compareToLeafNode_=function(e){var n=typeof e.value_,r=typeof this.value_,i=t.VALUE_TYPE_ORDER.indexOf(n),o=t.VALUE_TYPE_ORDER.indexOf(r);return Object(s.e)(i>=0,"Unknown leaf type: "+n),Object(s.e)(o>=0,"Unknown leaf type: "+r),i===o?"object"===r?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:o-i},t.prototype.withIndex=function(){return this},t.prototype.isIndexed=function(){return!0},t.prototype.equals=function(t){return t===this||!!t.isLeafNode()&&this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)},t.VALUE_TYPE_ORDER=["object","boolean","number","string"],t}(),Ot=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(o.d)(e,t),e.prototype.compare=function(t,e){var n=t.node.getPriority(),r=e.node.getPriority(),i=n.compareTo(r);return 0===i?x(t.name,e.name):i},e.prototype.isDefinedOn=function(t){return!t.getPriority().isEmpty()},e.prototype.indexedValueChanged=function(t,e){return!t.getPriority().equals(e.getPriority())},e.prototype.minPost=function(){return bt.MIN},e.prototype.maxPost=function(){return new bt(I,new Tt("[PRIORITY-POST]",B))},e.prototype.makePost=function(t,e){var n=U(t);return new bt(e,new Tt("[PRIORITY-POST]",n))},e.prototype.toString=function(){return".priority"},e}(wt)),It=function(){function t(t,e,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(t=t,o=e?n(t.key,e):1,r&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return t.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t},t.prototype.hasNext=function(){return this.nodeStack_.length>0},t.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},t}(),xt=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:Pt.EMPTY_NODE,this.right=null!=o?o:Pt.EMPTY_NODE}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.count=function(){return this.left.count()+1+this.right.count()},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},t.prototype.minKey=function(){return this.min_().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp_()},t.prototype.removeMin_=function(){if(this.left.isEmpty())return Pt.EMPTY_NODE;var t=this;return t.left.isRed_()||t.left.left.isRed_()||(t=t.moveRedLeft_()),(t=t.copy(null,null,null,t.left.removeMin_(),null)).fixUp_()},t.prototype.remove=function(t,e){var n,r;if(e(t,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(t,e),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===e(t,n.key)){if(n.right.isEmpty())return Pt.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(t,e))}return n.fixUp_()},t.prototype.isRed_=function(){return this.color},t.prototype.fixUp_=function(){var t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t},t.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight_())).rotateLeft_()).colorFlip_()),t},t.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()&&(t=(t=t.rotateRight_()).colorFlip_()),t},t.prototype.rotateLeft_=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight_=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},t.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},t.RED=!0,t.BLACK=!1,t}(),At=function(){function t(){}return t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new xt(t,e,null)},t.prototype.remove=function(t,e){return this},t.prototype.count=function(){return 0},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.check_=function(){return 0},t.prototype.isRed_=function(){return!1},t}(),Pt=function(){function t(e,n){void 0===n&&(n=t.EMPTY_NODE),this.comparator_=e,this.root_=n}return t.prototype.insert=function(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,xt.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,xt.BLACK,null,null))},t.prototype.get=function(t){for(var e,n=this.root_;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key)))return n.value;e<0?n=n.left:e>0&&(n=n.right)}return null},t.prototype.getPredecessorKey=function(t){for(var e,n=this.root_,r=null;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:e>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},t.prototype.isEmpty=function(){return this.root_.isEmpty()},t.prototype.count=function(){return this.root_.count()},t.prototype.minKey=function(){return this.root_.minKey()},t.prototype.maxKey=function(){return this.root_.maxKey()},t.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},t.prototype.getIterator=function(t){return new It(this.root_,null,this.comparator_,!1,t)},t.prototype.getIteratorFrom=function(t,e){return new It(this.root_,t,this.comparator_,!1,e)},t.prototype.getReverseIteratorFrom=function(t,e){return new It(this.root_,t,this.comparator_,!0,e)},t.prototype.getReverseIterator=function(t){return new It(this.root_,null,this.comparator_,!0,t)},t.EMPTY_NODE=new At,t}(),Rt=Math.log(2),Nt=function(){function t(t){this.count=parseInt(Math.log(t+1)/Rt,10),this.current_=this.count-1;var e=parseInt(Array(this.count+1).join("1"),2);this.bits_=t+1&e}return t.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},t}(),Dt=function(t,e,n,r){t.sort(e);var i=function(e){for(var r=null,i=null,o=t.length,s=function(e,r){var i=o-e,s=o;o-=e;var u=function e(r,i){var o,s,a=i-r;if(0===a)return null;if(1===a)return o=t[r],s=n?n(o):o,new xt(s,o.node,xt.BLACK,null,null);var u=parseInt(a/2,10)+r,c=e(r,u),l=e(u+1,i);return o=t[u],s=n?n(o):o,new xt(s,o.node,xt.BLACK,c,l)}(i+1,s),c=t[i],l=n?n(c):c;a(new xt(l,c.node,r,null,u))},a=function(t){r?(r.left=t,r=t):(i=t,r=t)},u=0;u<e.count;++u){var c=e.nextBitIsOne(),l=Math.pow(2,e.count-(u+1));c?s(l,xt.BLACK):(s(l,xt.BLACK),s(l,xt.RED))}return i}(new Nt(t.length));return new Pt(r||e,i)},zt={},jt=function(){function t(t,e){this.indexes_=t,this.indexSet_=e}return Object.defineProperty(t,"Default",{get:function(){return Object(s.e)(zt&&Ot,"ChildrenNode.ts has not been loaded"),q=q||new t({".priority":zt},{".priority":Ot})},enumerable:!1,configurable:!0}),t.prototype.get=function(t){var e=Object(s.D)(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof Pt?e:null},t.prototype.hasIndex=function(t){return Object(s.i)(this.indexSet_,t.toString())},t.prototype.addIndex=function(e,n){Object(s.e)(e!==kt,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,i=[],a=!1,u=n.getIterator(bt.Wrap),c=u.getNext();c;)a=a||e.isDefinedOn(c.node),i.push(c),c=u.getNext();r=a?Dt(i,e.getCompare()):zt;var l=e.toString(),h=Object(o.a)({},this.indexSet_);h[l]=e;var f=Object(o.a)({},this.indexes_);return f[l]=r,new t(f,h)},t.prototype.addToIndexes=function(e,n){var r=this;return new t(Object(s.B)(this.indexes_,(function(t,i){var o=Object(s.D)(r.indexSet_,i);if(Object(s.e)(o,"Missing index implementation for "+i),t===zt){if(o.isDefinedOn(e.node)){for(var a=[],u=n.getIterator(bt.Wrap),c=u.getNext();c;)c.name!==e.name&&a.push(c),c=u.getNext();return a.push(e),Dt(a,o.getCompare())}return zt}var l=n.get(e.name),h=t;return l&&(h=h.remove(new bt(e.name,l))),h.insert(e,e.node)})),this.indexSet_)},t.prototype.removeFromIndexes=function(e,n){return new t(Object(s.B)(this.indexes_,(function(t){if(t===zt)return t;var r=n.get(e.name);return r?t.remove(new bt(e.name,r)):t})),this.indexSet_)},t}();function Lt(t,e){return x(t.name,e.name)}function Ft(t,e){return x(t,e)}var Mt=function(){function t(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&St(this.priorityNode_),this.children_.isEmpty()&&Object(s.e)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(t,"EMPTY_NODE",{get:function(){return H||(H=new t(new Pt(Ft),null,jt.Default))},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!1},t.prototype.getPriority=function(){return this.priorityNode_||H},t.prototype.updatePriority=function(e){return this.children_.isEmpty()?this:new t(this.children_,e,this.indexMap_)},t.prototype.getImmediateChild=function(t){if(".priority"===t)return this.getPriority();var e=this.children_.get(t);return null===e?H:e},t.prototype.getChild=function(t){var e=t.getFront();return null===e?this:this.getImmediateChild(e).getChild(t.popFront())},t.prototype.hasChild=function(t){return null!==this.children_.get(t)},t.prototype.updateImmediateChild=function(e,n){if(Object(s.e)(n,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(n);var r=new bt(e,n),i=void 0,o=void 0;n.isEmpty()?(i=this.children_.remove(e),o=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),o=this.indexMap_.addToIndexes(r,this.children_));var a=i.isEmpty()?H:this.priorityNode_;return new t(i,a,o)},t.prototype.updateChild=function(t,e){var n=t.getFront();if(null===n)return e;Object(s.e)(".priority"!==t.getFront()||1===t.getLength(),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(t.popFront(),e);return this.updateImmediateChild(n,r)},t.prototype.isEmpty=function(){return this.children_.isEmpty()},t.prototype.numChildren=function(){return this.children_.count()},t.prototype.val=function(e){if(this.isEmpty())return null;var n={},r=0,i=0,o=!0;if(this.forEachChild(Ot,(function(s,a){n[s]=a.val(e),r++,o&&t.INTEGER_REGEXP_.test(s)?i=Math.max(i,Number(s)):o=!1})),!e&&o&&i<2*r){var s=[];for(var a in n)s[a]=n[a];return s}return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.getPriority().isEmpty()||(t+="priority:"+Et(this.getPriority().val())+":"),this.forEachChild(Ot,(function(e,n){var r=n.hash();""!==r&&(t+=":"+e+":"+r)})),this.lazyHash_=""===t?"":y(t)}return this.lazyHash_},t.prototype.getPredecessorChildName=function(t,e,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new bt(t,e));return i?i.name:null}return this.children_.getPredecessorKey(t)},t.prototype.getFirstChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.minKey();return n&&n.name}return this.children_.minKey()},t.prototype.getFirstChild=function(t){var e=this.getFirstChildName(t);return e?new bt(e,this.children_.get(e)):null},t.prototype.getLastChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.maxKey();return n&&n.name}return this.children_.maxKey()},t.prototype.getLastChild=function(t){var e=this.getLastChildName(t);return e?new bt(e,this.children_.get(e)):null},t.prototype.forEachChild=function(t,e){var n=this.resolveIndex_(t);return n?n.inorderTraversal((function(t){return e(t.name,t.node)})):this.children_.inorderTraversal(e)},t.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},t.prototype.getIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,(function(t){return t}));for(var r=this.children_.getIteratorFrom(t.name,bt.Wrap),i=r.peek();null!=i&&e.compare(i,t)<0;)r.getNext(),i=r.peek();return r},t.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},t.prototype.getReverseIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,(function(t){return t}));for(var r=this.children_.getReverseIteratorFrom(t.name,bt.Wrap),i=r.peek();null!=i&&e.compare(i,t)>0;)r.getNext(),i=r.peek();return r},t.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Vt?-1:0},t.prototype.withIndex=function(e){if(e===kt||this.indexMap_.hasIndex(e))return this;var n=this.indexMap_.addIndex(e,this.children_);return new t(this.children_,this.priorityNode_,n)},t.prototype.isIndexed=function(t){return t===kt||this.indexMap_.hasIndex(t)},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;var e=t;if(this.getPriority().equals(e.getPriority())){if(this.children_.count()===e.children_.count()){for(var n=this.getIterator(Ot),r=e.getIterator(Ot),i=n.getNext(),o=r.getNext();i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1}return!1},t.prototype.resolveIndex_=function(t){return t===kt?null:this.indexMap_.get(t.toString())},t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t}(),Vt=new(function(t){function e(){return t.call(this,new Pt(Ft),Mt.EMPTY_NODE,jt.Default)||this}return Object(o.d)(e,t),e.prototype.compareTo=function(t){return t===this?0:1},e.prototype.equals=function(t){return t===this},e.prototype.getPriority=function(){return this},e.prototype.getImmediateChild=function(t){return Mt.EMPTY_NODE},e.prototype.isEmpty=function(){return!1},e}(Mt));function Ut(t,e){if(void 0===e&&(e=null),null===t)return Mt.EMPTY_NODE;if("object"==typeof t&&".priority"in t&&(e=t[".priority"]),Object(s.e)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof t&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!=typeof t||".sv"in t)return new Tt(t,Ut(e));if(t instanceof Array){var n=Mt.EMPTY_NODE;return D(t,(function(e,r){if(Object(s.i)(t,e)&&"."!==e.substring(0,1)){var i=Ut(r);!i.isLeafNode()&&i.isEmpty()||(n=n.updateImmediateChild(e,i))}})),n.updatePriority(Ut(e))}var r=[],i=!1;if(D(t,(function(t,e){if("."!==t.substring(0,1)){var n=Ut(e);n.isEmpty()||(i=i||!n.getPriority().isEmpty(),r.push(new bt(t,n)))}})),0===r.length)return Mt.EMPTY_NODE;var o=Dt(r,Lt,(function(t){return t.name}),Ft);if(i){var a=Dt(r,Ot.getCompare());return new Mt(o,Ut(e),new jt({".priority":a},{".priority":Ot}))}return new Mt(o,Ut(e),jt.Default)}Object.defineProperties(bt,{MIN:{value:new bt(O,Mt.EMPTY_NODE)},MAX:{value:new bt(I,Vt)}}),Ct.__EMPTY_NODE=Mt.EMPTY_NODE,Tt.__childrenNodeConstructor=Mt,M=Vt,B=Vt,function(t){U=t}(Ut);var Bt,qt=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(o.d)(e,t),e.prototype.compare=function(t,e){var n=t.node.compareTo(e.node);return 0===n?x(t.name,e.name):n},e.prototype.isDefinedOn=function(t){return!0},e.prototype.indexedValueChanged=function(t,e){return!t.equals(e)},e.prototype.minPost=function(){return bt.MIN},e.prototype.maxPost=function(){return bt.MAX},e.prototype.makePost=function(t,e){var n=Ut(t);return new bt(e,n)},e.prototype.toString=function(){return".value"},e}(wt)),Ht=function(t){function e(e){var n=t.call(this)||this;return n.indexPath_=e,Object(s.e)(!e.isEmpty()&&".priority"!==e.getFront(),"Can't create PathIndex with empty path or .priority key"),n}return Object(o.d)(e,t),e.prototype.extractChild=function(t){return t.getChild(this.indexPath_)},e.prototype.isDefinedOn=function(t){return!t.getChild(this.indexPath_).isEmpty()},e.prototype.compare=function(t,e){var n=this.extractChild(t.node),r=this.extractChild(e.node),i=n.compareTo(r);return 0===i?x(t.name,e.name):i},e.prototype.makePost=function(t,e){var n=Ut(t),r=Mt.EMPTY_NODE.updateChild(this.indexPath_,n);return new bt(e,r)},e.prototype.maxPost=function(){var t=Mt.EMPTY_NODE.updateChild(this.indexPath_,Vt);return new bt(I,t)},e.prototype.toString=function(){return this.indexPath_.slice().join("/")},e}(wt),Wt=function(){function t(t,e,n){this.node_=t,this.ref_=e,this.index_=n}return t.prototype.val=function(){return Object(s.H)("DataSnapshot.val",0,0,arguments.length),this.node_.val()},t.prototype.exportVal=function(){return Object(s.H)("DataSnapshot.exportVal",0,0,arguments.length),this.node_.val(!0)},t.prototype.toJSON=function(){return Object(s.H)("DataSnapshot.toJSON",0,1,arguments.length),this.exportVal()},t.prototype.exists=function(){return Object(s.H)("DataSnapshot.exists",0,0,arguments.length),!this.node_.isEmpty()},t.prototype.child=function(e){Object(s.H)("DataSnapshot.child",0,1,arguments.length),e=String(e),ft("DataSnapshot.child",1,e,!1);var n=new $(e),r=this.ref_.child(n);return new t(this.node_.getChild(n),r,Ot)},t.prototype.hasChild=function(t){Object(s.H)("DataSnapshot.hasChild",1,1,arguments.length),ft("DataSnapshot.hasChild",1,t,!1);var e=new $(t);return!this.node_.getChild(e).isEmpty()},t.prototype.getPriority=function(){return Object(s.H)("DataSnapshot.getPriority",0,0,arguments.length),this.node_.getPriority().val()},t.prototype.forEach=function(e){var n=this;if(Object(s.H)("DataSnapshot.forEach",1,1,arguments.length),Object(s.I)("DataSnapshot.forEach",1,e,!1),this.node_.isLeafNode())return!1;var r=this.node_;return!!r.forEachChild(this.index_,(function(r,i){return e(new t(i,n.ref_.child(r),Ot))}))},t.prototype.hasChildren=function(){return Object(s.H)("DataSnapshot.hasChildren",0,0,arguments.length),!this.node_.isLeafNode()&&!this.node_.isEmpty()},Object.defineProperty(t.prototype,"key",{get:function(){return this.ref_.getKey()},enumerable:!1,configurable:!0}),t.prototype.numChildren=function(){return Object(s.H)("DataSnapshot.numChildren",0,0,arguments.length),this.node_.numChildren()},t.prototype.getRef=function(){return Object(s.H)("DataSnapshot.ref",0,0,arguments.length),this.ref_},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),t}(),Gt=function(){function t(t,e,n,r){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=r}return t.prototype.getPath=function(){var t=this.snapshot.getRef();return"value"===this.eventType?t.path:t.getParent().path},t.prototype.getEventType=function(){return this.eventType},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+Object(s.G)(this.snapshot.exportVal())},t}(),Qt=function(){function t(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}return t.prototype.getPath=function(){return this.path},t.prototype.getEventType=function(){return"cancel"},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.path.toString()+":cancel"},t}(),Kt=function(){function t(t,e,n){this.callback_=t,this.cancelCallback_=e,this.context_=n}return t.prototype.respondsTo=function(t){return"value"===t},t.prototype.createEvent=function(t,e){var n=e.getQueryParams().getIndex();return new Gt("value",this,new Wt(t.snapshotNode,e.getRef(),n))},t.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){Object(s.e)(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callback_;return function(){r.call(e,t.snapshot)}},t.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new Qt(this,t,e):null},t.prototype.matches=function(e){return e instanceof t&&(!e.callback_||!this.callback_||e.callback_===this.callback_&&e.context_===this.context_)},t.prototype.hasAnyCallback=function(){return null!==this.callback_},t}(),Yt=function(){function t(t,e,n){this.callbacks_=t,this.cancelCallback_=e,this.context_=n}return t.prototype.respondsTo=function(t){var e="children_added"===t?"child_added":t;return e="children_removed"===e?"child_removed":e,Object(s.i)(this.callbacks_,e)},t.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new Qt(this,t,e):null},t.prototype.createEvent=function(t,e){Object(s.e)(null!=t.childName,"Child events should have a childName.");var n=e.getRef().child(t.childName),r=e.getQueryParams().getIndex();return new Gt(t.type,this,new Wt(t.snapshotNode,n,r),t.prevName)},t.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){Object(s.e)(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callbacks_[t.eventType];return function(){r.call(e,t.snapshot,t.prevName)}},t.prototype.matches=function(e){var n=this;if(e instanceof t){if(!this.callbacks_||!e.callbacks_)return!0;if(this.context_===e.context_){var r=Object.keys(e.callbacks_),i=Object.keys(this.callbacks_),o=r.length;if(o===i.length){if(1===o){var s=r[0],a=i[0];return!(a!==s||e.callbacks_[s]&&this.callbacks_[a]&&e.callbacks_[s]!==this.callbacks_[a])}return i.every((function(t){return e.callbacks_[t]===n.callbacks_[t]}))}}}return!1},t.prototype.hasAnyCallback=function(){return null!==this.callbacks_},t}(),$t=function(){function t(t,e,n,r){this.repo=t,this.path=e,this.queryParams_=n,this.orderByCalled_=r}return Object.defineProperty(t,"__referenceConstructor",{get:function(){return Object(s.e)(Bt,"Reference.ts has not been loaded"),Bt},set:function(t){Bt=t},enumerable:!1,configurable:!0}),t.validateQueryEndpoints_=function(t){var e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===kt){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), endAt(),or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==O)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(t.hasEnd()){if(t.getIndexEndName()!==I)throw new Error(r);if("string"!=typeof n)throw new Error(i)}}else if(t.getIndex()===Ot){if(null!=e&&!ot(e)||null!=n&&!ot(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), endAt(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(Object(s.e)(t.getIndex()instanceof Ht||t.getIndex()===qt,"unknown index type."),null!=e&&"object"==typeof e||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), endAt(), or equalTo() cannot be an object.")},t.validateLimit_=function(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), endAt(), and limit(). Use limitToFirst() or limitToLast() instead.")},t.prototype.validateNoPreviousOrderByCall_=function(t){if(!0===this.orderByCalled_)throw new Error(t+": You can't combine multiple orderBy calls.")},t.prototype.getQueryParams=function(){return this.queryParams_},t.prototype.getRef=function(){return Object(s.H)("Query.ref",0,0,arguments.length),new t.__referenceConstructor(this.repo,this.path)},t.prototype.on=function(e,n,r,i){Object(s.H)("Query.on",2,4,arguments.length),lt("Query.on",1,e,!1),Object(s.I)("Query.on",2,n,!1);var o=t.getCancelAndContextArgs_("Query.on",r,i);if("value"===e)this.onValueEvent(n,o.cancel,o.context);else{var a={};a[e]=n,this.onChildEvent(a,o.cancel,o.context)}return n},t.prototype.onValueEvent=function(t,e,n){var r=new Kt(t,e||null,n||null);this.repo.addEventCallbackForQuery(this,r)},t.prototype.onChildEvent=function(t,e,n){var r=new Yt(t,e,n);this.repo.addEventCallbackForQuery(this,r)},t.prototype.off=function(t,e,n){Object(s.H)("Query.off",0,3,arguments.length),lt("Query.off",1,t,!0),Object(s.I)("Query.off",2,e,!0),Object(s.J)("Query.off",3,n,!0);var r=null,i=null;if("value"===t){var o=e||null;r=new Kt(o,null,n||null)}else t&&(e&&((i={})[t]=e),r=new Yt(i,null,n||null));this.repo.removeEventCallbackForQuery(this,r)},t.prototype.once=function(e,n,r,i){var o=this;Object(s.H)("Query.once",1,4,arguments.length),lt("Query.once",1,e,!1),Object(s.I)("Query.once",2,n,!0);var a=t.getCancelAndContextArgs_("Query.once",r,i),u=!0,c=new s.a;c.promise.catch((function(){}));var l=function t(r){u&&(u=!1,o.off(e,t),n&&n.bind(a.context)(r),c.resolve(r))};return this.on(e,l,(function(t){o.off(e,l),a.cancel&&a.cancel.bind(a.context)(t),c.reject(t)})),c.promise},t.prototype.limitToFirst=function(e){if(Object(s.H)("Query.limitToFirst",1,1,arguments.length),"number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToFirst: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new t(this.repo,this.path,this.queryParams_.limitToFirst(e),this.orderByCalled_)},t.prototype.limitToLast=function(e){if(Object(s.H)("Query.limitToLast",1,1,arguments.length),"number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToLast: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new t(this.repo,this.path,this.queryParams_.limitToLast(e),this.orderByCalled_)},t.prototype.orderByChild=function(e){if(Object(s.H)("Query.orderByChild",1,1,arguments.length),"$key"===e)throw new Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.');if("$priority"===e)throw new Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.');if("$value"===e)throw new Error('Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.');ft("Query.orderByChild",1,e,!1),this.validateNoPreviousOrderByCall_("Query.orderByChild");var n=new $(e);if(n.isEmpty())throw new Error("Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.");var r=new Ht(n),i=this.queryParams_.orderBy(r);return t.validateQueryEndpoints_(i),new t(this.repo,this.path,i,!0)},t.prototype.orderByKey=function(){Object(s.H)("Query.orderByKey",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByKey");var e=this.queryParams_.orderBy(kt);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.orderByPriority=function(){Object(s.H)("Query.orderByPriority",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByPriority");var e=this.queryParams_.orderBy(Ot);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.orderByValue=function(){Object(s.H)("Query.orderByValue",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByValue");var e=this.queryParams_.orderBy(qt);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.startAt=function(e,n){void 0===e&&(e=null),Object(s.H)("Query.startAt",0,2,arguments.length),st("Query.startAt",1,e,this.path,!0),ht("Query.startAt",2,n,!0);var r=this.queryParams_.startAt(e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasStart())throw new Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");return void 0===e&&(e=null,n=null),new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.endAt=function(e,n){void 0===e&&(e=null),Object(s.H)("Query.endAt",0,2,arguments.length),st("Query.endAt",1,e,this.path,!0),ht("Query.endAt",2,n,!0);var r=this.queryParams_.endAt(e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasEnd())throw new Error("Query.endAt: Ending point was already set (by another call to endAt or equalTo).");return new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.equalTo=function(t,e){if(Object(s.H)("Query.equalTo",1,2,arguments.length),st("Query.equalTo",1,t,this.path,!1),ht("Query.equalTo",2,e,!0),this.queryParams_.hasStart())throw new Error("Query.equalTo: Starting point was already set (by another call to startAt or equalTo).");if(this.queryParams_.hasEnd())throw new Error("Query.equalTo: Ending point was already set (by another call to endAt or equalTo).");return this.startAt(t,e).endAt(t,e)},t.prototype.toString=function(){return Object(s.H)("Query.toString",0,0,arguments.length),this.repo.toString()+this.path.toUrlEncodedString()},t.prototype.toJSON=function(){return Object(s.H)("Query.toJSON",0,1,arguments.length),this.toString()},t.prototype.queryObject=function(){return this.queryParams_.getQueryObject()},t.prototype.queryIdentifier=function(){var t=this.queryObject(),e=R(t);return"{}"===e?"default":e},t.prototype.isEqual=function(e){if(Object(s.H)("Query.isEqual",1,1,arguments.length),!(e instanceof t)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}var r=this.repo===e.repo,i=this.path.equals(e.path),o=this.queryIdentifier()===e.queryIdentifier();return r&&i&&o},t.getCancelAndContextArgs_=function(t,e,n){var r={cancel:null,context:null};if(e&&n)r.cancel=e,Object(s.I)(t,3,r.cancel,!0),r.context=n,Object(s.J)(t,4,r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error(Object(s.m)(t,3,!0)+" must either be a cancel callback or a context object.");r.cancel=e}return r},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),t}(),Xt=function(){function t(t){this.node_=t}return t.prototype.getImmediateChild=function(e){return new t(this.node_.getImmediateChild(e))},t.prototype.node=function(){return this.node_},t}(),Zt=function(){function t(t,e){this.syncTree_=t,this.path_=e}return t.prototype.getImmediateChild=function(e){var n=this.path_.child(e);return new t(this.syncTree_,n)},t.prototype.node=function(){return this.syncTree_.calcCompleteEventCache(this.path_)},t}(),Jt=function(t,e,n){return t&&"object"==typeof t?(Object(s.e)(".sv"in t,"Unexpected leaf node or priority contents"),"string"==typeof t[".sv"]?te(t[".sv"],e,n):"object"==typeof t[".sv"]?ee(t[".sv"],e):void Object(s.e)(!1,"Unexpected server value: "+JSON.stringify(t,null,2))):t},te=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:Object(s.e)(!1,"Unexpected server value: "+t)}},ee=function(t,e,n){t.hasOwnProperty("increment")||Object(s.e)(!1,"Unexpected server value: "+JSON.stringify(t,null,2));var r=t.increment;"number"!=typeof r&&Object(s.e)(!1,"Unexpected increment value: "+r);var i=e.node();if(Object(s.e)(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var o=i.getValue();return"number"!=typeof o?r:o+r},ne=function(t,e,n,r){return ie(e,new Zt(n,t),r)},re=function(t,e,n){return ie(t,new Xt(e),n)};function ie(t,e,n){var r,i=t.getPriority().val(),o=Jt(i,e.getImmediateChild(".priority"),n);if(t.isLeafNode()){var s=t,a=Jt(s.getValue(),e,n);return a!==s.getValue()||o!==s.getPriority().val()?new Tt(a,Ut(o)):t}var u=t;return r=u,o!==u.getPriority().val()&&(r=r.updatePriority(new Tt(o))),u.forEachChild(Ot,(function(t,i){var o=ie(i,e.getImmediateChild(t),n);o!==i&&(r=r.updateImmediateChild(t,o))})),r}var oe,se,ae=function(){function t(){this.value=null,this.children=new Map}return t.prototype.find=function(t){if(null!=this.value)return this.value.getChild(t);if(!t.isEmpty()&&this.children.size>0){var e=t.getFront();return t=t.popFront(),this.children.has(e)?this.children.get(e).find(t):null}return null},t.prototype.remember=function(e,n){if(e.isEmpty())this.value=n,this.children.clear();else if(null!==this.value)this.value=this.value.updateChild(e,n);else{var r=e.getFront();this.children.has(r)||this.children.set(r,new t);var i=this.children.get(r);e=e.popFront(),i.remember(e,n)}},t.prototype.forget=function(t){if(t.isEmpty())return this.value=null,this.children.clear(),!0;if(null!==this.value){if(this.value.isLeafNode())return!1;var e=this.value;this.value=null;var n=this;return e.forEachChild(Ot,(function(t,e){n.remember(new $(t),e)})),this.forget(t)}if(this.children.size>0){var r=t.getFront();return t=t.popFront(),this.children.has(r)&&this.children.get(r).forget(t)&&this.children.delete(r),0===this.children.size}return!0},t.prototype.forEachTree=function(t,e){null!==this.value?e(t,this.value):this.forEachChild((function(n,r){var i=new $(t.toString()+"/"+n);r.forEachTree(i,e)}))},t.prototype.forEachChild=function(t){this.children.forEach((function(e,n){t(n,e)}))},t}(),ue=function(t){return t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",t}({}),ce=function(){function t(t,e,n,r){this.fromUser=t,this.fromServer=e,this.queryId=n,this.tagged=r,Object(s.e)(!r||e,"Tagged queries must be from server.")}return t.User=new t(!0,!1,null,!1),t.Server=new t(!1,!0,null,!1),t.forServerTaggedQuery=function(e){return new t(!1,!0,e,!0)},t}(),le=function(){function t(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=ue.ACK_USER_WRITE,this.source=ce.User}return t.prototype.operationForChild=function(e){if(this.path.isEmpty()){if(null!=this.affectedTree.value)return Object(s.e)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new $(e));return new t($.Empty,n,this.revert)}return Object(s.e)(this.path.getFront()===e,"operationForChild called for unrelated child."),new t(this.path.popFront(),this.affectedTree,this.revert)},t}(),he=function(){function t(t,e){void 0===e&&(oe||(oe=new Pt(A)),e=oe),this.value=t,this.children=e}return t.fromObject=function(e){var n=t.Empty;return D(e,(function(t,e){n=n.set(new $(t),e)})),n},t.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},t.prototype.findRootMostMatchingPathAndValue=function(t,e){if(null!=this.value&&e(this.value))return{path:$.Empty,value:this.value};if(t.isEmpty())return null;var n=t.getFront(),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(t.popFront(),e);return null!=i?{path:new $(n).child(i.path),value:i.value}:null}return null},t.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,(function(){return!0}))},t.prototype.subtree=function(e){if(e.isEmpty())return this;var n=e.getFront(),r=this.children.get(n);return null!==r?r.subtree(e.popFront()):t.Empty},t.prototype.set=function(e,n){if(e.isEmpty())return new t(n,this.children);var r=e.getFront(),i=(this.children.get(r)||t.Empty).set(e.popFront(),n),o=this.children.insert(r,i);return new t(this.value,o)},t.prototype.remove=function(e){if(e.isEmpty())return this.children.isEmpty()?t.Empty:new t(null,this.children);var n=e.getFront(),r=this.children.get(n);if(r){var i=r.remove(e.popFront()),o=void 0;return o=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),null===this.value&&o.isEmpty()?t.Empty:new t(this.value,o)}return this},t.prototype.get=function(t){if(t.isEmpty())return this.value;var e=t.getFront(),n=this.children.get(e);return n?n.get(t.popFront()):null},t.prototype.setTree=function(e,n){if(e.isEmpty())return n;var r,i=e.getFront(),o=(this.children.get(i)||t.Empty).setTree(e.popFront(),n);return r=o.isEmpty()?this.children.remove(i):this.children.insert(i,o),new t(this.value,r)},t.prototype.fold=function(t){return this.fold_($.Empty,t)},t.prototype.fold_=function(t,e){var n={};return this.children.inorderTraversal((function(r,i){n[r]=i.fold_(t.child(r),e)})),e(t,this.value,n)},t.prototype.findOnPath=function(t,e){return this.findOnPath_(t,$.Empty,e)},t.prototype.findOnPath_=function(t,e,n){var r=!!this.value&&n(e,this.value);if(r)return r;if(t.isEmpty())return null;var i=t.getFront(),o=this.children.get(i);return o?o.findOnPath_(t.popFront(),e.child(i),n):null},t.prototype.foreachOnPath=function(t,e){return this.foreachOnPath_(t,$.Empty,e)},t.prototype.foreachOnPath_=function(e,n,r){if(e.isEmpty())return this;this.value&&r(n,this.value);var i=e.getFront(),o=this.children.get(i);return o?o.foreachOnPath_(e.popFront(),n.child(i),r):t.Empty},t.prototype.foreach=function(t){this.foreach_($.Empty,t)},t.prototype.foreach_=function(t,e){this.children.inorderTraversal((function(n,r){r.foreach_(t.child(n),e)})),this.value&&e(t,this.value)},t.prototype.foreachChild=function(t){this.children.inorderTraversal((function(e,n){n.value&&t(e,n.value)}))},t.Empty=new t(null),t}(),fe=function(){function t(t,e){this.source=t,this.path=e,this.type=ue.LISTEN_COMPLETE}return t.prototype.operationForChild=function(e){return this.path.isEmpty()?new t(this.source,$.Empty):new t(this.source,this.path.popFront())},t}(),de=function(){function t(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=ue.OVERWRITE}return t.prototype.operationForChild=function(e){return this.path.isEmpty()?new t(this.source,$.Empty,this.snap.getImmediateChild(e)):new t(this.source,this.path.popFront(),this.snap)},t}(),pe=function(){function t(t,e,n){this.source=t,this.path=e,this.children=n,this.type=ue.MERGE}return t.prototype.operationForChild=function(e){if(this.path.isEmpty()){var n=this.children.subtree(new $(e));return n.isEmpty()?null:n.value?new de(this.source,$.Empty,n.value):new t(this.source,$.Empty,n)}return Object(s.e)(this.path.getFront()===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,this.path.popFront(),this.children)},t.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},t}(),ve=function(){function t(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}return t.prototype.isFullyInitialized=function(){return this.fullyInitialized_},t.prototype.isFiltered=function(){return this.filtered_},t.prototype.isCompleteForPath=function(t){if(t.isEmpty())return this.isFullyInitialized()&&!this.filtered_;var e=t.getFront();return this.isCompleteForChild(e)},t.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},t.prototype.getNode=function(){return this.node_},t}(),ye=function(){function t(t,e){this.eventCache_=t,this.serverCache_=e}return t.prototype.updateEventSnap=function(e,n,r){return new t(new ve(e,n,r),this.serverCache_)},t.prototype.updateServerSnap=function(e,n,r){return new t(this.eventCache_,new ve(e,n,r))},t.prototype.getEventCache=function(){return this.eventCache_},t.prototype.getCompleteEventSnap=function(){return this.eventCache_.isFullyInitialized()?this.eventCache_.getNode():null},t.prototype.getServerCache=function(){return this.serverCache_},t.prototype.getCompleteServerSnap=function(){return this.serverCache_.isFullyInitialized()?this.serverCache_.getNode():null},t.Empty=new t(new ve(Mt.EMPTY_NODE,!1,!1),new ve(Mt.EMPTY_NODE,!1,!1)),t}(),ge=function(){function t(t,e,n,r,i){this.type=t,this.snapshotNode=e,this.childName=n,this.oldSnap=r,this.prevName=i}return t.valueChange=function(e){return new t(t.VALUE,e)},t.childAddedChange=function(e,n){return new t(t.CHILD_ADDED,n,e)},t.childRemovedChange=function(e,n){return new t(t.CHILD_REMOVED,n,e)},t.childChangedChange=function(e,n,r){return new t(t.CHILD_CHANGED,n,e,r)},t.childMovedChange=function(e,n){return new t(t.CHILD_MOVED,n,e)},t.CHILD_ADDED="child_added",t.CHILD_REMOVED="child_removed",t.CHILD_CHANGED="child_changed",t.CHILD_MOVED="child_moved",t.VALUE="value",t}(),me=function(){function t(t){this.index_=t}return t.prototype.updateChild=function(t,e,n,r,i,o){Object(s.e)(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var a=t.getImmediateChild(e);return a.getChild(r).equals(n.getChild(r))&&a.isEmpty()===n.isEmpty()?t:(null!=o&&(n.isEmpty()?t.hasChild(e)?o.trackChildChange(ge.childRemovedChange(e,a)):Object(s.e)(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(ge.childAddedChange(e,n)):o.trackChildChange(ge.childChangedChange(e,n,a))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))},t.prototype.updateFullNode=function(t,e,n){return null!=n&&(t.isLeafNode()||t.forEachChild(Ot,(function(t,r){e.hasChild(t)||n.trackChildChange(ge.childRemovedChange(t,r))})),e.isLeafNode()||e.forEachChild(Ot,(function(e,r){if(t.hasChild(e)){var i=t.getImmediateChild(e);i.equals(r)||n.trackChildChange(ge.childChangedChange(e,r,i))}else n.trackChildChange(ge.childAddedChange(e,r))}))),e.withIndex(this.index_)},t.prototype.updatePriority=function(t,e){return t.isEmpty()?Mt.EMPTY_NODE:t.updatePriority(e)},t.prototype.filtersNodes=function(){return!1},t.prototype.getIndexedFilter=function(){return this},t.prototype.getIndex=function(){return this.index_},t}(),_e=function(){function t(){this.changeMap=new Map}return t.prototype.trackChildChange=function(t){var e=t.type,n=t.childName;Object(s.e)(e===ge.CHILD_ADDED||e===ge.CHILD_CHANGED||e===ge.CHILD_REMOVED,"Only child changes supported for tracking"),Object(s.e)(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if(e===ge.CHILD_ADDED&&i===ge.CHILD_REMOVED)this.changeMap.set(n,ge.childChangedChange(n,t.snapshotNode,r.snapshotNode));else if(e===ge.CHILD_REMOVED&&i===ge.CHILD_ADDED)this.changeMap.delete(n);else if(e===ge.CHILD_REMOVED&&i===ge.CHILD_CHANGED)this.changeMap.set(n,ge.childRemovedChange(n,r.oldSnap));else if(e===ge.CHILD_CHANGED&&i===ge.CHILD_ADDED)this.changeMap.set(n,ge.childAddedChange(n,t.snapshotNode));else{if(e!==ge.CHILD_CHANGED||i!==ge.CHILD_CHANGED)throw Object(s.f)("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(n,ge.childChangedChange(n,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,t)},t.prototype.getChanges=function(){return Array.from(this.changeMap.values())},t}(),be=new(function(){function t(){}return t.prototype.getCompleteChild=function(t){return null},t.prototype.getChildAfterChild=function(t,e,n){return null},t}()),we=function(){function t(t,e,n){void 0===n&&(n=null),this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}return t.prototype.getCompleteChild=function(t){var e=this.viewCache_.getEventCache();if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);var n=null!=this.optCompleteServerCache_?new ve(this.optCompleteServerCache_,!0,!1):this.viewCache_.getServerCache();return this.writes_.calcCompleteChild(t,n)},t.prototype.getChildAfterChild=function(t,e,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:this.viewCache_.getCompleteServerSnap(),i=this.writes_.calcIndexedSlice(r,e,1,n,t);return 0===i.length?null:i[0]},t}(),Ce=function(t,e){this.viewCache=t,this.changes=e},ke=function(){function t(t){this.filter_=t}return t.prototype.assertIndexed=function(t){Object(s.e)(t.getEventCache().getNode().isIndexed(this.filter_.getIndex()),"Event snap not indexed"),Object(s.e)(t.getServerCache().getNode().isIndexed(this.filter_.getIndex()),"Server snap not indexed")},t.prototype.applyOperation=function(e,n,r,i){var o,a,u=new _e;if(n.type===ue.OVERWRITE){var c=n;c.source.fromUser?o=this.applyUserOverwrite_(e,c.path,c.snap,r,i,u):(Object(s.e)(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.getServerCache().isFiltered()&&!c.path.isEmpty(),o=this.applyServerOverwrite_(e,c.path,c.snap,r,i,a,u))}else if(n.type===ue.MERGE){var l=n;l.source.fromUser?o=this.applyUserMerge_(e,l.path,l.children,r,i,u):(Object(s.e)(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.getServerCache().isFiltered(),o=this.applyServerMerge_(e,l.path,l.children,r,i,a,u))}else if(n.type===ue.ACK_USER_WRITE){var h=n;o=h.revert?this.revertUserWrite_(e,h.path,r,i,u):this.ackUserWrite_(e,h.path,h.affectedTree,r,i,u)}else{if(n.type!==ue.LISTEN_COMPLETE)throw Object(s.f)("Unknown operation type: "+n.type);o=this.listenComplete_(e,n.path,r,u)}var f=u.getChanges();return t.maybeAddValueEvent_(e,o,f),new Ce(o,f)},t.maybeAddValueEvent_=function(t,e,n){var r=e.getEventCache();if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=t.getCompleteEventSnap();(n.length>0||!t.getEventCache().isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(ge.valueChange(e.getCompleteEventSnap()))}},t.prototype.generateEventCacheAfterServerEvent_=function(t,e,n,r,i){var o=t.getEventCache();if(null!=n.shadowingWrite(e))return t;var a=void 0,u=void 0;if(e.isEmpty())if(Object(s.e)(t.getServerCache().isFullyInitialized(),"If change path is empty, we must have complete server data"),t.getServerCache().isFiltered()){var c=t.getCompleteServerSnap(),l=n.calcCompleteEventChildren(c instanceof Mt?c:Mt.EMPTY_NODE);a=this.filter_.updateFullNode(t.getEventCache().getNode(),l,i)}else{var h=n.calcCompleteEventCache(t.getCompleteServerSnap());a=this.filter_.updateFullNode(t.getEventCache().getNode(),h,i)}else{var f=e.getFront();if(".priority"===f){Object(s.e)(1===e.getLength(),"Can't have a priority with additional path components");var d=o.getNode();u=t.getServerCache().getNode();var p=n.calcEventCacheAfterServerOverwrite(e,d,u);a=null!=p?this.filter_.updatePriority(d,p):o.getNode()}else{var v=e.popFront(),y=void 0;if(o.isCompleteForChild(f)){u=t.getServerCache().getNode();var g=n.calcEventCacheAfterServerOverwrite(e,o.getNode(),u);y=null!=g?o.getNode().getImmediateChild(f).updateChild(v,g):o.getNode().getImmediateChild(f)}else y=n.calcCompleteChild(f,t.getServerCache());a=null!=y?this.filter_.updateChild(o.getNode(),f,y,v,r,i):o.getNode()}}return t.updateEventSnap(a,o.isFullyInitialized()||e.isEmpty(),this.filter_.filtersNodes())},t.prototype.applyServerOverwrite_=function(t,e,n,r,i,o,s){var a,u=t.getServerCache(),c=o?this.filter_:this.filter_.getIndexedFilter();if(e.isEmpty())a=c.updateFullNode(u.getNode(),n,null);else if(c.filtersNodes()&&!u.isFiltered()){var l=u.getNode().updateChild(e,n);a=c.updateFullNode(u.getNode(),l,null)}else{var h=e.getFront();if(!u.isCompleteForPath(e)&&e.getLength()>1)return t;var f=e.popFront(),d=u.getNode().getImmediateChild(h).updateChild(f,n);a=".priority"===h?c.updatePriority(u.getNode(),d):c.updateChild(u.getNode(),h,d,f,be,null)}var p=t.updateServerSnap(a,u.isFullyInitialized()||e.isEmpty(),c.filtersNodes()),v=new we(r,p,i);return this.generateEventCacheAfterServerEvent_(p,e,r,v,s)},t.prototype.applyUserOverwrite_=function(t,e,n,r,i,o){var s,a,u=t.getEventCache(),c=new we(r,t,i);if(e.isEmpty())a=this.filter_.updateFullNode(t.getEventCache().getNode(),n,o),s=t.updateEventSnap(a,!0,this.filter_.filtersNodes());else{var l=e.getFront();if(".priority"===l)a=this.filter_.updatePriority(t.getEventCache().getNode(),n),s=t.updateEventSnap(a,u.isFullyInitialized(),u.isFiltered());else{var h=e.popFront(),f=u.getNode().getImmediateChild(l),d=void 0;if(h.isEmpty())d=n;else{var p=c.getCompleteChild(l);d=null!=p?".priority"===h.getBack()&&p.getChild(h.parent()).isEmpty()?p:p.updateChild(h,n):Mt.EMPTY_NODE}if(f.equals(d))s=t;else{var v=this.filter_.updateChild(u.getNode(),l,d,h,c,o);s=t.updateEventSnap(v,u.isFullyInitialized(),this.filter_.filtersNodes())}}}return s},t.cacheHasChild_=function(t,e){return t.getEventCache().isCompleteForChild(e)},t.prototype.applyUserMerge_=function(e,n,r,i,o,s){var a=this,u=e;return r.foreach((function(r,c){var l=n.child(r);t.cacheHasChild_(e,l.getFront())&&(u=a.applyUserOverwrite_(u,l,c,i,o,s))})),r.foreach((function(r,c){var l=n.child(r);t.cacheHasChild_(e,l.getFront())||(u=a.applyUserOverwrite_(u,l,c,i,o,s))})),u},t.prototype.applyMerge_=function(t,e){return e.foreach((function(e,n){t=t.updateChild(e,n)})),t},t.prototype.applyServerMerge_=function(t,e,n,r,i,o,s){var a=this;if(t.getServerCache().getNode().isEmpty()&&!t.getServerCache().isFullyInitialized())return t;var u,c=t;u=e.isEmpty()?n:he.Empty.setTree(e,n);var l=t.getServerCache().getNode();return u.children.inorderTraversal((function(e,n){if(l.hasChild(e)){var u=t.getServerCache().getNode().getImmediateChild(e),h=a.applyMerge_(u,n);c=a.applyServerOverwrite_(c,new $(e),h,r,i,o,s)}})),u.children.inorderTraversal((function(e,n){var u=!t.getServerCache().isCompleteForChild(e)&&null==n.value;if(!l.hasChild(e)&&!u){var h=t.getServerCache().getNode().getImmediateChild(e),f=a.applyMerge_(h,n);c=a.applyServerOverwrite_(c,new $(e),f,r,i,o,s)}})),c},t.prototype.ackUserWrite_=function(t,e,n,r,i,o){if(null!=r.shadowingWrite(e))return t;var s=t.getServerCache().isFiltered(),a=t.getServerCache();if(null!=n.value){if(e.isEmpty()&&a.isFullyInitialized()||a.isCompleteForPath(e))return this.applyServerOverwrite_(t,e,a.getNode().getChild(e),r,i,s,o);if(e.isEmpty()){var u=he.Empty;return a.getNode().forEachChild(kt,(function(t,e){u=u.set(new $(t),e)})),this.applyServerMerge_(t,e,u,r,i,s,o)}return t}var c=he.Empty;return n.foreach((function(t,n){var r=e.child(t);a.isCompleteForPath(r)&&(c=c.set(t,a.getNode().getChild(r)))})),this.applyServerMerge_(t,e,c,r,i,s,o)},t.prototype.listenComplete_=function(t,e,n,r){var i=t.getServerCache(),o=t.updateServerSnap(i.getNode(),i.isFullyInitialized()||e.isEmpty(),i.isFiltered());return this.generateEventCacheAfterServerEvent_(o,e,n,be,r)},t.prototype.revertUserWrite_=function(t,e,n,r,i){var o;if(null!=n.shadowingWrite(e))return t;var a=new we(n,t,r),u=t.getEventCache().getNode(),c=void 0;if(e.isEmpty()||".priority"===e.getFront()){var l=void 0;if(t.getServerCache().isFullyInitialized())l=n.calcCompleteEventCache(t.getCompleteServerSnap());else{var h=t.getServerCache().getNode();Object(s.e)(h instanceof Mt,"serverChildren would be complete if leaf node"),l=n.calcCompleteEventChildren(h)}c=this.filter_.updateFullNode(u,l=l,i)}else{var f=e.getFront(),d=n.calcCompleteChild(f,t.getServerCache());null==d&&t.getServerCache().isCompleteForChild(f)&&(d=u.getImmediateChild(f)),(c=null!=d?this.filter_.updateChild(u,f,d,e.popFront(),a,i):t.getEventCache().getNode().hasChild(f)?this.filter_.updateChild(u,f,Mt.EMPTY_NODE,e.popFront(),a,i):u).isEmpty()&&t.getServerCache().isFullyInitialized()&&(o=n.calcCompleteEventCache(t.getCompleteServerSnap())).isLeafNode()&&(c=this.filter_.updateFullNode(c,o,i))}return o=t.getServerCache().isFullyInitialized()||null!=n.shadowingWrite($.Empty),t.updateEventSnap(c,o,this.filter_.filtersNodes())},t}(),Ee=function(){function t(t){this.query_=t,this.index_=this.query_.getQueryParams().getIndex()}return t.prototype.generateEventsForChanges=function(t,e,n){var r=this,i=[],o=[];return t.forEach((function(t){t.type===ge.CHILD_CHANGED&&r.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&o.push(ge.childMovedChange(t.childName,t.snapshotNode))})),this.generateEventsForType_(i,ge.CHILD_REMOVED,t,n,e),this.generateEventsForType_(i,ge.CHILD_ADDED,t,n,e),this.generateEventsForType_(i,ge.CHILD_MOVED,o,n,e),this.generateEventsForType_(i,ge.CHILD_CHANGED,t,n,e),this.generateEventsForType_(i,ge.VALUE,t,n,e),i},t.prototype.generateEventsForType_=function(t,e,n,r,i){var o=this,s=n.filter((function(t){return t.type===e}));s.sort(this.compareChanges_.bind(this)),s.forEach((function(e){var n=o.materializeSingleChange_(e,i);r.forEach((function(r){r.respondsTo(e.type)&&t.push(r.createEvent(n,o.query_))}))}))},t.prototype.materializeSingleChange_=function(t,e){return"value"===t.type||"child_removed"===t.type||(t.prevName=e.getPredecessorChildName(t.childName,t.snapshotNode,this.index_)),t},t.prototype.compareChanges_=function(t,e){if(null==t.childName||null==e.childName)throw Object(s.f)("Should only compare child_ events.");var n=new bt(t.childName,t.snapshotNode),r=new bt(e.childName,e.snapshotNode);return this.index_.compare(n,r)},t}(),Se=function(){function t(t,e){this.query_=t,this.eventRegistrations_=[];var n=this.query_.getQueryParams(),r=new me(n.getIndex()),i=n.getNodeFilter();this.processor_=new ke(i);var o=e.getServerCache(),s=e.getEventCache(),a=r.updateFullNode(Mt.EMPTY_NODE,o.getNode(),null),u=i.updateFullNode(Mt.EMPTY_NODE,s.getNode(),null),c=new ve(a,o.isFullyInitialized(),r.filtersNodes()),l=new ve(u,s.isFullyInitialized(),i.filtersNodes());this.viewCache_=new ye(l,c),this.eventGenerator_=new Ee(this.query_)}return t.prototype.getQuery=function(){return this.query_},t.prototype.getServerCache=function(){return this.viewCache_.getServerCache().getNode()},t.prototype.getCompleteServerCache=function(t){var e=this.viewCache_.getCompleteServerSnap();return e&&(this.query_.getQueryParams().loadsAllData()||!t.isEmpty()&&!e.getImmediateChild(t.getFront()).isEmpty())?e.getChild(t):null},t.prototype.isEmpty=function(){return 0===this.eventRegistrations_.length},t.prototype.addEventRegistration=function(t){this.eventRegistrations_.push(t)},t.prototype.removeEventRegistration=function(t,e){var n=[];if(e){Object(s.e)(null==t,"A cancel should cancel all event registrations.");var r=this.query_.path;this.eventRegistrations_.forEach((function(t){var i=t.createCancelEvent(e=e,r);i&&n.push(i)}))}if(t){for(var i=[],o=0;o<this.eventRegistrations_.length;++o){var a=this.eventRegistrations_[o];if(a.matches(t)){if(t.hasAnyCallback()){i=i.concat(this.eventRegistrations_.slice(o+1));break}}else i.push(a)}this.eventRegistrations_=i}else this.eventRegistrations_=[];return n},t.prototype.applyOperation=function(t,e,n){t.type===ue.MERGE&&null!==t.source.queryId&&(Object(s.e)(this.viewCache_.getCompleteServerSnap(),"We should always have a full cache before handling merges"),Object(s.e)(this.viewCache_.getCompleteEventSnap(),"Missing event cache, even though we have a server cache"));var r=this.viewCache_,i=this.processor_.applyOperation(r,t,e,n);return this.processor_.assertIndexed(i.viewCache),Object(s.e)(i.viewCache.getServerCache().isFullyInitialized()||!r.getServerCache().isFullyInitialized(),"Once a server snap is complete, it should never go back"),this.viewCache_=i.viewCache,this.generateEventsForChanges_(i.changes,i.viewCache.getEventCache().getNode(),null)},t.prototype.getInitialEvents=function(t){var e=this.viewCache_.getEventCache(),n=[];return e.getNode().isLeafNode()||e.getNode().forEachChild(Ot,(function(t,e){n.push(ge.childAddedChange(t,e))})),e.isFullyInitialized()&&n.push(ge.valueChange(e.getNode())),this.generateEventsForChanges_(n,e.getNode(),t)},t.prototype.generateEventsForChanges_=function(t,e,n){return this.eventGenerator_.generateEventsForChanges(t,e,n?[n]:this.eventRegistrations_)},t}(),Te=function(){function t(){this.views=new Map}return Object.defineProperty(t,"__referenceConstructor",{get:function(){return Object(s.e)(se,"Reference.ts has not been loaded"),se},set:function(t){Object(s.e)(!se,"__referenceConstructor has already been defined"),se=t},enumerable:!1,configurable:!0}),t.prototype.isEmpty=function(){return 0===this.views.size},t.prototype.applyOperation=function(t,e,n){var r,i,a=t.source.queryId;if(null!==a){var u=this.views.get(a);return Object(s.e)(null!=u,"SyncTree gave us an op for an invalid query."),u.applyOperation(t,e,n)}var c=[];try{for(var l=Object(o.k)(this.views.values()),h=l.next();!h.done;h=l.next())c=c.concat((u=h.value).applyOperation(t,e,n))}catch(f){r={error:f}}finally{try{h&&!h.done&&(i=l.return)&&i.call(l)}finally{if(r)throw r.error}}return c},t.prototype.addEventRegistration=function(t,e,n,r,i){var o=t.queryIdentifier(),s=this.views.get(o);if(!s){var a=n.calcCompleteEventCache(i?r:null),u=!1;a?u=!0:r instanceof Mt?(a=n.calcCompleteEventChildren(r),u=!1):(a=Mt.EMPTY_NODE,u=!1);var c=new ye(new ve(a,u,!1),new ve(r,i,!1));s=new Se(t,c),this.views.set(o,s)}return s.addEventRegistration(e),s.getInitialEvents(e)},t.prototype.removeEventRegistration=function(e,n,r){var i,s,a=e.queryIdentifier(),u=[],c=[],l=this.hasCompleteView();if("default"===a)try{for(var h=Object(o.k)(this.views.entries()),f=h.next();!f.done;f=h.next()){var d,p=Object(o.g)(f.value,2),v=p[0];c=c.concat((d=p[1]).removeEventRegistration(n,r)),d.isEmpty()&&(this.views.delete(v),d.getQuery().getQueryParams().loadsAllData()||u.push(d.getQuery()))}}catch(y){i={error:y}}finally{try{f&&!f.done&&(s=h.return)&&s.call(h)}finally{if(i)throw i.error}}else(d=this.views.get(a))&&(c=c.concat(d.removeEventRegistration(n,r)),d.isEmpty()&&(this.views.delete(a),d.getQuery().getQueryParams().loadsAllData()||u.push(d.getQuery())));return l&&!this.hasCompleteView()&&u.push(new t.__referenceConstructor(e.repo,e.path)),{removed:u,events:c}},t.prototype.getQueryViews=function(){var t,e,n=[];try{for(var r=Object(o.k)(this.views.values()),i=r.next();!i.done;i=r.next()){var s=i.value;s.getQuery().getQueryParams().loadsAllData()||n.push(s)}}catch(a){t={error:a}}finally{try{i&&!i.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}return n},t.prototype.getCompleteServerCache=function(t){var e,n,r=null;try{for(var i=Object(o.k)(this.views.values()),s=i.next();!s.done;s=i.next())r=r||s.value.getCompleteServerCache(t)}catch(a){e={error:a}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r},t.prototype.viewForQuery=function(t){if(t.getQueryParams().loadsAllData())return this.getCompleteView();var e=t.queryIdentifier();return this.views.get(e)},t.prototype.viewExistsForQuery=function(t){return null!=this.viewForQuery(t)},t.prototype.hasCompleteView=function(){return null!=this.getCompleteView()},t.prototype.getCompleteView=function(){var t,e;try{for(var n=Object(o.k)(this.views.values()),r=n.next();!r.done;r=n.next()){var i=r.value;if(i.getQuery().getQueryParams().loadsAllData())return i}}catch(s){t={error:s}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}return null},t}(),Oe=function(){function t(t){this.writeTree_=t}return t.prototype.addWrite=function(e,n){if(e.isEmpty())return new t(new he(n));var r=this.writeTree_.findRootMostValueAndPath(e);if(null!=r){var i=r.path,o=r.value,s=$.relativePath(i,e);return o=o.updateChild(s,n),new t(this.writeTree_.set(i,o))}var a=new he(n);return new t(this.writeTree_.setTree(e,a))},t.prototype.addWrites=function(t,e){var n=this;return D(e,(function(e,r){n=n.addWrite(t.child(e),r)})),n},t.prototype.removeWrite=function(e){return e.isEmpty()?t.Empty:new t(this.writeTree_.setTree(e,he.Empty))},t.prototype.hasCompleteWrite=function(t){return null!=this.getCompleteNode(t)},t.prototype.getCompleteNode=function(t){var e=this.writeTree_.findRootMostValueAndPath(t);return null!=e?this.writeTree_.get(e.path).getChild($.relativePath(e.path,t)):null},t.prototype.getCompleteChildren=function(){var t=[],e=this.writeTree_.value;return null!=e?e.isLeafNode()||e.forEachChild(Ot,(function(e,n){t.push(new bt(e,n))})):this.writeTree_.children.inorderTraversal((function(e,n){null!=n.value&&t.push(new bt(e,n.value))})),t},t.prototype.childCompoundWrite=function(e){if(e.isEmpty())return this;var n=this.getCompleteNode(e);return new t(null!=n?new he(n):this.writeTree_.subtree(e))},t.prototype.isEmpty=function(){return this.writeTree_.isEmpty()},t.prototype.apply=function(t){return function t(e,n,r){if(null!=n.value)return r.updateChild(e,n.value);var i=null;return n.children.inorderTraversal((function(n,o){".priority"===n?(Object(s.e)(null!==o.value,"Priority writes must always be leaf nodes"),i=o.value):r=t(e.child(n),o,r)})),r.getChild(e).isEmpty()||null===i||(r=r.updateChild(e.child(".priority"),i)),r}($.Empty,this.writeTree_,t)},t.Empty=new t(new he(null)),t}(),Ie=function(){function t(){this.visibleWrites_=Oe.Empty,this.allWrites_=[],this.lastWriteId_=-1}return t.prototype.childWrites=function(t){return new xe(t,this)},t.prototype.addOverwrite=function(t,e,n,r){Object(s.e)(n>this.lastWriteId_,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),this.allWrites_.push({path:t,snap:e,writeId:n,visible:r}),r&&(this.visibleWrites_=this.visibleWrites_.addWrite(t,e)),this.lastWriteId_=n},t.prototype.addMerge=function(t,e,n){Object(s.e)(n>this.lastWriteId_,"Stacking an older merge on top of newer ones"),this.allWrites_.push({path:t,children:e,writeId:n,visible:!0}),this.visibleWrites_=this.visibleWrites_.addWrites(t,e),this.lastWriteId_=n},t.prototype.getWrite=function(t){for(var e=0;e<this.allWrites_.length;e++){var n=this.allWrites_[e];if(n.writeId===t)return n}return null},t.prototype.removeWrite=function(t){var e=this,n=this.allWrites_.findIndex((function(e){return e.writeId===t}));Object(s.e)(n>=0,"removeWrite called with nonexistent writeId.");var r=this.allWrites_[n];this.allWrites_.splice(n,1);for(var i=r.visible,o=!1,a=this.allWrites_.length-1;i&&a>=0;){var u=this.allWrites_[a];u.visible&&(a>=n&&this.recordContainsPath_(u,r.path)?i=!1:r.path.contains(u.path)&&(o=!0)),a--}return!!i&&(o?(this.resetTree_(),!0):(r.snap?this.visibleWrites_=this.visibleWrites_.removeWrite(r.path):D(r.children,(function(t){e.visibleWrites_=e.visibleWrites_.removeWrite(r.path.child(t))})),!0))},t.prototype.getCompleteWriteData=function(t){return this.visibleWrites_.getCompleteNode(t)},t.prototype.calcCompleteEventCache=function(e,n,r,i){if(r||i){var o=this.visibleWrites_.childCompoundWrite(e);return!i&&o.isEmpty()?n:i||null!=n||o.hasCompleteWrite($.Empty)?t.layerTree_(this.allWrites_,(function(t){return(t.visible||i)&&(!r||!~r.indexOf(t.writeId))&&(t.path.contains(e)||e.contains(t.path))}),e).apply(n||Mt.EMPTY_NODE):null}var s=this.visibleWrites_.getCompleteNode(e);if(null!=s)return s;var a=this.visibleWrites_.childCompoundWrite(e);return a.isEmpty()?n:null!=n||a.hasCompleteWrite($.Empty)?a.apply(n||Mt.EMPTY_NODE):null},t.prototype.calcCompleteEventChildren=function(t,e){var n=Mt.EMPTY_NODE,r=this.visibleWrites_.getCompleteNode(t);if(r)return r.isLeafNode()||r.forEachChild(Ot,(function(t,e){n=n.updateImmediateChild(t,e)})),n;if(e){var i=this.visibleWrites_.childCompoundWrite(t);return e.forEachChild(Ot,(function(t,e){var r=i.childCompoundWrite(new $(t)).apply(e);n=n.updateImmediateChild(t,r)})),i.getCompleteChildren().forEach((function(t){n=n.updateImmediateChild(t.name,t.node)})),n}return this.visibleWrites_.childCompoundWrite(t).getCompleteChildren().forEach((function(t){n=n.updateImmediateChild(t.name,t.node)})),n},t.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n,r){Object(s.e)(n||r,"Either existingEventSnap or existingServerSnap must exist");var i=t.child(e);if(this.visibleWrites_.hasCompleteWrite(i))return null;var o=this.visibleWrites_.childCompoundWrite(i);return o.isEmpty()?r.getChild(e):o.apply(r.getChild(e))},t.prototype.calcCompleteChild=function(t,e,n){var r=t.child(e),i=this.visibleWrites_.getCompleteNode(r);return null!=i?i:n.isCompleteForChild(e)?this.visibleWrites_.childCompoundWrite(r).apply(n.getNode().getImmediateChild(e)):null},t.prototype.shadowingWrite=function(t){return this.visibleWrites_.getCompleteNode(t)},t.prototype.calcIndexedSlice=function(t,e,n,r,i,o){var s,a=this.visibleWrites_.childCompoundWrite(t),u=a.getCompleteNode($.Empty);if(null!=u)s=u;else{if(null==e)return[];s=a.apply(e)}if((s=s.withIndex(o)).isEmpty()||s.isLeafNode())return[];for(var c=[],l=o.getCompare(),h=i?s.getReverseIteratorFrom(n,o):s.getIteratorFrom(n,o),f=h.getNext();f&&c.length<r;)0!==l(f,n)&&c.push(f),f=h.getNext();return c},t.prototype.recordContainsPath_=function(t,e){if(t.snap)return t.path.contains(e);for(var n in t.children)if(t.children.hasOwnProperty(n)&&t.path.child(n).contains(e))return!0;return!1},t.prototype.resetTree_=function(){this.visibleWrites_=t.layerTree_(this.allWrites_,t.DefaultFilter_,$.Empty),this.lastWriteId_=this.allWrites_.length>0?this.allWrites_[this.allWrites_.length-1].writeId:-1},t.DefaultFilter_=function(t){return t.visible},t.layerTree_=function(t,e,n){for(var r=Oe.Empty,i=0;i<t.length;++i){var o=t[i];if(e(o)){var a=o.path,u=void 0;if(o.snap)n.contains(a)?(u=$.relativePath(n,a),r=r.addWrite(u,o.snap)):a.contains(n)&&(u=$.relativePath(a,n),r=r.addWrite($.Empty,o.snap.getChild(u)));else{if(!o.children)throw Object(s.f)("WriteRecord should have .snap or .children");if(n.contains(a))u=$.relativePath(n,a),r=r.addWrites(u,o.children);else if(a.contains(n))if((u=$.relativePath(a,n)).isEmpty())r=r.addWrites($.Empty,o.children);else{var c=Object(s.D)(o.children,u.getFront());if(c){var l=c.getChild(u.popFront());r=r.addWrite($.Empty,l)}}}}}return r},t}(),xe=function(){function t(t,e){this.treePath_=t,this.writeTree_=e}return t.prototype.calcCompleteEventCache=function(t,e,n){return this.writeTree_.calcCompleteEventCache(this.treePath_,t,e,n)},t.prototype.calcCompleteEventChildren=function(t){return this.writeTree_.calcCompleteEventChildren(this.treePath_,t)},t.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n){return this.writeTree_.calcEventCacheAfterServerOverwrite(this.treePath_,t,e,n)},t.prototype.shadowingWrite=function(t){return this.writeTree_.shadowingWrite(this.treePath_.child(t))},t.prototype.calcIndexedSlice=function(t,e,n,r,i){return this.writeTree_.calcIndexedSlice(this.treePath_,t,e,n,r,i)},t.prototype.calcCompleteChild=function(t,e){return this.writeTree_.calcCompleteChild(this.treePath_,t,e)},t.prototype.child=function(e){return new t(this.treePath_.child(e),this.writeTree_)},t}(),Ae=function(){function t(t){this.listenProvider_=t,this.syncPointTree_=he.Empty,this.pendingWriteTree_=new Ie,this.tagToQueryMap=new Map,this.queryToTagMap=new Map}return t.prototype.applyUserOverwrite=function(t,e,n,r){return this.pendingWriteTree_.addOverwrite(t,e,n,r),r?this.applyOperationToSyncPoints_(new de(ce.User,t,e)):[]},t.prototype.applyUserMerge=function(t,e,n){this.pendingWriteTree_.addMerge(t,e,n);var r=he.fromObject(e);return this.applyOperationToSyncPoints_(new pe(ce.User,t,r))},t.prototype.ackUserWrite=function(t,e){void 0===e&&(e=!1);var n=this.pendingWriteTree_.getWrite(t);if(this.pendingWriteTree_.removeWrite(t)){var r=he.Empty;return null!=n.snap?r=r.set($.Empty,!0):D(n.children,(function(t,e){r=r.set(new $(t),e)})),this.applyOperationToSyncPoints_(new le(n.path,r,e))}return[]},t.prototype.applyServerOverwrite=function(t,e){return this.applyOperationToSyncPoints_(new de(ce.Server,t,e))},t.prototype.applyServerMerge=function(t,e){var n=he.fromObject(e);return this.applyOperationToSyncPoints_(new pe(ce.Server,t,n))},t.prototype.applyListenComplete=function(t){return this.applyOperationToSyncPoints_(new fe(ce.Server,t))},t.prototype.applyTaggedQueryOverwrite=function(e,n,r){var i=this.queryKeyForTag_(r);if(null!=i){var o=t.parseQueryKey_(i),s=o.path,a=o.queryId,u=$.relativePath(s,e),c=new de(ce.forServerTaggedQuery(a),u,n);return this.applyTaggedOperation_(s,c)}return[]},t.prototype.applyTaggedQueryMerge=function(e,n,r){var i=this.queryKeyForTag_(r);if(i){var o=t.parseQueryKey_(i),s=o.path,a=o.queryId,u=$.relativePath(s,e),c=he.fromObject(n),l=new pe(ce.forServerTaggedQuery(a),u,c);return this.applyTaggedOperation_(s,l)}return[]},t.prototype.applyTaggedListenComplete=function(e,n){var r=this.queryKeyForTag_(n);if(r){var i=t.parseQueryKey_(r),o=i.path,s=i.queryId,a=$.relativePath(o,e),u=new fe(ce.forServerTaggedQuery(s),a);return this.applyTaggedOperation_(o,u)}return[]},t.prototype.addEventRegistration=function(e,n){var r=e.path,i=null,o=!1;this.syncPointTree_.foreachOnPath(r,(function(t,e){var n=$.relativePath(t,r);i=i||e.getCompleteServerCache(n),o=o||e.hasCompleteView()}));var a,u=this.syncPointTree_.get(r);u?(o=o||u.hasCompleteView(),i=i||u.getCompleteServerCache($.Empty)):(u=new Te,this.syncPointTree_=this.syncPointTree_.set(r,u)),null!=i?a=!0:(a=!1,i=Mt.EMPTY_NODE,this.syncPointTree_.subtree(r).foreachChild((function(t,e){var n=e.getCompleteServerCache($.Empty);n&&(i=i.updateImmediateChild(t,n))})));var c=u.viewExistsForQuery(e);if(!c&&!e.getQueryParams().loadsAllData()){var l=t.makeQueryKey_(e);Object(s.e)(!this.queryToTagMap.has(l),"View does not exist, but we have a tag");var h=t.getNextQueryTag_();this.queryToTagMap.set(l,h),this.tagToQueryMap.set(h,l)}var f=this.pendingWriteTree_.childWrites(r),d=u.addEventRegistration(e,n,f,i,a);if(!c&&!o){var p=u.viewForQuery(e);d=d.concat(this.setupListener_(e,p))}return d},t.prototype.removeEventRegistration=function(e,n,r){var i=this,o=e.path,s=this.syncPointTree_.get(o),a=[];if(s&&("default"===e.queryIdentifier()||s.viewExistsForQuery(e))){var u=s.removeEventRegistration(e,n,r);s.isEmpty()&&(this.syncPointTree_=this.syncPointTree_.remove(o));var c=u.removed;a=u.events;var l=-1!==c.findIndex((function(t){return t.getQueryParams().loadsAllData()})),h=this.syncPointTree_.findOnPath(o,(function(t,e){return e.hasCompleteView()}));if(l&&!h){var f=this.syncPointTree_.subtree(o);if(!f.isEmpty())for(var d=this.collectDistinctViewsForSubTree_(f),p=0;p<d.length;++p){var v=d[p],y=v.getQuery(),g=this.createListenerForView_(v);this.listenProvider_.startListening(t.queryForListening_(y),this.tagForQuery_(y),g.hashFn,g.onComplete)}}!h&&c.length>0&&!r&&(l?this.listenProvider_.stopListening(t.queryForListening_(e),null):c.forEach((function(e){var n=i.queryToTagMap.get(t.makeQueryKey_(e));i.listenProvider_.stopListening(t.queryForListening_(e),n)}))),this.removeTags_(c)}return a},t.prototype.calcCompleteEventCache=function(t,e){var n=this.pendingWriteTree_,r=this.syncPointTree_.findOnPath(t,(function(e,n){var r=$.relativePath(e,t),i=n.getCompleteServerCache(r);if(i)return i}));return n.calcCompleteEventCache(t,r,e,!0)},t.prototype.collectDistinctViewsForSubTree_=function(t){return t.fold((function(t,e,n){if(e&&e.hasCompleteView())return[e.getCompleteView()];var r=[];return e&&(r=e.getQueryViews()),D(n,(function(t,e){r=r.concat(e)})),r}))},t.prototype.removeTags_=function(e){for(var n=0;n<e.length;++n){var r=e[n];if(!r.getQueryParams().loadsAllData()){var i=t.makeQueryKey_(r),o=this.queryToTagMap.get(i);this.queryToTagMap.delete(i),this.tagToQueryMap.delete(o)}}},t.queryForListening_=function(t){return t.getQueryParams().loadsAllData()&&!t.getQueryParams().isDefault()?t.getRef():t},t.prototype.setupListener_=function(e,n){var r=e.path,i=this.tagForQuery_(e),o=this.createListenerForView_(n),a=this.listenProvider_.startListening(t.queryForListening_(e),i,o.hashFn,o.onComplete),u=this.syncPointTree_.subtree(r);if(i)Object(s.e)(!u.value.hasCompleteView(),"If we're adding a query, it shouldn't be shadowed");else for(var c=u.fold((function(t,e,n){if(!t.isEmpty()&&e&&e.hasCompleteView())return[e.getCompleteView().getQuery()];var r=[];return e&&(r=r.concat(e.getQueryViews().map((function(t){return t.getQuery()})))),D(n,(function(t,e){r=r.concat(e)})),r})),l=0;l<c.length;++l){var h=c[l];this.listenProvider_.stopListening(t.queryForListening_(h),this.tagForQuery_(h))}return a},t.prototype.createListenerForView_=function(t){var e=this,n=t.getQuery(),r=this.tagForQuery_(n);return{hashFn:function(){return(t.getServerCache()||Mt.EMPTY_NODE).hash()},onComplete:function(t){if("ok"===t)return r?e.applyTaggedListenComplete(n.path,r):e.applyListenComplete(n.path);var i=function(t,e){var n="Unknown Error";"too_big"===t?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===t?n="Client doesn't have permission to access the desired data.":"unavailable"===t&&(n="The service is unavailable");var r=new Error(t+" at "+e.path.toString()+": "+n);return r.code=t.toUpperCase(),r}(t,n);return e.removeEventRegistration(n,null,i)}}},t.makeQueryKey_=function(t){return t.path.toString()+"$"+t.queryIdentifier()},t.parseQueryKey_=function(t){var e=t.indexOf("$");return Object(s.e)(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new $(t.substr(0,e))}},t.prototype.queryKeyForTag_=function(t){return this.tagToQueryMap.get(t)},t.prototype.tagForQuery_=function(e){var n=t.makeQueryKey_(e);return this.queryToTagMap.get(n)},t.getNextQueryTag_=function(){return t.nextQueryTag_++},t.prototype.applyTaggedOperation_=function(t,e){var n=this.syncPointTree_.get(t);Object(s.e)(n,"Missing sync point for query tag that we're tracking");var r=this.pendingWriteTree_.childWrites(t);return n.applyOperation(e,r,null)},t.prototype.applyOperationToSyncPoints_=function(t){return this.applyOperationHelper_(t,this.syncPointTree_,null,this.pendingWriteTree_.childWrites($.Empty))},t.prototype.applyOperationHelper_=function(t,e,n,r){if(t.path.isEmpty())return this.applyOperationDescendantsHelper_(t,e,n,r);var i=e.get($.Empty);null==n&&null!=i&&(n=i.getCompleteServerCache($.Empty));var o=[],s=t.path.getFront(),a=t.operationForChild(s),u=e.children.get(s);if(u&&a){var c=n?n.getImmediateChild(s):null,l=r.child(s);o=o.concat(this.applyOperationHelper_(a,u,c,l))}return i&&(o=o.concat(i.applyOperation(t,r,n))),o},t.prototype.applyOperationDescendantsHelper_=function(t,e,n,r){var i=this,o=e.get($.Empty);null==n&&null!=o&&(n=o.getCompleteServerCache($.Empty));var s=[];return e.children.inorderTraversal((function(e,o){var a=n?n.getImmediateChild(e):null,u=r.child(e),c=t.operationForChild(e);c&&(s=s.concat(i.applyOperationDescendantsHelper_(c,o,a,u)))})),o&&(s=s.concat(o.applyOperation(t,r,n))),s},t.nextQueryTag_=1,t}(),Pe=function(){function t(){this.rootNode_=Mt.EMPTY_NODE}return t.prototype.getNode=function(t){return this.rootNode_.getChild(t)},t.prototype.updateSnapshot=function(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)},t}(),Re=function(){function t(){this.counters_={}}return t.prototype.incrementCounter=function(t,e){void 0===e&&(e=1),Object(s.i)(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e},t.prototype.get=function(){return Object(s.k)(this.counters_)},t}(),Ne=function(){function t(){}return t.getCollection=function(t){var e=t.toString();return this.collections_[e]||(this.collections_[e]=new Re),this.collections_[e]},t.getOrCreateReporter=function(t,e){var n=t.toString();return this.reporters_[n]||(this.reporters_[n]=e()),this.reporters_[n]},t.collections_={},t.reporters_={},t}(),De=function(){function t(t){this.collection_=t,this.last_=null}return t.prototype.get=function(){var t=this.collection_.get(),e=Object(o.a)({},t);return this.last_&&D(this.last_,(function(t,n){e[t]=e[t]-n})),this.last_=t,e},t}(),ze=function(){function t(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new De(t);var n=1e4+2e4*Math.random();Y(this.reportStats_.bind(this),Math.floor(n))}return t.prototype.includeStat=function(t){this.statsToReport_[t]=!0},t.prototype.reportStats_=function(){var t=this,e=this.statsListener_.get(),n={},r=!1;D(e,(function(e,i){i>0&&Object(s.i)(t.statsToReport_,e)&&(n[e]=i,r=!0)})),r&&this.server_.reportStats(n),Y(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},t}(),je=function(){function t(){this.eventLists_=[],this.recursionDepth_=0}return t.prototype.queueEvents=function(t){for(var e=null,n=0;n<t.length;n++){var r=t[n],i=r.getPath();null===e||i.equals(e.getPath())||(this.eventLists_.push(e),e=null),null===e&&(e=new Le(i)),e.add(r)}e&&this.eventLists_.push(e)},t.prototype.raiseEventsAtPath=function(t,e){this.queueEvents(e),this.raiseQueuedEventsMatchingPredicate_((function(e){return e.equals(t)}))},t.prototype.raiseEventsForChangedPath=function(t,e){this.queueEvents(e),this.raiseQueuedEventsMatchingPredicate_((function(e){return e.contains(t)||t.contains(e)}))},t.prototype.raiseQueuedEventsMatchingPredicate_=function(t){this.recursionDepth_++;for(var e=!0,n=0;n<this.eventLists_.length;n++){var r=this.eventLists_[n];r&&(t(r.getPath())?(this.eventLists_[n].raise(),this.eventLists_[n]=null):e=!1)}e&&(this.eventLists_=[]),this.recursionDepth_--},t}(),Le=function(){function t(t){this.path_=t,this.events_=[]}return t.prototype.add=function(t){this.events_.push(t)},t.prototype.raise=function(){for(var t=0;t<this.events_.length;t++){var e=this.events_[t];if(null!==e){this.events_[t]=null;var n=e.getEventRunner();m&&w("event: "+e.toString()),K(n)}}},t.prototype.getPath=function(){return this.path_},t}(),Fe=function(){function t(t){this.allowedEvents_=t,this.listeners_={},Object(s.e)(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return t.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Array.isArray(this.listeners_[t]))for(var r=Object(o.i)(this.listeners_[t]),i=0;i<r.length;i++)r[i].callback.apply(r[i].context,e)},t.prototype.on=function(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});var r=this.getInitialEvent(t);r&&e.apply(n,r)},t.prototype.off=function(t,e,n){this.validateEventType_(t);for(var r=this.listeners_[t]||[],i=0;i<r.length;i++)if(r[i].callback===e&&(!n||n===r[i].context))return void r.splice(i,1)},t.prototype.validateEventType_=function(t){Object(s.e)(this.allowedEvents_.find((function(e){return e===t})),"Unknown event: "+t)},t}(),Me=function(t){function e(){var e,n,r=t.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(n="visibilitychange",e="hidden"):void 0!==document.mozHidden?(n="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(n="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(n="webkitvisibilitychange",e="webkitHidden")),r.visible_=!0,n&&document.addEventListener(n,(function(){var t=!document[e];t!==r.visible_&&(r.visible_=t,r.trigger("visible",t))}),!1),r}return Object(o.d)(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return Object(s.e)("visible"===t,"Unknown event type: "+t),[this.visible_]},e}(Fe),Ve=function(t){function e(){var e=t.call(this,["online"])||this;return e.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||Object(s.u)()||(window.addEventListener("online",(function(){e.online_||(e.online_=!0,e.trigger("online",!0))}),!1),window.addEventListener("offline",(function(){e.online_&&(e.online_=!1,e.trigger("online",!1))}),!1)),e}return Object(o.d)(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return Object(s.e)("online"===t,"Unknown event type: "+t),[this.online_]},e.prototype.currentlyOnline=function(){return this.online_},e}(Fe),Ue=function(){function t(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return t.prototype.closeAfter=function(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},t.prototype.handleResponse=function(t,e){var n=this;this.pendingResponses[t]=e;for(var r=function(){var t=i.pendingResponses[i.currentResponseNum];delete i.pendingResponses[i.currentResponseNum];for(var e=function(e){t[e]&&K((function(){n.onMessage_(t[e])}))},r=0;r<t.length;++r)e(r);if(i.currentResponseNum===i.closeAfterResponse)return i.onClose&&(i.onClose(),i.onClose=null),"break";i.currentResponseNum++},i=this;this.pendingResponses[this.currentResponseNum]&&"break"!==r(););},t}(),Be=function(){function t(t,e,n,r,i){this.connId=t,this.repoInfo=e,this.applicationId=n,this.transportSessionId=r,this.lastSessionId=i,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=C(t),this.stats_=Ne.getCollection(e),this.urlFn=function(t){return e.connectionURL("long_polling",t)}}return t.prototype.open=function(t,e){var n=this;this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new Ue(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null}),Math.floor(3e4)),function(t){if(Object(s.w)()||"complete"===document.readyState)t();else{var e=!1,n=function n(){document.body?e||(e=!0,t()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((function(){if(!n.isClosed_){n.scriptTagHolder=new qe((function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Object(o.g)(t,5),i=r[0],s=r[1],a=r[2];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,"start"===i)n.id=s,n.password=a;else{if("close"!==i)throw new Error("Unrecognized command received: "+i);s?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(s,(function(){n.onClosed_()}))):n.onClosed_()}}),(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Object(o.g)(t,2),i=r[0],s=r[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,s)}),(function(){n.onClosed_()}),n.urlFn);var t={start:"t"};t.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(t.cb=n.scriptTagHolder.uniqueCallbackIdentifier),t.v="5",n.transportSessionId&&(t.s=n.transportSessionId),n.lastSessionId&&(t.ls=n.lastSessionId),n.applicationId&&(t.p=n.applicationId),"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf("firebaseio.com")&&(t.r="f");var e=n.urlFn(t);n.log_("Connecting via long-poll to "+e),n.scriptTagHolder.addTag(e,(function(){}))}}))},t.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},t.forceAllow=function(){t.forceAllow_=!0},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){return!(Object(s.w)()||!t.forceAllow_&&(t.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))},t.prototype.markConnectionHealthy=function(){},t.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},t.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},t.prototype.send=function(t){var e=Object(s.G)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);for(var n=Object(s.h)(e),r=N(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++},t.prototype.addDisconnectPingFrame=function(t,e){if(!Object(s.w)()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=t,n.pw=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}},t.prototype.incrementIncomingBytes_=function(t){var e=Object(s.G)(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)},t}(),qe=function(){function t(e,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,Object(s.w)())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=v(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();var o="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(o='<script>document.domain="'+document.domain+'";<\/script>');var a="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(a),this.myIFrame.doc.close()}catch(u){w("frame writing exception"),u.stack&&w(u.stack),w(u)}}}return t.createIFrame_=function(){var t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||w("No IE domain setting required")}catch(n){var e=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+e+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t},t.prototype.close=function(){var t=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout((function(){null!==t.myIFrame&&(document.body.removeChild(t.myIFrame),t.myIFrame=null)}),Math.floor(0)));var e=this.onDisconnect;e&&(this.onDisconnect=null,e())},t.prototype.startLongPoll=function(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););},t.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;for(var e=this.urlFn(t),n="",r=0;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+n.length<=1870;){var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return this.addLongPollTag_(e+=n,this.currentSerial),!0}return!1},t.prototype.enqueueSegment=function(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()},t.prototype.addLongPollTag_=function(t,e){var n=this;this.outstandingRequests.add(e);var r=function(){n.outstandingRequests.delete(e),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(t,(function(){clearTimeout(i),r()}))},t.prototype.addTag=function(t,e){var n=this;Object(s.w)()?this.doNodeLongPoll(t,e):setTimeout((function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){var t=r.readyState;t&&"loaded"!==t&&"complete"!==t||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),e())},r.onerror=function(){w("Long-poll script failed to load: "+t),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(i){}}),Math.floor(1))},t}(),He="";function We(t){He=t}var Ge=null;"undefined"!=typeof MozWebSocket?Ge=MozWebSocket:"undefined"!=typeof WebSocket&&(Ge=WebSocket);var Qe=function(){function t(e,n,r,i,o){this.connId=e,this.applicationId=r,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=C(this.connId),this.stats_=Ne.getCollection(n),this.connURL=t.connectionURL_(n,i,o),this.nodeAdmin=n.nodeAdmin}return t.connectionURL_=function(t,e,n){var r={v:"5"};return!Object(s.w)()&&"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf("firebaseio.com")&&(r.r="f"),e&&(r.s=e),n&&(r.ls=n),t.connectionURL("websocket",r)},t.prototype.open=function(t,e){var n=this;this.onDisconnect=e,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,f.set("previous_websocket_failure",!0);try{if(Object(s.w)()){var r={headers:{"User-Agent":"Firebase/5/"+He+"/"+process.platform+"/"+(this.nodeAdmin?"AdminNode":"Node"),"X-Firebase-GMPID":this.applicationId||""}},i=process.env,o=0===this.connURL.indexOf("wss://")?i.HTTPS_PROXY||i.https_proxy:i.HTTP_PROXY||i.http_proxy;o&&(r.proxy={origin:o}),this.mySock=new Ge(this.connURL,[],r)}else this.mySock=new Ge(this.connURL,[],r={headers:{"X-Firebase-GMPID":this.applicationId||""}})}catch(u){this.log_("Error instantiating WebSocket.");var a=u.message||u.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(t){n.handleIncomingFrame(t)},this.mySock.onerror=function(t){n.log_("WebSocket error.  Closing connection.");var e=t.message||t.data;e&&n.log_(e),n.onClosed_()}},t.prototype.start=function(){},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){var e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==Ge&&!t.forceDisallow_},t.previouslyFailed=function(){return f.isInMemoryStorage||!0===f.get("previous_websocket_failure")},t.prototype.markConnectionHealthy=function(){f.remove("previous_websocket_failure")},t.prototype.appendFrame_=function(t){if(this.frames.push(t),this.frames.length===this.totalFrames){var e=this.frames.join("");this.frames=null;var n=Object(s.A)(e);this.onMessage(n)}},t.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},t.prototype.extractFrameCount_=function(t){if(Object(s.e)(null===this.frames,"We already have a frame buffer"),t.length<=6){var e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t},t.prototype.handleIncomingFrame=function(t){if(null!==this.mySock){var e=t.data;if(this.bytesReceived+=e.length,this.stats_.incrementCounter("bytes_received",e.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(e);else{var n=this.extractFrameCount_(e);null!==n&&this.appendFrame_(n)}}},t.prototype.send=function(t){this.resetKeepAlive();var e=Object(s.G)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);var n=N(e,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},t.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},t.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},t.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()}),Math.floor(45e3))},t.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(e){this.log_("Exception thrown from WebSocket.send():",e.message||e.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4,t}(),Ke=function(){function t(t){this.initTransports_(t)}return Object.defineProperty(t,"ALL_TRANSPORTS",{get:function(){return[Be,Qe]},enumerable:!1,configurable:!0}),t.prototype.initTransports_=function(e){var n,r,i=Qe&&Qe.isAvailable(),s=i&&!Qe.previouslyFailed();if(e.webSocketOnly&&(i||S("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),s=!0),s)this.transports_=[Qe];else{var a=this.transports_=[];try{for(var u=Object(o.k)(t.ALL_TRANSPORTS),c=u.next();!c.done;c=u.next()){var l=c.value;l&&l.isAvailable()&&a.push(l)}}catch(h){n={error:h}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}},t.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},t.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},t}(),Ye=function(){function t(t,e,n,r,i,o,s,a){this.id=t,this.repoInfo_=e,this.applicationId_=n,this.onMessage_=r,this.onReady_=i,this.onDisconnect_=o,this.onKill_=s,this.lastSessionId=a,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=C("c:"+this.id+":"),this.transportManager_=new Ke(e),this.log_("Connection created"),this.start_()}return t.prototype.start_=function(){var t=this,e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,void 0,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){t.conn_&&t.conn_.open(n,r)}),Math.floor(0));var i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Y((function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&t.conn_.bytesReceived>102400?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&t.conn_.bytesSent>10240?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))}),Math.floor(i)))},t.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},t.prototype.disconnReceiver_=function(t){var e=this;return function(n){t===e.conn_?e.onConnectionLost_(n):t===e.secondaryConn_?(e.log_("Secondary connection lost."),e.onSecondaryConnectionLost_()):e.log_("closing an old connection")}},t.prototype.connReceiver_=function(t){var e=this;return function(n){2!==e.state_&&(t===e.rx_?e.onPrimaryMessageReceived_(n):t===e.secondaryConn_?e.onSecondaryMessageReceived_(n):e.log_("message on old connection"))}},t.prototype.sendRequest=function(t){this.sendData_({t:"d",d:t})},t.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},t.prototype.onSecondaryControl_=function(t){if("t"in t){var e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},t.prototype.onSecondaryMessageReceived_=function(t){var e=P("t",t),n=P("d",t);if("c"===e)this.onSecondaryControl_(n);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(n)}},t.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},t.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},t.prototype.onPrimaryMessageReceived_=function(t){var e=P("t",t),n=P("d",t);"c"===e?this.onControl_(n):"d"===e&&this.onDataMessage_(n)},t.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},t.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},t.prototype.onControl_=function(t){var e=P("t",t);if("d"in t){var n=t.d;if("h"===e)this.onHandshake_(n);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(n):"r"===e?this.onReset_(n):"e"===e?k("Server Error: "+n):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):k("Unknown control packet command: "+e)}},t.prototype.onHandshake_=function(t){var e=t.ts,n=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.updateHost(r),0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==n&&S("Protocol version mismatch detected"),this.tryStartUpgrade_())},t.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},t.prototype.startUpgrade_=function(t){var e=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Y((function(){e.secondaryConn_&&(e.log_("Timed out trying to upgrade."),e.secondaryConn_.close())}),Math.floor(6e4))},t.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.updateHost(t),1===this.state_?this.close():(this.closeConnections_(),this.start_())},t.prototype.onConnectionEstablished_=function(t,e){var n=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Y((function(){n.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))},t.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},t.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()},t.prototype.onConnectionLost_=function(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(f.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},t.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},t.prototype.sendData_=function(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)},t.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},t.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},t}(),$e=function(){function t(){}return t.prototype.put=function(t,e,n,r){},t.prototype.merge=function(t,e,n,r){},t.prototype.refreshAuthToken=function(t){},t.prototype.onDisconnectPut=function(t,e,n){},t.prototype.onDisconnectMerge=function(t,e,n){},t.prototype.onDisconnectCancel=function(t,e){},t.prototype.reportStats=function(t){},t}(),Xe=function(t){function e(n,r,i,o,a,u,c){var l=t.call(this)||this;if(l.repoInfo_=n,l.applicationId_=r,l.onDataUpdate_=i,l.onConnectStatus_=o,l.onServerInfoUpdate_=a,l.authTokenProvider_=u,l.authOverride_=c,l.id=e.nextPersistentConnectionId_++,l.log_=C("p:"+l.id+":"),l.interruptReasons_={},l.listens=new Map,l.outstandingPuts_=[],l.outstandingPutCount_=0,l.onDisconnectRequestQueue_=[],l.connected_=!1,l.reconnectDelay_=1e3,l.maxReconnectDelay_=3e5,l.securityDebugCallback_=null,l.lastSessionId=null,l.establishConnectionTimer_=null,l.visible_=!1,l.requestCBHash_={},l.requestNumber_=0,l.realtime_=null,l.authToken_=null,l.forceTokenRefresh_=!1,l.invalidAuthTokenCount_=0,l.firstConnection_=!0,l.lastConnectionAttemptTime_=null,l.lastConnectionEstablishedTime_=null,c&&!Object(s.w)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return l.scheduleConnect_(0),Me.getInstance().on("visible",l.onVisible_,l),-1===n.host.indexOf("fblocal")&&Ve.getInstance().on("online",l.onOnline_,l),l}return Object(o.d)(e,t),e.prototype.sendRequest=function(t,e,n){var r=++this.requestNumber_,i={r:r,a:t,b:e};this.log_(Object(s.G)(i)),Object(s.e)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)},e.prototype.listen=function(t,e,n,r){var i=t.queryIdentifier(),o=t.path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),Object(s.e)(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"listen() called for non-default but complete query"),Object(s.e)(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");var a={onComplete:r,hashFn:e,query:t,tag:n};this.listens.get(o).set(i,a),this.connected_&&this.sendListen_(a)},e.prototype.sendListen_=function(t){var n=this,r=t.query,i=r.path.toString(),o=r.queryIdentifier();this.log_("Listen on "+i+" for "+o);var s={p:i};t.tag&&(s.q=r.queryObject(),s.t=t.tag),s.h=t.hashFn(),this.sendRequest("q",s,(function(s){var a=s.d,u=s.s;e.warnOnListenWarnings_(a,r),(n.listens.get(i)&&n.listens.get(i).get(o))===t&&(n.log_("listen response",s),"ok"!==u&&n.removeListen_(i,o),t.onComplete&&t.onComplete(u,a))}))},e.warnOnListenWarnings_=function(t,e){if(t&&"object"==typeof t&&Object(s.i)(t,"w")){var n=Object(s.D)(t,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+e.getQueryParams().getIndex().toString()+'"',i=e.path.toString();S("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+r+" at "+i+" to your security rules for better performance.")}}},e.prototype.refreshAuthToken=function(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(t)},e.prototype.reduceReconnectDelayIfAdminCredential_=function(t){(t&&40===t.length||Object(s.o)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},e.prototype.tryAuth=function(){var t=this;if(this.connected_&&this.authToken_){var e=this.authToken_,n=Object(s.z)(e)?"auth":"gauth",r={cred:e};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,(function(n){var r=n.s,i=n.d||"error";t.authToken_===e&&("ok"===r?t.invalidAuthTokenCount_=0:t.onAuthRevoked_(r,i))}))}},e.prototype.unlisten=function(t,e){var n=t.path.toString(),r=t.queryIdentifier();this.log_("Unlisten called for "+n+" "+r),Object(s.e)(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,t.queryObject(),e)},e.prototype.sendUnlisten_=function(t,e,n,r){this.log_("Unlisten on "+t+" for "+e);var i={p:t};r&&(i.q=n,i.t=r),this.sendRequest("n",i)},e.prototype.onDisconnectPut=function(t,e,n){this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})},e.prototype.onDisconnectMerge=function(t,e,n){this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})},e.prototype.onDisconnectCancel=function(t,e){this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})},e.prototype.sendOnDisconnect_=function(t,e,n,r){var i={p:e,d:n};this.log_("onDisconnect "+t,i),this.sendRequest(t,i,(function(t){r&&setTimeout((function(){r(t.s,t.d)}),Math.floor(0))}))},e.prototype.put=function(t,e,n,r){this.putInternal("p",t,e,n,r)},e.prototype.merge=function(t,e,n,r){this.putInternal("m",t,e,n,r)},e.prototype.putInternal=function(t,e,n,r,i){var o={p:e,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:t,request:o,onComplete:r}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+e)},e.prototype.sendPut_=function(t){var e=this,n=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,i=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(n,r,(function(r){e.log_(n+" response",r),delete e.outstandingPuts_[t],e.outstandingPutCount_--,0===e.outstandingPutCount_&&(e.outstandingPuts_=[]),i&&i(r.s,r.d)}))},e.prototype.reportStats=function(t){var e=this;if(this.connected_){var n={c:t};this.log_("reportStats",n),this.sendRequest("s",n,(function(t){"ok"!==t.s&&e.log_("reportStats","Error sending stats: "+t.d)}))}},e.prototype.onDataMessage_=function(t){if("r"in t){this.log_("from server: "+Object(s.G)(t));var e=t.r,n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}},e.prototype.onDataPush_=function(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e.p,e.d,!1,e.t):"m"===t?this.onDataUpdate_(e.p,e.d,!0,e.t):"c"===t?this.onListenRevoked_(e.p,e.q):"ac"===t?this.onAuthRevoked_(e.s,e.d):"sd"===t?this.onSecurityDebugPacket_(e):k("Unrecognized action received from server: "+Object(s.G)(t)+"\nAre you using the latest client?")},e.prototype.onReady_=function(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},e.prototype.scheduleConnect_=function(t){var e=this;Object(s.e)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){e.establishConnectionTimer_=null,e.establishConnection_()}),Math.floor(t))},e.prototype.onVisible_=function(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)),this.visible_=t},e.prototype.onOnline_=function(t){t?(this.log_("Browser went online."),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},e.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=1e3),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());var t=(new Date).getTime()-this.lastConnectionAttemptTime_,e=Math.max(0,this.reconnectDelay_-t);e=Math.random()*e,this.log_("Trying to reconnect in "+e+"ms"),this.scheduleConnect_(e),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},e.prototype.establishConnection_=function(){var t=this;if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;var n=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),o=this.id+":"+e.nextConnectionId_++,a=this,u=this.lastSessionId,c=!1,l=null,h=function(){l?l.close():(c=!0,i())};this.realtime_={close:h,sendRequest:function(t){Object(s.e)(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(t)}};var f=this.forceTokenRefresh_;this.forceTokenRefresh_=!1,this.authTokenProvider_.getToken(f).then((function(t){c?w("getToken() completed but was canceled"):(w("getToken() completed. Creating connection."),a.authToken_=t&&t.accessToken,l=new Ye(o,a.repoInfo_,a.applicationId_,n,r,i,(function(t){S(t+" ("+a.repoInfo_.toString()+")"),a.interrupt("server_kill")}),u))})).then(null,(function(e){a.log_("Failed to get token: "+e),c||(t.repoInfo_.nodeAdmin&&S(e),h())}))}},e.prototype.interrupt=function(t){w("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},e.prototype.resume=function(t){w("Resuming connection for reason: "+t),delete this.interruptReasons_[t],Object(s.s)(this.interruptReasons_)&&(this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0))},e.prototype.handleTimestamp_=function(t){var e=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:e})},e.prototype.cancelSentTransactions_=function(){for(var t=0;t<this.outstandingPuts_.length;t++){var e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},e.prototype.onListenRevoked_=function(t,e){var n;n=e?e.map((function(t){return R(t)})).join("$"):"default";var r=this.removeListen_(t,n);r&&r.onComplete&&r.onComplete("permission_denied")},e.prototype.removeListen_=function(t,e){var n,r=new $(t).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(e),i.delete(e),0===i.size&&this.listens.delete(r)}else n=void 0;return n},e.prototype.onAuthRevoked_=function(t,e){w("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},e.prototype.onSecurityDebugPacket_=function(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))},e.prototype.restoreState_=function(){var t,e,n,r;this.tryAuth();try{for(var i=Object(o.k)(this.listens.values()),s=i.next();!s.done;s=i.next()){var a=s.value;try{for(var u=(n=void 0,Object(o.k)(a.values())),c=u.next();!c.done;c=u.next())this.sendListen_(c.value)}catch(f){n={error:f}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(d){t={error:d}}finally{try{s&&!s.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}for(var l=0;l<this.outstandingPuts_.length;l++)this.outstandingPuts_[l]&&this.sendPut_(l);for(;this.onDisconnectRequestQueue_.length;){var h=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(h.action,h.pathString,h.data,h.onComplete)}},e.prototype.sendConnectStats_=function(){var t={},e="js";Object(s.w)()&&(e=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+e+"."+He.replace(/\./g,"-")]=1,Object(s.u)()?t["framework.cordova"]=1:Object(s.x)()&&(t["framework.reactnative"]=1),this.reportStats(t)},e.prototype.shouldReconnect_=function(){var t=Ve.getInstance().currentlyOnline();return Object(s.s)(this.interruptReasons_)&&t},e.nextPersistentConnectionId_=0,e.nextConnectionId_=0,e}($e),Ze=function(t){function e(e,n,r){var i=t.call(this)||this;return i.repoInfo_=e,i.onDataUpdate_=n,i.authTokenProvider_=r,i.log_=C("p:rest:"),i.listens_={},i}return Object(o.d)(e,t),e.prototype.reportStats=function(t){throw new Error("Method not implemented.")},e.getListenId_=function(t,e){return void 0!==e?"tag$"+e:(Object(s.e)(t.getQueryParams().isDefault(),"should have a tag if it's not a default query."),t.path.toString())},e.prototype.listen=function(t,n,r,i){var o=this,a=t.path.toString();this.log_("Listen called for "+a+" "+t.queryIdentifier());var u=e.getListenId_(t,r),c={};this.listens_[u]=c;var l=t.getQueryParams().toRestQueryStringParameters();this.restRequest_(a+".json",l,(function(t,e){var n=e;404===t&&(n=null,t=null),null===t&&o.onDataUpdate_(a,n,!1,r),Object(s.D)(o.listens_,u)===c&&i(t?401===t?"permission_denied":"rest_error:"+t:"ok",null)}))},e.prototype.unlisten=function(t,n){var r=e.getListenId_(t,n);delete this.listens_[r]},e.prototype.refreshAuthToken=function(t){},e.prototype.restRequest_=function(t,e,n){var r=this;void 0===e&&(e={}),e.format="export",this.authTokenProvider_.getToken(!1).then((function(i){var o=i&&i.accessToken;o&&(e.auth=o);var a=(r.repoInfo_.secure?"https://":"http://")+r.repoInfo_.host+t+"?ns="+r.repoInfo_.namespace+Object(s.C)(e);r.log_("Sending REST request for "+a);var u=new XMLHttpRequest;u.onreadystatechange=function(){if(n&&4===u.readyState){r.log_("REST Response for "+a+" received. status:",u.status,"response:",u.responseText);var t=null;if(u.status>=200&&u.status<300){try{t=Object(s.A)(u.responseText)}catch(e){S("Failed to parse JSON response for "+a+": "+u.responseText)}n(null,t)}else 401!==u.status&&404!==u.status&&S("Got unsuccessful REST response for "+a+" Status: "+u.status),n(u.status);n=null}},u.open("GET",a,!0),u.send()}))},e}($e),Je=function(){function t(t,e,n,r){this.repoInfo_=t,this.forceRestClient_=e,this.app=n,this.authTokenProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new je,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=new ae,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return t.prototype.start=function(){var t=this;if(this.stats_=Ne.getCollection(this.repoInfo_),this.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)this.server_=new Ze(this.repoInfo_,this.onDataUpdate_.bind(this),this.authTokenProvider_),setTimeout(this.onConnectStatus_.bind(this,!0),0);else{var e=this.app.options.databaseAuthVariableOverride;if(null!=e){if("object"!=typeof e)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Object(s.G)(e)}catch(n){throw new Error("Invalid authOverride provided: "+n)}}this.persistentConnection_=new Xe(this.repoInfo_,this.app.options.appId,this.onDataUpdate_.bind(this),this.onConnectStatus_.bind(this),this.onServerInfoUpdate_.bind(this),this.authTokenProvider_,e),this.server_=this.persistentConnection_}this.authTokenProvider_.addTokenChangeListener((function(e){t.server_.refreshAuthToken(e)})),this.statsReporter_=Ne.getOrCreateReporter(this.repoInfo_,(function(){return new ze(t.stats_,t.server_)})),this.transactionsInit_(),this.infoData_=new Pe,this.infoSyncTree_=new Ae({startListening:function(e,n,r,i){var o=[],s=t.infoData_.getNode(e.path);return s.isEmpty()||(o=t.infoSyncTree_.applyServerOverwrite(e.path,s),setTimeout((function(){i("ok")}),0)),o},stopListening:function(){}}),this.updateInfo_("connected",!1),this.serverSyncTree_=new Ae({startListening:function(e,n,r,i){return t.server_.listen(e,r,n,(function(n,r){var o=i(n,r);t.eventQueue_.raiseEventsForChangedPath(e.path,o)})),[]},stopListening:function(e,n){t.server_.unlisten(e,n)}})},t.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},t.prototype.name=function(){return this.repoInfo_.namespace},t.prototype.serverTime=function(){var t=this.infoData_.getNode(new $(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t},t.prototype.generateServerValues=function(){return(t=(t={timestamp:this.serverTime()})||{}).timestamp=t.timestamp||(new Date).getTime(),t;var t},t.prototype.onDataUpdate_=function(t,e,n,r){this.dataUpdateCount++;var i=new $(t);e=this.interceptServerDataCallback_?this.interceptServerDataCallback_(t,e):e;var o=[];if(r)if(n){var a=Object(s.B)(e,(function(t){return Ut(t)}));o=this.serverSyncTree_.applyTaggedQueryMerge(i,a,r)}else{var u=Ut(e);o=this.serverSyncTree_.applyTaggedQueryOverwrite(i,u,r)}else if(n){var c=Object(s.B)(e,(function(t){return Ut(t)}));o=this.serverSyncTree_.applyServerMerge(i,c)}else{var l=Ut(e);o=this.serverSyncTree_.applyServerOverwrite(i,l)}var h=i;o.length>0&&(h=this.rerunTransactions_(i)),this.eventQueue_.raiseEventsForChangedPath(h,o)},t.prototype.interceptServerData_=function(t){this.interceptServerDataCallback_=t},t.prototype.onConnectStatus_=function(t){this.updateInfo_("connected",t),!1===t&&this.runOnDisconnectEvents_()},t.prototype.onServerInfoUpdate_=function(t){var e=this;D(t,(function(t,n){e.updateInfo_(t,n)}))},t.prototype.updateInfo_=function(t,e){var n=new $("/.info/"+t),r=Ut(e);this.infoData_.updateSnapshot(n,r);var i=this.infoSyncTree_.applyServerOverwrite(n,r);this.eventQueue_.raiseEventsForChangedPath(n,i)},t.prototype.getNextWriteId_=function(){return this.nextWriteId_++},t.prototype.setWithPriority=function(t,e,n,r){var i=this;this.log_("set",{path:t.toString(),value:e,priority:n});var o=this.generateServerValues(),s=Ut(e,n),a=this.serverSyncTree_.calcCompleteEventCache(t),u=re(s,a,o),c=this.getNextWriteId_(),l=this.serverSyncTree_.applyUserOverwrite(t,u,c,!0);this.eventQueue_.queueEvents(l),this.server_.put(t.toString(),s.val(!0),(function(e,n){var o="ok"===e;o||S("set at "+t+" failed: "+e);var s=i.serverSyncTree_.ackUserWrite(c,!o);i.eventQueue_.raiseEventsForChangedPath(t,s),i.callOnCompleteCallback(r,e,n)}));var h=this.abortTransactions_(t);this.rerunTransactions_(h),this.eventQueue_.raiseEventsForChangedPath(h,[])},t.prototype.update=function(t,e,n){var r=this;this.log_("update",{path:t.toString(),value:e});var i=!0,o=this.generateServerValues(),s={};if(D(e,(function(e,n){i=!1,s[e]=ne(t.child(e),Ut(n),r.serverSyncTree_,o)})),i)w("update() called with empty data.  Don't do anything."),this.callOnCompleteCallback(n,"ok");else{var a=this.getNextWriteId_(),u=this.serverSyncTree_.applyUserMerge(t,s,a);this.eventQueue_.queueEvents(u),this.server_.merge(t.toString(),e,(function(e,i){var o="ok"===e;o||S("update at "+t+" failed: "+e);var s=r.serverSyncTree_.ackUserWrite(a,!o),u=s.length>0?r.rerunTransactions_(t):t;r.eventQueue_.raiseEventsForChangedPath(u,s),r.callOnCompleteCallback(n,e,i)})),D(e,(function(e){var n=r.abortTransactions_(t.child(e));r.rerunTransactions_(n)})),this.eventQueue_.raiseEventsForChangedPath(t,[])}},t.prototype.runOnDisconnectEvents_=function(){var t=this;this.log_("onDisconnectEvents");var e=this.generateServerValues(),n=new ae;this.onDisconnect_.forEachTree($.Empty,(function(r,i){var o=ne(r,i,t.serverSyncTree_,e);n.remember(r,o)}));var r=[];n.forEachTree($.Empty,(function(e,n){r=r.concat(t.serverSyncTree_.applyServerOverwrite(e,n));var i=t.abortTransactions_(e);t.rerunTransactions_(i)})),this.onDisconnect_=new ae,this.eventQueue_.raiseEventsForChangedPath($.Empty,r)},t.prototype.onDisconnectCancel=function(t,e){var n=this;this.server_.onDisconnectCancel(t.toString(),(function(r,i){"ok"===r&&n.onDisconnect_.forget(t),n.callOnCompleteCallback(e,r,i)}))},t.prototype.onDisconnectSet=function(t,e,n){var r=this,i=Ut(e);this.server_.onDisconnectPut(t.toString(),i.val(!0),(function(e,o){"ok"===e&&r.onDisconnect_.remember(t,i),r.callOnCompleteCallback(n,e,o)}))},t.prototype.onDisconnectSetWithPriority=function(t,e,n,r){var i=this,o=Ut(e,n);this.server_.onDisconnectPut(t.toString(),o.val(!0),(function(e,n){"ok"===e&&i.onDisconnect_.remember(t,o),i.callOnCompleteCallback(r,e,n)}))},t.prototype.onDisconnectUpdate=function(t,e,n){var r=this;if(Object(s.s)(e))return w("onDisconnect().update() called with empty data.  Don't do anything."),void this.callOnCompleteCallback(n,"ok");this.server_.onDisconnectMerge(t.toString(),e,(function(i,o){"ok"===i&&D(e,(function(e,n){var i=Ut(n);r.onDisconnect_.remember(t.child(e),i)})),r.callOnCompleteCallback(n,i,o)}))},t.prototype.addEventCallbackForQuery=function(t,e){var n;n=".info"===t.path.getFront()?this.infoSyncTree_.addEventRegistration(t,e):this.serverSyncTree_.addEventRegistration(t,e),this.eventQueue_.raiseEventsAtPath(t.path,n)},t.prototype.removeEventCallbackForQuery=function(t,e){var n;n=".info"===t.path.getFront()?this.infoSyncTree_.removeEventRegistration(t,e):this.serverSyncTree_.removeEventRegistration(t,e),this.eventQueue_.raiseEventsAtPath(t.path,n)},t.prototype.interrupt=function(){this.persistentConnection_&&this.persistentConnection_.interrupt("repo_interrupt")},t.prototype.resume=function(){this.persistentConnection_&&this.persistentConnection_.resume("repo_interrupt")},t.prototype.stats=function(t){if(void 0===t&&(t=!1),"undefined"!=typeof console){var e;t?(this.statsListener_||(this.statsListener_=new De(this.stats_)),e=this.statsListener_.get()):e=this.stats_.get();var n=Object.keys(e).reduce((function(t,e){return Math.max(e.length,t)}),0);D(e,(function(t,e){for(var r=t,i=t.length;i<n+2;i++)r+=" ";console.log(r+e)}))}},t.prototype.statsIncrementCounter=function(t){this.stats_.incrementCounter(t),this.statsReporter_.includeStat(t)},t.prototype.log_=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="";this.persistentConnection_&&(n=this.persistentConnection_.id+":"),w.apply(void 0,Object(o.i)([n],t))},t.prototype.callOnCompleteCallback=function(t,e,n){t&&K((function(){if("ok"===e)t(null);else{var r=(e||"error").toUpperCase(),i=r;n&&(i+=": "+n);var o=new Error(i);o.code=r,t(o)}}))},Object.defineProperty(t.prototype,"database",{get:function(){return this.__database||(this.__database=new fn(this))},enumerable:!1,configurable:!0}),t}(),tn=function(){function t(e){this.indexedFilter_=new me(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e)}return t.prototype.getStartPost=function(){return this.startPost_},t.prototype.getEndPost=function(){return this.endPost_},t.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},t.prototype.updateChild=function(t,e,n,r,i,o){return this.matches(new bt(e,n))||(n=Mt.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,r,i,o)},t.prototype.updateFullNode=function(t,e,n){e.isLeafNode()&&(e=Mt.EMPTY_NODE);var r=e.withIndex(this.index_);r=r.updatePriority(Mt.EMPTY_NODE);var i=this;return e.forEachChild(Ot,(function(t,e){i.matches(new bt(t,e))||(r=r.updateImmediateChild(t,Mt.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.indexedFilter_},t.prototype.getIndex=function(){return this.index_},t.getStartPost_=function(t){if(t.hasStart()){var e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()},t.getEndPost_=function(t){if(t.hasEnd()){var e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()},t}(),en=function(){function t(t){this.rangedFilter_=new tn(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return t.prototype.updateChild=function(t,e,n,r,i,o){return this.rangedFilter_.matches(new bt(e,n))||(n=Mt.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,r,i,o):this.fullLimitUpdateChild_(t,e,n,i,o)},t.prototype.updateFullNode=function(t,e,n){var r;if(e.isLeafNode()||e.isEmpty())r=Mt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){r=Mt.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var s=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),s)<=0:this.index_.compare(s,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(s.name,s.node),o++}}else{r=(r=e.withIndex(this.index_)).updatePriority(Mt.EMPTY_NODE);var a=void 0,u=void 0,c=void 0;if(i=void 0,this.reverse_){i=r.getReverseIterator(this.index_),a=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();var l=this.index_.getCompare();c=function(t,e){return l(e,t)}}else i=r.getIterator(this.index_),a=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),c=this.index_.getCompare();o=0;for(var h=!1;i.hasNext();)s=i.getNext(),!h&&c(a,s)<=0&&(h=!0),h&&o<this.limit_&&c(s,u)<=0?o++:r=r.updateImmediateChild(s.name,Mt.EMPTY_NODE)}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},t.prototype.getIndex=function(){return this.index_},t.prototype.fullLimitUpdateChild_=function(t,e,n,r,i){var o;if(this.reverse_){var a=this.index_.getCompare();o=function(t,e){return a(e,t)}}else o=this.index_.getCompare();var u=t;Object(s.e)(u.numChildren()===this.limit_,"");var c=new bt(e,n),l=this.reverse_?u.getFirstChild(this.index_):u.getLastChild(this.index_),h=this.rangedFilter_.matches(c);if(u.hasChild(e)){for(var f=u.getImmediateChild(e),d=r.getChildAfterChild(this.index_,l,this.reverse_);null!=d&&(d.name===e||u.hasChild(d.name));)d=r.getChildAfterChild(this.index_,d,this.reverse_);var p=null==d?1:o(d,c);if(h&&!n.isEmpty()&&p>=0)return null!=i&&i.trackChildChange(ge.childChangedChange(e,n,f)),u.updateImmediateChild(e,n);null!=i&&i.trackChildChange(ge.childRemovedChange(e,f));var v=u.updateImmediateChild(e,Mt.EMPTY_NODE);return null!=d&&this.rangedFilter_.matches(d)?(null!=i&&i.trackChildChange(ge.childAddedChange(d.name,d.node)),v.updateImmediateChild(d.name,d.node)):v}return n.isEmpty()?t:h&&o(l,c)>=0?(null!=i&&(i.trackChildChange(ge.childRemovedChange(l.name,l.node)),i.trackChildChange(ge.childAddedChange(e,n))),u.updateImmediateChild(e,n).updateImmediateChild(l.name,Mt.EMPTY_NODE)):t},t}(),nn=function(){function t(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Ot}return t.prototype.hasStart=function(){return this.startSet_},t.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:this.viewFrom_===t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT},t.prototype.getIndexStartValue=function(){return Object(s.e)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},t.prototype.getIndexStartName=function(){return Object(s.e)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:O},t.prototype.hasEnd=function(){return this.endSet_},t.prototype.getIndexEndValue=function(){return Object(s.e)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},t.prototype.getIndexEndName=function(){return Object(s.e)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:I},t.prototype.hasLimit=function(){return this.limitSet_},t.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},t.prototype.getLimit=function(){return Object(s.e)(this.limitSet_,"Only valid if limit has been set"),this.limit_},t.prototype.getIndex=function(){return this.index_},t.prototype.copy_=function(){var e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e},t.prototype.limit=function(t){var e=this.copy_();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="",e},t.prototype.limitToFirst=function(e){var n=this.copy_();return n.limitSet_=!0,n.limit_=e,n.viewFrom_=t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT,n},t.prototype.limitToLast=function(e){var n=this.copy_();return n.limitSet_=!0,n.limit_=e,n.viewFrom_=t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_RIGHT,n},t.prototype.startAt=function(t,e){var n=this.copy_();return n.startSet_=!0,void 0===t&&(t=null),n.indexStartValue_=t,null!=e?(n.startNameSet_=!0,n.indexStartName_=e):(n.startNameSet_=!1,n.indexStartName_=""),n},t.prototype.endAt=function(t,e){var n=this.copy_();return n.endSet_=!0,void 0===t&&(t=null),n.indexEndValue_=t,void 0!==e?(n.endNameSet_=!0,n.indexEndName_=e):(n.endNameSet_=!1,n.indexEndName_=""),n},t.prototype.orderBy=function(t){var e=this.copy_();return e.index_=t,e},t.prototype.getQueryObject=function(){var e=t.WIRE_PROTOCOL_CONSTANTS_,n={};if(this.startSet_&&(n[e.INDEX_START_VALUE]=this.indexStartValue_,this.startNameSet_&&(n[e.INDEX_START_NAME]=this.indexStartName_)),this.endSet_&&(n[e.INDEX_END_VALUE]=this.indexEndValue_,this.endNameSet_&&(n[e.INDEX_END_NAME]=this.indexEndName_)),this.limitSet_){n[e.LIMIT]=this.limit_;var r=this.viewFrom_;""===r&&(r=this.isViewFromLeft()?e.VIEW_FROM_LEFT:e.VIEW_FROM_RIGHT),n[e.VIEW_FROM]=r}return this.index_!==Ot&&(n[e.INDEX]=this.index_.toString()),n},t.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},t.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===Ot},t.prototype.getNodeFilter=function(){return this.loadsAllData()?new me(this.getIndex()):this.hasLimit()?new en(this):new tn(this)},t.prototype.toRestQueryStringParameters=function(){var e,n=t.REST_QUERY_CONSTANTS_,r={};return this.isDefault()||(this.index_===Ot?e=n.PRIORITY_INDEX:this.index_===qt?e=n.VALUE_INDEX:this.index_===kt?e=n.KEY_INDEX:(Object(s.e)(this.index_ instanceof Ht,"Unrecognized index type!"),e=this.index_.toString()),r[n.ORDER_BY]=Object(s.G)(e),this.startSet_&&(r[n.START_AT]=Object(s.G)(this.indexStartValue_),this.startNameSet_&&(r[n.START_AT]+=","+Object(s.G)(this.indexStartName_))),this.endSet_&&(r[n.END_AT]=Object(s.G)(this.indexEndValue_),this.endNameSet_&&(r[n.END_AT]+=","+Object(s.G)(this.indexEndName_))),this.limitSet_&&(this.isViewFromLeft()?r[n.LIMIT_TO_FIRST]=this.limit_:r[n.LIMIT_TO_LAST]=this.limit_)),r},t.WIRE_PROTOCOL_CONSTANTS_={INDEX_START_VALUE:"sp",INDEX_START_NAME:"sn",INDEX_END_VALUE:"ep",INDEX_END_NAME:"en",LIMIT:"l",VIEW_FROM:"vf",VIEW_FROM_LEFT:"l",VIEW_FROM_RIGHT:"r",INDEX:"i"},t.REST_QUERY_CONSTANTS_={ORDER_BY:"orderBy",PRIORITY_INDEX:"$priority",VALUE_INDEX:"$value",KEY_INDEX:"$key",START_AT:"startAt",END_AT:"endAt",LIMIT_TO_FIRST:"limitToFirst",LIMIT_TO_LAST:"limitToLast"},t.DEFAULT=new t,t}(),rn=function(t){function e(e,n){if(!(e instanceof Je))throw new Error("new Reference() no longer supported - use app.database().");return t.call(this,e,n,nn.DEFAULT,!1)||this}return Object(o.d)(e,t),e.prototype.getKey=function(){return Object(s.H)("Reference.key",0,0,arguments.length),this.path.isEmpty()?null:this.path.getBack()},e.prototype.child=function(t){return Object(s.H)("Reference.child",1,1,arguments.length),"number"==typeof t?t=String(t):t instanceof $||(null===this.path.getFront()?dt("Reference.child",1,t,!1):ft("Reference.child",1,t,!1)),new e(this.repo,this.path.child(t))},e.prototype.getParent=function(){Object(s.H)("Reference.parent",0,0,arguments.length);var t=this.path.parent();return null===t?null:new e(this.repo,t)},e.prototype.getRoot=function(){Object(s.H)("Reference.root",0,0,arguments.length);for(var t=this;null!==t.getParent();)t=t.getParent();return t},e.prototype.databaseProp=function(){return this.repo.database},e.prototype.set=function(t,e){Object(s.H)("Reference.set",1,2,arguments.length),pt("Reference.set",this.path),st("Reference.set",1,t,this.path,!1),Object(s.I)("Reference.set",2,e,!0);var n=new s.a;return this.repo.setWithPriority(this.path,t,null,n.wrapCallback(e)),n.promise},e.prototype.update=function(t,e){if(Object(s.H)("Reference.update",1,2,arguments.length),pt("Reference.update",this.path),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,S("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}ut("Reference.update",1,t,this.path,!1),Object(s.I)("Reference.update",2,e,!0);var i=new s.a;return this.repo.update(this.path,t,i.wrapCallback(e)),i.promise},e.prototype.setWithPriority=function(t,e,n){if(Object(s.H)("Reference.setWithPriority",2,3,arguments.length),pt("Reference.setWithPriority",this.path),st("Reference.setWithPriority",1,t,this.path,!1),ct("Reference.setWithPriority",2,e,!1),Object(s.I)("Reference.setWithPriority",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.setWithPriority failed: "+this.getKey()+" is a read-only object.";var r=new s.a;return this.repo.setWithPriority(this.path,t,e,r.wrapCallback(n)),r.promise},e.prototype.remove=function(t){return Object(s.H)("Reference.remove",0,1,arguments.length),pt("Reference.remove",this.path),Object(s.I)("Reference.remove",1,t,!0),this.set(null,t)},e.prototype.transaction=function(t,e,n){if(Object(s.H)("Reference.transaction",1,3,arguments.length),pt("Reference.transaction",this.path),Object(s.I)("Reference.transaction",1,t,!1),Object(s.I)("Reference.transaction",2,e,!0),yt("Reference.transaction",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.transaction failed: "+this.getKey()+" is a read-only object.";void 0===n&&(n=!0);var r=new s.a;"function"==typeof e&&r.promise.catch((function(){}));var i=function(t,n,i){t?r.reject(t):r.resolve(new mt(n,i)),"function"==typeof e&&e(t,n,i)};return this.repo.startTransaction(this.path,t,i,n),r.promise},e.prototype.setPriority=function(t,e){Object(s.H)("Reference.setPriority",1,2,arguments.length),pt("Reference.setPriority",this.path),ct("Reference.setPriority",1,t,!1),Object(s.I)("Reference.setPriority",2,e,!0);var n=new s.a;return this.repo.setWithPriority(this.path.child(".priority"),t,null,n.wrapCallback(e)),n.promise},e.prototype.push=function(t,e){Object(s.H)("Reference.push",0,2,arguments.length),pt("Reference.push",this.path),st("Reference.push",1,t,this.path,!0),Object(s.I)("Reference.push",2,e,!0);var n,r=this.repo.serverTime(),i=_t(r),o=this.child(i),a=this.child(i);return n=null!=t?o.set(t,e).then((function(){return a})):Promise.resolve(a),o.then=n.then.bind(n),o.catch=n.then.bind(n,void 0),"function"==typeof e&&n.catch((function(){})),o},e.prototype.onDisconnect=function(){return pt("Reference.onDisconnect",this.path),new gt(this.repo,this.path)},Object.defineProperty(e.prototype,"database",{get:function(){return this.databaseProp()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),e}($t);$t.__referenceConstructor=rn,Te.__referenceConstructor=rn;var on=function(){this.children={},this.childCount=0,this.value=null},sn=function(){function t(t,e,n){void 0===t&&(t=""),void 0===e&&(e=null),void 0===n&&(n=new on),this.name_=t,this.parent_=e,this.node_=n}return t.prototype.subTree=function(e){for(var n=e instanceof $?e:new $(e),r=this,i=n.getFront();null!==i;)r=new t(i,r,Object(s.D)(r.node_.children,i)||new on),i=(n=n.popFront()).getFront();return r},t.prototype.getValue=function(){return this.node_.value},t.prototype.setValue=function(t){Object(s.e)(void 0!==t,"Cannot set value to undefined"),this.node_.value=t,this.updateParents_()},t.prototype.clear=function(){this.node_.value=null,this.node_.children={},this.node_.childCount=0,this.updateParents_()},t.prototype.hasChildren=function(){return this.node_.childCount>0},t.prototype.isEmpty=function(){return null===this.getValue()&&!this.hasChildren()},t.prototype.forEachChild=function(e){var n=this;D(this.node_.children,(function(r,i){e(new t(r,n,i))}))},t.prototype.forEachDescendant=function(t,e,n){e&&!n&&t(this),this.forEachChild((function(e){e.forEachDescendant(t,!0,n)})),e&&n&&t(this)},t.prototype.forEachAncestor=function(t,e){for(var n=e?this:this.parent();null!==n;){if(t(n))return!0;n=n.parent()}return!1},t.prototype.forEachImmediateDescendantWithValue=function(t){this.forEachChild((function(e){null!==e.getValue()?t(e):e.forEachImmediateDescendantWithValue(t)}))},t.prototype.path=function(){return new $(null===this.parent_?this.name_:this.parent_.path()+"/"+this.name_)},t.prototype.name=function(){return this.name_},t.prototype.parent=function(){return this.parent_},t.prototype.updateParents_=function(){null!==this.parent_&&this.parent_.updateChild_(this.name_,this)},t.prototype.updateChild_=function(t,e){var n=e.isEmpty(),r=Object(s.i)(this.node_.children,t);n&&r?(delete this.node_.children[t],this.node_.childCount--,this.updateParents_()):n||r||(this.node_.children[t]=e.node_,this.node_.childCount++,this.updateParents_())},t}(),an=function(t){return t[t.RUN=0]="RUN",t[t.SENT=1]="SENT",t[t.COMPLETED=2]="COMPLETED",t[t.SENT_NEEDS_ABORT=3]="SENT_NEEDS_ABORT",t[t.NEEDS_ABORT=4]="NEEDS_ABORT",t}({});Je.MAX_TRANSACTION_RETRIES_=25,Je.prototype.transactionsInit_=function(){this.transactionQueueTree_=new sn},Je.prototype.startTransaction=function(t,e,n,r){this.log_("transaction on "+t);var i=function(){},o=new rn(this,t);o.on("value",i);var a={path:t,update:e,onComplete:n,status:null,order:v(),applyLocally:r,retryCount:0,unwatcher:function(){o.off("value",i)},abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},u=this.getLatestState_(t);a.currentInputSnapshot=u;var c=a.update(u.val());if(void 0===c){if(a.unwatcher(),a.currentOutputSnapshotRaw=null,a.currentOutputSnapshotResolved=null,a.onComplete){var l=new Wt(a.currentInputSnapshot,new rn(this,a.path),Ot);a.onComplete(null,!1,l)}}else{at("transaction failed: Data returned ",c,a.path),a.status=an.RUN;var h=this.transactionQueueTree_.subTree(t),f=h.getValue()||[];f.push(a),h.setValue(f);var d=void 0;"object"==typeof c&&null!==c&&Object(s.i)(c,".priority")?(d=Object(s.D)(c,".priority"),Object(s.e)(ot(d),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):d=(this.serverSyncTree_.calcCompleteEventCache(t)||Mt.EMPTY_NODE).getPriority().val(),d=d;var p=this.generateServerValues(),y=Ut(c,d),g=re(y,u,p);a.currentOutputSnapshotRaw=y,a.currentOutputSnapshotResolved=g,a.currentWriteId=this.getNextWriteId_();var m=this.serverSyncTree_.applyUserOverwrite(t,g,a.currentWriteId,a.applyLocally);this.eventQueue_.raiseEventsForChangedPath(t,m),this.sendReadyTransactions_()}},Je.prototype.getLatestState_=function(t,e){return this.serverSyncTree_.calcCompleteEventCache(t,e)||Mt.EMPTY_NODE},Je.prototype.sendReadyTransactions_=function(t){var e=this;if(void 0===t&&(t=this.transactionQueueTree_),t||this.pruneCompletedTransactionsBelowNode_(t),null!==t.getValue()){var n=this.buildTransactionQueue_(t);Object(s.e)(n.length>0,"Sending zero length transaction queue"),n.every((function(t){return t.status===an.RUN}))&&this.sendTransactionQueue_(t.path(),n)}else t.hasChildren()&&t.forEachChild((function(t){e.sendReadyTransactions_(t)}))},Je.prototype.sendTransactionQueue_=function(t,e){for(var n=this,r=e.map((function(t){return t.currentWriteId})),i=this.getLatestState_(t,r),o=i,a=i.hash(),u=0;u<e.length;u++){var c=e[u];Object(s.e)(c.status===an.RUN,"tryToSendTransactionQueue_: items in queue should all be run."),c.status=an.SENT,c.retryCount++;var l=$.relativePath(t,c.path);o=o.updateChild(l,c.currentOutputSnapshotRaw)}var h=o.val(!0),f=t;this.server_.put(f.toString(),h,(function(r){n.log_("transaction put response",{path:f.toString(),status:r});var i=[];if("ok"===r){for(var o=[],s=0;s<e.length;s++){if(e[s].status=an.COMPLETED,i=i.concat(n.serverSyncTree_.ackUserWrite(e[s].currentWriteId)),e[s].onComplete){var a=e[s].currentOutputSnapshotResolved,u=new rn(n,e[s].path),c=new Wt(a,u,Ot);o.push(e[s].onComplete.bind(null,null,!0,c))}e[s].unwatcher()}for(n.pruneCompletedTransactionsBelowNode_(n.transactionQueueTree_.subTree(t)),n.sendReadyTransactions_(),n.eventQueue_.raiseEventsForChangedPath(t,i),s=0;s<o.length;s++)K(o[s])}else{if("datastale"===r)for(s=0;s<e.length;s++)e[s].status=e[s].status===an.SENT_NEEDS_ABORT?an.NEEDS_ABORT:an.RUN;else for(S("transaction at "+f.toString()+" failed: "+r),s=0;s<e.length;s++)e[s].status=an.NEEDS_ABORT,e[s].abortReason=r;n.rerunTransactions_(t)}}),a)},Je.prototype.rerunTransactions_=function(t){var e=this.getAncestorTransactionNode_(t),n=e.path(),r=this.buildTransactionQueue_(e);return this.rerunTransactionQueue_(r,n),n},Je.prototype.rerunTransactionQueue_=function(t,e){if(0!==t.length){for(var n=[],r=[],i=t.filter((function(t){return t.status===an.RUN})).map((function(t){return t.currentWriteId})),o=0;o<t.length;o++){var a=t[o],u=$.relativePath(e,a.path),c=!1,l=void 0;if(Object(s.e)(null!==u,"rerunTransactionsUnderNode_: relativePath should not be null."),a.status===an.NEEDS_ABORT)c=!0,l=a.abortReason,r=r.concat(this.serverSyncTree_.ackUserWrite(a.currentWriteId,!0));else if(a.status===an.RUN)if(a.retryCount>=Je.MAX_TRANSACTION_RETRIES_)c=!0,l="maxretry",r=r.concat(this.serverSyncTree_.ackUserWrite(a.currentWriteId,!0));else{var h=this.getLatestState_(a.path,i);a.currentInputSnapshot=h;var f=t[o].update(h.val());if(void 0!==f){at("transaction failed: Data returned ",f,a.path);var d=Ut(f);"object"==typeof f&&null!=f&&Object(s.i)(f,".priority")||(d=d.updatePriority(h.getPriority()));var p=a.currentWriteId,v=this.generateServerValues(),y=re(d,h,v);a.currentOutputSnapshotRaw=d,a.currentOutputSnapshotResolved=y,a.currentWriteId=this.getNextWriteId_(),i.splice(i.indexOf(p),1),r=(r=r.concat(this.serverSyncTree_.applyUserOverwrite(a.path,y,a.currentWriteId,a.applyLocally))).concat(this.serverSyncTree_.ackUserWrite(p,!0))}else c=!0,l="nodata",r=r.concat(this.serverSyncTree_.ackUserWrite(a.currentWriteId,!0))}if(this.eventQueue_.raiseEventsForChangedPath(e,r),r=[],c&&(t[o].status=an.COMPLETED,setTimeout(t[o].unwatcher,Math.floor(0)),t[o].onComplete))if("nodata"===l){var g=new rn(this,t[o].path),m=new Wt(t[o].currentInputSnapshot,g,Ot);n.push(t[o].onComplete.bind(null,null,!1,m))}else n.push(t[o].onComplete.bind(null,new Error(l),!1,null))}for(this.pruneCompletedTransactionsBelowNode_(this.transactionQueueTree_),o=0;o<n.length;o++)K(n[o]);this.sendReadyTransactions_()}},Je.prototype.getAncestorTransactionNode_=function(t){var e,n=this.transactionQueueTree_;for(e=t.getFront();null!==e&&null===n.getValue();)n=n.subTree(e),e=(t=t.popFront()).getFront();return n},Je.prototype.buildTransactionQueue_=function(t){var e=[];return this.aggregateTransactionQueuesForNode_(t,e),e.sort((function(t,e){return t.order-e.order})),e},Je.prototype.aggregateTransactionQueuesForNode_=function(t,e){var n=this,r=t.getValue();if(null!==r)for(var i=0;i<r.length;i++)e.push(r[i]);t.forEachChild((function(t){n.aggregateTransactionQueuesForNode_(t,e)}))},Je.prototype.pruneCompletedTransactionsBelowNode_=function(t){var e=this,n=t.getValue();if(n){for(var r=0,i=0;i<n.length;i++)n[i].status!==an.COMPLETED&&(n[r]=n[i],r++);n.length=r,t.setValue(n.length>0?n:null)}t.forEachChild((function(t){e.pruneCompletedTransactionsBelowNode_(t)}))},Je.prototype.abortTransactions_=function(t){var e=this,n=this.getAncestorTransactionNode_(t).path(),r=this.transactionQueueTree_.subTree(t);return r.forEachAncestor((function(t){e.abortTransactionsOnNode_(t)})),this.abortTransactionsOnNode_(r),r.forEachDescendant((function(t){e.abortTransactionsOnNode_(t)})),n},Je.prototype.abortTransactionsOnNode_=function(t){var e=t.getValue();if(null!==e){for(var n=[],r=[],i=-1,o=0;o<e.length;o++)e[o].status===an.SENT_NEEDS_ABORT||(e[o].status===an.SENT?(Object(s.e)(i===o-1,"All SENT items should be at beginning of queue."),i=o,e[o].status=an.SENT_NEEDS_ABORT,e[o].abortReason="set"):(Object(s.e)(e[o].status===an.RUN,"Unexpected transaction status in abort"),e[o].unwatcher(),r=r.concat(this.serverSyncTree_.ackUserWrite(e[o].currentWriteId,!0)),e[o].onComplete&&n.push(e[o].onComplete.bind(null,new Error("set"),!1,null))));for(-1===i?t.setValue(null):e.length=i+1,this.eventQueue_.raiseEventsForChangedPath(t.path(),r),o=0;o<n.length;o++)K(n[o])}};var un,cn=function(){function t(t,e){var n=this;this.app_=t,this.authProvider_=e,this.auth_=null,this.auth_=e.getImmediate({optional:!0}),this.auth_||e.get().then((function(t){return n.auth_=t}))}return t.prototype.getToken=function(t){return this.auth_?this.auth_.getToken(t).catch((function(t){return t&&"auth/token-not-initialized"===t.code?(w("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)})):Promise.resolve(null)},t.prototype.addTokenChangeListener=function(t){this.auth_?this.auth_.addAuthTokenListener(t):(setTimeout((function(){return t(null)}),0),this.authProvider_.get().then((function(e){return e.addAuthTokenListener(t)})))},t.prototype.removeTokenChangeListener=function(t){this.authProvider_.get().then((function(e){return e.removeAuthTokenListener(t)}))},t.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.app_.name+'" are invalid. This usually indicates your app was not initialized correctly. ';S(t+="credential"in this.app_.options?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.app_.options?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.')},t}(),ln=function(){function t(){}return t.prototype.getToken=function(e){return Promise.resolve({accessToken:t.EMULATOR_AUTH_TOKEN})},t.prototype.addTokenChangeListener=function(e){e(t.EMULATOR_AUTH_TOKEN)},t.prototype.removeTokenChangeListener=function(t){},t.prototype.notifyForInvalidToken=function(){},t.EMULATOR_AUTH_TOKEN="owner",t}(),hn=function(){function t(){this.repos_={},this.useRestClient_=!1}return t.getInstance=function(){return un||(un=new t),un},t.prototype.interrupt=function(){var t,e,n,r;try{for(var i=Object(o.k)(Object.keys(this.repos_)),s=i.next();!s.done;s=i.next()){var a=s.value;try{for(var u=(n=void 0,Object(o.k)(Object.keys(this.repos_[a]))),c=u.next();!c.done;c=u.next())this.repos_[a][c.value].interrupt()}catch(l){n={error:l}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(h){t={error:h}}finally{try{s&&!s.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}},t.prototype.resume=function(){var t,e,n,r;try{for(var i=Object(o.k)(Object.keys(this.repos_)),s=i.next();!s.done;s=i.next()){var a=s.value;try{for(var u=(n=void 0,Object(o.k)(Object.keys(this.repos_[a]))),c=u.next();!c.done;c=u.next())this.repos_[a][c.value].resume()}catch(l){n={error:l}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(h){t={error:h}}finally{try{s&&!s.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}},t.prototype.applyEmulatorSettings=function(t,e,n){t.repoInfo_=new Z(e+":"+n,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams),t.repoInfo_.nodeAdmin&&(t.authTokenProvider_=new ln)},t.prototype.databaseFromApp=function(t,e,n,r){var i=n||t.options.databaseURL;void 0===i&&(t.options.projectId||E("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),w("Using default host for project ",t.options.projectId),i=t.options.projectId+"-default-rtdb.firebaseio.com");var o,s=J(i,r),a=s.repoInfo,u=void 0;"undefined"!=typeof process&&(u=process.env.FIREBASE_DATABASE_EMULATOR_HOST),u?(o=!0,a=(s=J(i="http://"+u+"?ns="+a.namespace,r)).repoInfo):o=!s.repoInfo.secure;var c=r&&o?new ln:new cn(t,e);return vt("Invalid Firebase Database URL",1,s),s.path.isEmpty()||E("Database URL must point to the root of a Firebase Database (not including a child path)."),this.createRepo(a,t,c).database},t.prototype.deleteRepo=function(t){var e=Object(s.D)(this.repos_,t.app.name);e&&Object(s.D)(e,t.key)===t||E("Database "+t.app.name+"("+t.repoInfo_+") has already been deleted."),t.interrupt(),delete e[t.key]},t.prototype.createRepo=function(t,e,n){var r=Object(s.D)(this.repos_,e.name);r||(this.repos_[e.name]=r={});var i=Object(s.D)(r,t.toURLString());return i&&E("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new Je(t,this.useRestClient_,e,n),r[t.toURLString()]=i,i},t.prototype.forceRestClient=function(t){this.useRestClient_=t},t}(),fn=function(){function t(t){var e=this;this.repoInternal_=t,this.instanceStarted_=!1,this.INTERNAL={delete:function(){return Object(o.b)(e,void 0,void 0,(function(){return Object(o.e)(this,(function(t){return this.checkDeleted_("delete"),hn.getInstance().deleteRepo(this.repo_),this.repoInternal_=null,this.rootInternal_=null,[2]}))}))}},t instanceof Je||E("Don't call new Database() directly - please use firebase.database().")}return Object.defineProperty(t.prototype,"repo_",{get:function(){return this.instanceStarted_||(this.repoInternal_.start(),this.instanceStarted_=!0),this.repoInternal_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"root_",{get:function(){return this.rootInternal_||(this.rootInternal_=new rn(this.repo_,$.Empty)),this.rootInternal_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"app",{get:function(){return this.repo_.app},enumerable:!1,configurable:!0}),t.prototype.useEmulator=function(t,e){this.checkDeleted_("useEmulator"),this.instanceStarted_?E("Cannot call useEmulator() after instance has already been initialized."):hn.getInstance().applyEmulatorSettings(this.repoInternal_,t,e)},t.prototype.ref=function(t){return this.checkDeleted_("ref"),Object(s.H)("database.ref",0,1,arguments.length),t instanceof rn?this.refFromURL(t.toString()):void 0!==t?this.root_.child(t):this.root_},t.prototype.refFromURL=function(t){var e="database.refFromURL";this.checkDeleted_(e),Object(s.H)(e,1,1,arguments.length);var n=J(t,this.repo_.repoInfo_.nodeAdmin);vt(e,1,n);var r=n.repoInfo;return r.isCustomHost()||r.host===this.repo_.repoInfo_.host||E(e+": Host name does not match the current database: (found "+r.host+" but expected "+this.repo_.repoInfo_.host+")"),this.ref(n.path.toString())},t.prototype.checkDeleted_=function(t){null===this.repoInternal_&&E("Cannot call "+t+" on a deleted database.")},t.prototype.goOffline=function(){Object(s.H)("database.goOffline",0,0,arguments.length),this.checkDeleted_("goOffline"),this.repo_.interrupt()},t.prototype.goOnline=function(){Object(s.H)("database.goOnline",0,0,arguments.length),this.checkDeleted_("goOnline"),this.repo_.resume()},t.ServerValue={TIMESTAMP:{".sv":"timestamp"},increment:function(t){return{".sv":{increment:t}}}},t}(),dn=Object.freeze({__proto__:null,forceLongPolling:function(){Qe.forceDisallow(),Be.forceAllow()},forceWebSockets:function(){Be.forceDisallow()},isWebSocketsAvailable:function(){return Qe.isAvailable()},setSecurityDebugCallback:function(t,e){t.repo.persistentConnection_.securityDebugCallback_=e},stats:function(t,e){t.repo.stats(e)},statsIncrementCounter:function(t,e){t.repo.statsIncrementCounter(e)},dataUpdateCount:function(t){return t.repo.dataUpdateCount},interceptServerData:function(t,e){return t.repo.interceptServerData_(e)},initStandalone:function(t){var e=t.app,n=t.url,r=t.customAuthImpl,i=t.namespace,o=t.nodeAdmin,s=void 0!==o&&o;We(t.version);var a=new u.c("auth-internal",new u.b("database-standalone"));return a.setComponent(new u.a("auth-internal",(function(){return r}),"PRIVATE")),{instance:hn.getInstance().databaseFromApp(e,a,n,s),namespace:i}}}),pn=Xe;Xe.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},Xe.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};var vn=Object.freeze({__proto__:null,DataConnection:pn,RealTimeConnection:Ye,hijackHash:function(t){var e=Xe.prototype.put;return Xe.prototype.put=function(n,r,i,o){void 0!==o&&(o=t()),e.call(this,n,r,i,o)},function(){Xe.prototype.put=e}},ConnectionTarget:Z,queryIdentifier:function(t){return t.queryIdentifier()},forceRestClient:function(t){hn.getInstance().forceRestClient(t)}}),yn=fn.ServerValue;function gn(e){We(e.SDK_VERSION);var n=e.INTERNAL.registerComponent(new u.a("database",(function(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal");return hn.getInstance().databaseFromApp(n,r,e)}),"PUBLIC").setServiceProps({Reference:rn,Query:$t,Database:fn,DataSnapshot:Wt,enableLogging:b,INTERNAL:dn,ServerValue:yn,TEST_ACCESS:vn}).setMultipleInstances(!0));e.registerVersion("@firebase/database","0.7.1"),Object(s.w)()&&(t.exports=n)}gn(i.a)}).call(this,n("3UD+")(t))},HXN9:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=r(n("d0bx"));e.generate=i.default;var o={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1890FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"};e.presetPrimaryColors=o;var s={};e.presetPalettes=s,Object.keys(o).forEach((function(t){s[t]=i.default(o[t]),s[t].primary=s[t][5]})),e.red=s.red,e.volcano=s.volcano,e.gold=s.gold,e.orange=s.orange,e.yellow=s.yellow,e.lime=s.lime,e.green=s.green,e.cyan=s.cyan,e.blue=s.blue,e.geekblue=s.geekblue,e.purple=s.purple,e.magenta=s.magenta,e.grey=s.grey},Zss7:function(t,e,n){var r;!function(i){var o=/^\s+/,s=/\s+$/,a=0,u=i.round,c=i.min,l=i.max,h=i.random;function f(t,e){if(e=e||{},(t=t||"")instanceof f)return t;if(!(this instanceof f))return new f(t,e);var n=function(t){var e,n,r={r:0,g:0,b:0},a=1,u=null,h=null,f=null,d=!1,p=!1;return"string"==typeof t&&(t=function(t){t=t.replace(o,"").replace(s,"").toLowerCase();var e,n=!1;if(A[t])t=A[t],n=!0;else if("transparent"==t)return{r:0,g:0,b:0,a:0,format:"name"};return(e=q.rgb.exec(t))?{r:e[1],g:e[2],b:e[3]}:(e=q.rgba.exec(t))?{r:e[1],g:e[2],b:e[3],a:e[4]}:(e=q.hsl.exec(t))?{h:e[1],s:e[2],l:e[3]}:(e=q.hsla.exec(t))?{h:e[1],s:e[2],l:e[3],a:e[4]}:(e=q.hsv.exec(t))?{h:e[1],s:e[2],v:e[3]}:(e=q.hsva.exec(t))?{h:e[1],s:e[2],v:e[3],a:e[4]}:(e=q.hex8.exec(t))?{r:z(e[1]),g:z(e[2]),b:z(e[3]),a:M(e[4]),format:n?"name":"hex8"}:(e=q.hex6.exec(t))?{r:z(e[1]),g:z(e[2]),b:z(e[3]),format:n?"name":"hex"}:(e=q.hex4.exec(t))?{r:z(e[1]+""+e[1]),g:z(e[2]+""+e[2]),b:z(e[3]+""+e[3]),a:M(e[4]+""+e[4]),format:n?"name":"hex8"}:!!(e=q.hex3.exec(t))&&{r:z(e[1]+""+e[1]),g:z(e[2]+""+e[2]),b:z(e[3]+""+e[3]),format:n?"name":"hex"}}(t)),"object"==typeof t&&(H(t.r)&&H(t.g)&&H(t.b)?(e=t.g,n=t.b,r={r:255*N(t.r,255),g:255*N(e,255),b:255*N(n,255)},d=!0,p="%"===String(t.r).substr(-1)?"prgb":"rgb"):H(t.h)&&H(t.s)&&H(t.v)?(u=L(t.s),h=L(t.v),r=function(t,e,n){t=6*N(t,360),e=N(e,100),n=N(n,100);var r=i.floor(t),o=t-r,s=n*(1-e),a=n*(1-o*e),u=n*(1-(1-o)*e),c=r%6;return{r:255*[n,a,s,s,u,n][c],g:255*[u,n,n,a,s,s][c],b:255*[s,s,u,n,n,a][c]}}(t.h,u,h),d=!0,p="hsv"):H(t.h)&&H(t.s)&&H(t.l)&&(u=L(t.s),f=L(t.l),r=function(t,e,n){var r,i,o;function s(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t}if(t=N(t,360),e=N(e,100),n=N(n,100),0===e)r=i=o=n;else{var a=n<.5?n*(1+e):n+e-n*e,u=2*n-a;r=s(u,a,t+1/3),i=s(u,a,t),o=s(u,a,t-1/3)}return{r:255*r,g:255*i,b:255*o}}(t.h,u,f),d=!0,p="hsl"),t.hasOwnProperty("a")&&(a=t.a)),a=R(a),{ok:d,format:t.format||p,r:c(255,l(r.r,0)),g:c(255,l(r.g,0)),b:c(255,l(r.b,0)),a:a}}(t);this._originalInput=t,this._r=n.r,this._g=n.g,this._b=n.b,this._a=n.a,this._roundA=u(100*this._a)/100,this._format=e.format||n.format,this._gradientType=e.gradientType,this._r<1&&(this._r=u(this._r)),this._g<1&&(this._g=u(this._g)),this._b<1&&(this._b=u(this._b)),this._ok=n.ok,this._tc_id=a++}function d(t,e,n){t=N(t,255),e=N(e,255),n=N(n,255);var r,i,o=l(t,e,n),s=c(t,e,n),a=(o+s)/2;if(o==s)r=i=0;else{var u=o-s;switch(i=a>.5?u/(2-o-s):u/(o+s),o){case t:r=(e-n)/u+(e<n?6:0);break;case e:r=(n-t)/u+2;break;case n:r=(t-e)/u+4}r/=6}return{h:r,s:i,l:a}}function p(t,e,n){t=N(t,255),e=N(e,255),n=N(n,255);var r,i,o=l(t,e,n),s=c(t,e,n),a=o,u=o-s;if(i=0===o?0:u/o,o==s)r=0;else{switch(o){case t:r=(e-n)/u+(e<n?6:0);break;case e:r=(n-t)/u+2;break;case n:r=(t-e)/u+4}r/=6}return{h:r,s:i,v:a}}function v(t,e,n,r){var i=[j(u(t).toString(16)),j(u(e).toString(16)),j(u(n).toString(16))];return r&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function y(t,e,n,r){return[j(F(r)),j(u(t).toString(16)),j(u(e).toString(16)),j(u(n).toString(16))].join("")}function g(t,e){e=0===e?0:e||10;var n=f(t).toHsl();return n.s-=e/100,n.s=D(n.s),f(n)}function m(t,e){e=0===e?0:e||10;var n=f(t).toHsl();return n.s+=e/100,n.s=D(n.s),f(n)}function _(t){return f(t).desaturate(100)}function b(t,e){e=0===e?0:e||10;var n=f(t).toHsl();return n.l+=e/100,n.l=D(n.l),f(n)}function w(t,e){e=0===e?0:e||10;var n=f(t).toRgb();return n.r=l(0,c(255,n.r-u(-e/100*255))),n.g=l(0,c(255,n.g-u(-e/100*255))),n.b=l(0,c(255,n.b-u(-e/100*255))),f(n)}function C(t,e){e=0===e?0:e||10;var n=f(t).toHsl();return n.l-=e/100,n.l=D(n.l),f(n)}function k(t,e){var n=f(t).toHsl(),r=(n.h+e)%360;return n.h=r<0?360+r:r,f(n)}function E(t){var e=f(t).toHsl();return e.h=(e.h+180)%360,f(e)}function S(t){var e=f(t).toHsl(),n=e.h;return[f(t),f({h:(n+120)%360,s:e.s,l:e.l}),f({h:(n+240)%360,s:e.s,l:e.l})]}function T(t){var e=f(t).toHsl(),n=e.h;return[f(t),f({h:(n+90)%360,s:e.s,l:e.l}),f({h:(n+180)%360,s:e.s,l:e.l}),f({h:(n+270)%360,s:e.s,l:e.l})]}function O(t){var e=f(t).toHsl(),n=e.h;return[f(t),f({h:(n+72)%360,s:e.s,l:e.l}),f({h:(n+216)%360,s:e.s,l:e.l})]}function I(t,e,n){e=e||6,n=n||30;var r=f(t).toHsl(),i=360/n,o=[f(t)];for(r.h=(r.h-(i*e>>1)+720)%360;--e;)r.h=(r.h+i)%360,o.push(f(r));return o}function x(t,e){e=e||6;for(var n=f(t).toHsv(),r=n.h,i=n.s,o=n.v,s=[],a=1/e;e--;)s.push(f({h:r,s:i,v:o})),o=(o+a)%1;return s}f.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var t=this.toRgb();return(299*t.r+587*t.g+114*t.b)/1e3},getLuminance:function(){var t,e,n,r=this.toRgb();return e=r.g/255,n=r.b/255,.2126*((t=r.r/255)<=.03928?t/12.92:i.pow((t+.055)/1.055,2.4))+.7152*(e<=.03928?e/12.92:i.pow((e+.055)/1.055,2.4))+.0722*(n<=.03928?n/12.92:i.pow((n+.055)/1.055,2.4))},setAlpha:function(t){return this._a=R(t),this._roundA=u(100*this._a)/100,this},toHsv:function(){var t=p(this._r,this._g,this._b);return{h:360*t.h,s:t.s,v:t.v,a:this._a}},toHsvString:function(){var t=p(this._r,this._g,this._b),e=u(360*t.h),n=u(100*t.s),r=u(100*t.v);return 1==this._a?"hsv("+e+", "+n+"%, "+r+"%)":"hsva("+e+", "+n+"%, "+r+"%, "+this._roundA+")"},toHsl:function(){var t=d(this._r,this._g,this._b);return{h:360*t.h,s:t.s,l:t.l,a:this._a}},toHslString:function(){var t=d(this._r,this._g,this._b),e=u(360*t.h),n=u(100*t.s),r=u(100*t.l);return 1==this._a?"hsl("+e+", "+n+"%, "+r+"%)":"hsla("+e+", "+n+"%, "+r+"%, "+this._roundA+")"},toHex:function(t){return v(this._r,this._g,this._b,t)},toHexString:function(t){return"#"+this.toHex(t)},toHex8:function(t){return function(t,e,n,r,i){var o=[j(u(t).toString(16)),j(u(e).toString(16)),j(u(n).toString(16)),j(F(r))];return i&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)&&o[3].charAt(0)==o[3].charAt(1)?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0)+o[3].charAt(0):o.join("")}(this._r,this._g,this._b,this._a,t)},toHex8String:function(t){return"#"+this.toHex8(t)},toRgb:function(){return{r:u(this._r),g:u(this._g),b:u(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+u(this._r)+", "+u(this._g)+", "+u(this._b)+")":"rgba("+u(this._r)+", "+u(this._g)+", "+u(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:u(100*N(this._r,255))+"%",g:u(100*N(this._g,255))+"%",b:u(100*N(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+u(100*N(this._r,255))+"%, "+u(100*N(this._g,255))+"%, "+u(100*N(this._b,255))+"%)":"rgba("+u(100*N(this._r,255))+"%, "+u(100*N(this._g,255))+"%, "+u(100*N(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(P[v(this._r,this._g,this._b,!0)]||!1)},toFilter:function(t){var e="#"+y(this._r,this._g,this._b,this._a),n=e,r=this._gradientType?"GradientType = 1, ":"";if(t){var i=f(t);n="#"+y(i._r,i._g,i._b,i._a)}return"progid:DXImageTransform.Microsoft.gradient("+r+"startColorstr="+e+",endColorstr="+n+")"},toString:function(t){var e=!!t;t=t||this._format;var n=!1;return e||!(this._a<1&&this._a>=0)||"hex"!==t&&"hex6"!==t&&"hex3"!==t&&"hex4"!==t&&"hex8"!==t&&"name"!==t?("rgb"===t&&(n=this.toRgbString()),"prgb"===t&&(n=this.toPercentageRgbString()),"hex"!==t&&"hex6"!==t||(n=this.toHexString()),"hex3"===t&&(n=this.toHexString(!0)),"hex4"===t&&(n=this.toHex8String(!0)),"hex8"===t&&(n=this.toHex8String()),"name"===t&&(n=this.toName()),"hsl"===t&&(n=this.toHslString()),"hsv"===t&&(n=this.toHsvString()),n||this.toHexString()):"name"===t&&0===this._a?this.toName():this.toRgbString()},clone:function(){return f(this.toString())},_applyModification:function(t,e){var n=t.apply(null,[this].concat([].slice.call(e)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(b,arguments)},brighten:function(){return this._applyModification(w,arguments)},darken:function(){return this._applyModification(C,arguments)},desaturate:function(){return this._applyModification(g,arguments)},saturate:function(){return this._applyModification(m,arguments)},greyscale:function(){return this._applyModification(_,arguments)},spin:function(){return this._applyModification(k,arguments)},_applyCombination:function(t,e){return t.apply(null,[this].concat([].slice.call(e)))},analogous:function(){return this._applyCombination(I,arguments)},complement:function(){return this._applyCombination(E,arguments)},monochromatic:function(){return this._applyCombination(x,arguments)},splitcomplement:function(){return this._applyCombination(O,arguments)},triad:function(){return this._applyCombination(S,arguments)},tetrad:function(){return this._applyCombination(T,arguments)}},f.fromRatio=function(t,e){if("object"==typeof t){var n={};for(var r in t)t.hasOwnProperty(r)&&(n[r]="a"===r?t[r]:L(t[r]));t=n}return f(t,e)},f.equals=function(t,e){return!(!t||!e)&&f(t).toRgbString()==f(e).toRgbString()},f.random=function(){return f.fromRatio({r:h(),g:h(),b:h()})},f.mix=function(t,e,n){n=0===n?0:n||50;var r=f(t).toRgb(),i=f(e).toRgb(),o=n/100;return f({r:(i.r-r.r)*o+r.r,g:(i.g-r.g)*o+r.g,b:(i.b-r.b)*o+r.b,a:(i.a-r.a)*o+r.a})},f.readability=function(t,e){var n=f(t),r=f(e);return(i.max(n.getLuminance(),r.getLuminance())+.05)/(i.min(n.getLuminance(),r.getLuminance())+.05)},f.isReadable=function(t,e,n){var r,i,o,s,a,u=f.readability(t,e);switch(i=!1,(o=n,"AA"!==(s=((o=o||{level:"AA",size:"small"}).level||"AA").toUpperCase())&&"AAA"!==s&&(s="AA"),"small"!==(a=(o.size||"small").toLowerCase())&&"large"!==a&&(a="small"),r={level:s,size:a}).level+r.size){case"AAsmall":case"AAAlarge":i=u>=4.5;break;case"AAlarge":i=u>=3;break;case"AAAsmall":i=u>=7}return i},f.mostReadable=function(t,e,n){var r,i,o,s,a=null,u=0;i=(n=n||{}).includeFallbackColors,o=n.level,s=n.size;for(var c=0;c<e.length;c++)(r=f.readability(t,e[c]))>u&&(u=r,a=f(e[c]));return f.isReadable(t,a,{level:o,size:s})||!i?a:(n.includeFallbackColors=!1,f.mostReadable(t,["#fff","#000"],n))};var A=f.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},P=f.hexNames=function(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}(A);function R(t){return t=parseFloat(t),(isNaN(t)||t<0||t>1)&&(t=1),t}function N(t,e){(function(t){return"string"==typeof t&&-1!=t.indexOf(".")&&1===parseFloat(t)})(t)&&(t="100%");var n=function(t){return"string"==typeof t&&-1!=t.indexOf("%")}(t);return t=c(e,l(0,parseFloat(t))),n&&(t=parseInt(t*e,10)/100),i.abs(t-e)<1e-6?1:t%e/parseFloat(e)}function D(t){return c(1,l(0,t))}function z(t){return parseInt(t,16)}function j(t){return 1==t.length?"0"+t:""+t}function L(t){return t<=1&&(t=100*t+"%"),t}function F(t){return i.round(255*parseFloat(t)).toString(16)}function M(t){return z(t)/255}var V,U,B,q=(U="[\\s|\\(]+("+(V="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+V+")[,|\\s]+("+V+")\\s*\\)?",B="[\\s|\\(]+("+V+")[,|\\s]+("+V+")[,|\\s]+("+V+")[,|\\s]+("+V+")\\s*\\)?",{CSS_UNIT:new RegExp(V),rgb:new RegExp("rgb"+U),rgba:new RegExp("rgba"+B),hsl:new RegExp("hsl"+U),hsla:new RegExp("hsla"+B),hsv:new RegExp("hsv"+U),hsva:new RegExp("hsva"+B),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function H(t){return!!q.CSS_UNIT.exec(t)}t.exports?t.exports=f:void 0===(r=(function(){return f}).call(e,n,e,t))||(t.exports=r)}(Math)},d0bx:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=r(n("Zss7"));function o(t,e,n){var r;return(r=Math.round(t.h)>=60&&Math.round(t.h)<=240?n?Math.round(t.h)-2*e:Math.round(t.h)+2*e:n?Math.round(t.h)+2*e:Math.round(t.h)-2*e)<0?r+=360:r>=360&&(r-=360),r}function s(t,e,n){return 0===t.h&&0===t.s?t.s:((r=n?Math.round(100*t.s)-16*e:4===e?Math.round(100*t.s)+16:Math.round(100*t.s)+5*e)>100&&(r=100),n&&5===e&&r>10&&(r=10),r<6&&(r=6),r);var r}function a(t,e,n){return n?Math.round(100*t.v)+5*e:Math.round(100*t.v)-15*e}e.default=function(t){for(var e=[],n=i.default(t),r=5;r>0;r-=1){var u=n.toHsv(),c=i.default({h:o(u,r,!0),s:s(u,r,!0),v:a(u,r,!0)}).toHexString();e.push(c)}for(e.push(n.toHexString()),r=1;r<=4;r+=1)u=n.toHsv(),c=i.default({h:o(u,r),s:s(u,r),v:a(u,r)}).toHexString(),e.push(c);return e}},mrSG:function(t,e,n){"use strict";n.d(e,"d",(function(){return i})),n.d(e,"a",(function(){return o})),n.d(e,"h",(function(){return s})),n.d(e,"c",(function(){return a})),n.d(e,"f",(function(){return u})),n.d(e,"b",(function(){return c})),n.d(e,"e",(function(){return l})),n.d(e,"k",(function(){return h})),n.d(e,"g",(function(){return f})),n.d(e,"i",(function(){return d})),n.d(e,"j",(function(){return p}));var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function i(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function s(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}function a(t,e,n,r){var i,o=arguments.length,s=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(o<3?i(s):o>3?i(e,n,s):i(e,n))||s);return o>3&&s&&Object.defineProperty(e,n,s),s}function u(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function c(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}u((r=r.apply(t,e||[])).next())}))}function l(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function h(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function f(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function d(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(f(arguments[e]));return t}function p(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}},"q/0M":function(t,e,n){"use strict";function r(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}var i;n.d(e,"a",(function(){return s})),n.d(e,"b",(function(){return h})),n.d(e,"c",(function(){return f})),n.d(e,"d",(function(){return d}));var o=[],s=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}({}),a={debug:s.DEBUG,verbose:s.VERBOSE,info:s.INFO,warn:s.WARN,error:s.ERROR,silent:s.SILENT},u=s.INFO,c=((i={})[s.DEBUG]="log",i[s.VERBOSE]="log",i[s.INFO]="info",i[s.WARN]="warn",i[s.ERROR]="error",i),l=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(e<t.logLevel)){var o=(new Date).toISOString(),s=c[e];if(!s)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[s].apply(console,r(["["+o+"]  "+t.name+":"],n))}},h=function(){function t(t){this.name=t,this._logLevel=u,this._logHandler=l,this._userLogHandler=null,o.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in s))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?a[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.DEBUG],t)),this._logHandler.apply(this,r([this,s.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.VERBOSE],t)),this._logHandler.apply(this,r([this,s.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.INFO],t)),this._logHandler.apply(this,r([this,s.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.WARN],t)),this._logHandler.apply(this,r([this,s.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.ERROR],t)),this._logHandler.apply(this,r([this,s.ERROR],t))},t}();function f(t){o.forEach((function(e){e.setLogLevel(t)}))}function d(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=a[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var a=i.map((function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(e){return null}})).filter((function(t){return t})).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:s[n].toLowerCase(),message:a,args:i,type:e.name})}},r=0,i=o;r<i.length;r++)n(i[r])}},qOnz:function(t,e,n){"use strict";n.d(e,"a",(function(){return f})),n.d(e,"b",(function(){return E})),n.d(e,"c",(function(){return k})),n.d(e,"d",(function(){return L})),n.d(e,"e",(function(){return i})),n.d(e,"f",(function(){return o})),n.d(e,"g",(function(){return a})),n.d(e,"h",(function(){return u})),n.d(e,"i",(function(){return R})),n.d(e,"j",(function(){return F})),n.d(e,"k",(function(){return l})),n.d(e,"l",(function(){return h})),n.d(e,"m",(function(){return B})),n.d(e,"n",(function(){return d})),n.d(e,"o",(function(){return P})),n.d(e,"p",(function(){return y})),n.d(e,"q",(function(){return g})),n.d(e,"r",(function(){return _})),n.d(e,"s",(function(){return D})),n.d(e,"t",(function(){return b})),n.d(e,"u",(function(){return p})),n.d(e,"v",(function(){return v})),n.d(e,"w",(function(){return C})),n.d(e,"x",(function(){return m})),n.d(e,"y",(function(){return w})),n.d(e,"z",(function(){return A})),n.d(e,"A",(function(){return O})),n.d(e,"B",(function(){return z})),n.d(e,"C",(function(){return j})),n.d(e,"D",(function(){return N})),n.d(e,"E",(function(){return G})),n.d(e,"F",(function(){return W})),n.d(e,"G",(function(){return I})),n.d(e,"H",(function(){return U})),n.d(e,"I",(function(){return q})),n.d(e,"J",(function(){return H}));var r=n("mrSG"),i=function(t,e){if(!t)throw o(e)},o=function(t){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+t)},s=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},a={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,l=(15&a)<<2|c>>6,h=63&c;u||(h=64,s||(l=64)),r.push(n[o>>2],n[(3&o)<<4|a>>4],n[l],n[h])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(s(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var s=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(a=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(s>>10)),e[r++]=String.fromCharCode(56320+(1023&s))}else{o=t[n++];var a=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],s=i<t.length?n[t.charAt(i)]:0,a=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==s||null==a||null==u)throw Error();r.push(o<<2|s>>4),64!==a&&(r.push(s<<4&240|a>>2),64!==u&&r.push(a<<6&192|u))}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},u=function(t){var e=s(t);return a.encodeByteArray(e,!0)},c=function(t){try{return a.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function l(t){return h(void 0,t)}function h(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=h(t[n],e[n]));return t}var f=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,r))}},t}();function d(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function p(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(d())}function v(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return!1}}function y(){return"object"==typeof self&&self.self===self}function g(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function m(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function _(){return d().indexOf("Electron/")>=0}function b(){var t=d();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function w(){return d().indexOf("MSAppHost/")>=0}function C(){return!1}var k=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,E.prototype.create),o}return Object(r.d)(e,t),e}(Error),E=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?S(o,r):"Error",a=this.serviceName+": "+s+" ("+i+").",u=new k(i,a,r);return u},t}();function S(t,e){return t.replace(T,(function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"}))}var T=/\{\$([^}]+)}/g;function O(t){return JSON.parse(t)}function I(t){return JSON.stringify(t)}var x=function(t){var e={},n={},r={},i="";try{var o=t.split(".");e=O(c(o[0])||""),n=O(c(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(s){}return{header:e,claims:n,data:r,signature:i}},A=function(t){var e=x(t).claims;return!!e&&"object"==typeof e&&e.hasOwnProperty("iat")},P=function(t){var e=x(t).claims;return"object"==typeof e&&!0===e.admin};function R(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function N(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0}function D(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function z(t,e,n){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function j(t){for(var e=[],n=function(t,n){Array.isArray(n)?n.forEach((function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))})):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))},r=0,i=Object.entries(t);r<i.length;r++){var o=i[r];n(o[0],o[1])}return e.length?"&"+e.join("&"):""}var L=function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++)n[r]=4294967295&((h=n[r-3]^n[r-8]^n[r-14]^n[r-16])<<1|h>>>31);var i,o,s=this.chain_[0],a=this.chain_[1],u=this.chain_[2],c=this.chain_[3],l=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(i=c^a&(u^c),o=1518500249):(i=a^u^c,o=1859775393):r<60?(i=a&u|c&(a|u),o=2400959708):(i=a^u^c,o=3395469782);var h=(s<<5|s>>>27)+i+l+o+n[r]&4294967295;l=c,c=u,u=4294967295&(a<<30|a>>>2),a=s,s=h}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+u&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},t}();function F(t,e){var n=new M(t,e);return n.subscribe.bind(n)}var M=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((function(){t(n)})).catch((function(t){n.error(t)}))}return t.prototype.next=function(t){this.forEachObserver((function(e){e.next(t)}))},t.prototype.error=function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)},t.prototype.complete=function(){this.forEachObserver((function(t){t.complete()})),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t)?t:{next:t,error:e,complete:n}).next&&(r.next=V),void 0===r.error&&(r.error=V),void 0===r.complete&&(r.complete=V);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}})),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(r){"undefined"!=typeof console&&console.error&&console.error(r)}}))},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))},t}();function V(){}var U=function(t,e,n,r){var i;if(r<e?i="at least "+e:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")};function B(t,e,n){var r="";switch(e){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}return t+" failed: "+r+" argument "}function q(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(B(t,e,r)+"must be a valid function.")}function H(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(B(t,e,r)+"must be a valid context object.")}var W=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var o=t.charCodeAt(r);if(o>=55296&&o<=56319){var s=o-55296;r++,i(r<t.length,"Surrogate pair missing trail surrogate."),o=65536+(s<<10)+(t.charCodeAt(r)-56320)}o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=63&o|128):o<65536?(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=63&o|128):(e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=63&o|128)}return e},G=function(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e}},tAZD:function(t,e,n){var r,i,o;!function(s){if("object"==typeof t.exports){var a=s(0,e);void 0!==a&&(t.exports=a)}else i=[n,e],void 0===(o="function"==typeof(r=s)?r.apply(e,i):r)||(t.exports=o)}((function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=void 0;e.default=["en",[["a","p"],["AM","PM"],n],[["AM","PM"],n,n],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],n,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],n,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",n,"{1} 'at' {0}",n],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){var e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}]}))},xsWp:function(t,e,n){"use strict";n.r(e),n.d(e,"__PRIVATE_registerFirestore",(function(){return mf}));var r=n("mrSG"),i=n("zIRd"),o=n("q/0M"),s=n("qOnz"),a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function u(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var c,l="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},h=h||{},f=l||self;function d(){}function p(t){var e=typeof t;return"object"!=e?e:t?Array.isArray(t)?"array":e:"null"}function v(t){var e=p(t);return"array"==e||"object"==e&&"number"==typeof t.length}function y(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var g="closure_uid_"+(1e9*Math.random()>>>0),m=0;function _(t,e,n){return t.call.apply(t.bind,arguments)}function b(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function w(t,e,n){return(w=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?_:b).apply(null,arguments)}function C(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var k=Date.now;function E(t,e){function n(){}n.prototype=e.prototype,t.S=e.prototype,t.prototype=new n,t.prototype.constructor=t}function S(){this.j=this.j,this.i=this.i}S.prototype.j=!1,S.prototype.ja=function(){!this.j&&(this.j=!0,this.G(),0)&&function(t){Object.prototype.hasOwnProperty.call(t,g)&&t[g]||(t[g]=++m)}(this)},S.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var T=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},O=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function I(t){return Array.prototype.concat.apply([],arguments)}function x(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function A(t){return/^[\s\xa0]*$/.test(t)}var P,R=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function N(t,e){return-1!=t.indexOf(e)}function D(t,e){return t<e?-1:t>e?1:0}t:{var z=f.navigator;if(z){var j=z.userAgent;if(j){P=j;break t}}P=""}function L(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function F(t){var e={};for(var n in t)e[n]=t[n];return e}var M="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function V(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<M.length;o++)n=M[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function U(t){return U[" "](t),t}U[" "]=d;var B,q,H=N(P,"Opera"),W=N(P,"Trident")||N(P,"MSIE"),G=N(P,"Edge"),Q=G||W,K=N(P,"Gecko")&&!(N(P.toLowerCase(),"webkit")&&!N(P,"Edge"))&&!(N(P,"Trident")||N(P,"MSIE"))&&!N(P,"Edge"),Y=N(P.toLowerCase(),"webkit")&&!N(P,"Edge");function $(){var t=f.document;return t?t.documentMode:void 0}t:{var X="",Z=(q=P,K?/rv:([^\);]+)(\)|;)/.exec(q):G?/Edge\/([\d\.]+)/.exec(q):W?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(q):Y?/WebKit\/(\S+)/.exec(q):H?/(?:Version)[ \/]?(\S+)/.exec(q):void 0);if(Z&&(X=Z?Z[1]:""),W){var J=$();if(null!=J&&J>parseFloat(X)){B=String(J);break t}}B=X}var tt={};function et(t){return function(t,e){var n=tt;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,(function(){for(var e=0,n=R(String(B)).split("."),r=R(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=D(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||D(0==s[2].length,0==a[2].length)||D(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e}))}var nt=f.document&&W&&($()||parseInt(B,10))||void 0,rt=!W||9<=Number(nt),it=W&&!et("9"),ot=function(){if(!f.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{f.addEventListener("test",d,e),f.removeEventListener("test",d,e)}catch(n){}return t}();function st(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function at(t,e){if(st.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(K){t:{try{U(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:ut[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}st.prototype.b=function(){this.defaultPrevented=!0},E(at,st);var ut={2:"touch",3:"pen",4:"mouse"};at.prototype.b=function(){at.S.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,it)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(sr){}};var ct="closure_listenable_"+(1e6*Math.random()|0),lt=0;function ht(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++lt,this.Y=this.Z=!1}function ft(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function dt(t){this.src=t,this.a={},this.b=0}function pt(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=T(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(ft(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function vt(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.ca==r)return i}return-1}dt.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=vt(t,e,r,i);return-1<s?(e=t[s],n||(e.Z=!1)):((e=new ht(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var yt="closure_lm_"+(1e6*Math.random()|0),gt={};function mt(t,e,n,r,i){if(r&&r.once)return function t(e,n,r,i,o){if(Array.isArray(n)){for(var s=0;s<n.length;s++)t(e,n[s],r,i,o);return null}return r=Tt(r),e&&e[ct]?e.wa(n,r,y(i)?!!i.capture:!!i,o):_t(e,n,r,!0,i,o)}(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)mt(t,e[o],n,r,i);return null}return n=Tt(n),t&&t[ct]?t.va(e,n,y(r)?!!r.capture:!!r,i):_t(t,e,n,!1,r,i)}function _t(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=y(i)?!!i.capture:!!i;if(s&&!rt)return null;var a=Et(t);if(a||(t[yt]=a=new dt(t)),(n=a.add(e,n,r,s,o)).proxy)return n;if(r=function(){var t=kt,e=rt?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)ot||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(wt(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function bt(t){if("number"!=typeof t&&t&&!t.Y){var e=t.src;if(e&&e[ct])pt(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(wt(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Et(e))?(pt(n,t),0==n.b&&(n.src=null,e[yt]=null)):ft(t)}}}function wt(t){return t in gt?gt[t]:gt[t]="on"+t}function Ct(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&bt(t),n.call(r,e)}function kt(t,e){if(t.Y)return!0;if(!rt){if(!e)t:{e=["window","event"];for(var n=f,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return Ct(t,e=new at(e,this))}return Ct(t,new at(e,this))}function Et(t){return(t=t[yt])instanceof dt?t:null}var St="__closure_events_fn_"+(1e9*Math.random()>>>0);function Tt(t){return"function"==p(t)?t:(t[St]||(t[St]=function(e){return t.handleEvent(e)}),t[St])}function Ot(){S.call(this),this.c=new dt(this),this.J=this,this.C=null}function It(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.Y&&s.capture==n){var a=s.listener,u=s.ca||s.src;s.Z&&pt(t.c,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}E(Ot,S),Ot.prototype[ct]=!0,(c=Ot.prototype).addEventListener=function(t,e,n,r){mt(this,t,e,n,r)},c.removeEventListener=function(t,e,n,r){!function t(e,n,r,i,o){if(Array.isArray(n))for(var s=0;s<n.length;s++)t(e,n[s],r,i,o);else i=y(i)?!!i.capture:!!i,r=Tt(r),e&&e[ct]?(e=e.c,(n=String(n).toString())in e.a&&-1<(r=vt(s=e.a[n],r,i,o))&&(ft(s[r]),Array.prototype.splice.call(s,r,1),0==s.length&&(delete e.a[n],e.b--))):e&&(e=Et(e))&&(n=e.a[n.toString()],e=-1,n&&(e=vt(n,r,i,o)),(r=-1<e?n[e]:null)&&bt(r))}(this,t,e,n,r)},c.dispatchEvent=function(t){var e,n=this.C;if(n)for(e=[];n;n=n.C)e.push(n);n=this.J;var r=t.type||t;if("string"==typeof t)t=new st(t,n);else if(t instanceof st)t.target=t.target||n;else{var i=t;V(t=new st(r,n),i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var s=t.a=e[o];i=It(s,r,!0,t)&&i}if(i=It(s=t.a=n,r,!0,t)&&i,i=It(s,r,!1,t)&&i,e)for(o=0;o<e.length;o++)i=It(s=t.a=e[o],r,!1,t)&&i;return i},c.G=function(){if(Ot.S.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)ft(n[r]);delete e.a[t],e.b--}}this.C=null},c.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},c.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var xt=f.JSON.stringify;function At(){this.b=this.a=null}var Pt,Rt=new(function(){function t(t,e,n){this.f=n,this.c=t,this.g=e,this.b=0,this.a=null}return t.prototype.get=function(){var t;return 0<this.b?(this.b--,this.a=(t=this.a).next,t.next=null):t=this.c(),t},t}())((function(){return new Dt}),(function(t){t.reset()}),100);function Nt(){var t=Ft,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function Dt(){this.next=this.b=this.a=null}function zt(t){f.setTimeout((function(){throw t}),0)}function jt(t,e){Pt||function(){var t=f.Promise.resolve(void 0);Pt=function(){t.then(Mt)}}(),Lt||(Pt(),Lt=!0),Ft.add(t,e)}At.prototype.add=function(t,e){var n=Rt.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},Dt.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},Dt.prototype.reset=function(){this.next=this.b=this.a=null};var Lt=!1,Ft=new At;function Mt(){for(var t;t=Nt();){try{t.a.call(t.b)}catch(n){zt(n)}var e=Rt;e.g(t),e.b<e.f&&(e.b++,t.next=e.a,e.a=t)}Lt=!1}function Vt(t,e){Ot.call(this),this.b=t||1,this.a=e||f,this.f=w(this.Ya,this),this.g=k()}function Ut(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function Bt(t,e,n){if("function"==p(t))n&&(t=w(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=w(t.handleEvent,t)}return 2147483647<Number(e)?-1:f.setTimeout(t,e||0)}function qt(t){t.a=Bt((function(){t.a=null,t.c&&(t.c=!1,qt(t))}),t.h);var e=t.b;t.b=null,t.g.apply(null,e)}E(Vt,Ot),(c=Vt.prototype).aa=!1,c.M=null,c.Ya=function(){if(this.aa){var t=k()-this.g;0<t&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),this.dispatchEvent("tick"),this.aa&&(Ut(this),this.start()))}},c.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=k())},c.G=function(){Vt.S.G.call(this),Ut(this),delete this.a};var Ht=function(t){function e(e,n,r){var i=t.call(this)||this;return i.g=null!=r?e.bind(r):e,i.h=n,i.b=null,i.c=!1,i.a=null,i}return function(t,e){function n(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:qt(this)},e.prototype.G=function(){t.prototype.G.call(this),this.a&&(f.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},e}(S);function Wt(t){S.call(this),this.b=t,this.a={}}E(Wt,S);var Gt=[];function Qt(t,e,n,r){Array.isArray(n)||(n&&(Gt[0]=n.toString()),n=Gt);for(var i=0;i<n.length;i++){var o=mt(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function Kt(t){L(t.a,(function(t,e){this.a.hasOwnProperty(e)&&bt(t)}),t),t.a={}}function Yt(){this.a=!0}function $t(t,e,n,r){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return xt(n)}catch(a){return e}}(t,n)+(r?" "+r:"")}))}Wt.prototype.G=function(){Wt.S.G.call(this),Kt(this)},Wt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Yt.prototype.info=function(){};var Xt=null;function Zt(){return Xt=Xt||new Ot}function Jt(t){st.call(this,"serverreachability",t)}function te(t){var e=Zt();e.dispatchEvent(new Jt(e,t))}function ee(t){st.call(this,"statevent",t)}function ne(t){var e=Zt();e.dispatchEvent(new ee(e,t))}function re(t){st.call(this,"timingevent",t)}function ie(t,e){if("function"!=p(t))throw Error("Fn must not be null and must be a function");return f.setTimeout((function(){t()}),e)}E(Jt,st),E(ee,st),E(re,st);var oe={NO_ERROR:0,Za:1,gb:2,fb:3,bb:4,eb:5,hb:6,Da:7,TIMEOUT:8,kb:9},se={ab:"complete",ob:"success",Ea:"error",Da:"abort",mb:"ready",nb:"readystatechange",TIMEOUT:"timeout",ib:"incrementaldata",lb:"progress",cb:"downloadprogress",pb:"uploadprogress"};function ae(){}function ue(){}ae.prototype.a=null;var ce,le={OPEN:"a",$a:"b",Ea:"c",jb:"d"};function he(){st.call(this,"d")}function fe(){st.call(this,"c")}function de(){}function pe(t,e,n,r){this.g=t,this.c=e,this.f=n,this.T=r||1,this.J=new Wt(this),this.P=ve,this.R=new Vt(t=Q?125:void 0),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.U=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.W=this.C=this.V=this.I=!1}E(he,st),E(fe,st),E(de,ae),ce=new de;var ve=45e3,ye={},ge={};function me(t,e,n){t.H=1,t.i=Ve(De(e)),t.j=n,t.I=!0,_e(t,null)}function _e(t,e){t.u=k(),Ce(t),t.l=De(t.i);var n=t.l,r=t.T;Array.isArray(r)||(r=[String(r)]),Je(n.b,"t",r),t.D=0,t.a=Kn(t.g,t.g.C?e:null),0<t.O&&(t.F=new Ht(w(t.Ca,t,t.a),t.O)),Qt(t.J,t.a,"readystatechange",t.Wa),e=t.B?F(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),te(1),function(t,e,n,r,i,o){t.info((function(){if(t.a)if(o)for(var s="",a=o.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");s=2<=h.length&&"type"==h[1]?s+(l+"=")+c+"&":s+(l+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s}))}(t.c,t.m,t.l,t.f,t.T,t.j)}function be(t,e,n){for(var r=!0;!t.A&&t.D<n.length;){var i=we(t,n);if(i==ge){4==e&&(t.h=4,ne(14),r=!1),$t(t.c,t.f,null,"[Incomplete Response]");break}if(i==ye){t.h=4,ne(15),$t(t.c,t.f,n,"[Invalid Chunk]"),r=!1;break}$t(t.c,t.f,i,null),Oe(t,i)}4==e&&0==n.length&&(t.h=1,ne(16),r=!1),t.b=t.b&&r,r?0<n.length&&!t.W&&(t.W=!0,(e=t.g).a==t&&e.V&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),Vn(e),e.F=!0)):($t(t.c,t.f,n,"[Invalid Chunked Response]"),Te(t),Se(t))}function we(t,e){var n=t.D,r=e.indexOf("\n",n);return-1==r?ge:(n=Number(e.substring(n,r)),isNaN(n)?ye:(r+=1)+n>e.length?ge:(e=e.substr(r,n),t.D=r+n,e))}function Ce(t){t.U=k()+t.P,ke(t,t.P)}function ke(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=ie(w(t.Ua,t),e)}function Ee(t){t.o&&(f.clearTimeout(t.o),t.o=null)}function Se(t){0==t.g.v||t.A||qn(t.g,t)}function Te(t){Ee(t);var e=t.F;e&&"function"==typeof e.ja&&e.ja(),t.F=null,Ut(t.R),Kt(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function Oe(t,e){try{var n=t.g;if(0!=n.v&&(n.a==t||an(n.b,t)))if(n.I=t.N,!t.C&&an(n.b,t)&&3==n.v){try{var r=n.ka.a.parse(e)}catch(y){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.j){if(n.a){if(!(n.a.u+3e3<t.u))break t;Bn(n),Pn(n)}Mn(n),ne(18)}}else n.oa=i[1],0<n.oa-n.P&&37500>i[2]&&n.H&&0==n.o&&!n.m&&(n.m=ie(w(n.Ra,n),6e3));if(1>=sn(n.b)&&n.ea){try{n.ea()}catch(y){}n.ea=void 0}}else Wn(n,11)}else if((t.C||n.a==t)&&Bn(n),!A(e))for(e=r=n.ka.a.parse(e),r=0;r<e.length;r++)if(n.P=(i=e[r])[0],i=i[1],2==n.v)if("c"==i[0]){n.J=i[1],n.ga=i[2];var o=i[3];null!=o&&(n.ha=o,n.c.info("VER="+n.ha));var s=i[4];null!=s&&(n.pa=s,n.c.info("SVER="+n.pa));var a=i[5];if(null!=a&&"number"==typeof a&&0<a){var u=1.5*a;n.D=u,n.c.info("backChannelRequestTimeoutMs_="+u)}u=n;var c=t.a;if(c){var l=c.a?c.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=u.b;!h.a&&(N(l,"spdy")||N(l,"quic")||N(l,"h2"))&&(h.f=h.g,h.a=new Set,h.b&&(un(h,h.b),h.b=null))}if(u.A){var f=c.a?c.a.getResponseHeader("X-HTTP-Session-Id"):null;f&&(u.na=f,Me(u.B,u.A,f))}}n.v=3,n.f&&n.f.ta(),n.V&&(n.N=k()-t.u,n.c.info("Handshake RTT: "+n.N+"ms"));var d=t;if((u=n).la=Qn(u,u.C?u.ga:null,u.fa),d.C){cn(u.b,d);var p=d,v=u.D;v&&p.setTimeout(v),p.o&&(Ee(p),Ce(p)),u.a=d}else Fn(u);0<n.g.length&&Dn(n)}else"stop"!=i[0]&&"close"!=i[0]||Wn(n,7);else 3==n.v&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?Wn(n,7):An(n):"noop"!=i[0]&&n.f&&n.f.sa(i),n.o=0);te(4)}catch(y){}}function Ie(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(v(t)||"string"==typeof t)O(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(v(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"==typeof t)return t.split("");if(v(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function xe(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof xe)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Ae(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Pe(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)Pe(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function Pe(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(c=pe.prototype).setTimeout=function(t){this.P=t},c.Wa=function(t){t=t.target;var e=this.F;e&&3==Tn(t)?e.f():this.Ca(t)},c.Ca=function(t){try{if(t==this.a)t:{var e=Tn(this.a),n=this.a.ua(),r=this.a.X();if(!(3>e||3==e&&!Q&&!this.a.$())){this.A||4!=e||7==n||te(8==n||0>=r?3:2),Ee(this);var i=this.a.X();this.N=i;var o=this.a.$();if(this.b=200==i,function(t,e,n,r,i,o,s){t.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s}))}(this.c,this.m,this.l,this.f,this.T,e,i),this.b){if(this.V&&!this.C){e:{if(this.a){var s,a=this.a;if((s=a.a?a.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!A(s)){var u=s;break e}}u=null}if(!u){this.b=!1,this.h=3,ne(12),Te(this),Se(this);break t}$t(this.c,this.f,u,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,Oe(this,u)}this.I?(be(this,e,o),Q&&this.b&&3==e&&(Qt(this.J,this.R,"tick",this.Va),this.R.start())):($t(this.c,this.f,o,null),Oe(this,o)),4==e&&Te(this),this.b&&!this.A&&(4==e?qn(this.g,this):(this.b=!1,Ce(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.h=3,ne(12)):(this.h=0,ne(13)),Te(this),Se(this)}}}catch(c){}},c.Va=function(){if(this.a){var t=Tn(this.a),e=this.a.$();this.D<e.length&&(Ee(this),be(this,t,e),this.b&&4!=t&&Ce(this))}},c.cancel=function(){this.A=!0,Te(this)},c.Ua=function(){this.o=null;var t=k();0<=t-this.U?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.c,this.l),2!=this.H&&(te(3),ne(17)),Te(this),this.h=2,Se(this)):ke(this,this.U-t)},(c=xe.prototype).K=function(){Ae(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},c.L=function(){return Ae(this),this.a.concat()},c.get=function(t,e){return Pe(this.b,t)?this.b[t]:e},c.set=function(t,e){Pe(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},c.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Re=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Ne(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof Ne){this.a=void 0!==e?e:t.a,ze(this,t.f),this.j=t.j,je(this,t.c),Le(this,t.h),this.g=t.g,e=t.b;var n=new Ye;n.c=e.c,e.a&&(n.a=new xe(e.a),n.b=e.b),Fe(this,n),this.i=t.i}else t&&(n=String(t).match(Re))?(this.a=!!e,ze(this,n[1]||"",!0),this.j=Ue(n[2]||""),je(this,n[3]||"",!0),Le(this,n[4]),this.g=Ue(n[5]||"",!0),Fe(this,n[6]||"",!0),this.i=Ue(n[7]||"")):(this.a=!!e,this.b=new Ye(null,this.a))}function De(t){return new Ne(t)}function ze(t,e,n){t.f=n?Ue(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function je(t,e,n){t.c=n?Ue(e,!0):e}function Le(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function Fe(t,e,n){e instanceof Ye?(t.b=e,function(t,e){e&&!t.f&&($e(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(Xe(this,e),Je(this,n,t))}),t)),t.f=e}(t.b,t.a)):(n||(e=Be(e,Qe)),t.b=new Ye(e,t.a))}function Me(t,e,n){t.b.set(e,n)}function Ve(t){return Me(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^k()).toString(36)),t}function Ue(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Be(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,qe),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function qe(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Ne.prototype.toString=function(){var t=[],e=this.f;e&&t.push(Be(e,He,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(Be(e,He,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(Be(n,"/"==n.charAt(0)?Ge:We,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",Be(n,Ke)),t.join("")};var He=/[#\/\?@]/g,We=/[#\?:]/g,Ge=/[#\?]/g,Qe=/[#\?@]/g,Ke=/#/g;function Ye(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function $e(t){t.a||(t.a=new xe,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function Xe(t,e){$e(t),e=tn(t,e),Pe(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Pe((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Ae(t)))}function Ze(t,e){return $e(t),e=tn(t,e),Pe(t.a.b,e)}function Je(t,e,n){Xe(t,e),0<n.length&&(t.c=null,t.a.set(tn(t,e),x(n)),t.b+=n.length)}function tn(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function en(t,e){this.b=t,this.a=e}function nn(t){this.g=t||rn,t=f.PerformanceNavigationTiming?0<(t=f.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(f.ia&&f.ia.ya&&f.ia.ya()&&f.ia.ya().qb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}(c=Ye.prototype).add=function(t,e){$e(this),this.c=null,t=tn(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},c.forEach=function(t,e){$e(this),this.a.forEach((function(n,r){O(n,(function(n){t.call(e,n,r,this)}),this)}),this)},c.L=function(){$e(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},c.K=function(t){$e(this);var e=[];if("string"==typeof t)Ze(this,t)&&(e=I(e,this.a.get(tn(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=I(e,t[n])}return e},c.set=function(t,e){return $e(this),this.c=null,Ze(this,t=tn(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},c.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},c.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.K(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var rn=10;function on(t){return!!t.b||!!t.a&&t.a.size>=t.f}function sn(t){return t.b?1:t.a?t.a.size:0}function an(t,e){return t.b?t.b==e:!!t.a&&t.a.has(e)}function un(t,e){t.a?t.a.add(e):t.b=e}function cn(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function ln(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null!=t.a&&0!==t.a.size){var r=t.c;try{for(var i=u(t.a.values()),o=i.next();!o.done;o=i.next())r=r.concat(o.value.s)}catch(s){e={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return x(t.c)}function hn(){}function fn(){this.a=new hn}function dn(t,e,n){var r=n||"";try{Ie(t,(function(t,n){var i=t;y(t)&&(i=xt(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function pn(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(o){}}nn.prototype.cancel=function(){var t,e;if(this.c=ln(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=u(this.a.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(i){t={error:i}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},hn.prototype.stringify=function(t){return f.JSON.stringify(t,void 0)},hn.prototype.parse=function(t){return f.JSON.parse(t,void 0)};var vn=f.JSON.parse;function yn(t){Ot.call(this),this.headers=new xe,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=gn,this.D=this.F=!1}E(yn,Ot);var gn="",mn=/^https?$/i,_n=["POST","PUT"];function bn(t){return"content-type"==t.toLowerCase()}function wn(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,Cn(t),En(t)}function Cn(t){t.u||(t.u=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function kn(t){if(t.b&&void 0!==h&&(!t.s[1]||4!=Tn(t)||2!=t.X()))if(t.l&&4==Tn(t))Bt(t.za,0,t);else if(t.dispatchEvent("readystatechange"),4==Tn(t)){t.b=!1;try{var e,n=t.X();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.B).match(Re)[1]||null;if(!o&&f.self&&f.self.location){var s=f.self.location.protocol;o=s.substr(0,s.length-1)}i=!mn.test(o?o.toLowerCase():"")}e=i}if(e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{t.h=6;try{var a=2<Tn(t)?t.a.statusText:""}catch(u){a=""}t.f=a+" ["+t.X()+"]",Cn(t)}}finally{En(t)}}}function En(t,e){if(t.a){Sn(t);var n=t.a,r=t.s[0]?d:null;t.a=null,t.s=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(i){}}}function Sn(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(f.clearTimeout(t.m),t.m=null)}function Tn(t){return t.a?t.a.readyState:0}function On(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return L(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):Me(t,e,n))}function In(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function xn(t){this.pa=0,this.g=[],this.c=new Yt,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.W=this.i=this.O=this.l=null,this.La=this.R=0,this.Ia=In("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.T=!0,this.I=this.oa=this.P=-1,this.U=this.o=this.u=0,this.Fa=In("baseRetryDelayMs",5e3,t),this.Ma=In("retryDelaySeedMs",1e4,t),this.Ja=In("forwardChannelMaxRetries",2,t),this.ma=In("forwardChannelRequestTimeoutMs",2e4,t),this.Ka=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new nn(t&&t.concurrentRequestLimit),this.ka=new fn,this.da=t&&t.fastHandshake||!1,this.Ga=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.T=!1),this.V=!this.da&&this.T&&t&&t.c||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null}function An(t){if(Rn(t),3==t.v){var e=t.R++,n=De(t.B);Me(n,"SID",t.J),Me(n,"RID",e),Me(n,"TYPE","terminate"),jn(t,n),(e=new pe(t,t.c,e,void 0)).H=2,e.i=Ve(De(n)),n=!1,f.navigator&&f.navigator.sendBeacon&&(n=f.navigator.sendBeacon(e.i.toString(),"")),!n&&f.Image&&((new Image).src=e.i,n=!0),n||(e.a=Kn(e.g,null),e.a.ba(e.i)),e.u=k(),Ce(e)}Gn(t)}function Pn(t){t.a&&(Vn(t),t.a.cancel(),t.a=null)}function Rn(t){Pn(t),t.j&&(f.clearTimeout(t.j),t.j=null),Bn(t),t.b.cancel(),t.h&&("number"==typeof t.h&&f.clearTimeout(t.h),t.h=null)}function Nn(t,e){t.g.push(new en(t.La++,e)),3==t.v&&Dn(t)}function Dn(t){on(t.b)||t.h||(t.h=!0,jt(t.Ba,t),t.u=0)}function zn(t,e){var n;n=e?e.f:t.R++;var r=De(t.B);Me(r,"SID",t.J),Me(r,"RID",n),Me(r,"AID",t.P),jn(t,r),t.i&&t.l&&On(r,t.i,t.l),n=new pe(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=Ln(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),un(t.b,n),me(n,r,e)}function jn(t,e){t.f&&Ie({},(function(t,n){Me(e,n,t)}))}function Ln(t,e,n){n=Math.min(t.g.length,n);var r=t.f?w(t.f.Ha,t.f,t):null;t:for(var i=t.g,o=-1;;){var s=["count="+n];-1==o?0<n?s.push("ofs="+(o=i[0].b)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var c=i[u].b,l=i[u].a;if(0>(c-=o))o=Math.max(0,i[u].b-100),a=!1;else try{dn(l,s,"req"+c+"_")}catch(xr){r&&r(l)}}if(a){r=s.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function Fn(t){t.a||t.j||(t.U=1,jt(t.Aa,t),t.o=0)}function Mn(t){return!(t.a||t.j||3<=t.o||(t.U++,t.j=ie(w(t.Aa,t),Hn(t,t.o)),t.o++,0))}function Vn(t){null!=t.s&&(f.clearTimeout(t.s),t.s=null)}function Un(t){t.a=new pe(t,t.c,"rpc",t.U),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=De(t.la);Me(e,"RID","rpc"),Me(e,"SID",t.J),Me(e,"CI",t.H?"0":"1"),Me(e,"AID",t.P),jn(t,e),Me(e,"TYPE","xmlhttp"),t.i&&t.l&&On(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=Ve(De(e)),n.j=null,n.I=!0,_e(n,t)}function Bn(t){null!=t.m&&(f.clearTimeout(t.m),t.m=null)}function qn(t,e){var n=null;if(t.a==e){Bn(t),Vn(t),t.a=null;var r=2}else{if(!an(t.b,e))return;n=e.s,cn(t.b,e),r=1}if(t.I=e.N,0!=t.v)if(e.b)if(1==r){n=e.j?e.j.length:0,e=k()-e.u;var i=t.u;(r=Zt()).dispatchEvent(new re(r,n,e,i)),Dn(t)}else Fn(t);else if(3==(i=e.h)||0==i&&0<t.I||!(1==r&&function(t,e){return!(sn(t.b)>=t.b.f-(t.h?1:0)||(t.h?(t.g=e.s.concat(t.g),0):1==t.v||2==t.v||t.u>=(t.Ia?0:t.Ja)||(t.h=ie(w(t.Ba,t,e),Hn(t,t.u)),t.u++,0)))}(t,e)||2==r&&Mn(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:Wn(t,5);break;case 4:Wn(t,10);break;case 3:Wn(t,6);break;default:Wn(t,2)}}function Hn(t,e){var n=t.Fa+Math.floor(Math.random()*t.Ma);return t.f||(n*=2),n*e}function Wn(t,e){if(t.c.info("Error code "+e),2==e){var n=null;t.f&&(n=null);var r=w(t.Xa,t);n||(n=new Ne("//www.google.com/images/cleardot.gif"),f.location&&"http"==f.location.protocol||ze(n,"https"),Ve(n)),function(t,e){var n=new Yt;if(f.Image){var r=new Image;r.onload=C(pn,n,r,"TestLoadImage: loaded",!0,e),r.onerror=C(pn,n,r,"TestLoadImage: error",!1,e),r.onabort=C(pn,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=C(pn,n,r,"TestLoadImage: timeout",!1,e),f.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=t}else e(!1)}(n.toString(),r)}else ne(2);t.v=0,t.f&&t.f.ra(e),Gn(t),Rn(t)}function Gn(t){t.v=0,t.I=-1,t.f&&(0==ln(t.b).length&&0==t.g.length||(t.b.c.length=0,x(t.g),t.g.length=0),t.f.qa())}function Qn(t,e,n){var r=function(t){return t instanceof Ne?De(t):new Ne(t,void 0)}(n);if(""!=r.c)e&&je(r,e+"."+r.c),Le(r,r.h);else{var i=f.location;r=function(t,e,n,r){var i=new Ne(null,void 0);return t&&ze(i,t),e&&je(i,e),n&&Le(i,n),r&&(i.g=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.W&&L(t.W,(function(t,e){Me(r,e,t)})),n=t.na,(e=t.A)&&n&&Me(r,e,n),Me(r,"VER",t.ha),jn(t,r),r}function Kn(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new yn(t.Ka)).F=t.C,e}function Yn(){}function $n(){if(W&&!(10<=Number(nt)))throw Error("Environmental error: no available transport.")}function Xn(t,e){Ot.call(this),this.a=new xn(e),this.l=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!A(t)&&(this.a.i=t),this.h=e&&e.supportsCrossDomainXhr||!1,this.g=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!A(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&e in(t=this.b)&&delete t[e]),this.f=new tr(this)}function Zn(t){he.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function Jn(){fe.call(this),this.status=1}function tr(t){this.a=t}(c=yn.prototype).ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=function(t){var e;return(e=t.a)||(e=t.a={}),e}(this.H?this.H:ce),this.a.onreadystatechange=w(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(o){return void wn(this,o)}t=n||"";var i=new xe(this.headers);r&&Ie(r,(function(t,e){i.set(e,t)})),r=function(t){t:{for(var e=bn,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.L()),n=f.FormData&&t instanceof f.FormData,!(0<=T(_n,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(t,e){this.a.setRequestHeader(e,t)}),this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{Sn(this),0<this.o&&((this.D=function(t){return W&&et(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=w(this.xa,this)):this.m=Bt(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(o){wn(this,o)}},c.xa=function(){void 0!==h&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,this.dispatchEvent("timeout"),this.abort(8))},c.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),En(this))},c.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),En(this,!0)),yn.S.G.call(this)},c.za=function(){this.j||(this.A||this.l||this.g?kn(this):this.Ta())},c.Ta=function(){kn(this)},c.X=function(){try{return 2<Tn(this)?this.a.status:-1}catch(q){return-1}},c.$=function(){try{return this.a?this.a.responseText:""}catch(q){return""}},c.Na=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),vn(e)}},c.ua=function(){return this.h},c.Qa=function(){return"string"==typeof this.f?this.f:String(this.f)},(c=xn.prototype).ha=8,c.v=1,c.Ba=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new pe(this,this.c,t,void 0),r=this.l;if(this.O&&(r?V(r=F(r),this.O):r=this.O),null===this.i&&(n.B=r),this.da)t:{for(var i=e=0;i<this.g.length;i++){var o=this.g[i];if(void 0===(o="__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=Ln(this,n,e),Me(i=De(this.B),"RID",t),Me(i,"CVER",22),this.A&&Me(i,"X-HTTP-Session-Id",this.A),jn(this,i),this.i&&r&&On(i,this.i,r),un(this.b,n),this.Ga&&Me(i,"TYPE","init"),this.da?(Me(i,"$req",e),Me(i,"SID","null"),n.V=!0,me(n,i,null)):me(n,i,e),this.v=2}}else 3==this.v&&(t?zn(this,t):0==this.g.length||on(this.b)||zn(this))},c.Aa=function(){if(this.j=null,Un(this),this.V&&!(this.F||null==this.a||0>=this.N)){var t=2*this.N;this.c.info("BP detection timer enabled: "+t),this.s=ie(w(this.Sa,this),t)}},c.Sa=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,Pn(this),Un(this))},c.Ra=function(){null!=this.m&&(this.m=null,Pn(this),Mn(this),ne(19))},c.Xa=function(t){t?(this.c.info("Successfully pinged google.com"),ne(2)):(this.c.info("Failed to ping google.com"),ne(1))},(c=Yn.prototype).ta=function(){},c.sa=function(){},c.ra=function(){},c.qa=function(){},c.Ha=function(){},$n.prototype.a=function(t,e){return new Xn(t,e)},E(Xn,Ot),(c=Xn.prototype).addEventListener=function(t,e,n,r){Xn.S.addEventListener.call(this,t,e,n,r)},c.removeEventListener=function(t,e,n,r){Xn.S.removeEventListener.call(this,t,e,n,r)},c.Oa=function(){this.a.f=this.f,this.h&&(this.a.C=!0);var t=this.a,e=this.l,n=this.b||void 0;ne(0),t.fa=e,t.W=n||{},t.H=t.T,t.B=Qn(t,null,t.fa),Dn(t)},c.close=function(){An(this.a)},c.Pa=function(t){if("string"==typeof t){var e={};e.__data__=t,Nn(this.a,e)}else this.g?((e={}).__data__=xt(t),Nn(this.a,e)):Nn(this.a,t)},c.G=function(){this.a.f=null,delete this.f,An(this.a),delete this.a,Xn.S.G.call(this)},E(Zn,he),E(Jn,fe),E(tr,Yn),tr.prototype.ta=function(){this.a.dispatchEvent("a")},tr.prototype.sa=function(t){this.a.dispatchEvent(new Zn(t))},tr.prototype.ra=function(t){this.a.dispatchEvent(new Jn(t))},tr.prototype.qa=function(){this.a.dispatchEvent("b")},$n.prototype.createWebChannel=$n.prototype.a,Xn.prototype.send=Xn.prototype.Pa,Xn.prototype.open=Xn.prototype.Oa,Xn.prototype.close=Xn.prototype.close,oe.NO_ERROR=0,oe.TIMEOUT=8,oe.HTTP_ERROR=6,se.COMPLETE="complete",ue.EventType=le,le.OPEN="a",le.CLOSE="b",le.ERROR="c",le.MESSAGE="d",Ot.prototype.listen=Ot.prototype.va,yn.prototype.listenOnce=yn.prototype.wa,yn.prototype.getLastError=yn.prototype.Qa,yn.prototype.getLastErrorCode=yn.prototype.ua,yn.prototype.getStatus=yn.prototype.X,yn.prototype.getResponseJson=yn.prototype.Na,yn.prototype.getResponseText=yn.prototype.$,yn.prototype.send=yn.prototype.ba;var er=oe,nr=se,rr=ue,ir=yn,or=n("/6Yf"),sr={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},ar=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return Object(r.d)(e,t),e}(Error),ur=new o.b("@firebase/firestore");function cr(){return ur.logLevel}function lr(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(ur.logLevel<=o.a.DEBUG){var i=e.map(dr);ur.debug.apply(ur,Object(r.j)(["Firestore (8.0.1): "+t],i))}}function hr(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(ur.logLevel<=o.a.ERROR){var i=e.map(dr);ur.error.apply(ur,Object(r.j)(["Firestore (8.0.1): "+t],i))}}function fr(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(ur.logLevel<=o.a.WARN){var i=e.map(dr);ur.warn.apply(ur,Object(r.j)(["Firestore (8.0.1): "+t],i))}}function dr(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch(e){return t}}function pr(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.0.1) INTERNAL ASSERTION FAILED: "+t;throw hr(e),new Error(e)}function vr(t,e){t||pr()}function yr(t,e){return t}function gr(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var mr=function(){function t(){}return t.t=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=gr(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function _r(t,e){return t<e?-1:t>e?1:0}function br(t,e,n){return t.length===e.length&&t.every((function(t,r){return n(t,e[r])}))}function wr(t){return t+"\0"}var Cr=function(){function t(t){this.i=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return btoa(this.i)},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.i)},t.prototype.o=function(){return 2*this.i.length},t.prototype.u=function(t){return _r(this.i,t.i)},t.prototype.isEqual=function(t){return this.i===t.i},t}();Cr.h=new Cr("");var kr=function(){function t(t){this.l=t}return t.fromBase64String=function(e){try{return new t(Cr.fromBase64String(e))}catch(e){throw new ar(sr.INVALID_ARGUMENT,"Failed to construct Bytes from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(Cr.fromUint8Array(e))},t.prototype.toBase64=function(){return this.l.toBase64()},t.prototype.toUint8Array=function(){return this.l.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this.l.isEqual(t.l)},t}();function Er(){if("undefined"==typeof Uint8Array)throw new ar(sr.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function Sr(){if("undefined"==typeof atob)throw new ar(sr.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var Tr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r.d)(e,t),e.fromBase64String=function(t){Sr();try{return new e(Cr.fromBase64String(t))}catch(t){throw new ar(sr.INVALID_ARGUMENT,"Failed to construct Blob from Base64 string: "+t)}},e.fromUint8Array=function(t){return Er(),new e(Cr.fromUint8Array(t))},e.prototype.toBase64=function(){return Sr(),t.prototype.toBase64.call(this)},e.prototype.toUint8Array=function(){return Er(),t.prototype.toUint8Array.call(this)},e.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},e}(kr),Or=function(t,e,n,r,i,o){this._=t,this.persistenceKey=e,this.host=n,this.ssl=r,this.forceLongPolling=i,this.T=o},Ir=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"I",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t.prototype.u=function(t){return _r(this.projectId,t.projectId)||_r(this.database,t.database)},t}();function xr(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ar(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Pr(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Rr=function(){function t(t,e){this.m=t,this.A=e,this.R={}}return t.prototype.get=function(t){var e=this.m(t),n=this.R[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[1];if(this.A(o[0],t))return s}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.m(t),r=this.R[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.A(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.R[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.m(t),n=this.R[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.A(n[r][0],t))return 1===n.length?delete this.R[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){Ar(this.R,(function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];t(o[0],o[1])}}))},t.prototype.P=function(){return Pr(this.R)},t}(),Nr=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new ar(sr.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new ar(sr.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new ar(sr.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new ar(sr.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,1e6*(e-1e3*n))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype.g=function(t){return this.seconds===t.seconds?_r(this.nanoseconds,t.nanoseconds):_r(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),Dr=function(){function t(t){this.timestamp=t}return t.V=function(e){return new t(e)},t.min=function(){return new t(new Nr(0,0))},t.prototype.u=function(t){return this.timestamp.g(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.p=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.v=function(){return this.timestamp},t}(),zr=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&pr(),void 0===n?n=t.length-e:n>t.length-e&&pr(),this.segments=t,this.offset=e,this.S=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.S},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.D(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach((function(t){n.push(t)})):n.push(e),this.C(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.N=function(t){return this.C(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)},t.prototype.F=function(){return this.C(this.segments,this.offset,this.length-1)},t.prototype.O=function(){return this.segments[this.offset]},t.prototype.k=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.P=function(){return 0===this.length},t.prototype.M=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.$=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.L=function(){return this.segments.slice(this.offset,this.limit())},t.D=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),jr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r.d)(e,t),e.prototype.C=function(t,n,r){return new e(t,n,r)},e.prototype.B=function(){return this.L().join("/")},e.prototype.toString=function(){return this.B()},e.q=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i];if(s.indexOf("//")>=0)throw new ar(sr.INVALID_ARGUMENT,"Invalid segment ("+s+"). Paths must not contain // in them.");r.push.apply(r,s.split("/").filter((function(t){return t.length>0})))}return new e(r)},e.U=function(){return new e([])},e}(zr),Lr=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Fr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r.d)(e,t),e.prototype.C=function(t,n,r){return new e(t,n,r)},e.K=function(t){return Lr.test(t)},e.prototype.B=function(){return this.L().map((function(t){return t=t.replace("\\","\\\\").replace("`","\\`"),e.K(t)||(t="`"+t+"`"),t})).join(".")},e.prototype.toString=function(){return this.B()},e.prototype.W=function(){return 1===this.length&&"__name__"===this.get(0)},e.j=function(){return new e(["__name__"])},e.G=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new ar(sr.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<t.length;){var a=t[i];if("\\"===a){if(i+1===t.length)throw new ar(sr.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new ar(sr.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new ar(sr.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.U=function(){return new e([])},e}(zr),Mr=function(){function t(t){this.path=t}return t.H=function(e){return new t(jr.q(e))},t.Y=function(e){return new t(jr.q(e).N(5))},t.prototype.J=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===jr.D(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.D=function(t,e){return jr.D(t.path,e.path)},t.X=function(t){return t.length%2==0},t.Z=function(e){return new t(new jr(e.slice()))},t}();function Vr(t){return null==t}function Ur(t){return 0===t&&1/t==-1/0}function Br(t){return"number"==typeof t&&Number.isInteger(t)&&!Ur(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var qr=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.tt=null};function Hr(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new qr(t,e,n,r,i,o,s)}function Wr(t){var e=yr(t);if(null===e.tt){var n=e.path.B();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((function(t){return function(t){return t.field.B()+t.op.toString()+zi(t.value)}(t)})).join(","),n+="|ob:",n+=e.orderBy.map((function(t){return(e=t).field.B()+e.dir;var e})).join(","),Vr(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=Ls(e.startAt)),e.endAt&&(n+="|ub:",n+=Ls(e.endAt)),e.tt=n}return e.tt}function Gr(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!Bs(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if((i=t.filters[r]).op!==(o=e.filters[r]).op||!i.field.isEqual(o.field)||!Pi(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Ms(t.startAt,e.startAt)&&Ms(t.endAt,e.endAt)}function Qr(t){return Mr.X(t.path)&&null===t.collectionGroup&&0===t.filters.length}var Kr,Yr,$r=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=Dr.min()),void 0===o&&(o=Dr.min()),void 0===s&&(s=Cr.h),this.target=t,this.targetId=e,this.et=n,this.sequenceNumber=r,this.nt=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.st=function(e){return new t(this.target,this.targetId,this.et,e,this.nt,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.it=function(e,n){return new t(this.target,this.targetId,this.et,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.rt=function(e){return new t(this.target,this.targetId,this.et,this.sequenceNumber,this.nt,e,this.resumeToken)},t}(),Xr=function(t){this.count=t};function Zr(t){switch(t){case sr.OK:return pr();case sr.CANCELLED:case sr.UNKNOWN:case sr.DEADLINE_EXCEEDED:case sr.RESOURCE_EXHAUSTED:case sr.INTERNAL:case sr.UNAVAILABLE:case sr.UNAUTHENTICATED:return!1;case sr.INVALID_ARGUMENT:case sr.NOT_FOUND:case sr.ALREADY_EXISTS:case sr.PERMISSION_DENIED:case sr.FAILED_PRECONDITION:case sr.ABORTED:case sr.OUT_OF_RANGE:case sr.UNIMPLEMENTED:case sr.DATA_LOSS:return!0;default:return pr()}}function Jr(t){if(void 0===t)return hr("GRPC error has no .code"),sr.UNKNOWN;switch(t){case Kr.OK:return sr.OK;case Kr.CANCELLED:return sr.CANCELLED;case Kr.UNKNOWN:return sr.UNKNOWN;case Kr.DEADLINE_EXCEEDED:return sr.DEADLINE_EXCEEDED;case Kr.RESOURCE_EXHAUSTED:return sr.RESOURCE_EXHAUSTED;case Kr.INTERNAL:return sr.INTERNAL;case Kr.UNAVAILABLE:return sr.UNAVAILABLE;case Kr.UNAUTHENTICATED:return sr.UNAUTHENTICATED;case Kr.INVALID_ARGUMENT:return sr.INVALID_ARGUMENT;case Kr.NOT_FOUND:return sr.NOT_FOUND;case Kr.ALREADY_EXISTS:return sr.ALREADY_EXISTS;case Kr.PERMISSION_DENIED:return sr.PERMISSION_DENIED;case Kr.FAILED_PRECONDITION:return sr.FAILED_PRECONDITION;case Kr.ABORTED:return sr.ABORTED;case Kr.OUT_OF_RANGE:return sr.OUT_OF_RANGE;case Kr.UNIMPLEMENTED:return sr.UNIMPLEMENTED;case Kr.DATA_LOSS:return sr.DATA_LOSS;default:return pr()}}(Yr=Kr||(Kr={}))[Yr.OK=0]="OK",Yr[Yr.CANCELLED=1]="CANCELLED",Yr[Yr.UNKNOWN=2]="UNKNOWN",Yr[Yr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Yr[Yr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Yr[Yr.NOT_FOUND=5]="NOT_FOUND",Yr[Yr.ALREADY_EXISTS=6]="ALREADY_EXISTS",Yr[Yr.PERMISSION_DENIED=7]="PERMISSION_DENIED",Yr[Yr.UNAUTHENTICATED=16]="UNAUTHENTICATED",Yr[Yr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Yr[Yr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Yr[Yr.ABORTED=10]="ABORTED",Yr[Yr.OUT_OF_RANGE=11]="OUT_OF_RANGE",Yr[Yr.UNIMPLEMENTED=12]="UNIMPLEMENTED",Yr[Yr.INTERNAL=13]="INTERNAL",Yr[Yr.UNAVAILABLE=14]="UNAVAILABLE",Yr[Yr.DATA_LOSS=15]="DATA_LOSS";var ti=function(){function t(t,e){this.D=t,this.root=e||ni.EMPTY}return t.prototype.ot=function(e,n){return new t(this.D,this.root.ot(e,n,this.D).copy(null,null,ni.at,null,null))},t.prototype.remove=function(e){return new t(this.D,this.root.remove(e,this.D).copy(null,null,ni.at,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.P();){var n=this.D(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.P();){var r=this.D(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.P=function(){return this.root.P()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.ct=function(){return this.root.ct()},t.prototype.ut=function(){return this.root.ut()},t.prototype.ht=function(t){return this.root.ht(t)},t.prototype.forEach=function(t){this.ht((function(e,n){return t(e,n),!1}))},t.prototype.toString=function(){var t=[];return this.ht((function(e,n){return t.push(e+":"+n),!1})),"{"+t.join(", ")+"}"},t.prototype.lt=function(t){return this.root.lt(t)},t.prototype._t=function(){return new ei(this.root,null,this.D,!1)},t.prototype.ft=function(t){return new ei(this.root,t,this.D,!1)},t.prototype.dt=function(){return new ei(this.root,null,this.D,!0)},t.prototype.wt=function(t){return new ei(this.root,t,this.D,!0)},t}(),ei=function(){function t(t,e,n,r){this.Et=r,this.Tt=[];for(var i=1;!t.P();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.Et?t.left:t.right;else{if(0===i){this.Tt.push(t);break}this.Tt.push(t),t=this.Et?t.right:t.left}}return t.prototype.It=function(){var t=this.Tt.pop(),e={key:t.key,value:t.value};if(this.Et)for(t=t.left;!t.P();)this.Tt.push(t),t=t.right;else for(t=t.right;!t.P();)this.Tt.push(t),t=t.left;return e},t.prototype.At=function(){return this.Tt.length>0},t.prototype.Rt=function(){if(0===this.Tt.length)return null;var t=this.Tt[this.Tt.length-1];return{key:t.key,value:t.value}},t}(),ni=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.P=function(){return!1},t.prototype.ht=function(t){return this.left.ht(t)||t(this.key,this.value)||this.right.ht(t)},t.prototype.lt=function(t){return this.right.lt(t)||t(this.key,this.value)||this.left.lt(t)},t.prototype.min=function(){return this.left.P()?this:this.left.min()},t.prototype.ct=function(){return this.min().key},t.prototype.ut=function(){return this.right.P()?this.key:this.right.ut()},t.prototype.ot=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.ot(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.ot(t,e,n))).Pt()},t.prototype.gt=function(){if(this.left.P())return t.EMPTY;var e=this;return e.left.yt()||e.left.left.yt()||(e=e.Vt()),(e=e.copy(null,null,null,e.left.gt(),null)).Pt()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.P()||i.left.yt()||i.left.left.yt()||(i=i.Vt()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.yt()&&(i=i.bt()),i.right.P()||i.right.yt()||i.right.left.yt()||(i=i.vt()),0===n(e,i.key)){if(i.right.P())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.gt())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.Pt()},t.prototype.yt=function(){return this.color},t.prototype.Pt=function(){var t=this;return t.right.yt()&&!t.left.yt()&&(t=t.St()),t.left.yt()&&t.left.left.yt()&&(t=t.bt()),t.left.yt()&&t.right.yt()&&(t=t.Dt()),t},t.prototype.Vt=function(){var t=this.Dt();return t.right.left.yt()&&(t=(t=(t=t.copy(null,null,null,null,t.right.bt())).St()).Dt()),t},t.prototype.vt=function(){var t=this.Dt();return t.left.left.yt()&&(t=(t=t.bt()).Dt()),t},t.prototype.St=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.bt=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.Dt=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.Ct=function(){var t=this.Nt();return Math.pow(2,t)<=this.size+1},t.prototype.Nt=function(){if(this.yt()&&this.left.yt())throw pr();if(this.right.yt())throw pr();var t=this.left.Nt();if(t!==this.right.Nt())throw pr();return t+(this.yt()?0:1)},t}();ni.EMPTY=null,ni.RED=!0,ni.at=!1,ni.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw pr()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw pr()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw pr()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw pr()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw pr()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.ot=function(t,e,n){return new ni(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.P=function(){return!0},t.prototype.ht=function(t){return!1},t.prototype.lt=function(t){return!1},t.prototype.ct=function(){return null},t.prototype.ut=function(){return null},t.prototype.yt=function(){return!1},t.prototype.Ct=function(){return!0},t.prototype.Nt=function(){return 0},t}());var ri=function(){function t(t){this.D=t,this.data=new ti(this.D)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.ct()},t.prototype.last=function(){return this.data.ut()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.ht((function(e,n){return t(e),!1}))},t.prototype.xt=function(t,e){for(var n=this.data.ft(t[0]);n.At();){var r=n.It();if(this.D(r.key,t[1])>=0)return;e(r.key)}},t.prototype.Ft=function(t,e){var n;for(n=void 0!==e?this.data.ft(e):this.data._t();n.At();)if(!t(n.It().key))return},t.prototype.Ot=function(t){var e=this.data.ft(t);return e.At()?e.It().key:null},t.prototype._t=function(){return new ii(this.data._t())},t.prototype.ft=function(t){return new ii(this.data.ft(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).ot(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.P=function(){return this.data.P()},t.prototype.kt=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach((function(t){e=e.add(t)})),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data._t(),r=e.data._t();n.At();){var i=n.It().key,o=r.It().key;if(0!==this.D(i,o))return!1}return!0},t.prototype.L=function(){var t=[];return this.forEach((function(e){t.push(e)})),t},t.prototype.toString=function(){var t=[];return this.forEach((function(e){return t.push(e)})),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.D);return n.data=e,n},t}(),ii=function(){function t(t){this.Mt=t}return t.prototype.It=function(){return this.Mt.It().key},t.prototype.At=function(){return this.Mt.At()},t}(),oi=new ti(Mr.D);function si(){return oi}function ai(){return si()}var ui=new ti(Mr.D);function ci(){return ui}var li=new ti(Mr.D),hi=new ri(Mr.D);function fi(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=hi,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var di=new ri(_r);function pi(){return di}var vi=function(){function t(t){this.D=t?function(e,n){return t(e,n)||Mr.D(e.key,n.key)}:function(t,e){return Mr.D(t.key,e.key)},this.$t=ci(),this.Lt=new ti(this.D)}return t.Bt=function(e){return new t(e.D)},t.prototype.has=function(t){return null!=this.$t.get(t)},t.prototype.get=function(t){return this.$t.get(t)},t.prototype.first=function(){return this.Lt.ct()},t.prototype.last=function(){return this.Lt.ut()},t.prototype.P=function(){return this.Lt.P()},t.prototype.indexOf=function(t){var e=this.$t.get(t);return e?this.Lt.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.Lt.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.Lt.ht((function(e,n){return t(e),!1}))},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.$t.ot(t.key,t),e.Lt.ot(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.$t.remove(t),this.Lt.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.Lt._t(),r=e.Lt._t();n.At();){var i=n.It().key,o=r.It().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach((function(e){t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.D=this.D,r.$t=e,r.Lt=n,r},t}(),yi=function(){function t(){this.qt=new ti(Mr.D)}return t.prototype.track=function(t){var e=t.doc.key,n=this.qt.get(e);n?0!==t.type&&3===n.type?this.qt=this.qt.ot(e,t):3===t.type&&1!==n.type?this.qt=this.qt.ot(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.qt=this.qt.ot(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.qt=this.qt.ot(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.qt=this.qt.remove(e):1===t.type&&2===n.type?this.qt=this.qt.ot(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.qt=this.qt.ot(e,{type:2,doc:t.doc}):pr():this.qt=this.qt.ot(e,t)},t.prototype.Ut=function(){var t=[];return this.qt.ht((function(e,n){t.push(n)})),t},t}(),gi=function(){function t(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.Kt=n,this.docChanges=r,this.Qt=i,this.fromCache=o,this.Wt=s,this.jt=a}return t.Gt=function(e,n,r,i){var o=[];return n.forEach((function(t){o.push({type:0,doc:t})})),new t(e,n,vi.Bt(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.Qt.P()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.Wt===t.Wt&&this.Qt.isEqual(t.Qt)&&Cs(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.Kt.isEqual(t.Kt)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),mi=function(){function t(t,e,n,r,i){this.nt=t,this.zt=e,this.Ht=n,this.Yt=r,this.Jt=i}return t.Xt=function(e,n){var r=new Map;return r.set(e,_i.Zt(e,n)),new t(Dr.min(),r,pi(),si(),fi())},t}(),_i=function(){function t(t,e,n,r,i){this.resumeToken=t,this.te=e,this.ee=n,this.ne=r,this.se=i}return t.Zt=function(e,n){return new t(Cr.h,n,fi(),fi(),fi())},t}(),bi=function(t,e,n,r){this.ie=t,this.removedTargetIds=e,this.key=n,this.re=r},wi=function(t,e){this.targetId=t,this.oe=e},Ci=function(t,e,n,r){void 0===n&&(n=Cr.h),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},ki=function(){function t(){this.ae=0,this.ce=Ti(),this.ue=Cr.h,this.he=!1,this.le=!0}return Object.defineProperty(t.prototype,"te",{get:function(){return this.he},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.ue},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_e",{get:function(){return 0!==this.ae},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fe",{get:function(){return this.le},enumerable:!1,configurable:!0}),t.prototype.de=function(t){t.o()>0&&(this.le=!0,this.ue=t)},t.prototype.we=function(){var t=fi(),e=fi(),n=fi();return this.ce.forEach((function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:pr()}})),new _i(this.ue,this.he,t,e,n)},t.prototype.Ee=function(){this.le=!1,this.ce=Ti()},t.prototype.Te=function(t,e){this.le=!0,this.ce=this.ce.ot(t,e)},t.prototype.Ie=function(t){this.le=!0,this.ce=this.ce.remove(t)},t.prototype.me=function(){this.ae+=1},t.prototype.Ae=function(){this.ae-=1},t.prototype.Re=function(){this.le=!0,this.he=!0},t}(),Ei=function(){function t(t){this.Pe=t,this.ge=new Map,this.ye=si(),this.Ve=Si(),this.pe=new ri(_r)}return t.prototype.be=function(t){for(var e=0,n=t.ie;e<n.length;e++){var r=n[e];t.re instanceof ss?this.ve(r,t.re):t.re instanceof as&&this.Se(r,t.key,t.re)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)this.Se(o[i],t.key,t.re)},t.prototype.De=function(t){var e=this;this.Ce(t,(function(n){var r=e.Ne(n);switch(t.state){case 0:e.xe(n)&&r.de(t.resumeToken);break;case 1:r.Ae(),r._e||r.Ee(),r.de(t.resumeToken);break;case 2:r.Ae(),r._e||e.removeTarget(n);break;case 3:e.xe(n)&&(r.Re(),r.de(t.resumeToken));break;case 4:e.xe(n)&&(e.Fe(n),r.de(t.resumeToken));break;default:pr()}}))},t.prototype.Ce=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.ge.forEach((function(t,r){n.xe(r)&&e(r)}))},t.prototype.Oe=function(t){var e=t.targetId,n=t.oe.count,r=this.ke(e);if(r){var i=r.target;if(Qr(i))if(0===n){var o=new Mr(i.path);this.Se(e,o,new as(o,Dr.min()))}else vr(1===n);else this.Me(e)!==n&&(this.Fe(e),this.pe=this.pe.add(e))}},t.prototype.$e=function(t){var e=this,n=new Map;this.ge.forEach((function(r,i){var o=e.ke(i);if(o){if(r.te&&Qr(o.target)){var s=new Mr(o.target.path);null!==e.ye.get(s)||e.Le(i,s)||e.Se(i,s,new as(s,t))}r.fe&&(n.set(i,r.we()),r.Ee())}}));var r=fi();this.Ve.forEach((function(t,n){var i=!0;n.Ft((function(t){var n=e.ke(t);return!n||2===n.et||(i=!1,!1)})),i&&(r=r.add(t))}));var i=new mi(t,n,this.pe,this.ye,r);return this.ye=si(),this.Ve=Si(),this.pe=new ri(_r),i},t.prototype.ve=function(t,e){if(this.xe(t)){var n=this.Le(t,e.key)?2:0;this.Ne(t).Te(e.key,n),this.ye=this.ye.ot(e.key,e),this.Ve=this.Ve.ot(e.key,this.Be(e.key).add(t))}},t.prototype.Se=function(t,e,n){if(this.xe(t)){var r=this.Ne(t);this.Le(t,e)?r.Te(e,1):r.Ie(e),this.Ve=this.Ve.ot(e,this.Be(e).delete(t)),n&&(this.ye=this.ye.ot(e,n))}},t.prototype.removeTarget=function(t){this.ge.delete(t)},t.prototype.Me=function(t){var e=this.Ne(t).we();return this.Pe.qe(t).size+e.ee.size-e.se.size},t.prototype.me=function(t){this.Ne(t).me()},t.prototype.Ne=function(t){var e=this.ge.get(t);return e||(e=new ki,this.ge.set(t,e)),e},t.prototype.Be=function(t){var e=this.Ve.get(t);return e||(e=new ri(_r),this.Ve=this.Ve.ot(t,e)),e},t.prototype.xe=function(t){var e=null!==this.ke(t);return e||lr("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.ke=function(t){var e=this.ge.get(t);return e&&e._e?null:this.Pe.Ue(t)},t.prototype.Fe=function(t){var e=this;this.ge.set(t,new ki),this.Pe.qe(t).forEach((function(n){e.Se(t,n,null)}))},t.prototype.Le=function(t,e){return this.Pe.qe(t).has(e)},t}();function Si(){return new ti(Mr.D)}function Ti(){return new ti(Mr.D)}function Oi(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Ii(t){var e=ji(t.mapValue.fields.__local_write_time__.timestampValue);return new Nr(e.seconds,e.nanos)}var xi=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ai(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Oi(t)?4:10:pr()}function Pi(t,e){var n=Ai(t);if(n!==Ai(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ii(t).isEqual(Ii(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=ji(t.timestampValue),r=ji(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return Fi(t.bytesValue).isEqual(Fi(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return Li(t.geoPointValue.latitude)===Li(e.geoPointValue.latitude)&&Li(t.geoPointValue.longitude)===Li(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return Li(t.integerValue)===Li(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=Li(t.doubleValue),r=Li(e.doubleValue);return n===r?Ur(n)===Ur(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return br(t.arrayValue.values||[],e.arrayValue.values||[],Pi);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(xr(n)!==xr(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Pi(n[i],r[i])))return!1;return!0}(t,e);default:return pr()}}function Ri(t,e){return void 0!==(t.values||[]).find((function(t){return Pi(t,e)}))}function Ni(t,e){var n=Ai(t),r=Ai(e);if(n!==r)return _r(n,r);switch(n){case 0:return 0;case 1:return _r(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=Li(t.integerValue||t.doubleValue),r=Li(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return Di(t.timestampValue,e.timestampValue);case 4:return Di(Ii(t),Ii(e));case 5:return _r(t.stringValue,e.stringValue);case 6:return function(t,e){var n=Fi(t),r=Fi(e);return n.u(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=_r(n[i],r[i]);if(0!==o)return o}return _r(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=_r(Li(t.latitude),Li(e.latitude));return 0!==n?n:_r(Li(t.longitude),Li(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=Ni(n[i],r[i]);if(o)return o}return _r(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var a=_r(r[s],o[s]);if(0!==a)return a;var u=Ni(n[r[s]],i[o[s]]);if(0!==u)return u}return _r(r.length,o.length)}(t.mapValue,e.mapValue);default:throw pr()}}function Di(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return _r(t,e);var n=ji(t),r=ji(e),i=_r(n.seconds,r.seconds);return 0!==i?i:_r(n.nanos,r.nanos)}function zi(t){return function t(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(t){var e=ji(t);return"time("+e.seconds+","+e.nanos+")"}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?Fi(e.bytesValue).toBase64():"referenceValue"in e?Mr.Y(e.referenceValue).toString():"geoPointValue"in e?"geo("+(n=e.geoPointValue).latitude+","+n.longitude+")":"arrayValue"in e?function(e){for(var n="[",r=!0,i=0,o=e.values||[];i<o.length;i++)r?r=!1:n+=",",n+=t(o[i]);return n+"]"}(e.arrayValue):"mapValue"in e?function(e){for(var n="{",r=!0,i=0,o=Object.keys(e.fields||{}).sort();i<o.length;i++){var s=o[i];r?r=!1:n+=",",n+=s+":"+t(e.fields[s])}return n+"}"}(e.mapValue):pr();var n}(t)}function ji(t){if(vr(!!t),"string"==typeof t){var e=0,n=xi.exec(t);if(vr(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Li(t.seconds),nanos:Li(t.nanos)}}function Li(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Fi(t){return"string"==typeof t?Cr.fromBase64String(t):Cr.fromUint8Array(t)}function Mi(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.B()}}function Vi(t){return!!t&&"integerValue"in t}function Ui(t){return!!t&&"arrayValue"in t}function Bi(t){return!!t&&"nullValue"in t}function qi(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Hi(t){return!!t&&"mapValue"in t}var Wi={asc:"ASCENDING",desc:"DESCENDING"},Gi={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Qi=function(t,e){this._=t,this.Ke=e};function Ki(t){return{integerValue:""+t}}function Yi(t,e){if(t.Ke){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ur(e)?"-0":e}}function $i(t,e){return Br(e)?Ki(e):Yi(t,e)}function Xi(t,e){return t.Ke?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function Zi(t,e){return t.Ke?e.toBase64():e.toUint8Array()}function Ji(t,e){return Xi(t,e.v())}function to(t){return vr(!!t),Dr.V(function(t){var e=ji(t);return new Nr(e.seconds,e.nanos)}(t))}function eo(t,e){return function(t){return new jr(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).B()}function no(t){var e=jr.q(t);return vr(Eo(e)),e}function ro(t,e){return eo(t._,e.path)}function io(t,e){var n=no(e);return vr(n.get(1)===t._.projectId),vr(!n.get(3)&&!t._.database||n.get(3)===t._.database),new Mr(uo(n))}function oo(t,e){return eo(t._,e)}function so(t){var e=no(t);return 4===e.length?jr.U():uo(e)}function ao(t){return new jr(["projects",t._.projectId,"databases",t._.database]).B()}function uo(t){return vr(t.length>4&&"documents"===t.get(4)),t.N(5)}function co(t,e,n){return{name:ro(t,e),fields:n.proto.mapValue.fields}}function lo(t,e){var n;if(e instanceof Ko)n={update:co(t,e.key,e.value)};else if(e instanceof ts)n={delete:ro(t,e.key)};else if(e instanceof Yo)n={update:co(t,e.key,e.data),updateMask:ko(e.Qe)};else if(e instanceof Xo)n={transform:{document:ro(t,e.key),fieldTransforms:e.fieldTransforms.map((function(t){return function(t,e){var n=e.transform;if(n instanceof xo)return{fieldPath:e.field.B(),setToServerValue:"REQUEST_TIME"};if(n instanceof Ao)return{fieldPath:e.field.B(),appendMissingElements:{values:n.elements}};if(n instanceof Ro)return{fieldPath:e.field.B(),removeAllFromArray:{values:n.elements}};if(n instanceof Do)return{fieldPath:e.field.B(),increment:n.We};throw pr()}(0,t)}))}};else{if(!(e instanceof es))return pr();n={verify:ro(t,e.key)}}return e.Ge.je||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:Ji(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:pr()}(t,e.Ge)),n}function ho(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?Vo.updateTime(to(t.updateTime)):void 0!==t.exists?Vo.exists(t.exists):Vo.ze()}(e.currentDocument):Vo.ze();if(e.update){var r=io(t,e.update.name),i=new ns({mapValue:{fields:e.update.fields}});if(e.updateMask){var o=function(t){return new Lo((t.fieldPaths||[]).map((function(t){return Fr.G(t)})))}(e.updateMask);return new Yo(r,i,o,n)}return new Ko(r,i,n)}if(e.delete){var s=io(t,e.delete);return new ts(s,n)}if(e.transform){var a=io(t,e.transform.document),u=e.transform.fieldTransforms.map((function(e){return function(t,e){var n=null;"setToServerValue"in e?(vr("REQUEST_TIME"===e.setToServerValue),n=new xo):"appendMissingElements"in e?n=new Ao(e.appendMissingElements.values||[]):"removeAllFromArray"in e?n=new Ro(e.removeAllFromArray.values||[]):"increment"in e?n=new Do(t,e.increment):pr();var r=Fr.G(e.fieldPath);return new Fo(r,n)}(t,e)}));return vr(!0===n.exists),new Xo(a,u)}if(e.verify){var c=io(t,e.verify);return new es(c,n)}return pr()}function fo(t,e){return{documents:[oo(t,e.path)]}}function po(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=oo(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=oo(t,r.F()),n.structuredQuery.from=[{collectionId:r.k()}]);var i=function(t){if(0!==t.length){var e=t.map((function(t){return function(t){if("=="===t.op){if(qi(t.value))return{unaryFilter:{field:_o(t.field),op:"IS_NAN"}};if(Bi(t.value))return{unaryFilter:{field:_o(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(qi(t.value))return{unaryFilter:{field:_o(t.field),op:"IS_NOT_NAN"}};if(Bi(t.value))return{unaryFilter:{field:_o(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:_o(t.field),op:mo(t.op),value:t.value}}}(t)}));return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map((function(t){return function(t){return{field:_o(t.field),direction:go(t.dir)}}(t)}))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s=function(t,e){return t.Ke||Vr(e)?e:{value:e}}(t,e.limit);return null!==s&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt=vo(e.startAt)),e.endAt&&(n.structuredQuery.endAt=vo(e.endAt)),n}function vo(t){return{before:t.before,values:t.position}}function yo(t){return new js(t.values||[],!!t.before)}function go(t){return Wi[t]}function mo(t){return Gi[t]}function _o(t){return{fieldPath:t.B()}}function bo(t){return Fr.G(t.fieldPath)}function wo(t){return Os.create(bo(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return pr()}}(t.fieldFilter.op),t.fieldFilter.value)}function Co(t){switch(t.unaryFilter.op){case"IS_NAN":var e=bo(t.unaryFilter.field);return Os.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=bo(t.unaryFilter.field);return Os.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=bo(t.unaryFilter.field);return Os.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=bo(t.unaryFilter.field);return Os.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return pr()}}function ko(t){var e=[];return t.fields.forEach((function(t){return e.push(t.B())})),{fieldPaths:e}}function Eo(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}var So=function(){this.He=void 0};function To(t,e,n){return t instanceof xo?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof Ao?Po(t,e):t instanceof Ro?No(t,e):function(t,e){var n=Io(t,e),r=zo(n)+zo(t.We);return Vi(n)&&Vi(t.We)?Ki(r):Yi(t.serializer,r)}(t,e)}function Oo(t,e,n){return t instanceof Ao?Po(t,e):t instanceof Ro?No(t,e):n}function Io(t,e){return t instanceof Do?Vi(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var xo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r.d)(e,t),e}(So),Ao=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(r.d)(e,t),e}(So);function Po(t,e){for(var n=jo(e),r=function(t){n.some((function(e){return Pi(e,t)}))||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Ro=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(r.d)(e,t),e}(So);function No(t,e){for(var n=jo(e),r=function(t){n=n.filter((function(e){return!Pi(e,t)}))},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Do=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).serializer=e,r.We=n,r}return Object(r.d)(e,t),e}(So);function zo(t){return Li(t.integerValue||t.doubleValue)}function jo(t){return Ui(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var Lo=function(){function t(t){this.fields=t,t.sort(Fr.D)}return t.prototype.Ye=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].M(t))return!0;return!1},t.prototype.isEqual=function(t){return br(this.fields,t.fields,(function(t,e){return t.isEqual(e)}))},t}(),Fo=function(t,e){this.field=t,this.transform=e},Mo=function(t,e){this.version=t,this.transformResults=e},Vo=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.ze=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"je",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function Uo(t,e){return void 0!==t.updateTime?e instanceof ss&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e instanceof ss}var Bo=function(){};function qo(t,e,n){return t instanceof Ko?function(t,e,n){return new ss(t.key,n.version,t.value,{hasCommittedMutations:!0})}(t,0,n):t instanceof Yo?function(t,e,n){if(!Uo(t.Ge,e))return new us(t.key,n.version);var r=$o(t,e);return new ss(t.key,n.version,r,{hasCommittedMutations:!0})}(t,e,n):t instanceof Xo?function(t,e,n){if(vr(null!=n.transformResults),!Uo(t.Ge,e))return new us(t.key,n.version);var r=Zo(0,e),i=function(t,e,n){var r=[];vr(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,a=null;e instanceof ss&&(a=e.field(o.field)),r.push(Oo(s,a,n[i]))}return r}(t.fieldTransforms,e,n.transformResults),o=n.version,s=Jo(t,r.data(),i);return new ss(t.key,o,s,{hasCommittedMutations:!0})}(t,e,n):function(t,e,n){return new as(t.key,n.version,{hasCommittedMutations:!0})}(t,0,n)}function Ho(t,e,n,r){return t instanceof Ko?function(t,e){if(!Uo(t.Ge,e))return e;var n=Qo(e);return new ss(t.key,n,t.value,{Je:!0})}(t,e):t instanceof Yo?function(t,e){if(!Uo(t.Ge,e))return e;var n=Qo(e),r=$o(t,e);return new ss(t.key,n,r,{Je:!0})}(t,e):t instanceof Xo?function(t,e,n,r){if(!Uo(t.Ge,e))return e;var i=Zo(0,e),o=function(t,e,n,r){for(var i=[],o=0,s=t;o<s.length;o++){var a=s[o],u=a.transform,c=null;n instanceof ss&&(c=n.field(a.field)),null===c&&r instanceof ss&&(c=r.field(a.field)),i.push(To(u,c,e))}return i}(t.fieldTransforms,n,e,r),s=Jo(t,i.data(),o);return new ss(t.key,i.version,s,{Je:!0})}(t,e,r,n):function(t,e){return Uo(t.Ge,e)?new as(t.key,Dr.min()):e}(t,e)}function Wo(t,e){return t instanceof Xo?function(t,e){for(var n=null,r=0,i=t.fieldTransforms;r<i.length;r++){var o=i[r],s=e instanceof ss?e.field(o.field):void 0,a=Io(o.transform,s||null);null!=a&&(n=null==n?(new rs).set(o.field,a):n.set(o.field,a))}return n?n.Xe():null}(t,e):null}function Go(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.Ge.isEqual(e.Ge)&&(0===t.type?t.value.isEqual(e.value):1===t.type?t.data.isEqual(e.data)&&t.Qe.isEqual(e.Qe):2!==t.type||br(t.fieldTransforms,t.fieldTransforms,(function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof Ao&&e instanceof Ao||t instanceof Ro&&e instanceof Ro?br(t.elements,e.elements,Pi):t instanceof Do&&e instanceof Do?Pi(t.We,e.We):t instanceof xo&&e instanceof xo}(t.transform,e.transform)}(t,e)})))}function Qo(t){return t instanceof ss?t.version:Dr.min()}var Ko=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).key=e,i.value=n,i.Ge=r,i.type=0,i}return Object(r.d)(e,t),e}(Bo),Yo=function(t){function e(e,n,r,i){var o=this;return(o=t.call(this)||this).key=e,o.data=n,o.Qe=r,o.Ge=i,o.type=1,o}return Object(r.d)(e,t),e}(Bo);function $o(t,e){return function(t,e){var n=new rs(e);return t.Qe.fields.forEach((function(e){if(!e.P()){var r=t.data.field(e);null!==r?n.set(e,r):n.delete(e)}})),n.Xe()}(t,e instanceof ss?e.data():ns.empty())}var Xo=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.fieldTransforms=n,r.type=2,r.Ge=Vo.exists(!0),r}return Object(r.d)(e,t),e}(Bo);function Zo(t,e){return e}function Jo(t,e,n){for(var r=new rs(e),i=0;i<t.fieldTransforms.length;i++)r.set(t.fieldTransforms[i].field,n[i]);return r.Xe()}var ts=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.Ge=n,r.type=3,r}return Object(r.d)(e,t),e}(Bo),es=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.Ge=n,r.type=4,r}return Object(r.d)(e,t),e}(Bo),ns=function(){function t(t){this.proto=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.P())return this.proto;for(var e=this.proto,n=0;n<t.length-1;++n){if(!e.mapValue.fields)return null;if(!Hi(e=e.mapValue.fields[t.get(n)]))return null}return(e=(e.mapValue.fields||{})[t.k()])||null},t.prototype.isEqual=function(t){return Pi(this.proto,t.proto)},t}(),rs=function(){function t(t){void 0===t&&(t=ns.empty()),this.Ze=t,this.tn=new Map}return t.prototype.set=function(t,e){return this.en(t,e),this},t.prototype.delete=function(t){return this.en(t,null),this},t.prototype.en=function(t,e){for(var n=this.tn,r=0;r<t.length-1;++r){var i=t.get(r),o=n.get(i);o instanceof Map?n=o:o&&10===Ai(o)?(o=new Map(Object.entries(o.mapValue.fields||{})),n.set(i,o),n=o):(o=new Map,n.set(i,o),n=o)}n.set(t.k(),e)},t.prototype.Xe=function(){var t=this.nn(Fr.U(),this.tn);return null!=t?new ns(t):this.Ze},t.prototype.nn=function(t,e){var n=this,r=!1,i=this.Ze.field(t),o=Hi(i)?Object.assign({},i.mapValue.fields):{};return e.forEach((function(e,i){if(e instanceof Map){var s=n.nn(t.child(i),e);null!=s&&(o[i]=s,r=!0)}else null!==e?(o[i]=e,r=!0):o.hasOwnProperty(i)&&(delete o[i],r=!0)})),r?{mapValue:{fields:o}}:null},t}();function is(t){var e=[];return Ar(t.fields||{},(function(t,n){var r=new Fr([t]);if(Hi(n)){var i=is(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,s=i;o<s.length;o++)e.push(r.child(s[o]))}else e.push(r)})),new Lo(e)}var os=function(t,e){this.key=t,this.version=e},ss=function(t){function e(e,n,r,i){var o=this;return(o=t.call(this,e,n)||this).sn=r,o.Je=!!i.Je,o.hasCommittedMutations=!!i.hasCommittedMutations,o}return Object(r.d)(e,t),e.prototype.field=function(t){return this.sn.field(t)},e.prototype.data=function(){return this.sn},e.prototype.rn=function(){return this.sn.proto},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.Je===t.Je&&this.hasCommittedMutations===t.hasCommittedMutations&&this.sn.isEqual(t.sn)},e.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.sn.toString()+", {hasLocalMutations: "+this.Je+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.Je||this.hasCommittedMutations},enumerable:!1,configurable:!0}),e}(os),as=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n)||this).hasCommittedMutations=!(!r||!r.hasCommittedMutations),i}return Object(r.d)(e,t),e.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(os),us=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r.d)(e,t),e.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(os),cs=function(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.on=n,this.filters=r,this.limit=i,this.an=o,this.startAt=s,this.endAt=a,this.cn=null,this.un=null};function ls(t,e,n,r,i,o,s,a){return new cs(t,e,n,r,i,o,s,a)}function hs(t){return new cs(t)}function fs(t){return!Vr(t.limit)&&"F"===t.an}function ds(t){return!Vr(t.limit)&&"L"===t.an}function ps(t){return t.on.length>0?t.on[0].field:null}function vs(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.hn())return r.field}return null}function ys(t){return null!==t.collectionGroup}function gs(t){var e=yr(t);if(null===e.cn){e.cn=[];var n=vs(e),r=ps(e);if(null!==n&&null===r)n.W()||e.cn.push(new Vs(n)),e.cn.push(new Vs(Fr.j(),"asc"));else{for(var i=!1,o=0,s=e.on;o<s.length;o++){var a=s[o];e.cn.push(a),a.field.W()&&(i=!0)}if(!i){var u=e.on.length>0?e.on[e.on.length-1].dir:"asc";e.cn.push(new Vs(Fr.j(),u))}}}return e.cn}function ms(t){var e=yr(t);if(!e.un)if("F"===e.an)e.un=Hr(e.path,e.collectionGroup,gs(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=gs(e);r<i.length;r++){var o=i[r];n.push(new Vs(o.field,"desc"===o.dir?"asc":"desc"))}var s=e.endAt?new js(e.endAt.position,!e.endAt.before):null,a=e.startAt?new js(e.startAt.position,!e.startAt.before):null;e.un=Hr(e.path,e.collectionGroup,n,e.filters,e.limit,s,a)}return e.un}function _s(t,e,n){return new cs(t.path,t.collectionGroup,t.on.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function bs(t,e){return new cs(t.path,t.collectionGroup,t.on.slice(),t.filters.slice(),t.limit,t.an,e,t.endAt)}function ws(t,e){return new cs(t.path,t.collectionGroup,t.on.slice(),t.filters.slice(),t.limit,t.an,t.startAt,e)}function Cs(t,e){return Gr(ms(t),ms(e))&&t.an===e.an}function ks(t){return Wr(ms(t))+"|lt:"+t.an}function Es(t){return"Query(target="+function(t){var e=t.path.B();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map((function(t){return(e=t).field.B()+" "+e.op+" "+zi(e.value);var e})).join(", ")+"]"),Vr(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map((function(t){return(e=t).field.B()+" ("+e.dir+")";var e})).join(", ")+"]"),t.startAt&&(e+=", startAt: "+Ls(t.startAt)),t.endAt&&(e+=", endAt: "+Ls(t.endAt)),"Target("+e+")"}(ms(t))+"; limitType="+t.an+")"}function Ss(t,e){return function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.J(t.collectionGroup)&&t.path.M(n):Mr.X(t.path)?t.path.isEqual(n):t.path.$(n)}(t,e)&&function(t,e){for(var n=0,r=t.on;n<r.length;n++){var i=r[n];if(!i.field.W()&&null===e.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!Fs(t.startAt,gs(t),e)||t.endAt&&Fs(t.endAt,gs(t),e))}(t,e)}function Ts(t){return function(e,n){for(var r=!1,i=0,o=gs(t);i<o.length;i++){var s=o[i],a=Us(s,e,n);if(0!==a)return a;r=r||s.field.W()}return 0}}var Os=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return Object(r.d)(e,t),e.create=function(t,n,r){return t.W()?"in"===n||"not-in"===n?this.ln(t,n,r):new Is(t,n,r):"array-contains"===n?new Rs(t,r):"in"===n?new Ns(t,r):"not-in"===n?new Ds(t,r):"array-contains-any"===n?new zs(t,r):new e(t,n,r)},e.ln=function(t,e,n){return"in"===e?new xs(t,n):new As(t,n)},e.prototype.matches=function(t){var e=t.field(this.field);return"!="===this.op?null!==e&&this._n(Ni(e,this.value)):null!==e&&Ai(this.value)===Ai(e)&&this._n(Ni(e,this.value))},e.prototype._n=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return pr()}},e.prototype.hn=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}((function(){})),Is=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=Mr.Y(r.referenceValue),i}return Object(r.d)(e,t),e.prototype.matches=function(t){var e=Mr.D(t.key,this.key);return this._n(e)},e}(Os),xs=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=Ps(0,n),r}return Object(r.d)(e,t),e.prototype.matches=function(t){return this.keys.some((function(e){return e.isEqual(t.key)}))},e}(Os),As=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=Ps(0,n),r}return Object(r.d)(e,t),e.prototype.matches=function(t){return!this.keys.some((function(e){return e.isEqual(t.key)}))},e}(Os);function Ps(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(t){return Mr.Y(t.referenceValue)}))}var Rs=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return Object(r.d)(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return Ui(e)&&Ri(e.arrayValue,this.value)},e}(Os),Ns=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return Object(r.d)(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&Ri(this.value.arrayValue,e)},e}(Os),Ds=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return Object(r.d)(e,t),e.prototype.matches=function(t){if(Ri(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.field(this.field);return null!==e&&!Ri(this.value.arrayValue,e)},e}(Os),zs=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return Object(r.d)(e,t),e.prototype.matches=function(t){var e=this,n=t.field(this.field);return!(!Ui(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(t){return Ri(e.value.arrayValue,t)}))},e}(Os),js=function(t,e){this.position=t,this.before=e};function Ls(t){return(t.before?"b":"a")+":"+t.position.map((function(t){return zi(t)})).join(",")}function Fs(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i];if(r=o.field.W()?Mr.D(Mr.Y(s.referenceValue),n.key):Ni(s,n.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function Ms(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!Pi(t.position[n],e.position[n]))return!1;return!0}var Vs=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function Us(t,e,n){var r=t.field.W()?Mr.D(e.key,n.key):function(t,e,n){var r=e.field(t),i=n.field(t);return null!==r&&null!==i?Ni(r,i):pr()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return pr()}}function Bs(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var qs=function(){var t=this;this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))},Hs=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.fn=t,this.dn=e,this.wn=n,this.En=r,this.Tn=i,this.In=0,this.mn=null,this.An=Date.now(),this.reset()}return t.prototype.reset=function(){this.In=0},t.prototype.Rn=function(){this.In=this.Tn},t.prototype.Pn=function(t){var e=this;this.cancel();var n=Math.floor(this.In+this.gn()),r=Math.max(0,Date.now()-this.An),i=Math.max(0,n-r);i>0&&lr("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.In+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.mn=this.fn.yn(this.dn,i,(function(){return e.An=Date.now(),t()})),this.In*=this.En,this.In<this.wn&&(this.In=this.wn),this.In>this.Tn&&(this.In=this.Tn)},t.prototype.Vn=function(){null!==this.mn&&(this.mn.pn(),this.mn=null)},t.prototype.cancel=function(){null!==this.mn&&(this.mn.cancel(),this.mn=null)},t.prototype.gn=function(){return(Math.random()-.5)*this.In},t}(),Ws=function(){function t(t){var e=this;this.bn=null,this.vn=null,this.result=void 0,this.error=void 0,this.Sn=!1,this.Dn=!1,t((function(t){e.Sn=!0,e.result=t,e.bn&&e.bn(t)}),(function(t){e.Sn=!0,e.error=t,e.vn&&e.vn(t)}))}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.Dn&&pr(),this.Dn=!0,this.Sn?this.error?this.Cn(n,this.error):this.Nn(e,this.result):new t((function(t,i){r.bn=function(n){r.Nn(e,n).next(t,i)},r.vn=function(e){r.Cn(n,e).next(t,i)}}))},t.prototype.xn=function(){var t=this;return new Promise((function(e,n){t.next(e,n)}))},t.prototype.Fn=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.Nn=function(e,n){return e?this.Fn((function(){return e(n)})):t.resolve(n)},t.prototype.Cn=function(e,n){return e?this.Fn((function(){return e(n)})):t.reject(n)},t.resolve=function(e){return new t((function(t,n){t(e)}))},t.reject=function(e){return new t((function(t,n){n(e)}))},t.On=function(e){return new t((function(t,n){var r=0,i=0,o=!1;e.forEach((function(e){++r,e.next((function(){++i,o&&i===r&&t()}),(function(t){return n(t)}))})),o=!0,i===r&&t()}))},t.kn=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next((function(n){return n?t.resolve(n):e()}))},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach((function(t,i){r.push(e.call(n,t,i))})),this.On(r)},t}(),Gs=function(){function t(e,n,r){this.name=e,this.version=n,this.Mn=r,12.2===t.$n(Object(s.n)())&&hr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return lr("SimpleDb","Removing database:",t),Zs(window.indexedDB.deleteDatabase(t)).xn()},t.Ln=function(){if("undefined"==typeof indexedDB)return!1;if(t.Bn())return!0;var e=Object(s.n)(),n=t.$n(e),r=0<n&&n<10,i=t.qn(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.Bn=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Un)},t.Kn=function(t,e){return t.store(e)},t.$n=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.qn=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.Qn=function(t){return Object(r.b)(this,void 0,void 0,(function(){var e,n=this;return Object(r.e)(this,(function(r){switch(r.label){case 0:return this.db?[3,2]:(lr("SimpleDb","Opening database:",this.name),e=this,[4,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){e(t.target.result)},i.onblocked=function(){r(new Ks(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;r("VersionError"===n.name?new ar(sr.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):new Ks(t,n))},i.onupgradeneeded=function(t){lr("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion),n.Mn.createOrUpgrade(t.target.result,i.transaction,t.oldVersion,n.version).next((function(){lr("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}))]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.Wn&&(this.db.onversionchange=function(t){return n.Wn(t)}),this.db)]}}))}))},t.prototype.jn=function(t){this.Wn=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,i){return Object(r.b)(this,void 0,void 0,(function(){var o,s,a,u,c;return Object(r.e)(this,(function(l){switch(l.label){case 0:o="readonly"===e,s=0,a=function(){var e,a,c,l,h;return Object(r.e)(this,(function(r){switch(r.label){case 0:++s,r.label=1;case 1:return r.trys.push([1,4,,5]),[4,u.Qn(t)];case 2:return u.db=r.sent(),e=$s.open(u.db,t,o?"readonly":"readwrite",n),a=i(e).catch((function(t){return e.abort(t),Ws.reject(t)})).xn(),c={},a.catch((function(){})),[4,e.Gn];case 3:return[2,(c.value=(r.sent(),a),c)];case 4:return lr("SimpleDb","Transaction failed with error:",(l=r.sent()).message,"Retrying:",h="FirebaseError"!==l.name&&s<3),u.close(),h?[3,5]:[2,{value:Promise.reject(l)}];case 5:return[2]}}))},u=this,l.label=1;case 1:return[5,a()];case 2:if("object"==typeof(c=l.sent()))return[2,c.value];l.label=3;case 3:return[3,1];case 4:return[2]}}))}))},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),Qs=function(){function t(t){this.zn=t,this.Hn=!1,this.Yn=null}return Object.defineProperty(t.prototype,"Sn",{get:function(){return this.Hn},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Jn",{get:function(){return this.Yn},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.zn=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.Hn=!0},t.prototype.Xn=function(t){this.Yn=t},t.prototype.delete=function(){return Zs(this.zn.delete())},t}(),Ks=function(t){function e(e,n){var r=this;return(r=t.call(this,sr.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return Object(r.d)(e,t),e}(ar);function Ys(t){return"IndexedDbTransactionError"===t.name}var $s=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.Zn=new qs,this.transaction.oncomplete=function(){n.Zn.resolve()},this.transaction.onabort=function(){e.error?n.Zn.reject(new Ks(t,e.error)):n.Zn.resolve()},this.transaction.onerror=function(e){var r=ta(e.target.error);n.Zn.reject(new Ks(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new Ks(n,e)}},Object.defineProperty(t.prototype,"Gn",{get:function(){return this.Zn.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.Zn.reject(t),this.aborted||(lr("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new Xs(e)},t}(),Xs=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(lr("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(lr("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),Zs(n)},t.prototype.add=function(t){return lr("SimpleDb","ADD",this.store.name,t,t),Zs(this.store.add(t))},t.prototype.get=function(t){var e=this;return Zs(this.store.get(t)).next((function(n){return void 0===n&&(n=null),lr("SimpleDb","GET",e.store.name,t,n),n}))},t.prototype.delete=function(t){return lr("SimpleDb","DELETE",this.store.name,t),Zs(this.store.delete(t))},t.prototype.count=function(){return lr("SimpleDb","COUNT",this.store.name),Zs(this.store.count())},t.prototype.ts=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.es(n,(function(t,e){r.push(e)})).next((function(){return r}))},t.prototype.ns=function(t,e){lr("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.ss=!1;var r=this.cursor(n);return this.es(r,(function(t,e,n){return n.delete()}))},t.prototype.rs=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.es(r,e)},t.prototype.os=function(t){var e=this.cursor({});return new Ws((function(n,r){e.onerror=function(t){var e=ta(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next((function(t){t?r.continue():n()})):n()}}))},t.prototype.es=function(t,e){var n=[];return new Ws((function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new Qs(i),s=e(i.primaryKey,i.value,o);if(s instanceof Ws){var a=s.catch((function(t){return o.done(),Ws.reject(t)}));n.push(a)}o.Sn?r():null===o.Jn?i.continue():i.continue(o.Jn)}else r()}})).next((function(){return Ws.On(n)}))},t.prototype.options=function(t,e){var n=void 0;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.ss?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function Zs(t){return new Ws((function(e,n){t.onsuccess=function(t){e(t.target.result)},t.onerror=function(t){var e=ta(t.target.error);n(e)}}))}var Js=!1;function ta(t){var e=Gs.$n(Object(s.n)());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new ar("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return Js||(Js=!0,setTimeout((function(){throw r}),0)),r}}return t}function ea(){return"undefined"!=typeof window?window:null}function na(){return"undefined"!=typeof document?document:null}var ra=function(){function t(t,e,n,r,i){this.cs=t,this.dn=e,this.us=n,this.op=r,this.hs=i,this.ls=new qs,this.then=this.ls.promise.then.bind(this.ls.promise),this.ls.promise.catch((function(t){}))}return t._s=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.fs=setTimeout((function(){return e.ds()}),t)},t.prototype.pn=function(){return this.ds()},t.prototype.cancel=function(t){null!==this.fs&&(this.clearTimeout(),this.ls.reject(new ar(sr.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.ds=function(){var t=this;this.cs.ws((function(){return null!==t.fs?(t.clearTimeout(),t.op().then((function(e){return t.ls.resolve(e)}))):Promise.resolve()}))},t.prototype.clearTimeout=function(){null!==this.fs&&(this.hs(this),clearTimeout(this.fs),this.fs=null)},t}(),ia=function(){function t(){var t=this;this.Es=Promise.resolve(),this.Ts=[],this.Is=!1,this.As=[],this.Rs=null,this.Ps=!1,this.gs=[],this.ys=new Hs(this,"async_queue_retry"),this.Vs=function(){var e=na();e&&lr("AsyncQueue","Visibility state changed to "+e.visibilityState),t.ys.Vn()};var e=na();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Vs)}return Object.defineProperty(t.prototype,"ps",{get:function(){return this.Is},enumerable:!1,configurable:!0}),t.prototype.ws=function(t){this.enqueue(t)},t.prototype.bs=function(t){this.vs(),this.Ss(t)},t.prototype.Ds=function(){if(!this.Is){this.Is=!0;var t=na();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Vs)}},t.prototype.enqueue=function(t){return this.vs(),this.Is?new Promise((function(t){})):this.Ss(t)},t.prototype.Cs=function(t){var e=this;this.ws((function(){return e.Ts.push(t),e.Ns()}))},t.prototype.Ns=function(){return Object(r.b)(this,void 0,void 0,(function(){var t,e=this;return Object(r.e)(this,(function(n){switch(n.label){case 0:if(0===this.Ts.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.Ts[0]()];case 2:return n.sent(),this.Ts.shift(),this.ys.reset(),[3,4];case 3:if(!Ys(t=n.sent()))throw t;return lr("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.Ts.length>0&&this.ys.Pn((function(){return e.Ns()})),n.label=5;case 5:return[2]}}))}))},t.prototype.Ss=function(t){var e=this,n=this.Es.then((function(){return e.Ps=!0,t().catch((function(t){throw e.Rs=t,e.Ps=!1,hr("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t})).then((function(t){return e.Ps=!1,t}))}));return this.Es=n,n},t.prototype.yn=function(t,e,n){var r=this;this.vs(),this.gs.indexOf(t)>-1&&(e=0);var i=ra._s(this,t,e,n,(function(t){return r.xs(t)}));return this.As.push(i),i},t.prototype.vs=function(){this.Rs&&pr()},t.prototype.Fs=function(){},t.prototype.Os=function(){return Object(r.b)(this,void 0,void 0,(function(){var t;return Object(r.e)(this,(function(e){switch(e.label){case 0:return[4,t=this.Es];case 1:e.sent(),e.label=2;case 2:if(t!==this.Es)return[3,0];e.label=3;case 3:return[2]}}))}))},t.prototype.ks=function(t){for(var e=0,n=this.As;e<n.length;e++)if(n[e].dn===t)return!0;return!1},t.prototype.Ms=function(t){var e=this;return this.Os().then((function(){e.As.sort((function(t,e){return t.us-e.us}));for(var n=0,r=e.As;n<r.length;n++){var i=r[n];if(i.pn(),"all"!==t&&i.dn===t)break}return e.Os()}))},t.prototype.$s=function(t){this.gs.push(t)},t.prototype.xs=function(t){var e=this.As.indexOf(t);this.As.splice(e,1)},t}();function oa(t,e){if(hr("AsyncQueue",e+": "+t),Ys(t))return new ar(sr.UNAVAILABLE,e+": "+t);throw t}var sa=function(){this.Ls=void 0,this.listeners=[]},aa=function(){this.Bs=new Rr((function(t){return ks(t)}),Cs),this.onlineState="Unknown",this.qs=new Set};function ua(t,e){return Object(r.b)(this,void 0,void 0,(function(){var n,i,o,s,a,u,c;return Object(r.e)(this,(function(r){switch(r.label){case 0:if(n=yr(t),o=!1,(s=n.Bs.get(i=e.query))||(o=!0,s=new sa),!o)return[3,4];r.label=1;case 1:return r.trys.push([1,3,,4]),a=s,[4,n.Us(i)];case 2:return a.Ls=r.sent(),[3,4];case 3:return u=r.sent(),c=oa(u,"Initialization of query '"+Es(e.query)+"' failed"),[2,void e.onError(c)];case 4:return n.Bs.set(i,s),s.listeners.push(e),e.Ks(n.onlineState),s.Ls&&e.Qs(s.Ls)&&fa(n),[2]}}))}))}function ca(t,e){return Object(r.b)(this,void 0,void 0,(function(){var n,i,o,s,a;return Object(r.e)(this,(function(r){return n=yr(t),o=!1,(s=n.Bs.get(i=e.query))&&(a=s.listeners.indexOf(e))>=0&&(s.listeners.splice(a,1),o=0===s.listeners.length),o?[2,(n.Bs.delete(i),n.Ws(i))]:[2]}))}))}function la(t,e){for(var n=yr(t),r=!1,i=0,o=e;i<o.length;i++){var s=o[i],a=n.Bs.get(s.query);if(a){for(var u=0,c=a.listeners;u<c.length;u++)c[u].Qs(s)&&(r=!0);a.Ls=s}}r&&fa(n)}function ha(t,e,n){var r=yr(t),i=r.Bs.get(e);if(i)for(var o=0,s=i.listeners;o<s.length;o++)s[o].onError(n);r.Bs.delete(e)}function fa(t){t.qs.forEach((function(t){t.next()}))}var da=function(){function t(t,e,n){this.query=t,this.js=e,this.Gs=!1,this.zs=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.Qs=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new gi(t.query,t.docs,t.Kt,e,t.Qt,t.fromCache,t.Wt,!0)}var o=!1;return this.Gs?this.Hs(t)&&(this.js.next(t),o=!0):this.Ys(t,this.onlineState)&&(this.Js(t),o=!0),this.zs=t,o},t.prototype.onError=function(t){this.js.error(t)},t.prototype.Ks=function(t){this.onlineState=t;var e=!1;return this.zs&&!this.Gs&&this.Ys(this.zs,t)&&(this.Js(this.zs),e=!0),e},t.prototype.Ys=function(t,e){return!t.fromCache||!(this.options.Xs&&"Offline"!==e||t.docs.P()&&"Offline"!==e)},t.prototype.Hs=function(t){return t.docChanges.length>0||!!(t.Wt||this.zs&&this.zs.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges},t.prototype.Js=function(t){t=gi.Gt(t.query,t.docs,t.Qt,t.fromCache),this.Gs=!0,this.js.next(t)},t}(),pa=function(){function t(t){this.uid=t}return t.prototype.Zs=function(){return null!=this.uid},t.prototype.ti=function(){return this.Zs()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();pa.UNAUTHENTICATED=new pa(null),pa.ei=new pa("google-credentials-uid"),pa.ni=new pa("first-party-uid");var va=function(t,e){this.user=e,this.type="OAuth",this.si={},this.si.Authorization="Bearer "+t},ya=function(){function t(){this.ii=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.ri=function(){},t.prototype.oi=function(t){this.ii=t,t(pa.UNAUTHENTICATED)},t.prototype.ai=function(){this.ii=null},t}(),ga=function(){function t(t){var e=this;this.ci=null,this.currentUser=pa.UNAUTHENTICATED,this.ui=!1,this.hi=0,this.ii=null,this.forceRefresh=!1,this.ci=function(){e.hi++,e.currentUser=e.li(),e.ui=!0,e.ii&&e.ii(e.currentUser)},this.hi=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.ci):(this.ci(null),t.get().then((function(t){e.auth=t,e.ci&&e.auth.addAuthTokenListener(e.ci)}),(function(){})))}return t.prototype.getToken=function(){var t=this,e=this.hi,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return t.hi!==e?(lr("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(vr("string"==typeof n.accessToken),new va(n.accessToken,t.currentUser)):null})):Promise.resolve(null)},t.prototype.ri=function(){this.forceRefresh=!0},t.prototype.oi=function(t){this.ii=t,this.ui&&t(this.currentUser)},t.prototype.ai=function(){this.auth&&this.auth.removeAuthTokenListener(this.ci),this.ci=null,this.ii=null},t.prototype.li=function(){var t=this.auth&&this.auth.getUid();return vr(null===t||"string"==typeof t),new pa(t)},t}(),ma=function(){function t(t,e){this._i=t,this.fi=e,this.type="FirstParty",this.user=pa.ni}return Object.defineProperty(t.prototype,"si",{get:function(){var t={"X-Goog-AuthUser":this.fi},e=this._i.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),t},enumerable:!1,configurable:!0}),t}(),_a=function(){function t(t,e){this._i=t,this.fi=e}return t.prototype.getToken=function(){return Promise.resolve(new ma(this._i,this.fi))},t.prototype.oi=function(t){t(pa.ni)},t.prototype.ai=function(){},t.prototype.ri=function(){},t}(),ba=function(){function t(t,e,n,r){this.batchId=t,this.di=e,this.baseMutations=n,this.mutations=r}return t.prototype.wi=function(t,e,n){for(var r=n.Ei,i=0;i<this.mutations.length;i++){var o=this.mutations[i];o.key.isEqual(t)&&(e=qo(o,e,r[i]))}return e},t.prototype.Ti=function(t,e){for(var n=0,r=this.baseMutations;n<r.length;n++){var i=r[n];i.key.isEqual(t)&&(e=Ho(i,e,e,this.di))}for(var o=e,s=0,a=this.mutations;s<a.length;s++){var u=a[s];u.key.isEqual(t)&&(e=Ho(u,e,o,this.di))}return e},t.prototype.Ii=function(t){var e=this,n=t;return this.mutations.forEach((function(r){var i=e.Ti(r.key,t.get(r.key));i&&(n=n.ot(r.key,i))})),n},t.prototype.keys=function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),fi())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&br(this.mutations,t.mutations,(function(t,e){return Go(t,e)}))&&br(this.baseMutations,t.baseMutations,(function(t,e){return Go(t,e)}))},t}(),wa=function(){function t(t,e,n,r){this.batch=t,this.mi=e,this.Ei=n,this.Ai=r}return t.from=function(e,n,r){vr(e.mutations.length===r.length);for(var i=li,o=e.mutations,s=0;s<o.length;s++)i=i.ot(o[s].key,r[s].version);return new t(e,n,r,i)},t}(),Ca=function(){function t(){this.Ri=new Rr((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),this.Pi=!1}return Object.defineProperty(t.prototype,"readTime",{get:function(){return this.gi},set:function(t){this.gi=t},enumerable:!1,configurable:!0}),t.prototype.yi=function(t,e){this.Vi(),this.readTime=e,this.Ri.set(t.key,t)},t.prototype.pi=function(t,e){this.Vi(),e&&(this.readTime=e),this.Ri.set(t,null)},t.prototype.bi=function(t,e){this.Vi();var n=this.Ri.get(e);return void 0!==n?Ws.resolve(n):this.vi(t,e)},t.prototype.getEntries=function(t,e){return this.Si(t,e)},t.prototype.apply=function(t){return this.Vi(),this.Pi=!0,this.Di(t)},t.prototype.Vi=function(){},t}(),ka="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Ea=function(){function t(){this.Ci=[]}return t.prototype.Ni=function(t){this.Ci.push(t)},t.prototype.xi=function(){this.Ci.forEach((function(t){return t()}))},t}(),Sa=function(){function t(t,e,n){this.Fi=t,this.Oi=e,this.ki=n}return t.prototype.Mi=function(t,e){var n=this;return this.Oi.$i(t,e).next((function(r){return n.Li(t,e,r)}))},t.prototype.Li=function(t,e,n){return this.Fi.bi(t,e).next((function(t){for(var r=0,i=n;r<i.length;r++)t=i[r].Ti(e,t);return t}))},t.prototype.Bi=function(t,e,n){var r=ai();return e.forEach((function(t,e){for(var i=0,o=n;i<o.length;i++)e=o[i].Ti(t,e);r=r.ot(t,e)})),r},t.prototype.qi=function(t,e){var n=this;return this.Fi.getEntries(t,e).next((function(e){return n.Ui(t,e)}))},t.prototype.Ui=function(t,e){var n=this;return this.Oi.Ki(t,e).next((function(r){var i=n.Bi(t,e,r),o=si();return i.forEach((function(t,e){e||(e=new as(t,Dr.min())),o=o.ot(t,e)})),o}))},t.prototype.Qi=function(t,e,n){return function(t){return Mr.X(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Wi(t,e.path):ys(e)?this.ji(t,e,n):this.Gi(t,e,n)},t.prototype.Wi=function(t,e){return this.Mi(t,new Mr(e)).next((function(t){var e=ci();return t instanceof ss&&(e=e.ot(t.key,t)),e}))},t.prototype.ji=function(t,e,n){var r=this,i=e.collectionGroup,o=ci();return this.ki.zi(t,i).next((function(s){return Ws.forEach(s,(function(s){var a=function(t,e){return new cs(e,null,t.on.slice(),t.filters.slice(),t.limit,t.an,t.startAt,t.endAt)}(e,s.child(i));return r.Gi(t,a,n).next((function(t){t.forEach((function(t,e){o=o.ot(t,e)}))}))})).next((function(){return o}))}))},t.prototype.Gi=function(t,e,n){var r,i,o=this;return this.Fi.Qi(t,e,n).next((function(n){return r=n,o.Oi.Hi(t,e)})).next((function(e){return o.Yi(t,i=e,r).next((function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,a=o.mutations;s<a.length;s++){var u=a[s],c=u.key,l=r.get(c),h=Ho(u,l,l,o.di);r=h instanceof ss?r.ot(c,h):r.remove(c)}}))})).next((function(){return r.forEach((function(t,n){Ss(e,n)||(r=r.remove(t))})),r}))},t.prototype.Yi=function(t,e,n){for(var r=fi(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var u=a[s];u instanceof Yo&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.Fi.getEntries(t,r).next((function(t){return t.forEach((function(t,e){null!==e&&e instanceof ss&&(c=c.ot(t,e))})),c}))},t}(),Ta=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.Ji=n,this.Xi=r}return t.Zi=function(e,n){for(var r=fi(),i=fi(),o=0,s=n.docChanges;o<s.length;o++){var a=s[o];switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),Oa=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.tr=function(t){return n.er(t)},this.nr=function(t){return e.sr(t)})}return t.prototype.er=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.nr&&this.nr(t),t},t}();function Ia(t,e){var n=t[1],r=e[1],i=_r(t[0],e[0]);return 0===i?_r(n,r):i}Oa.ir=-1;var xa=function(){function t(t){this.rr=t,this.buffer=new ri(Ia),this.ar=0}return t.prototype.cr=function(){return++this.ar},t.prototype.ur=function(t){var e=[t,this.cr()];if(this.buffer.size<this.rr)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();Ia(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),Aa={hr:!1,lr:0,_r:0,dr:0},Pa=function(){function t(t,e,n){this.wr=t,this.Er=e,this.Tr=n}return t.Ir=function(e){return new t(e,t.mr,t.Ar)},t}();Pa.mr=10,Pa.Ar=1e3,Pa.Rr=new Pa(41943040,Pa.mr,Pa.Ar),Pa.Pr=new Pa(-1,0,0);var Ra=function(){function t(t,e){this.gr=t,this.cs=e,this.yr=!1,this.Vr=null}return t.prototype.start=function(t){-1!==this.gr.params.wr&&this.pr(t)},t.prototype.stop=function(){this.Vr&&(this.Vr.cancel(),this.Vr=null)},Object.defineProperty(t.prototype,"br",{get:function(){return null!==this.Vr},enumerable:!1,configurable:!0}),t.prototype.pr=function(t){var e=this,n=this.yr?3e5:6e4;lr("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.Vr=this.cs.yn("lru_garbage_collection",n,(function(){return Object(r.b)(e,void 0,void 0,(function(){var e;return Object(r.e)(this,(function(n){switch(n.label){case 0:this.Vr=null,this.yr=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.vr(this.gr)];case 2:return n.sent(),[3,7];case 3:return Ys(e=n.sent())?(lr("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,Zu(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.pr(t)];case 8:return n.sent(),[2]}}))}))}))},t}(),Na=function(){function t(t,e){this.Sr=t,this.params=e}return t.prototype.Dr=function(t,e){return this.Sr.Cr(t).next((function(t){return Math.floor(e/100*t)}))},t.prototype.Nr=function(t,e){var n=this;if(0===e)return Ws.resolve(Oa.ir);var r=new xa(e);return this.Sr.Ce(t,(function(t){return r.ur(t.sequenceNumber)})).next((function(){return n.Sr.Fr(t,(function(t){return r.ur(t)}))})).next((function(){return r.maxValue}))},t.prototype.Or=function(t,e,n){return this.Sr.Or(t,e,n)},t.prototype.kr=function(t,e){return this.Sr.kr(t,e)},t.prototype.Mr=function(t,e){var n=this;return-1===this.params.wr?(lr("LruGarbageCollector","Garbage collection skipped; disabled"),Ws.resolve(Aa)):this.$r(t).next((function(r){return r<n.params.wr?(lr("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.wr),Aa):n.Lr(t,e)}))},t.prototype.$r=function(t){return this.Sr.$r(t)},t.prototype.Lr=function(t,e){var n,r,i,s,a,u,c,l=this,h=Date.now();return this.Dr(t,this.params.Er).next((function(e){return e>l.params.Tr?(lr("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+l.params.Tr+" from "+e),r=l.params.Tr):r=e,s=Date.now(),l.Nr(t,r)})).next((function(r){return n=r,a=Date.now(),l.Or(t,n,e)})).next((function(e){return i=e,u=Date.now(),l.kr(t,n)})).next((function(t){return c=Date.now(),cr()<=o.a.DEBUG&&lr("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(s-h)+"ms\n\tDetermined least recently used "+r+" in "+(a-s)+"ms\n\tRemoved "+i+" targets in "+(u-a)+"ms\n\tRemoved "+t+" documents in "+(c-u)+"ms\nTotal Duration: "+(c-h)+"ms"),Ws.resolve({hr:!0,lr:r,_r:i,dr:t})}))},t}();function Da(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=ja(e)),e=za(t.get(n),e);return ja(e)}function za(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}function ja(t){return t+"\x01\x01"}function La(t){var e=t.length;if(vr(e>=2),2===e)return vr("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),jr.U();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("\x01",o);switch((s<0||s>n)&&pr(),t.charAt(s+1)){case"\x01":var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"\x10":i+=t.substring(o,s),i+="\0";break;case"\x11":i+=t.substring(o,s+1);break;default:pr()}o=s+2}return new jr(r)}var Fa=function(t){this.Br=t};function Ma(t,e){if(e.document)return function(t,e,n){var r=io(t,e.name),i=to(e.updateTime),o=new ns({mapValue:{fields:e.fields}});return new ss(r,i,o,{hasCommittedMutations:!!n})}(t.Br,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=Mr.Z(e.noDocument.path),r=Ha(e.noDocument.readTime);return new as(n,r,{hasCommittedMutations:!!e.hasCommittedMutations})}if(e.unknownDocument){var i=Mr.Z(e.unknownDocument.path),o=Ha(e.unknownDocument.version);return new us(i,o)}return pr()}function Va(t,e,n){var r=Ua(n),i=e.key.path.F().L();if(e instanceof ss){var o=function(t,e){return{name:ro(t,e.key),fields:e.rn().mapValue.fields,updateTime:Xi(t,e.version.v())}}(t.Br,e);return new yu(null,null,o,e.hasCommittedMutations,r,i)}if(e instanceof as){var s=e.key.path.L(),a=qa(e.version),u=e.hasCommittedMutations;return new yu(null,new pu(s,a),null,u,r,i)}if(e instanceof us){var c=e.key.path.L(),l=qa(e.version);return new yu(new vu(c,l),null,null,!0,r,i)}return pr()}function Ua(t){var e=t.v();return[e.seconds,e.nanoseconds]}function Ba(t){var e=new Nr(t[0],t[1]);return Dr.V(e)}function qa(t){var e=t.v();return new cu(e.seconds,e.nanoseconds)}function Ha(t){var e=new Nr(t.seconds,t.nanoseconds);return Dr.V(e)}function Wa(t,e){var n=(e.baseMutations||[]).map((function(e){return ho(t.Br,e)})),r=e.mutations.map((function(e){return ho(t.Br,e)})),i=Nr.fromMillis(e.localWriteTimeMs);return new ba(e.batchId,i,n,r)}function Ga(t){var e,n,r=Ha(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?Ha(t.lastLimboFreeSnapshotVersion):Dr.min();return void 0!==t.query.documents?(vr(1===(n=t.query).documents.length),e=ms(hs(so(n.documents[0])))):e=function(t){var e=so(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){vr(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=function t(e){return e?void 0!==e.unaryFilter?[Co(e)]:void 0!==e.fieldFilter?[wo(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return t(e)})).reduce((function(t,e){return t.concat(e)})):pr():[]}(n.where));var a=[];n.orderBy&&(a=n.orderBy.map((function(t){return function(t){return new Vs(bo(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)})));var u=null;n.limit&&(u=function(t){var e;return Vr(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=yo(n.startAt));var l=null;return n.endAt&&(l=yo(n.endAt)),ms(ls(e,i,a,s,u,"F",c,l))}(t.query),new $r(e,t.targetId,0,t.lastListenSequenceNumber,r,i,Cr.fromBase64String(t.resumeToken))}function Qa(t,e){var n,r=qa(e.nt),i=qa(e.lastLimboFreeSnapshotVersion);n=Qr(e.target)?fo(t.Br,e.target):po(t.Br,e.target);var o=e.resumeToken.toBase64();return new mu(e.targetId,Wr(e.target),r,o,e.sequenceNumber,i,n)}var Ka=function(){function t(t,e,n,r){this.userId=t,this.serializer=e,this.ki=n,this.qr=r,this.Ur={}}return t.Kr=function(e,n,r,i){return vr(""!==e.uid),new t(e.Zs()?e.uid:"",n,r,i)},t.prototype.Qr=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Xa(t).rs({index:fu.userMutationsIndex,range:n},(function(t,n,r){e=!1,r.done()})).next((function(){return e}))},t.prototype.Wr=function(t,e,n,r){var i=this,o=Za(t),s=Xa(t);return s.add({}).next((function(a){vr("number"==typeof a);for(var u=new ba(a,e,n,r),c=function(t,e,n){var r=n.baseMutations.map((function(e){return lo(t.Br,e)})),i=n.mutations.map((function(e){return lo(t.Br,e)}));return new fu(e,n.batchId,n.di.toMillis(),r,i)}(i.serializer,i.userId,u),l=[],h=new ri((function(t,e){return _r(t.B(),e.B())})),f=0,d=r;f<d.length;f++){var p=d[f],v=du.key(i.userId,p.key.path,a);h=h.add(p.key.path.F()),l.push(s.put(c)),l.push(o.put(v,du.PLACEHOLDER))}return h.forEach((function(e){l.push(i.ki.jr(t,e))})),t.Ni((function(){i.Ur[a]=u.keys()})),Ws.On(l).next((function(){return u}))}))},t.prototype.Gr=function(t,e){var n=this;return Xa(t).get(e).next((function(t){return t?(vr(t.userId===n.userId),Wa(n.serializer,t)):null}))},t.prototype.zr=function(t,e){var n=this;return this.Ur[e]?Ws.resolve(this.Ur[e]):this.Gr(t,e).next((function(t){if(t){var r=t.keys();return n.Ur[e]=r,r}return null}))},t.prototype.Hr=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return Xa(t).rs({index:fu.userMutationsIndex,range:i},(function(t,e,i){e.userId===n.userId&&(vr(e.batchId>=r),o=Wa(n.serializer,e)),i.done()})).next((function(){return o}))},t.prototype.Yr=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Xa(t).rs({index:fu.userMutationsIndex,range:e,reverse:!0},(function(t,e,r){n=e.batchId,r.done()})).next((function(){return n}))},t.prototype.Jr=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Xa(t).ts(fu.userMutationsIndex,n).next((function(t){return t.map((function(t){return Wa(e.serializer,t)}))}))},t.prototype.$i=function(t,e){var n=this,r=du.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return Za(t).rs({range:i},(function(r,i,s){var a=r[0],u=r[2],c=La(r[1]);if(a===n.userId&&e.path.isEqual(c))return Xa(t).get(u).next((function(t){if(!t)throw pr();vr(t.userId===n.userId),o.push(Wa(n.serializer,t))}));s.done()})).next((function(){return o}))},t.prototype.Ki=function(t,e){var n=this,r=new ri(_r),i=[];return e.forEach((function(e){var o=du.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),a=Za(t).rs({range:s},(function(t,i,o){var s=t[0],a=t[2],u=La(t[1]);s===n.userId&&e.path.isEqual(u)?r=r.add(a):o.done()}));i.push(a)})),Ws.On(i).next((function(){return n.Xr(t,r)}))},t.prototype.Hi=function(t,e){var n=this,r=e.path,i=r.length+1,o=du.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new ri(_r);return Za(t).rs({range:s},(function(t,e,o){var s=t[0],u=t[2],c=La(t[1]);s===n.userId&&r.M(c)?c.length===i&&(a=a.add(u)):o.done()})).next((function(){return n.Xr(t,a)}))},t.prototype.Xr=function(t,e){var n=this,r=[],i=[];return e.forEach((function(e){i.push(Xa(t).get(e).next((function(t){if(null===t)throw pr();vr(t.userId===n.userId),r.push(Wa(n.serializer,t))})))})),Ws.On(i).next((function(){return r}))},t.prototype.Zr=function(t,e){var n=this;return $a(t.eo,this.userId,e).next((function(r){return t.Ni((function(){n.no(e.batchId)})),Ws.forEach(r,(function(e){return n.qr.so(t,e)}))}))},t.prototype.no=function(t){delete this.Ur[t]},t.prototype.io=function(t){var e=this;return this.Qr(t).next((function(n){if(!n)return Ws.resolve();var r=IDBKeyRange.lowerBound(du.prefixForUser(e.userId)),i=[];return Za(t).rs({range:r},(function(t,n,r){if(t[0]===e.userId){var o=La(t[1]);i.push(o)}else r.done()})).next((function(){vr(0===i.length)}))}))},t.prototype.ro=function(t,e){return Ya(t,this.userId,e)},t.prototype.oo=function(t){var e=this;return Ja(t).get(this.userId).next((function(t){return t||new hu(e.userId,-1,"")}))},t}();function Ya(t,e,n){var r=du.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return Za(t).rs({range:o,ss:!0},(function(t,n,r){t[0]===e&&t[1]===i&&(s=!0),r.done()})).next((function(){return s}))}function $a(t,e,n){var r=t.store(fu.store),i=t.store(du.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r.rs({range:s},(function(t,e,n){return a++,n.delete()}));o.push(u.next((function(){vr(1===a)})));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var f=h[l],d=du.key(e,f.key.path,n.batchId);o.push(i.delete(d)),c.push(f.key)}return Ws.On(o).next((function(){return c}))}function Xa(t){return Du.Kn(t,fu.store)}function Za(t){return Du.Kn(t,du.store)}function Ja(t){return Du.Kn(t,hu.store)}var tu=function(){function t(t,e){this.serializer=t,this.ki=e}return t.prototype.yi=function(t,e,n){return ru(t).put(iu(e),n)},t.prototype.pi=function(t,e){var n=ru(t),r=iu(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next((function(r){return r.byteSize+=e,n.ao(t,r)}))},t.prototype.bi=function(t,e){var n=this;return ru(t).get(iu(e)).next((function(t){return n.co(t)}))},t.prototype.uo=function(t,e){var n=this;return ru(t).get(iu(e)).next((function(t){var e=n.co(t);return e?{ho:e,size:ou(t)}:null}))},t.prototype.getEntries=function(t,e){var n=this,r=ai();return this.lo(t,e,(function(t,e){var i=n.co(e);r=r.ot(t,i)})).next((function(){return r}))},t.prototype._o=function(t,e){var n=this,r=ai(),i=new ti(Mr.D);return this.lo(t,e,(function(t,e){var o=n.co(e);o?(r=r.ot(t,o),i=i.ot(t,ou(e))):(r=r.ot(t,null),i=i.ot(t,0))})).next((function(){return{fo:r,do:i}}))},t.prototype.lo=function(t,e,n){if(e.P())return Ws.resolve();var r=IDBKeyRange.bound(e.first().path.L(),e.last().path.L()),i=e._t(),o=i.It();return ru(t).rs({range:r},(function(t,e,r){for(var s=Mr.Z(t);o&&Mr.D(o,s)<0;)n(o,null),o=i.It();o&&o.isEqual(s)&&(n(o,e),o=i.At()?i.It():null),o?r.Xn(o.path.L()):r.done()})).next((function(){for(;o;)n(o,null),o=i.At()?i.It():null}))},t.prototype.Qi=function(t,e,n){var r=this,i=ci(),o=e.path.length+1,s={};if(n.isEqual(Dr.min())){var a=e.path.L();s.range=IDBKeyRange.lowerBound(a)}else{var u=e.path.L(),c=Ua(n);s.range=IDBKeyRange.lowerBound([u,c],!0),s.index=yu.collectionReadTimeIndex}return ru(t).rs(s,(function(t,n,s){if(t.length===o){var a=Ma(r.serializer,n);e.path.M(a.key.path)?a instanceof ss&&Ss(e,a)&&(i=i.ot(a.key,a)):s.done()}})).next((function(){return i}))},t.prototype.wo=function(t){return new eu(this,!!t&&t.Eo)},t.prototype.To=function(t){return this.getMetadata(t).next((function(t){return t.byteSize}))},t.prototype.getMetadata=function(t){return nu(t).get(gu.key).next((function(t){return vr(!!t),t}))},t.prototype.ao=function(t,e){return nu(t).put(gu.key,e)},t.prototype.co=function(t){if(t){var e=Ma(this.serializer,t);return e instanceof as&&e.version.isEqual(Dr.min())?null:e}return null},t}(),eu=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Io=e,r.Eo=n,r.mo=new Rr((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),r}return Object(r.d)(e,t),e.prototype.Di=function(t){var e=this,n=[],r=0,i=new ri((function(t,e){return _r(t.B(),e.B())}));return this.Ri.forEach((function(o,s){var a=e.mo.get(o);if(s){var u=Va(e.Io.serializer,s,e.readTime);i=i.add(o.path.F());var c=ou(u);r+=c-a,n.push(e.Io.yi(t,o,u))}else if(r-=a,e.Eo){var l=Va(e.Io.serializer,new as(o,Dr.min()),e.readTime);n.push(e.Io.yi(t,o,l))}else n.push(e.Io.pi(t,o))})),i.forEach((function(r){n.push(e.Io.ki.jr(t,r))})),n.push(this.Io.updateMetadata(t,r)),Ws.On(n)},e.prototype.vi=function(t,e){var n=this;return this.Io.uo(t,e).next((function(t){return null===t?(n.mo.set(e,0),null):(n.mo.set(e,t.size),t.ho)}))},e.prototype.Si=function(t,e){var n=this;return this.Io._o(t,e).next((function(t){var e=t.fo;return t.do.forEach((function(t,e){n.mo.set(t,e)})),e}))},e}(Ca);function nu(t){return Du.Kn(t,gu.store)}function ru(t){return Du.Kn(t,yu.store)}function iu(t){return t.path.L()}function ou(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw pr();e=t.noDocument}return JSON.stringify(e).length}var su=function(){function t(){this.Ao=new au}return t.prototype.jr=function(t,e){return this.Ao.add(e),Ws.resolve()},t.prototype.zi=function(t,e){return Ws.resolve(this.Ao.getEntries(e))},t}(),au=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.k(),n=t.F(),r=this.index[e]||new ri(jr.D),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.k(),n=t.F(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new ri(jr.D)).L()},t}(),uu=function(){function t(t){this.serializer=t}return t.prototype.createOrUpgrade=function(t,e,n,r){var i=this;vr(n<r&&n>=0&&r<=10);var o=new $s("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(lu.store)}(t),function(t){t.createObjectStore(hu.store,{keyPath:hu.keyPath}),t.createObjectStore(fu.store,{keyPath:fu.keyPath,autoIncrement:!0}).createIndex(fu.userMutationsIndex,fu.userMutationsKeyPath,{unique:!0}),t.createObjectStore(du.store)}(t),Cu(t),function(t){t.createObjectStore(yu.store)}(t));var s=Ws.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(_u.store),t.deleteObjectStore(mu.store),t.deleteObjectStore(bu.store)}(t),Cu(t)),s=s.next((function(){return function(t){var e=t.store(bu.store),n=new bu(0,0,Dr.min().v(),0);return e.put(bu.key,n)}(o)}))),n<4&&r>=4&&(0!==n&&(s=s.next((function(){return function(t,e){return e.store(fu.store).ts().next((function(n){t.deleteObjectStore(fu.store),t.createObjectStore(fu.store,{keyPath:fu.keyPath,autoIncrement:!0}).createIndex(fu.userMutationsIndex,fu.userMutationsKeyPath,{unique:!0});var r=e.store(fu.store),i=n.map((function(t){return r.put(t)}));return Ws.On(i)}))}(t,o)}))),s=s.next((function(){!function(t){t.createObjectStore(ku.store,{keyPath:ku.keyPath})}(t)}))),n<5&&r>=5&&(s=s.next((function(){return i.removeAcknowledgedMutations(o)}))),n<6&&r>=6&&(s=s.next((function(){return function(t){t.createObjectStore(gu.store)}(t),i.addDocumentGlobal(o)}))),n<7&&r>=7&&(s=s.next((function(){return i.ensureSequenceNumbers(o)}))),n<8&&r>=8&&(s=s.next((function(){return i.createCollectionParentIndex(t,o)}))),n<9&&r>=9&&(s=s.next((function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(yu.store);e.createIndex(yu.readTimeIndex,yu.readTimeIndexPath,{unique:!1}),e.createIndex(yu.collectionReadTimeIndex,yu.collectionReadTimeIndexPath,{unique:!1})}(e)}))),n<10&&r>=10&&(s=s.next((function(){return i.rewriteCanonicalIds(o)}))),s},t.prototype.addDocumentGlobal=function(t){var e=0;return t.store(yu.store).rs((function(t,n){e+=ou(n)})).next((function(){var n=new gu(e);return t.store(gu.store).put(gu.key,n)}))},t.prototype.removeAcknowledgedMutations=function(t){var e=this,n=t.store(hu.store),r=t.store(fu.store);return n.ts().next((function(n){return Ws.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.ts(fu.userMutationsIndex,i).next((function(r){return Ws.forEach(r,(function(r){vr(r.userId===n.userId);var i=Wa(e.serializer,r);return $a(t,n.userId,i).next((function(){}))}))}))}))}))},t.prototype.ensureSequenceNumbers=function(t){var e=t.store(_u.store),n=t.store(yu.store);return t.store(bu.store).get(bu.key).next((function(t){var r=[];return n.rs((function(n,i){var o=new jr(n),s=function(t){return[0,Da(t)]}(o);r.push(e.get(s).next((function(n){return n?Ws.resolve():function(n){return e.put(new _u(0,Da(n),t.highestListenSequenceNumber))}(o)})))})).next((function(){return Ws.On(r)}))}))},t.prototype.createCollectionParentIndex=function(t,e){t.createObjectStore(wu.store,{keyPath:wu.keyPath});var n=e.store(wu.store),r=new au,i=function(t){if(r.add(t)){var e=t.k(),i=t.F();return n.put({collectionId:e,parent:Da(i)})}};return e.store(yu.store).rs({ss:!0},(function(t,e){var n=new jr(t);return i(n.F())})).next((function(){return e.store(du.store).rs({ss:!0},(function(t,e){var n=La(t[1]);return i(n.F())}))}))},t.prototype.rewriteCanonicalIds=function(t){var e=this,n=t.store(mu.store);return n.rs((function(t,r){var i=Ga(r),o=Qa(e.serializer,i);return n.put(o)}))},t}(),cu=function(t,e){this.seconds=t,this.nanoseconds=e},lu=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};lu.store="owner",lu.key="owner";var hu=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};hu.store="mutationQueues",hu.keyPath="userId";var fu=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};fu.store="mutations",fu.keyPath="batchId",fu.userMutationsIndex="userMutationsIndex",fu.userMutationsKeyPath=["userId","batchId"];var du=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,Da(e)]},t.key=function(t,e,n){return[t,Da(e),n]},t}();du.store="documentMutations",du.PLACEHOLDER=new du;var pu=function(t,e){this.path=t,this.readTime=e},vu=function(t,e){this.path=t,this.version=e},yu=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};yu.store="remoteDocuments",yu.readTimeIndex="readTimeIndex",yu.readTimeIndexPath="readTime",yu.collectionReadTimeIndex="collectionReadTimeIndex",yu.collectionReadTimeIndexPath=["parentPath","readTime"];var gu=function(t){this.byteSize=t};gu.store="remoteDocumentGlobal",gu.key="remoteDocumentGlobalKey";var mu=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};mu.store="targets",mu.keyPath="targetId",mu.queryTargetsIndexName="queryTargetsIndex",mu.queryTargetsKeyPath=["canonicalId","targetId"];var _u=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};_u.store="targetDocuments",_u.keyPath=["targetId","path"],_u.documentTargetsIndex="documentTargetsIndex",_u.documentTargetsKeyPath=["path","targetId"];var bu=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};bu.key="targetGlobalKey",bu.store="targetGlobal";var wu=function(t,e){this.collectionId=t,this.parent=e};function Cu(t){t.createObjectStore(_u.store,{keyPath:_u.keyPath}).createIndex(_u.documentTargetsIndex,_u.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(mu.store,{keyPath:mu.keyPath}).createIndex(mu.queryTargetsIndexName,mu.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(bu.store)}wu.store="collectionParents",wu.keyPath=["collectionId","parent"];var ku=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};ku.store="clientMetadata",ku.keyPath="clientId";var Eu=Object(r.j)(Object(r.j)(Object(r.j)([hu.store,fu.store,du.store,yu.store,mu.store,lu.store,bu.store,_u.store],[ku.store]),[gu.store]),[wu.store]),Su=function(){function t(){this.Ro=new au}return t.prototype.jr=function(t,e){var n=this;if(!this.Ro.has(e)){var r=e.k(),i=e.F();t.Ni((function(){n.Ro.add(e)}));var o={collectionId:r,parent:Da(i)};return Tu(t).put(o)}return Ws.resolve()},t.prototype.zi=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[wr(e),""],!1,!0);return Tu(t).ts(r).next((function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(La(o.parent))}return n}))},t}();function Tu(t){return Du.Kn(t,wu.store)}var Ou=function(){function t(t){this.Po=t}return t.prototype.next=function(){return this.Po+=2,this.Po},t.yo=function(){return new t(0)},t.Vo=function(){return new t(-1)},t}(),Iu=function(){function t(t,e){this.qr=t,this.serializer=e}return t.prototype.po=function(t){var e=this;return this.bo(t).next((function(n){var r=new Ou(n.highestTargetId);return n.highestTargetId=r.next(),e.vo(t,n).next((function(){return n.highestTargetId}))}))},t.prototype.So=function(t){return this.bo(t).next((function(t){return Dr.V(new Nr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))}))},t.prototype.Do=function(t){return this.bo(t).next((function(t){return t.highestListenSequenceNumber}))},t.prototype.Co=function(t,e,n){var r=this;return this.bo(t).next((function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.v()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.vo(t,i)}))},t.prototype.No=function(t,e){var n=this;return this.xo(t,e).next((function(){return n.bo(t).next((function(r){return r.targetCount+=1,n.Fo(e,r),n.vo(t,r)}))}))},t.prototype.Oo=function(t,e){return this.xo(t,e)},t.prototype.ko=function(t,e){var n=this;return this.Mo(t,e.targetId).next((function(){return xu(t).delete(e.targetId)})).next((function(){return n.bo(t)})).next((function(e){return vr(e.targetCount>0),e.targetCount-=1,n.vo(t,e)}))},t.prototype.Or=function(t,e,n){var r=this,i=0,o=[];return xu(t).rs((function(s,a){var u=Ga(a);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.ko(t,u)))})).next((function(){return Ws.On(o)})).next((function(){return i}))},t.prototype.Ce=function(t,e){return xu(t).rs((function(t,n){var r=Ga(n);e(r)}))},t.prototype.bo=function(t){return Au(t).get(bu.key).next((function(t){return vr(null!==t),t}))},t.prototype.vo=function(t,e){return Au(t).put(bu.key,e)},t.prototype.xo=function(t,e){return xu(t).put(Qa(this.serializer,e))},t.prototype.Fo=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.$o=function(t){return this.bo(t).next((function(t){return t.targetCount}))},t.prototype.Lo=function(t,e){var n=Wr(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return xu(t).rs({range:r,index:mu.queryTargetsIndexName},(function(t,n,r){var o=Ga(n);Gr(e,o.target)&&(i=o,r.done())})).next((function(){return i}))},t.prototype.Bo=function(t,e,n){var r=this,i=[],o=Pu(t);return e.forEach((function(e){var s=Da(e.path);i.push(o.put(new _u(n,s))),i.push(r.qr.qo(t,n,e))})),Ws.On(i)},t.prototype.Uo=function(t,e,n){var r=this,i=Pu(t);return Ws.forEach(e,(function(e){var o=Da(e.path);return Ws.On([i.delete([n,o]),r.qr.Ko(t,n,e)])}))},t.prototype.Mo=function(t,e){var n=Pu(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.Qo=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=Pu(t),i=fi();return r.rs({range:n,ss:!0},(function(t,e,n){var r=La(t[1]),o=new Mr(r);i=i.add(o)})).next((function(){return i}))},t.prototype.ro=function(t,e){var n=Da(e.path),r=IDBKeyRange.bound([n],[wr(n)],!1,!0),i=0;return Pu(t).rs({index:_u.documentTargetsIndex,ss:!0,range:r},(function(t,e,n){0!==t[0]&&(i++,n.done())})).next((function(){return i>0}))},t.prototype.Ue=function(t,e){return xu(t).get(e).next((function(t){return t?Ga(t):null}))},t}();function xu(t){return Du.Kn(t,mu.store)}function Au(t){return Du.Kn(t,bu.store)}function Pu(t){return Du.Kn(t,_u.store)}var Ru="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Nu=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).eo=e,r.Wo=n,r}return Object(r.d)(e,t),e}(Ea),Du=function(){function t(e,n,r,i,o,s,a,u,c,l){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.fn=o,this.window=s,this.document=a,this.jo=c,this.Go=l,this.zo=null,this.Ho=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Yo=null,this.inForeground=!1,this.Jo=null,this.Xo=null,this.Zo=Number.NEGATIVE_INFINITY,this.ta=function(t){return Promise.resolve()},!t.Ln())throw new ar(sr.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.qr=new Lu(this,i),this.ea=n+"main",this.serializer=new Fa(u),this.na=new Gs(this.ea,10,new uu(this.serializer)),this.sa=new Iu(this.qr,this.serializer),this.ki=new Su,this.Fi=function(t,e){return new tu(t,e)}(this.serializer,this.ki),this.window&&this.window.localStorage?this.ia=this.window.localStorage:(this.ia=null,!1===l&&hr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.Kn=function(t,e){if(t instanceof Nu)return Gs.Kn(t.eo,e);throw pr()},t.prototype.start=function(){var t=this;return this.ra().then((function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new ar(sr.FAILED_PRECONDITION,Ru);return t.oa(),t.aa(),t.ca(),t.runTransaction("getHighestListenSequenceNumber","readonly",(function(e){return t.sa.Do(e)}))})).then((function(e){t.zo=new Oa(e,t.jo)})).then((function(){t.Ho=!0})).catch((function(e){return t.na&&t.na.close(),Promise.reject(e)}))},t.prototype.ua=function(t){var e=this;return this.ta=function(n){return Object(r.b)(e,void 0,void 0,(function(){return Object(r.e)(this,(function(e){return this.br?[2,t(n)]:[2]}))}))},t(this.isPrimary)},t.prototype.ha=function(t){var e=this;this.na.jn((function(n){return Object(r.b)(e,void 0,void 0,(function(){return Object(r.e)(this,(function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))},t.prototype.la=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.fn.ws((function(){return Object(r.b)(e,void 0,void 0,(function(){return Object(r.e)(this,(function(t){switch(t.label){case 0:return this.br?[4,this.ra()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})))},t.prototype.ra=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(e){return ju(e).put(new ku(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next((function(){if(t.isPrimary)return t._a(e).next((function(e){e||(t.isPrimary=!1,t.fn.Cs((function(){return t.ta(!1)})))}))})).next((function(){return t.fa(e)})).next((function(n){return t.isPrimary&&!n?t.da(e).next((function(){return!1})):!!n&&t.wa(e).next((function(){return!0}))}))})).catch((function(e){if(Ys(e))return lr("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return lr("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((function(e){t.isPrimary!==e&&t.fn.Cs((function(){return t.ta(e)})),t.isPrimary=e}))},t.prototype._a=function(t){var e=this;return zu(t).get(lu.key).next((function(t){return Ws.resolve(e.Ea(t))}))},t.prototype.Ta=function(t){return ju(t).delete(this.clientId)},t.prototype.Ia=function(){return Object(r.b)(this,void 0,void 0,(function(){var e,n,i,o=this;return Object(r.e)(this,(function(r){switch(r.label){case 0:return!this.isPrimary||this.ma(this.Zo,18e5)?[3,2]:(this.Zo=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var n=t.Kn(e,ku.store);return n.ts().next((function(t){var e=o.Aa(t,18e5),r=t.filter((function(t){return-1===e.indexOf(t)}));return Ws.forEach(r,(function(t){return n.delete(t.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}))]);case 1:if(e=r.sent(),this.ia)for(n=0,i=e;n<i.length;n++)this.ia.removeItem(this.Ra(i[n].clientId));r.label=2;case 2:return[2]}}))}))},t.prototype.ca=function(){var t=this;this.Xo=this.fn.yn("client_metadata_refresh",4e3,(function(){return t.ra().then((function(){return t.Ia()})).then((function(){return t.ca()}))}))},t.prototype.Ea=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.fa=function(t){var e=this;return this.Go?Ws.resolve(!0):zu(t).get(lu.key).next((function(n){if(null!==n&&e.ma(n.leaseTimestampMs,5e3)&&!e.Pa(n.ownerId)){if(e.Ea(n)&&e.networkEnabled)return!0;if(!e.Ea(n)){if(!n.allowTabSynchronization)throw new ar(sr.FAILED_PRECONDITION,Ru);return!1}}return!(!e.networkEnabled||!e.inForeground)||ju(t).ts().next((function(t){return void 0===e.Aa(t,5e3).find((function(t){return!(e.clientId===t.clientId||!(!e.networkEnabled&&t.networkEnabled||!e.inForeground&&t.inForeground&&e.networkEnabled===t.networkEnabled))}))}))})).next((function(t){return e.isPrimary!==t&&lr("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t}))},t.prototype.ga=function(){return Object(r.b)(this,void 0,void 0,(function(){var t=this;return Object(r.e)(this,(function(e){switch(e.label){case 0:return this.Ho=!1,this.ya(),this.Xo&&(this.Xo.cancel(),this.Xo=null),this.Va(),this.pa(),[4,this.na.runTransaction("shutdown","readwrite",[lu.store,ku.store],(function(e){var n=new Nu(e,Oa.ir);return t.da(n).next((function(){return t.Ta(n)}))}))];case 1:return e.sent(),this.na.close(),this.ba(),[2]}}))}))},t.prototype.Aa=function(t,e){var n=this;return t.filter((function(t){return n.ma(t.updateTimeMs,e)&&!n.Pa(t.clientId)}))},t.prototype.va=function(){var t=this;return this.runTransaction("getActiveClients","readonly",(function(e){return ju(e).ts().next((function(e){return t.Aa(e,18e5).map((function(t){return t.clientId}))}))}))},Object.defineProperty(t.prototype,"br",{get:function(){return this.Ho},enumerable:!1,configurable:!0}),t.prototype.Sa=function(t){return Ka.Kr(t,this.serializer,this.ki,this.qr)},t.prototype.Da=function(){return this.sa},t.prototype.Ca=function(){return this.Fi},t.prototype.Na=function(){return this.ki},t.prototype.runTransaction=function(t,e,n){var r,i=this;return lr("IndexedDbPersistence","Starting transaction:",t),this.na.runTransaction(t,"readonly"===e?"readonly":"readwrite",Eu,(function(o){return r=new Nu(o,i.zo?i.zo.next():Oa.ir),"readwrite-primary"===e?i._a(r).next((function(t){return!!t||i.fa(r)})).next((function(e){if(!e)throw hr("Failed to obtain primary lease for action '"+t+"'."),i.isPrimary=!1,i.fn.Cs((function(){return i.ta(!1)})),new ar(sr.FAILED_PRECONDITION,ka);return n(r)})).next((function(t){return i.wa(r).next((function(){return t}))})):i.xa(r).next((function(){return n(r)}))})).then((function(t){return r.xi(),t}))},t.prototype.xa=function(t){var e=this;return zu(t).get(lu.key).next((function(t){if(null!==t&&e.ma(t.leaseTimestampMs,5e3)&&!e.Pa(t.ownerId)&&!e.Ea(t)&&!(e.Go||e.allowTabSynchronization&&t.allowTabSynchronization))throw new ar(sr.FAILED_PRECONDITION,Ru)}))},t.prototype.wa=function(t){var e=new lu(this.clientId,this.allowTabSynchronization,Date.now());return zu(t).put(lu.key,e)},t.Ln=function(){return Gs.Ln()},t.prototype.da=function(t){var e=this,n=zu(t);return n.get(lu.key).next((function(t){return e.Ea(t)?(lr("IndexedDbPersistence","Releasing primary lease."),n.delete(lu.key)):Ws.resolve()}))},t.prototype.ma=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(hr("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.oa=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Jo=function(){t.fn.ws((function(){return t.inForeground="visible"===t.document.visibilityState,t.ra()}))},this.document.addEventListener("visibilitychange",this.Jo),this.inForeground="visible"===this.document.visibilityState)},t.prototype.Va=function(){this.Jo&&(this.document.removeEventListener("visibilitychange",this.Jo),this.Jo=null)},t.prototype.aa=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Yo=function(){e.ya(),e.fn.ws((function(){return e.ga()}))},this.window.addEventListener("unload",this.Yo))},t.prototype.pa=function(){this.Yo&&(this.window.removeEventListener("unload",this.Yo),this.Yo=null)},t.prototype.Pa=function(t){var e;try{var n=null!==(null===(e=this.ia)||void 0===e?void 0:e.getItem(this.Ra(t)));return lr("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return hr("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.ya=function(){if(this.ia)try{this.ia.setItem(this.Ra(this.clientId),String(Date.now()))}catch(t){hr("Failed to set zombie client id.",t)}},t.prototype.ba=function(){if(this.ia)try{this.ia.removeItem(this.Ra(this.clientId))}catch(t){}},t.prototype.Ra=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function zu(t){return Du.Kn(t,lu.store)}function ju(t){return Du.Kn(t,ku.store)}var Lu=function(){function t(t,e){this.db=t,this.gr=new Na(this,e)}return t.prototype.Cr=function(t){var e=this.Fa(t);return this.db.Da().$o(t).next((function(t){return e.next((function(e){return t+e}))}))},t.prototype.Fa=function(t){var e=0;return this.Fr(t,(function(t){e++})).next((function(){return e}))},t.prototype.Ce=function(t,e){return this.db.Da().Ce(t,e)},t.prototype.Fr=function(t,e){return this.Oa(t,(function(t,n){return e(n)}))},t.prototype.qo=function(t,e,n){return Fu(t,n)},t.prototype.Ko=function(t,e,n){return Fu(t,n)},t.prototype.Or=function(t,e,n){return this.db.Da().Or(t,e,n)},t.prototype.so=function(t,e){return Fu(t,e)},t.prototype.ka=function(t,e){return function(t,e){var n=!1;return Ja(t).os((function(r){return Ya(t,r,e).next((function(t){return t&&(n=!0),Ws.resolve(!t)}))})).next((function(){return n}))}(t,e)},t.prototype.kr=function(t,e){var n=this,r=this.db.Ca().wo(),i=[],o=0;return this.Oa(t,(function(s,a){if(a<=e){var u=n.ka(t,s).next((function(e){if(!e)return o++,r.bi(t,s).next((function(){return r.pi(s),Pu(t).delete([0,Da(s.path)])}))}));i.push(u)}})).next((function(){return Ws.On(i)})).next((function(){return r.apply(t)})).next((function(){return o}))},t.prototype.removeTarget=function(t,e){var n=e.st(t.Wo);return this.db.Da().Oo(t,n)},t.prototype.Ma=function(t,e){return Fu(t,e)},t.prototype.Oa=function(t,e){var n,r=Pu(t),i=Oa.ir;return r.rs({index:_u.documentTargetsIndex},(function(t,r){var o=r.path,s=r.sequenceNumber;0===t[0]?(i!==Oa.ir&&e(new Mr(La(n)),i),i=s,n=o):i=Oa.ir})).next((function(){i!==Oa.ir&&e(new Mr(La(n)),i)}))},t.prototype.$r=function(t){return this.db.Ca().To(t)},t}();function Fu(t,e){return Pu(t).put(function(t,e){return new _u(0,Da(t.path),e)}(e,t.Wo))}function Mu(t,e){var n=t.projectId;return t.I||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var Vu=function(){function t(t,e,n){this.persistence=t,this.$a=e,this.La=new ti(_r),this.Ba=new Rr((function(t){return Wr(t)}),Gr),this.qa=Dr.min(),this.Oi=t.Sa(n),this.Ua=t.Ca(),this.sa=t.Da(),this.Ka=new Sa(this.Ua,this.Oi,this.persistence.Na()),this.$a.Qa(this.Ka)}return t.prototype.vr=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return t.Mr(n,e.La)}))},t}();function Uu(t,e){return Object(r.b)(this,void 0,void 0,(function(){var n,i,o,s;return Object(r.e)(this,(function(r){switch(r.label){case 0:return n=yr(t),i=n.Oi,o=n.Ka,[4,n.persistence.runTransaction("Handle user change","readonly",(function(t){var r;return n.Oi.Jr(t).next((function(s){return r=s,i=n.persistence.Sa(e),o=new Sa(n.Ua,i,n.persistence.Na()),i.Jr(t)})).next((function(e){for(var n=[],i=[],s=fi(),a=0,u=r;a<u.length;a++){var c=u[a];n.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++)s=s.add(h[l].key)}for(var f=0,d=e;f<d.length;f++){var p=d[f];i.push(p.batchId);for(var v=0,y=p.mutations;v<y.length;v++)s=s.add(y[v].key)}return o.qi(t,s).next((function(t){return{Wa:t,ja:n,Ga:i}}))}))}))];case 1:return s=r.sent(),[2,(n.Oi=i,n.Ka=o,n.$a.Qa(n.Ka),s)]}}))}))}function Bu(t,e){var n=yr(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(t){var r=e.batch.keys(),i=n.Ua.wo({Eo:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),s=Ws.resolve();return o.forEach((function(t){s=s.next((function(){return r.bi(e,t)})).next((function(e){var o=e,s=n.Ai.get(t);vr(null!==s),(!o||o.version.u(s)<0)&&(o=i.wi(t,o,n))&&r.yi(o,n.mi)}))})),s.next((function(){return t.Oi.Zr(e,i)}))}(n,t,e,i).next((function(){return i.apply(t)})).next((function(){return n.Oi.io(t)})).next((function(){return n.Ka.qi(t,r)}))}))}function qu(t){var e=yr(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(function(t){return e.sa.So(t)}))}function Hu(t,e){var n=yr(t),r=e.nt,i=n.La;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(t){var o=n.Ua.wo({Eo:!0});i=n.La;var s=[];e.zt.forEach((function(e,o){var a=i.get(o);if(a){s.push(n.sa.Uo(t,e.se,o).next((function(){return n.sa.Bo(t,e.ee,o)})));var u=e.resumeToken;if(u.o()>0){var c=a.it(u,r).st(t.Wo);i=i.ot(o,c),function(t,e,n){return vr(e.resumeToken.o()>0),0===t.resumeToken.o()||e.nt.p()-t.nt.p()>=3e8||n.ee.size+n.ne.size+n.se.size>0}(a,c,e)&&s.push(n.sa.Oo(t,c))}}}));var a=si(),u=fi();if(e.Yt.forEach((function(t,e){u=u.add(t)})),s.push(o.getEntries(t,u).next((function(i){e.Yt.forEach((function(u,c){var l=i.get(u);c instanceof as&&c.version.isEqual(Dr.min())?(o.pi(u,r),a=a.ot(u,c)):null==l||c.version.u(l.version)>0||0===c.version.u(l.version)&&l.hasPendingWrites?(o.yi(c,r),a=a.ot(u,c)):lr("LocalStore","Ignoring outdated watch update for ",u,". Current version:",l.version," Watch version:",c.version),e.Jt.has(u)&&s.push(n.persistence.qr.Ma(t,u))}))}))),!r.isEqual(Dr.min())){var c=n.sa.So(t).next((function(e){return n.sa.Co(t,t.Wo,r)}));s.push(c)}return Ws.On(s).next((function(){return o.apply(t)})).next((function(){return n.Ka.Ui(t,a)}))})).then((function(t){return n.La=i,t}))}function Wu(t,e){var n=yr(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(t){return void 0===e&&(e=-1),n.Oi.Hr(t,e)}))}function Gu(t,e){var n=yr(t);return n.persistence.runTransaction("Allocate target","readwrite",(function(t){var r;return n.sa.Lo(t,e).next((function(i){return i?Ws.resolve(r=i):n.sa.po(t).next((function(i){return r=new $r(e,i,0,t.Wo),n.sa.No(t,r).next((function(){return r}))}))}))})).then((function(t){var r=n.La.get(t.targetId);return(null===r||t.nt.u(r.nt)>0)&&(n.La=n.La.ot(t.targetId,t),n.Ba.set(e,t.targetId)),t}))}function Qu(t,e,n){return Object(r.b)(this,void 0,void 0,(function(){var i,o,s,a;return Object(r.e)(this,(function(r){switch(r.label){case 0:i=yr(t),o=i.La.get(e),s=n?"readwrite":"readwrite-primary",r.label=1;case 1:return r.trys.push([1,4,,5]),n?[3,3]:[4,i.persistence.runTransaction("Release target",s,(function(t){return i.persistence.qr.removeTarget(t,o)}))];case 2:r.sent(),r.label=3;case 3:return[3,5];case 4:if(!Ys(a=r.sent()))throw a;return lr("LocalStore","Failed to update sequence numbers for target "+e+": "+a),[3,5];case 5:return i.La=i.La.remove(e),i.Ba.delete(o.target),[2]}}))}))}function Ku(t,e,n){var r=yr(t),i=Dr.min(),o=fi();return r.persistence.runTransaction("Execute query","readonly",(function(t){return function(t,e,n){var r=yr(t),i=r.Ba.get(n);return void 0!==i?Ws.resolve(r.La.get(i)):r.sa.Lo(e,n)}(r,t,ms(e)).next((function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.sa.Qo(t,e.targetId).next((function(t){o=t}))})).next((function(){return r.$a.Qi(t,e,n?i:Dr.min(),n?o:fi())})).next((function(t){return{documents:t,za:o}}))}))}function Yu(t,e){var n=yr(t),r=yr(n.sa),i=n.La.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(t){return r.Ue(t,e).next((function(t){return t?t.target:null}))}))}function $u(t){var e=yr(t);return e.persistence.runTransaction("Get new document changes","readonly",(function(t){return function(t,e,n){var r=yr(t),i=si(),o=Ua(n),s=ru(e),a=IDBKeyRange.lowerBound(o,!0);return s.rs({index:yu.readTimeIndex,range:a},(function(t,e){var n=Ma(r.serializer,e);i=i.ot(n.key,n),o=e.readTime})).next((function(){return{Ha:i,readTime:Ba(o)}}))}(e.Ua,t,e.qa)})).then((function(t){var n=t.Ha;return e.qa=t.readTime,n}))}function Xu(t){return Object(r.b)(this,void 0,void 0,(function(){var e;return Object(r.e)(this,(function(n){return[2,(e=yr(t)).persistence.runTransaction("Synchronize last document change read time","readonly",(function(t){return function(t){var e=ru(t),n=Dr.min();return e.rs({index:yu.readTimeIndex,reverse:!0},(function(t,e,r){e.readTime&&(n=Ba(e.readTime)),r.done()})).next((function(){return n}))}(t)})).then((function(t){e.qa=t}))]}))}))}function Zu(t){return Object(r.b)(this,void 0,void 0,(function(){return Object(r.e)(this,(function(e){if(t.code!==sr.FAILED_PRECONDITION||t.message!==ka)throw t;return lr("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}var Ju=function(){function t(t,e,n,r,i,o){this.fn=t,this.Ya=n,this.Ja=r,this.Xa=i,this.listener=o,this.state=0,this.Za=0,this.tc=null,this.stream=null,this.ys=new Hs(t,e)}return t.prototype.ec=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.nc=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.sc()},t.prototype.stop=function(){return Object(r.b)(this,void 0,void 0,(function(){return Object(r.e)(this,(function(t){switch(t.label){case 0:return this.ec()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.ic=function(){this.state=0,this.ys.reset()},t.prototype.rc=function(){var t=this;this.nc()&&null===this.tc&&(this.tc=this.fn.yn(this.Ya,6e4,(function(){return t.oc()})))},t.prototype.ac=function(t){this.cc(),this.stream.send(t)},t.prototype.oc=function(){return Object(r.b)(this,void 0,void 0,(function(){return Object(r.e)(this,(function(t){return this.nc()?[2,this.close(0)]:[2]}))}))},t.prototype.cc=function(){this.tc&&(this.tc.cancel(),this.tc=null)},t.prototype.close=function(t,e){return Object(r.b)(this,void 0,void 0,(function(){return Object(r.e)(this,(function(n){switch(n.label){case 0:return this.cc(),this.ys.cancel(),this.Za++,3!==t?this.ys.reset():e&&e.code===sr.RESOURCE_EXHAUSTED?(hr(e.toString()),hr("Using maximum backoff delay to prevent overloading the backend."),this.ys.Rn()):e&&e.code===sr.UNAUTHENTICATED&&this.Xa.ri(),null!==this.stream&&(this.uc(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.hc(e)];case 1:return n.sent(),[2]}}))}))},t.prototype.uc=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.lc(this.Za),n=this.Za;this.Xa.getToken().then((function(e){t.Za===n&&t._c(e)}),(function(n){e((function(){var e=new ar(sr.UNKNOWN,"Fetching auth token failed: "+n.message);return t.fc(e)}))}))},t.prototype._c=function(t){var e=this,n=this.lc(this.Za);this.stream=this.dc(t),this.stream.wc((function(){n((function(){return e.state=2,e.listener.wc()}))})),this.stream.hc((function(t){n((function(){return e.fc(t)}))})),this.stream.onMessage((function(t){n((function(){return e.onMessage(t)}))}))},t.prototype.sc=function(){var t=this;this.state=4,this.ys.Pn((function(){return Object(r.b)(t,void 0,void 0,(function(){return Object(r.e)(this,(function(t){return this.state=0,this.start(),[2]}))}))}))},t.prototype.fc=function(t){return lr("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.lc=function(t){var e=this;return function(n){e.fn.ws((function(){return e.Za===t?n():(lr("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},t}(),tc=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).serializer=i,s}return Object(r.d)(e,t),e.prototype.dc=function(t){return this.Ja.Ec("Listen",t)},e.prototype.onMessage=function(t){this.ys.reset();var e=function(t,e){var n;if("targetChange"in e){var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:pr()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.Ke?(vr(void 0===e||"string"==typeof e),Cr.fromBase64String(e||"")):(vr(void 0===e||e instanceof Uint8Array),Cr.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(t){var e=void 0===t.code?sr.UNKNOWN:Jr(t.code);return new ar(e,t.message||"")}(s);n=new Ci(r,i,o,a||null)}else if("documentChange"in e){var u=e.documentChange,c=io(t,u.document.name),l=to(u.document.updateTime),h=new ns({mapValue:{fields:u.document.fields}}),f=new ss(c,l,h,{});n=new bi(u.targetIds||[],u.removedTargetIds||[],f.key,f)}else if("documentDelete"in e){var d=e.documentDelete,p=io(t,d.document),v=d.readTime?to(d.readTime):Dr.min(),y=new as(p,v);n=new bi([],d.removedTargetIds||[],y.key,y)}else if("documentRemove"in e){var g=e.documentRemove,m=io(t,g.document);n=new bi([],g.removedTargetIds||[],m,null)}else{if(!("filter"in e))return pr();var _=e.filter,b=new Xr(_.count||0);n=new wi(_.targetId,b)}return n}(this.serializer,t),n=function(t){if(!("targetChange"in t))return Dr.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?Dr.min():e.readTime?to(e.readTime):Dr.min()}(t);return this.listener.Tc(e,n)},e.prototype.Ic=function(t){var e={};e.database=ao(this.serializer),e.addTarget=function(t,e){var n,r=e.target;return(n=Qr(r)?{documents:fo(t,r)}:{query:po(t,r)}).targetId=e.targetId,e.resumeToken.o()>0&&(n.resumeToken=Zi(t,e.resumeToken)),n}(this.serializer,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return pr()}}(0,e.et);return null==n?null:{"goog-listen-tags":n}}(0,t);n&&(e.labels=n),this.ac(e)},e.prototype.mc=function(t){var e={};e.database=ao(this.serializer),e.removeTarget=t,this.ac(e)},e}(Ju),ec=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).serializer=i,s.Ac=!1,s}return Object(r.d)(e,t),Object.defineProperty(e.prototype,"Rc",{get:function(){return this.Ac},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.Ac=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.uc=function(){this.Ac&&this.Pc([])},e.prototype.dc=function(t){return this.Ja.Ec("Write",t)},e.prototype.onMessage=function(t){if(vr(!!t.streamToken),this.lastStreamToken=t.streamToken,this.Ac){this.ys.reset();var e=function(t,e){return t&&t.length>0?(vr(void 0!==e),t.map((function(t){return function(t,e){var n=to(t.updateTime?t.updateTime:e);n.isEqual(Dr.min())&&(n=to(e));var r=null;return t.transformResults&&t.transformResults.length>0&&(r=t.transformResults),new Mo(n,r)}(t,e)}))):[]}(t.writeResults,t.commitTime),n=to(t.commitTime);return this.listener.gc(n,e)}return vr(!t.writeResults||0===t.writeResults.length),this.Ac=!0,this.listener.yc()},e.prototype.Vc=function(){var t={};t.database=ao(this.serializer),this.ac(t)},e.prototype.Pc=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map((function(t){return lo(e.serializer,t)}))};this.ac(n)},e}(Ju),nc=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Ja=n,i.serializer=r,i.bc=!1,i}return Object(r.d)(e,t),e.prototype.vc=function(){if(this.bc)throw new ar(sr.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.Sc=function(t,e,n){var r=this;return this.vc(),this.credentials.getToken().then((function(i){return r.Ja.Sc(t,e,n,i)})).catch((function(t){throw t.code===sr.UNAUTHENTICATED&&r.credentials.ri(),t}))},e.prototype.Dc=function(t,e,n){var r=this;return this.vc(),this.credentials.getToken().then((function(i){return r.Ja.Dc(t,e,n,i)})).catch((function(t){throw t.code===sr.UNAUTHENTICATED&&r.credentials.ri(),t}))},e.prototype.terminate=function(){this.bc=!1},e}((function(){})),rc=function(){function t(t,e){this.cs=t,this.Cc=e,this.state="Unknown",this.Nc=0,this.xc=null,this.Fc=!0}return t.prototype.Oc=function(){var t=this;0===this.Nc&&(this.kc("Unknown"),this.xc=this.cs.yn("online_state_timeout",1e4,(function(){return t.xc=null,t.Mc("Backend didn't respond within 10 seconds."),t.kc("Offline"),Promise.resolve()})))},t.prototype.$c=function(t){"Online"===this.state?this.kc("Unknown"):(this.Nc++,this.Nc>=1&&(this.Lc(),this.Mc("Connection failed 1 times. Most recent error: "+t.toString()),this.kc("Offline")))},t.prototype.set=function(t){this.Lc(),this.Nc=0,"Online"===t&&(this.Fc=!1),this.kc(t)},t.prototype.kc=function(t){t!==this.state&&(this.state=t,this.Cc(t))},t.prototype.Mc=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Fc?(hr(e),this.Fc=!1):lr("OnlineStateTracker",e)},t.prototype.Lc=function(){null!==this.xc&&(this.xc.cancel(),this.xc=null)},t}(),ic=function(t,e,n,i,o){var s=this;this.Bc=t,this.qc=e,this.cs=n,this.Uc={},this.Kc=[],this.Qc=new Map,this.Wc=new Set,this.jc=[],this.Gc=o,this.Gc.zc((function(t){n.ws((function(){return Object(r.b)(s,void 0,void 0,(function(){return Object(r.e)(this,(function(t){switch(t.label){case 0:return dc(this)?(lr("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return Object(r.b)(this,void 0,void 0,(function(){var e;return Object(r.e)(this,(function(n){switch(n.label){case 0:return(e=yr(t)).Wc.add(4),[4,sc(e)];case 1:return n.sent(),e.Hc.set("Unknown"),e.Wc.delete(4),[4,oc(e)];case 2:return n.sent(),[2]}}))}))}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))})),this.Hc=new rc(n,i)};function oc(t){return Object(r.b)(this,void 0,void 0,(function(){var e,n;return Object(r.e)(this,(function(r){switch(r.label){case 0:if(!dc(t))return[3,4];e=0,n=t.jc,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function sc(t){return Object(r.b)(this,void 0,void 0,(function(){var e,n;return Object(r.e)(this,(function(r){switch(r.label){case 0:e=0,n=t.jc,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function ac(t,e){var n=yr(t);n.Qc.has(e.targetId)||(n.Qc.set(e.targetId,e),fc(n)?hc(n):Ic(n).nc()&&cc(n,e))}function uc(t,e){var n=yr(t),r=Ic(n);n.Qc.delete(e),r.nc()&&lc(n,e),0===n.Qc.size&&(r.nc()?r.rc():dc(n)&&n.Hc.set("Unknown"))}function cc(t,e){t.Yc.me(e.targetId),Ic(t).Ic(e)}function lc(t,e){t.Yc.me(e),Ic(t).mc(e)}function hc(t){t.Yc=new Ei({qe:function(e){return t.Uc.qe(e)},Ue:function(e){return t.Qc.get(e)||null}}),Ic(t).start(),t.Hc.Oc()}function fc(t){return dc(t)&&!Ic(t).ec()&&t.Qc.size>0}function dc(t){return 0===yr(t).Wc.size}function pc(t){t.Yc=void 0}function vc(t){return Object(r.b)(this,void 0,void 0,(function(){return Object(r.e)(this,(function(e){return t.Qc.forEach((function(e,n){cc(t,e)})),[2]}))}))}function yc(t,e){return Object(r.b)(this,void 0,void 0,(function(){return Object(r.e)(this,(function(n){return pc(t),fc(t)?(t.Hc.$c(e),hc(t)):t.Hc.set("Unknown"),[2]}))}))}function gc(t,e,n){return Object(r.b)(this,void 0,void 0,(function(){var i,o,s;return Object(r.e)(this,(function(a){switch(a.label){case 0:if(t.Hc.set("Online"),!(e instanceof Ci&&2===e.state&&e.cause))return[3,6];a.label=1;case 1:return a.trys.push([1,3,,5]),[4,function(t,e){return Object(r.b)(this,void 0,void 0,(function(){var n,i,o,s;return Object(r.e)(this,(function(r){switch(r.label){case 0:n=e.cause,i=0,o=e.targetIds,r.label=1;case 1:return i<o.length?t.Qc.has(s=o[i])?[4,t.Uc.Jc(s,n)]:[3,3]:[3,5];case 2:r.sent(),t.Qc.delete(s),t.Yc.removeTarget(s),r.label=3;case 3:r.label=4;case 4:return i++,[3,1];case 5:return[2]}}))}))}(t,e)];case 2:return a.sent(),[3,5];case 3:return i=a.sent(),lr("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),[4,mc(t,i)];case 4:return a.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof bi?t.Yc.be(e):e instanceof wi?t.Yc.Oe(e):t.Yc.De(e),n.isEqual(Dr.min()))return[3,13];a.label=7;case 7:return a.trys.push([7,11,,13]),[4,qu(t.Bc)];case 8:return o=a.sent(),n.u(o)>=0?[4,function(t,e){var n=t.Yc.$e(e);return n.zt.forEach((function(n,r){if(n.resumeToken.o()>0){var i=t.Qc.get(r);i&&t.Qc.set(r,i.it(n.resumeToken,e))}})),n.Ht.forEach((function(e){var n=t.Qc.get(e);if(n){t.Qc.set(e,n.it(Cr.h,n.nt)),lc(t,e);var r=new $r(n.target,e,1,n.sequenceNumber);cc(t,r)}})),t.Uc.Xc(n)}(t,n)]:[3,10];case 9:a.sent(),a.label=10;case 10:return[3,13];case 11:return lr("RemoteStore","Failed to raise snapshot:",s=a.sent()),[4,mc(t,s)];case 12:return a.sent(),[3,13];case 13:return[2]}}))}))}function mc(t,e,n){return Object(r.b)(this,void 0,void 0,(function(){var i=this;return Object(r.e)(this,(function(o){switch(o.label){case 0:if(!Ys(e))throw e;return t.Wc.add(1),[4,sc(t)];case 1:return o.sent(),t.Hc.set("Offline"),n||(n=function(){return qu(t.Bc)}),t.cs.Cs((function(){return Object(r.b)(i,void 0,void 0,(function(){return Object(r.e)(this,(function(e){switch(e.label){case 0:return lr("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Wc.delete(1),[4,oc(t)];case 2:return e.sent(),[2]}}))}))})),[2]}}))}))}function _c(t,e){return e().catch((function(n){return mc(t,n,e)}))}function bc(t){return Object(r.b)(this,void 0,void 0,(function(){var e,n,i,o,s;return Object(r.e)(this,(function(r){switch(r.label){case 0:e=yr(t),n=xc(e),i=e.Kc.length>0?e.Kc[e.Kc.length-1].batchId:-1,r.label=1;case 1:if(!function(t){return dc(t)&&t.Kc.length<10}(e))return[3,7];r.label=2;case 2:return r.trys.push([2,4,,6]),[4,Wu(e.Bc,i)];case 3:return null===(o=r.sent())?(0===e.Kc.length&&n.rc(),[3,7]):(i=o.batchId,function(t,e){t.Kc.push(e);var n=xc(t);n.nc()&&n.Rc&&n.Pc(e.mutations)}(e,o),[3,6]);case 4:return s=r.sent(),[4,mc(e,s)];case 5:return r.sent(),[3,6];case 6:return[3,1];case 7:return wc(e)&&Cc(e),[2]}}))}))}function wc(t){return dc(t)&&!xc(t).ec()&&t.Kc.length>0}function Cc(t){xc(t).start()}function kc(t){return Object(r.b)(this,void 0,void 0,(function(){return Object(r.e)(this,(function(e){return xc(t).Vc(),[2]}))}))}function Ec(t){return Object(r.b)(this,void 0,void 0,(function(){var e,n,i;return Object(r.e)(this,(function(r){for(e=xc(t),n=0,i=t.Kc;n<i.length;n++)e.Pc(i[n].mutations);return[2]}))}))}function Sc(t,e,n){return Object(r.b)(this,void 0,void 0,(function(){var i,o;return Object(r.e)(this,(function(r){switch(r.label){case 0:return i=t.Kc.shift(),o=wa.from(i,e,n),[4,_c(t,(function(){return t.Uc.Zc(o)}))];case 1:return r.sent(),[4,bc(t)];case 2:return r.sent(),[2]}}))}))}function Tc(t,e){return Object(r.b)(this,void 0,void 0,(function(){return Object(r.e)(this,(function(n){switch(n.label){case 0:return e&&xc(t).Rc?[4,function(t,e){return Object(r.b)(this,void 0,void 0,(function(){var n,i;return Object(r.e)(this,(function(r){switch(r.label){case 0:return Zr(i=e.code)&&i!==sr.ABORTED?(n=t.Kc.shift(),xc(t).ic(),[4,_c(t,(function(){return t.Uc.tu(n.batchId,e)}))]):[3,3];case 1:return r.sent(),[4,bc(t)];case 2:r.sent(),r.label=3;case 3:return[2]}}))}))}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return wc(t)&&Cc(t),[2]}}))}))}function Oc(t,e){return Object(r.b)(this,void 0,void 0,(function(){var n;return Object(r.e)(this,(function(r){switch(r.label){case 0:return n=yr(t),e?(n.Wc.delete(2),[4,oc(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Wc.add(2),[4,sc(n)]);case 3:r.sent(),n.Hc.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}}))}))}function Ic(t){var e=this;return t.eu||(t.eu=function(t,e,n){var r=yr(t);return r.vc(),new tc(e,r.Ja,r.credentials,r.serializer,n)}(t.qc,t.cs,{wc:vc.bind(null,t),hc:yc.bind(null,t),Tc:gc.bind(null,t)}),t.jc.push((function(n){return Object(r.b)(e,void 0,void 0,(function(){return Object(r.e)(this,(function(e){switch(e.label){case 0:return n?(t.eu.ic(),fc(t)?hc(t):t.Hc.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.eu.stop()];case 2:e.sent(),pc(t),e.label=3;case 3:return[2]}}))}))}))),t.eu}function xc(t){var e=this;return t.nu||(t.nu=function(t,e,n){var r=yr(t);return r.vc(),new ec(e,r.Ja,r.credentials,r.serializer,n)}(t.qc,t.cs,{wc:kc.bind(null,t),hc:Tc.bind(null,t),yc:Ec.bind(null,t),gc:Sc.bind(null,t)}),t.jc.push((function(n){return Object(r.b)(e,void 0,void 0,(function(){return Object(r.e)(this,(function(e){switch(e.label){case 0:return n?(t.nu.ic(),[4,bc(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.nu.stop()];case 3:e.sent(),t.Kc.length>0&&(lr("RemoteStore","Stopping write stream with "+t.Kc.length+" pending writes"),t.Kc=[]),e.label=4;case 4:return[2]}}))}))}))),t.nu}var Ac=function(){function t(){this.su=new ri(Pc.iu),this.ru=new ri(Pc.ou)}return t.prototype.P=function(){return this.su.P()},t.prototype.qo=function(t,e){var n=new Pc(t,e);this.su=this.su.add(n),this.ru=this.ru.add(n)},t.prototype.au=function(t,e){var n=this;t.forEach((function(t){return n.qo(t,e)}))},t.prototype.Ko=function(t,e){this.cu(new Pc(t,e))},t.prototype.uu=function(t,e){var n=this;t.forEach((function(t){return n.Ko(t,e)}))},t.prototype.hu=function(t){var e=this,n=new Mr(new jr([])),r=new Pc(n,t),i=new Pc(n,t+1),o=[];return this.ru.xt([r,i],(function(t){e.cu(t),o.push(t.key)})),o},t.prototype.lu=function(){var t=this;this.su.forEach((function(e){return t.cu(e)}))},t.prototype.cu=function(t){this.su=this.su.delete(t),this.ru=this.ru.delete(t)},t.prototype._u=function(t){var e=new Mr(new jr([])),n=new Pc(e,t),r=new Pc(e,t+1),i=fi();return this.ru.xt([n,r],(function(t){i=i.add(t.key)})),i},t.prototype.ro=function(t){var e=new Pc(t,0),n=this.su.Ot(e);return null!==n&&t.isEqual(n.key)},t}(),Pc=function(){function t(t,e){this.key=t,this.fu=e}return t.iu=function(t,e){return Mr.D(t.key,e.key)||_r(t.fu,e.fu)},t.ou=function(t,e){return _r(t.fu,e.fu)||Mr.D(t.key,e.key)},t}();function Rc(t,e){return"firestore_clients_"+t+"_"+e}function Nc(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.Zs()&&(r+="_"+e.uid),r}function Dc(t,e){return"firestore_targets_"+t+"_"+e}var zc=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.du=function(e,n,r){var i=JSON.parse(r),o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error),s=void 0;return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(s=new ar(i.error.code,i.error.message)),o?new t(e,n,i.state,s):(hr("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.wu=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),jc=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.du=function(e,n){var r=JSON.parse(n),i="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error),o=void 0;return i&&r.error&&(i="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(o=new ar(r.error.code,r.error.message)),i?new t(e,r.state,o):(hr("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.wu=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Lc=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.du=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=pi(),s=0;i&&s<r.activeTargetIds.length;++s)i=Br(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(hr("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),Fc=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.du=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(hr("SharedClientState","Failed to parse online state: "+e),null)},t}(),Mc=function(){function t(){this.activeTargetIds=pi()}return t.prototype.Eu=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.Tu=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.wu=function(){var t={activeTargetIds:this.activeTargetIds.L(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),Vc=function(){function t(t,e,n,r,i){this.window=t,this.fn=e,this.persistenceKey=n,this.Iu=r,this.mu=null,this.Cc=null,this.tr=null,this.Au=this.Ru.bind(this),this.Pu=new ti(_r),this.br=!1,this.gu=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.yu=Rc(this.persistenceKey,this.Iu),this.Vu=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.Pu=this.Pu.ot(this.Iu,new Mc),this.pu=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.bu=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.vu=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.Su=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.Au)}return t.Ln=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return Object(r.b)(this,void 0,void 0,(function(){var t,e,n,i,o,s,a,u,c,l,h=this;return Object(r.e)(this,(function(r){switch(r.label){case 0:return[4,this.mu.va()];case 1:for(t=r.sent(),e=0,n=t;e<n.length;e++)(i=n[e])!==this.Iu&&(o=this.getItem(Rc(this.persistenceKey,i)))&&(s=Lc.du(i,o))&&(this.Pu=this.Pu.ot(s.clientId,s));for(this.Du(),(a=this.storage.getItem(this.Su))&&(u=this.Cu(a))&&this.Nu(u),c=0,l=this.gu;c<l.length;c++)this.Ru(l[c]);return this.gu=[],this.window.addEventListener("unload",(function(){return h.ga()})),this.br=!0,[2]}}))}))},t.prototype.sr=function(t){this.setItem(this.Vu,JSON.stringify(t))},t.prototype.xu=function(){return this.Fu(this.Pu)},t.prototype.Ou=function(t){var e=!1;return this.Pu.forEach((function(n,r){r.activeTargetIds.has(t)&&(e=!0)})),e},t.prototype.ku=function(t){this.Mu(t,"pending")},t.prototype.$u=function(t,e,n){this.Mu(t,e,n),this.Lu(t)},t.prototype.Bu=function(t){var e="not-current";if(this.Ou(t)){var n=this.storage.getItem(Dc(this.persistenceKey,t));if(n){var r=jc.du(t,n);r&&(e=r.state)}}return this.qu.Eu(t),this.Du(),e},t.prototype.Uu=function(t){this.qu.Tu(t),this.Du()},t.prototype.Ku=function(t){return this.qu.activeTargetIds.has(t)},t.prototype.Qu=function(t){this.removeItem(Dc(this.persistenceKey,t))},t.prototype.Wu=function(t,e,n){this.ju(t,e,n)},t.prototype.Gu=function(t,e,n){var r=this;e.forEach((function(t){r.Lu(t)})),this.currentUser=t,n.forEach((function(t){r.ku(t)}))},t.prototype.zu=function(t){this.Hu(t)},t.prototype.ga=function(){this.br&&(this.window.removeEventListener("storage",this.Au),this.removeItem(this.yu),this.br=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return lr("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){lr("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){lr("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.Ru=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(lr("SharedClientState","EVENT",n.key,n.newValue),n.key===this.yu)return void hr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.fn.Cs((function(){return Object(r.b)(e,void 0,void 0,(function(){var t,e,i,o,s,a;return Object(r.e)(this,(function(r){if(this.br){if(null!==n.key)if(this.pu.test(n.key)){if(null==n.newValue)return t=this.Yu(n.key),[2,this.Ju(t,null)];if(e=this.Xu(n.key,n.newValue))return[2,this.Ju(e.clientId,e)]}else if(this.bu.test(n.key)){if(null!==n.newValue&&(i=this.Zu(n.key,n.newValue)))return[2,this.th(i)]}else if(this.vu.test(n.key)){if(null!==n.newValue&&(o=this.eh(n.key,n.newValue)))return[2,this.nh(o)]}else if(n.key===this.Su){if(null!==n.newValue&&(s=this.Cu(n.newValue)))return[2,this.Nu(s)]}else n.key===this.Vu&&(a=function(t){var e=Oa.ir;if(null!=t)try{var n=JSON.parse(t);vr("number"==typeof n),e=n}catch(t){hr("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==Oa.ir&&this.tr(a)}else this.gu.push(n);return[2]}))}))}))}},Object.defineProperty(t.prototype,"qu",{get:function(){return this.Pu.get(this.Iu)},enumerable:!1,configurable:!0}),t.prototype.Du=function(){this.setItem(this.yu,this.qu.wu())},t.prototype.Mu=function(t,e,n){var r=new zc(this.currentUser,t,e,n),i=Nc(this.persistenceKey,this.currentUser,t);this.setItem(i,r.wu())},t.prototype.Lu=function(t){var e=Nc(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Hu=function(t){this.storage.setItem(this.Su,JSON.stringify({clientId:this.Iu,onlineState:t}))},t.prototype.ju=function(t,e,n){var r=Dc(this.persistenceKey,t),i=new jc(t,e,n);this.setItem(r,i.wu())},t.prototype.Yu=function(t){var e=this.pu.exec(t);return e?e[1]:null},t.prototype.Xu=function(t,e){var n=this.Yu(t);return Lc.du(n,e)},t.prototype.Zu=function(t,e){var n=this.bu.exec(t),r=Number(n[1]);return zc.du(new pa(void 0!==n[2]?n[2]:null),r,e)},t.prototype.eh=function(t,e){var n=this.vu.exec(t),r=Number(n[1]);return jc.du(r,e)},t.prototype.Cu=function(t){return Fc.du(t)},t.prototype.th=function(t){return Object(r.b)(this,void 0,void 0,(function(){return Object(r.e)(this,(function(e){return t.user.uid===this.currentUser.uid?[2,this.mu.sh(t.batchId,t.state,t.error)]:(lr("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])}))}))},t.prototype.nh=function(t){return this.mu.ih(t.targetId,t.state,t.error)},t.prototype.Ju=function(t,e){var n=this,r=e?this.Pu.ot(t,e):this.Pu.remove(t),i=this.Fu(this.Pu),o=this.Fu(r),s=[],a=[];return o.forEach((function(t){i.has(t)||s.push(t)})),i.forEach((function(t){o.has(t)||a.push(t)})),this.mu.rh(s,a).then((function(){n.Pu=r}))},t.prototype.Nu=function(t){this.Pu.get(t.clientId)&&this.Cc(t.onlineState)},t.prototype.Fu=function(t){var e=pi();return t.forEach((function(t,n){e=e.kt(n.activeTargetIds)})),e},t}(),Uc=function(){function t(){this.oh=new Mc,this.ah={},this.Cc=null,this.tr=null}return t.prototype.ku=function(t){},t.prototype.$u=function(t,e,n){},t.prototype.Bu=function(t){return this.oh.Eu(t),this.ah[t]||"not-current"},t.prototype.Wu=function(t,e,n){this.ah[t]=e},t.prototype.Uu=function(t){this.oh.Tu(t)},t.prototype.Ku=function(t){return this.oh.activeTargetIds.has(t)},t.prototype.Qu=function(t){delete this.ah[t]},t.prototype.xu=function(){return this.oh.activeTargetIds},t.prototype.Ou=function(t){return this.oh.activeTargetIds.has(t)},t.prototype.start=function(){return this.oh=new Mc,Promise.resolve()},t.prototype.Gu=function(t,e,n){},t.prototype.zu=function(t){},t.prototype.ga=function(){},t.prototype.sr=function(t){},t}(),Bc=function(t){this.key=t},qc=function(t){this.key=t},Hc=function(){function t(t,e){this.query=t,this.uh=e,this.hh=null,this.te=!1,this.lh=fi(),this.Qt=fi(),this._h=Ts(t),this.fh=new vi(this._h)}return Object.defineProperty(t.prototype,"dh",{get:function(){return this.uh},enumerable:!1,configurable:!0}),t.prototype.wh=function(t,e){var n=this,r=e?e.Eh:new yi,i=e?e.fh:this.fh,o=e?e.Qt:this.Qt,s=i,a=!1,u=fs(this.query)&&i.size===this.query.limit?i.last():null,c=ds(this.query)&&i.size===this.query.limit?i.first():null;if(t.ht((function(t,e){var l=i.get(t),h=e instanceof ss?e:null;h&&(h=Ss(n.query,h)?h:null);var f=!!l&&n.Qt.has(l.key),d=!!h&&(h.Je||n.Qt.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data().isEqual(h.data())?f!==d&&(r.track({type:3,doc:h}),p=!0):n.Th(l,h)||(r.track({type:2,doc:h}),p=!0,(u&&n._h(h,u)>0||c&&n._h(h,c)<0)&&(a=!0)):!l&&h?(r.track({type:0,doc:h}),p=!0):l&&!h&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(a=!0)),p&&(h?(s=s.add(h),o=d?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))})),fs(this.query)||ds(this.query))for(;s.size>this.query.limit;){var l=fs(this.query)?s.last():s.first();s=s.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{fh:s,Eh:r,Ih:a,Qt:o}},t.prototype.Th=function(t,e){return t.Je&&e.hasCommittedMutations&&!e.Je},t.prototype.Di=function(t,e,n){var r=this,i=this.fh;this.fh=t.fh,this.Qt=t.Qt;var o=t.Eh.Ut();o.sort((function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return pr()}};return n(t)-n(e)}(t.type,e.type)||r._h(t.doc,e.doc)})),this.mh(n);var s=e?this.Ah():[],a=0===this.lh.size&&this.te?1:0,u=a!==this.hh;return this.hh=a,0!==o.length||u?{snapshot:new gi(this.query,t.fh,i,o,t.Qt,0===a,u,!1),Rh:s}:{Rh:s}},t.prototype.Ks=function(t){return this.te&&"Offline"===t?(this.te=!1,this.Di({fh:this.fh,Eh:new yi,Qt:this.Qt,Ih:!1},!1)):{Rh:[]}},t.prototype.Ph=function(t){return!this.uh.has(t)&&!!this.fh.has(t)&&!this.fh.get(t).Je},t.prototype.mh=function(t){var e=this;t&&(t.ee.forEach((function(t){return e.uh=e.uh.add(t)})),t.ne.forEach((function(t){})),t.se.forEach((function(t){return e.uh=e.uh.delete(t)})),this.te=t.te)},t.prototype.Ah=function(){var t=this;if(!this.te)return[];var e=this.lh;this.lh=fi(),this.fh.forEach((function(e){t.Ph(e.key)&&(t.lh=t.lh.add(e.key))}));var n=[];return e.forEach((function(e){t.lh.has(e)||n.push(new qc(e))})),this.lh.forEach((function(t){e.has(t)||n.push(new Bc(t))})),n},t.prototype.gh=function(t){this.uh=t.za,this.lh=fi();var e=this.wh(t.documents);return this.Di(e,!0)},t.prototype.yh=function(){return gi.Gt(this.query,this.fh,this.Qt,0===this.hh)},t}(),Wc=function(t,e,n){this.query=t,this.targetId=e,this.view=n},Gc=function(t){this.key=t,this.Vh=!1},Qc=function(){function t(t,e,n,r,i,o){this.Bc=t,this.ph=e,this.bh=n,this.Sh=r,this.currentUser=i,this.Dh=o,this.Ch={},this.Nh=new Rr((function(t){return ks(t)}),Cs),this.xh=new Map,this.Fh=[],this.Oh=new ti(Mr.D),this.kh=new Map,this.Mh=new Ac,this.$h={},this.Lh=new Map,this.Bh=Ou.Vo(),this.onlineState="Unknown",this.qh=void 0}return Object.defineProperty(t.prototype,"Uh",{get:function(){return!0===this.qh},enumerable:!1,configurable:!0}),t}();function Kc(t,e){return Object(r.b)(this,void 0,void 0,(function(){var n,i,o,s,a;return Object(r.e)(this,(function(r){switch(r.label){case 0:return n=Cl(t),(o=n.Nh.get(e))?(n.Sh.Bu(o.targetId),i=o.view.yh(),[3,4]):[3,1];case 1:return[4,Gu(n.Bc,ms(e))];case 2:return s=r.sent(),a=n.Sh.Bu(s.targetId),[4,Yc(n,e,s.targetId,"current"===a)];case 3:i=r.sent(),n.Uh&&ac(n.ph,s),r.label=4;case 4:return[2,i]}}))}))}function Yc(t,e,n,i){return Object(r.b)(this,void 0,void 0,(function(){var o,s,a,u,c,l;return Object(r.e)(this,(function(h){switch(h.label){case 0:return t.Kh=function(e,n,i){return function(t,e,n,i){return Object(r.b)(this,void 0,void 0,(function(){var o,s,a;return Object(r.e)(this,(function(r){switch(r.label){case 0:return(o=e.view.wh(n)).Ih?[4,Ku(t.Bc,e.query,!1).then((function(t){return e.view.wh(t.documents,o)}))]:[3,2];case 1:o=r.sent(),r.label=2;case 2:return s=i&&i.zt.get(e.targetId),a=e.view.Di(o,t.Uh,s),[2,(ul(t,e.targetId,a.Rh),a.snapshot)]}}))}))}(t,e,n,i)},[4,Ku(t.Bc,e,!0)];case 1:return o=h.sent(),s=new Hc(e,o.za),a=s.wh(o.documents),u=_i.Zt(n,i&&"Offline"!==t.onlineState),c=s.Di(a,t.Uh,u),ul(t,n,c.Rh),l=new Wc(e,n,s),[2,(t.Nh.set(e,l),t.xh.has(n)?t.xh.get(n).push(e):t.xh.set(n,[e]),c.snapshot)]}}))}))}function $c(t,e){return Object(r.b)(this,void 0,void 0,(function(){var n,i,o;return Object(r.e)(this,(function(r){switch(r.label){case 0:return n=yr(t),i=n.Nh.get(e),(o=n.xh.get(i.targetId)).length>1?[2,(n.xh.set(i.targetId,o.filter((function(t){return!Cs(t,e)}))),void n.Nh.delete(e))]:n.Uh?(n.Sh.Uu(i.targetId),n.Sh.Ou(i.targetId)?[3,2]:[4,Qu(n.Bc,i.targetId,!1).then((function(){n.Sh.Qu(i.targetId),uc(n.ph,i.targetId),sl(n,i.targetId)})).catch(Zu)]):[3,3];case 1:r.sent(),r.label=2;case 2:return[3,5];case 3:return sl(n,i.targetId),[4,Qu(n.Bc,i.targetId,!0)];case 4:r.sent(),r.label=5;case 5:return[2]}}))}))}function Xc(t,e,n){return Object(r.b)(this,void 0,void 0,(function(){var i,o,s,a;return Object(r.e)(this,(function(r){switch(r.label){case 0:i=kl(t),r.label=1;case 1:return r.trys.push([1,5,,6]),[4,function(t,e){var n,r=yr(t),i=Nr.now(),o=e.reduce((function(t,e){return t.add(e.key)}),fi());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(t){return r.Ka.qi(t,o).next((function(o){n=o;for(var s=[],a=0,u=e;a<u.length;a++){var c=u[a],l=Wo(c,n.get(c.key));null!=l&&s.push(new Yo(c.key,l,is(l.proto.mapValue),Vo.exists(!0)))}return r.Oi.Wr(t,i,s,e)}))})).then((function(t){var e=t.Ii(n);return{batchId:t.batchId,Ri:e}}))}(i.Bc,e)];case 2:return o=r.sent(),i.Sh.ku(o.batchId),function(t,e,n){var r=t.$h[t.currentUser.ti()];r||(r=new ti(_r)),r=r.ot(e,n),t.$h[t.currentUser.ti()]=r}(i,o.batchId,n),[4,hl(i,o.Ri)];case 3:return r.sent(),[4,bc(i.ph)];case 4:return r.sent(),[3,6];case 5:return s=r.sent(),a=oa(s,"Failed to persist write"),n.reject(a),[3,6];case 6:return[2]}}))}))}function Zc(t,e){return Object(r.b)(this,void 0,void 0,(function(){var n,i;return Object(r.e)(this,(function(r){switch(r.label){case 0:n=yr(t),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,Hu(n.Bc,e)];case 2:return i=r.sent(),e.zt.forEach((function(t,e){var r=n.kh.get(e);r&&(vr(t.ee.size+t.ne.size+t.se.size<=1),t.ee.size>0?r.Vh=!0:t.ne.size>0?vr(r.Vh):t.se.size>0&&(vr(r.Vh),r.Vh=!1))})),[4,hl(n,i,e)];case 3:return r.sent(),[3,6];case 4:return[4,Zu(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))}function Jc(t,e,n){var r=yr(t);if(r.Uh&&0===n||!r.Uh&&1===n){var i=[];r.Nh.forEach((function(t,n){var r=n.view.Ks(e);r.snapshot&&i.push(r.snapshot)})),function(t,e){var n=yr(t);n.onlineState=e;var r=!1;n.Bs.forEach((function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].Ks(e)&&(r=!0)})),r&&fa(n)}(r.bh,e),i.length&&r.Ch.Tc(i),r.onlineState=e,r.Uh&&r.Sh.zu(e)}}function tl(t,e,n){return Object(r.b)(this,void 0,void 0,(function(){var i,o,s,a,u,c;return Object(r.e)(this,(function(r){switch(r.label){case 0:return(i=yr(t)).Sh.Wu(e,"rejected",n),o=i.kh.get(e),(s=o&&o.key)?(a=(a=new ti(Mr.D)).ot(s,new as(s,Dr.min())),u=fi().add(s),c=new mi(Dr.min(),new Map,new ri(_r),a,u),[4,Zc(i,c)]):[3,2];case 1:return r.sent(),i.Oh=i.Oh.remove(s),i.kh.delete(e),ll(i),[3,4];case 2:return[4,Qu(i.Bc,e,!1).then((function(){return sl(i,e,n)})).catch(Zu)];case 3:r.sent(),r.label=4;case 4:return[2]}}))}))}function el(t,e){return Object(r.b)(this,void 0,void 0,(function(){var n,i,o;return Object(r.e)(this,(function(r){switch(r.label){case 0:n=yr(t),i=e.batch.batchId,r.label=1;case 1:return r.trys.push([1,4,,6]),[4,Bu(n.Bc,e)];case 2:return o=r.sent(),ol(n,i,null),il(n,i),n.Sh.$u(i,"acknowledged"),[4,hl(n,o)];case 3:return r.sent(),[3,6];case 4:return[4,Zu(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))}function nl(t,e,n){return Object(r.b)(this,void 0,void 0,(function(){var i,o;return Object(r.e)(this,(function(r){switch(r.label){case 0:i=yr(t),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,function(t,e){var n=yr(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(t){var r;return n.Oi.Gr(t,e).next((function(e){return vr(null!==e),r=e.keys(),n.Oi.Zr(t,e)})).next((function(){return n.Oi.io(t)})).next((function(){return n.Ka.qi(t,r)}))}))}(i.Bc,e)];case 2:return o=r.sent(),ol(i,e,n),il(i,e),i.Sh.$u(e,"rejected",n),[4,hl(i,o)];case 3:return r.sent(),[3,6];case 4:return[4,Zu(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))}function rl(t,e){return Object(r.b)(this,void 0,void 0,(function(){var n,i,o,s,a;return Object(r.e)(this,(function(r){switch(r.label){case 0:dc((n=yr(t)).ph)||lr("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,function(t){var e=yr(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(t){return e.Oi.Yr(t)}))}(n.Bc)];case 2:return-1===(i=r.sent())?[2,void e.resolve()]:((o=n.Lh.get(i)||[]).push(e),n.Lh.set(i,o),[3,4]);case 3:return s=r.sent(),a=oa(s,"Initialization of waitForPendingWrites() operation failed"),e.reject(a),[3,4];case 4:return[2]}}))}))}function il(t,e){(t.Lh.get(e)||[]).forEach((function(t){t.resolve()})),t.Lh.delete(e)}function ol(t,e,n){var r=yr(t),i=r.$h[r.currentUser.ti()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.$h[r.currentUser.ti()]=i}}function sl(t,e,n){void 0===n&&(n=null),t.Sh.Uu(e);for(var r=0,i=t.xh.get(e);r<i.length;r++){var o=i[r];t.Nh.delete(o),n&&t.Ch.Qh(o,n)}t.xh.delete(e),t.Uh&&t.Mh.hu(e).forEach((function(e){t.Mh.ro(e)||al(t,e)}))}function al(t,e){var n=t.Oh.get(e);null!==n&&(uc(t.ph,n),t.Oh=t.Oh.remove(e),t.kh.delete(n),ll(t))}function ul(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof Bc?(t.Mh.qo(o.key,e),cl(t,o)):o instanceof qc?(lr("SyncEngine","Document no longer in limbo: "+o.key),t.Mh.Ko(o.key,e),t.Mh.ro(o.key)||al(t,o.key)):pr()}}function cl(t,e){var n=e.key;t.Oh.get(n)||(lr("SyncEngine","New document in limbo: "+n),t.Fh.push(n),ll(t))}function ll(t){for(;t.Fh.length>0&&t.Oh.size<t.Dh;){var e=t.Fh.shift(),n=t.Bh.next();t.kh.set(n,new Gc(e)),t.Oh=t.Oh.ot(e,n),ac(t.ph,new $r(ms(hs(e.path)),n,2,Oa.ir))}}function hl(t,e,n){return Object(r.b)(this,void 0,void 0,(function(){var i,o,s,a;return Object(r.e)(this,(function(u){switch(u.label){case 0:return i=yr(t),o=[],s=[],a=[],i.Nh.P()?[3,3]:(i.Nh.forEach((function(t,r){a.push(i.Kh(r,e,n).then((function(t){if(t){i.Uh&&i.Sh.Wu(r.targetId,t.fromCache?"not-current":"current"),o.push(t);var e=Ta.Zi(r.targetId,t);s.push(e)}})))})),[4,Promise.all(a)]);case 1:return u.sent(),i.Ch.Tc(o),[4,function(t,e){return Object(r.b)(this,void 0,void 0,(function(){var n,i,o,s,a,u,c,l;return Object(r.e)(this,(function(r){switch(r.label){case 0:n=yr(t),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(t){return Ws.forEach(e,(function(e){return Ws.forEach(e.Ji,(function(r){return n.persistence.qr.qo(t,e.targetId,r)})).next((function(){return Ws.forEach(e.Xi,(function(r){return n.persistence.qr.Ko(t,e.targetId,r)}))}))}))}))];case 2:return r.sent(),[3,4];case 3:if(!Ys(i=r.sent()))throw i;return lr("LocalStore","Failed to update sequence numbers: "+i),[3,4];case 4:for(o=0,s=e;o<s.length;o++)u=(a=s[o]).targetId,a.fromCache||(c=n.La.get(u),l=c.rt(c.nt),n.La=n.La.ot(u,l));return[2]}}))}))}(i.Bc,s)];case 2:u.sent(),u.label=3;case 3:return[2]}}))}))}function fl(t,e){return Object(r.b)(this,void 0,void 0,(function(){var n,i;return Object(r.e)(this,(function(r){switch(r.label){case 0:return(n=yr(t)).currentUser.isEqual(e)?[3,3]:(lr("SyncEngine","User change. New user:",e.ti()),[4,Uu(n.Bc,e)]);case 1:return i=r.sent(),n.currentUser=e,function(t,e){t.Lh.forEach((function(t){t.forEach((function(t){t.reject(new ar(sr.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),t.Lh.clear()}(n),n.Sh.Gu(e,i.ja,i.Ga),[4,hl(n,i.Wa)];case 2:r.sent(),r.label=3;case 3:return[2]}}))}))}function dl(t,e){var n=yr(t),r=n.kh.get(e);if(r&&r.Vh)return fi().add(r.key);var i=fi(),o=n.xh.get(e);if(!o)return i;for(var s=0,a=o;s<a.length;s++){var u=n.Nh.get(a[s]);i=i.kt(u.view.dh)}return i}function pl(t,e){return Object(r.b)(this,void 0,void 0,(function(){var n,i,o;return Object(r.e)(this,(function(r){switch(r.label){case 0:return[4,Ku((n=yr(t)).Bc,e.query,!0)];case 1:return i=r.sent(),o=e.view.gh(i),[2,(n.Uh&&ul(n,e.targetId,o.Rh),o)]}}))}))}function vl(t,e,n,i){return Object(r.b)(this,void 0,void 0,(function(){var o,s;return Object(r.e)(this,(function(r){switch(r.label){case 0:return[4,function(t,e){var n=yr(t),r=yr(n.Oi);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(t){return r.zr(t,e).next((function(e){return e?n.Ka.qi(t,e):Ws.resolve(null)}))}))}((o=yr(t)).Bc,e)];case 1:return null===(s=r.sent())?[3,6]:"pending"!==n?[3,3]:[4,bc(o.ph)];case 2:return r.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(ol(o,e,i||null),il(o,e),function(t,e){yr(yr(t).Oi).no(e)}(o.Bc,e)):pr(),r.label=4;case 4:return[4,hl(o,s)];case 5:return r.sent(),[3,7];case 6:lr("SyncEngine","Cannot apply mutation batch with id: "+e),r.label=7;case 7:return[2]}}))}))}function yl(t,e){return Object(r.b)(this,void 0,void 0,(function(){var n,i,o,s,a,u,c;return Object(r.e)(this,(function(r){switch(r.label){case 0:return Cl(n=yr(t)),kl(n),!0!==e||!0===n.qh?[3,3]:(i=n.Sh.xu(),[4,gl(n,i.L())]);case 1:return o=r.sent(),n.qh=!0,[4,Oc(n.ph,!0)];case 2:for(r.sent(),s=0,a=o;s<a.length;s++)ac(n.ph,a[s]);return[3,7];case 3:return!1!==e||!1===n.qh?[3,7]:(u=[],c=Promise.resolve(),n.xh.forEach((function(t,e){n.Sh.Ku(e)?u.push(e):c=c.then((function(){return sl(n,e),Qu(n.Bc,e,!0)})),uc(n.ph,e)})),[4,c]);case 4:return r.sent(),[4,gl(n,u)];case 5:return r.sent(),function(t){var e=yr(t);e.kh.forEach((function(t,n){uc(e.ph,n)})),e.Mh.lu(),e.kh=new Map,e.Oh=new ti(Mr.D)}(n),n.qh=!1,[4,Oc(n.ph,!1)];case 6:r.sent(),r.label=7;case 7:return[2]}}))}))}function gl(t,e,n){return Object(r.b)(this,void 0,void 0,(function(){var n,i,o,s,a,u,c,l,h,f,d,p,v;return Object(r.e)(this,(function(r){switch(r.label){case 0:n=yr(t),i=[],o=[],s=0,a=e,r.label=1;case 1:return s<a.length?(c=void 0,(l=n.xh.get(u=a[s]))&&0!==l.length?[4,Gu(n.Bc,ms(l[0]))]:[3,7]):[3,13];case 2:c=r.sent(),h=0,f=l,r.label=3;case 3:return h<f.length?(d=n.Nh.get(f[h]),[4,pl(n,d)]):[3,6];case 4:(p=r.sent()).snapshot&&o.push(p.snapshot),r.label=5;case 5:return h++,[3,3];case 6:return[3,11];case 7:return[4,Yu(n.Bc,u)];case 8:return v=r.sent(),[4,Gu(n.Bc,v)];case 9:return c=r.sent(),[4,Yc(n,ml(v),u,!1)];case 10:r.sent(),r.label=11;case 11:i.push(c),r.label=12;case 12:return s++,[3,1];case 13:return[2,(n.Ch.Tc(o),i)]}}))}))}function ml(t){return ls(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function _l(t){var e=yr(t);return yr(yr(e.Bc).persistence).va()}function bl(t,e,n,i){return Object(r.b)(this,void 0,void 0,(function(){var o,s,a;return Object(r.e)(this,(function(r){switch(r.label){case 0:return(o=yr(t)).qh?(lr("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!o.xh.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,$u(o.Bc)];case 3:return s=r.sent(),a=mi.Xt(e,"current"===n),[4,hl(o,s,a)];case 4:return r.sent(),[3,8];case 5:return[4,Qu(o.Bc,e,!0)];case 6:return r.sent(),sl(o,e,i),[3,8];case 7:pr(),r.label=8;case 8:return[2]}}))}))}function wl(t,e,n){return Object(r.b)(this,void 0,void 0,(function(){var i,o,s,a,u,c,l,h,f;return Object(r.e)(this,(function(d){switch(d.label){case 0:if(!(i=Cl(t)).qh)return[3,10];o=0,s=e,d.label=1;case 1:return o<s.length?i.xh.has(a=s[o])?(lr("SyncEngine","Adding an already active target "+a),[3,5]):[4,Yu(i.Bc,a)]:[3,6];case 2:return u=d.sent(),[4,Gu(i.Bc,u)];case 3:return c=d.sent(),[4,Yc(i,ml(u),c.targetId,!1)];case 4:d.sent(),ac(i.ph,c),d.label=5;case 5:return o++,[3,1];case 6:l=function(t){return Object(r.e)(this,(function(e){switch(e.label){case 0:return i.xh.has(t)?[4,Qu(i.Bc,t,!1).then((function(){uc(i.ph,t),sl(i,t)})).catch(Zu)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))},h=0,f=n,d.label=7;case 7:return h<f.length?[5,l(f[h])]:[3,10];case 8:d.sent(),d.label=9;case 9:return h++,[3,7];case 10:return[2]}}))}))}function Cl(t){var e=yr(t);return e.ph.Uc.Xc=Zc.bind(null,e),e.ph.Uc.qe=dl.bind(null,e),e.ph.Uc.Jc=tl.bind(null,e),e.Ch.Tc=la.bind(null,e.bh),e.Ch.Qh=ha.bind(null,e.bh),e}function kl(t){var e=yr(t);return e.ph.Uc.Zc=el.bind(null,e),e.ph.Uc.tu=nl.bind(null,e),e}var El=function(){function t(){}return t.prototype.Qa=function(t){this.Wh=t},t.prototype.Qi=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.on.length||1===t.on.length&&t.on[0].field.W())}(e)||n.isEqual(Dr.min())?this.jh(t,e):this.Wh.qi(t,r).next((function(s){var a=i.Gh(e,s);return(fs(e)||ds(e))&&i.Ih(e.an,a,r,n)?i.jh(t,e):(cr()<=o.a.DEBUG&&lr("IndexFreeQueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),Es(e)),i.Wh.Qi(t,e,n).next((function(t){return a.forEach((function(e){t=t.ot(e.key,e)})),t})))}))},t.prototype.Gh=function(t,e){var n=new ri(Ts(t));return e.forEach((function(e,r){r instanceof ss&&Ss(t,r)&&(n=n.add(r))})),n},t.prototype.Ih=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.u(r)>0)},t.prototype.jh=function(t,e){return cr()<=o.a.DEBUG&&lr("IndexFreeQueryEngine","Using full collection scan to execute query:",Es(e)),this.Wh.Qi(t,e,Dr.min())},t}(),Sl=function(){function t(t,e){this.ki=t,this.qr=e,this.Oi=[],this.zh=1,this.Hh=new ri(Pc.iu)}return t.prototype.Qr=function(t){return Ws.resolve(0===this.Oi.length)},t.prototype.Wr=function(t,e,n,r){var i=this.zh;this.zh++;var o=new ba(i,e,n,r);this.Oi.push(o);for(var s=0,a=r;s<a.length;s++){var u=a[s];this.Hh=this.Hh.add(new Pc(u.key,i)),this.ki.jr(t,u.key.path.F())}return Ws.resolve(o)},t.prototype.Gr=function(t,e){return Ws.resolve(this.Yh(e))},t.prototype.Hr=function(t,e){var n=this.Jh(e+1),r=n<0?0:n;return Ws.resolve(this.Oi.length>r?this.Oi[r]:null)},t.prototype.Yr=function(){return Ws.resolve(0===this.Oi.length?-1:this.zh-1)},t.prototype.Jr=function(t){return Ws.resolve(this.Oi.slice())},t.prototype.$i=function(t,e){var n=this,r=new Pc(e,0),i=new Pc(e,Number.POSITIVE_INFINITY),o=[];return this.Hh.xt([r,i],(function(t){var e=n.Yh(t.fu);o.push(e)})),Ws.resolve(o)},t.prototype.Ki=function(t,e){var n=this,r=new ri(_r);return e.forEach((function(t){var e=new Pc(t,0),i=new Pc(t,Number.POSITIVE_INFINITY);n.Hh.xt([e,i],(function(t){r=r.add(t.fu)}))})),Ws.resolve(this.Xh(r))},t.prototype.Hi=function(t,e){var n=e.path,r=n.length+1,i=n;Mr.X(i)||(i=i.child(""));var o=new Pc(new Mr(i),0),s=new ri(_r);return this.Hh.Ft((function(t){var e=t.key.path;return!!n.M(e)&&(e.length===r&&(s=s.add(t.fu)),!0)}),o),Ws.resolve(this.Xh(s))},t.prototype.Xh=function(t){var e=this,n=[];return t.forEach((function(t){var r=e.Yh(t);null!==r&&n.push(r)})),n},t.prototype.Zr=function(t,e){var n=this;vr(0===this.Zh(e.batchId,"removed")),this.Oi.shift();var r=this.Hh;return Ws.forEach(e.mutations,(function(i){var o=new Pc(i.key,e.batchId);return r=r.delete(o),n.qr.so(t,i.key)})).next((function(){n.Hh=r}))},t.prototype.no=function(t){},t.prototype.ro=function(t,e){var n=new Pc(e,0),r=this.Hh.Ot(n);return Ws.resolve(e.isEqual(r&&r.key))},t.prototype.io=function(t){return Ws.resolve()},t.prototype.Zh=function(t,e){return this.Jh(t)},t.prototype.Jh=function(t){return 0===this.Oi.length?0:t-this.Oi[0].batchId},t.prototype.Yh=function(t){var e=this.Jh(t);return e<0||e>=this.Oi.length?null:this.Oi[e]},t}(),Tl=function(){function t(t,e){this.ki=t,this.tl=e,this.docs=new ti(Mr.D),this.size=0}return t.prototype.yi=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.tl(e);return this.docs=this.docs.ot(r,{ho:e,size:s,readTime:n}),this.size+=s-o,this.ki.jr(t,r.path.F())},t.prototype.pi=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.bi=function(t,e){var n=this.docs.get(e);return Ws.resolve(n?n.ho:null)},t.prototype.getEntries=function(t,e){var n=this,r=ai();return e.forEach((function(t){var e=n.docs.get(t);r=r.ot(t,e?e.ho:null)})),Ws.resolve(r)},t.prototype.Qi=function(t,e,n){for(var r=ci(),i=new Mr(e.path.child("")),o=this.docs.ft(i);o.At();){var s=o.It(),a=s.value,u=a.ho,c=a.readTime;if(!e.path.M(s.key.path))break;c.u(n)<=0||u instanceof ss&&Ss(e,u)&&(r=r.ot(u.key,u))}return Ws.resolve(r)},t.prototype.el=function(t,e){return Ws.forEach(this.docs,(function(t){return e(t)}))},t.prototype.wo=function(t){return new Ol(this)},t.prototype.To=function(t){return Ws.resolve(this.size)},t}(),Ol=function(t){function e(e){var n=this;return(n=t.call(this)||this).Io=e,n}return Object(r.d)(e,t),e.prototype.Di=function(t){var e=this,n=[];return this.Ri.forEach((function(r,i){i?n.push(e.Io.yi(t,i,e.readTime)):e.Io.pi(r)})),Ws.On(n)},e.prototype.vi=function(t,e){return this.Io.bi(t,e)},e.prototype.Si=function(t,e){return this.Io.getEntries(t,e)},e}(Ca),Il=function(){function t(t){this.persistence=t,this.nl=new Rr((function(t){return Wr(t)}),Gr),this.lastRemoteSnapshotVersion=Dr.min(),this.highestTargetId=0,this.sl=0,this.il=new Ac,this.targetCount=0,this.rl=Ou.yo()}return t.prototype.Ce=function(t,e){return this.nl.forEach((function(t,n){return e(n)})),Ws.resolve()},t.prototype.So=function(t){return Ws.resolve(this.lastRemoteSnapshotVersion)},t.prototype.Do=function(t){return Ws.resolve(this.sl)},t.prototype.po=function(t){return this.highestTargetId=this.rl.next(),Ws.resolve(this.highestTargetId)},t.prototype.Co=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.sl&&(this.sl=e),Ws.resolve()},t.prototype.xo=function(t){this.nl.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.rl=new Ou(e),this.highestTargetId=e),t.sequenceNumber>this.sl&&(this.sl=t.sequenceNumber)},t.prototype.No=function(t,e){return this.xo(e),this.targetCount+=1,Ws.resolve()},t.prototype.Oo=function(t,e){return this.xo(e),Ws.resolve()},t.prototype.ko=function(t,e){return this.nl.delete(e.target),this.il.hu(e.targetId),this.targetCount-=1,Ws.resolve()},t.prototype.Or=function(t,e,n){var r=this,i=0,o=[];return this.nl.forEach((function(s,a){a.sequenceNumber<=e&&null===n.get(a.targetId)&&(r.nl.delete(s),o.push(r.Mo(t,a.targetId)),i++)})),Ws.On(o).next((function(){return i}))},t.prototype.$o=function(t){return Ws.resolve(this.targetCount)},t.prototype.Lo=function(t,e){var n=this.nl.get(e)||null;return Ws.resolve(n)},t.prototype.Bo=function(t,e,n){return this.il.au(e,n),Ws.resolve()},t.prototype.Uo=function(t,e,n){this.il.uu(e,n);var r=this.persistence.qr,i=[];return r&&e.forEach((function(e){i.push(r.so(t,e))})),Ws.On(i)},t.prototype.Mo=function(t,e){return this.il.hu(e),Ws.resolve()},t.prototype.Qo=function(t,e){var n=this.il._u(e);return Ws.resolve(n)},t.prototype.ro=function(t,e){return Ws.resolve(this.il.ro(e))},t}(),xl=function(){function t(t){var e=this;this.ol={},this.zo=new Oa(0),this.Ho=!1,this.Ho=!0,this.qr=t(this),this.sa=new Il(this),this.ki=new su,this.Fi=function(t,n){return new Tl(t,(function(t){return e.qr.al(t)}))}(this.ki)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.ga=function(){return this.Ho=!1,Promise.resolve()},Object.defineProperty(t.prototype,"br",{get:function(){return this.Ho},enumerable:!1,configurable:!0}),t.prototype.ha=function(){},t.prototype.la=function(){},t.prototype.Na=function(){return this.ki},t.prototype.Sa=function(t){var e=this.ol[t.ti()];return e||(e=new Sl(this.ki,this.qr),this.ol[t.ti()]=e),e},t.prototype.Da=function(){return this.sa},t.prototype.Ca=function(){return this.Fi},t.prototype.runTransaction=function(t,e,n){var r=this;lr("MemoryPersistence","Starting transaction:",t);var i=new Al(this.zo.next());return this.qr.cl(),n(i).next((function(t){return r.qr.ul(i).next((function(){return t}))})).xn().then((function(t){return i.xi(),t}))},t.prototype.hl=function(t,e){return Ws.kn(Object.values(this.ol).map((function(n){return function(){return n.ro(t,e)}})))},t}(),Al=function(t){function e(e){var n=this;return(n=t.call(this)||this).Wo=e,n}return Object(r.d)(e,t),e}(Ea),Pl=function(){function t(t){this.persistence=t,this.ll=new Ac,this._l=null}return t.fl=function(e){return new t(e)},Object.defineProperty(t.prototype,"dl",{get:function(){if(this._l)return this._l;throw pr()},enumerable:!1,configurable:!0}),t.prototype.qo=function(t,e,n){return this.ll.qo(n,e),this.dl.delete(n.toString()),Ws.resolve()},t.prototype.Ko=function(t,e,n){return this.ll.Ko(n,e),this.dl.add(n.toString()),Ws.resolve()},t.prototype.so=function(t,e){return this.dl.add(e.toString()),Ws.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.ll.hu(e.targetId).forEach((function(t){return n.dl.add(t.toString())}));var r=this.persistence.Da();return r.Qo(t,e.targetId).next((function(t){t.forEach((function(t){return n.dl.add(t.toString())}))})).next((function(){return r.ko(t,e)}))},t.prototype.cl=function(){this._l=new Set},t.prototype.ul=function(t){var e=this,n=this.persistence.Ca().wo();return Ws.forEach(this.dl,(function(r){var i=Mr.H(r);return e.wl(t,i).next((function(t){t||n.pi(i)}))})).next((function(){return e._l=null,n.apply(t)}))},t.prototype.Ma=function(t,e){var n=this;return this.wl(t,e).next((function(t){t?n.dl.delete(e.toString()):n.dl.add(e.toString())}))},t.prototype.al=function(t){return 0},t.prototype.wl=function(t,e){var n=this;return Ws.kn([function(){return Ws.resolve(n.ll.ro(e))},function(){return n.persistence.Da().ro(t,e)},function(){return n.persistence.hl(t,e)}])},t}(),Rl=function(){function t(t){this.El=t.El,this.Tl=t.Tl}return t.prototype.wc=function(t){this.Il=t},t.prototype.hc=function(t){this.ml=t},t.prototype.onMessage=function(t){this.Al=t},t.prototype.close=function(){this.Tl()},t.prototype.send=function(t){this.El(t)},t.prototype.Rl=function(){this.Il()},t.prototype.Pl=function(t){this.ml(t)},t.prototype.gl=function(t){this.Al(t)},t}(),Nl={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},Dl=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.T=e.T,n}return Object(r.d)(e,t),e.prototype.Sl=function(t,e,n,r){return new Promise((function(i,o){var s=new ir;s.listenOnce(nr.COMPLETE,(function(){try{switch(s.getLastErrorCode()){case er.NO_ERROR:var e=s.getResponseJson();lr("Connection","XHR received:",JSON.stringify(e)),i(e);break;case er.TIMEOUT:lr("Connection",'RPC "'+t+'" timed out'),o(new ar(sr.DEADLINE_EXCEEDED,"Request time out"));break;case er.HTTP_ERROR:var n=s.getStatus();if(lr("Connection",'RPC "'+t+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var a=function(t){var e=t.toLowerCase().replace("_","-");return Object.values(sr).indexOf(e)>=0?e:sr.UNKNOWN}(r.status);o(new ar(a,r.message))}else o(new ar(sr.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new ar(sr.UNAVAILABLE,"Connection failed."));break;default:pr()}}finally{lr("Connection",'RPC "'+t+'" completed.')}}));var a=JSON.stringify(r);s.send(e,"POST",a,n,15)}))},e.prototype.Ec=function(t,e){var n=[this.Vl,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=new $n,i={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this._.projectId+"/databases/"+this._.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.T};this.vl(i.initMessageHeaders,e),Object(s.u)()||Object(s.x)()||Object(s.r)()||Object(s.t)()||Object(s.y)()||Object(s.q)()||(i.httpHeadersOverwriteParam="$httpHeaders");var o=n.join("");lr("Connection","Creating WebChannel: "+o,i);var a=r.createWebChannel(o,i),u=!1,c=!1,l=new Rl({El:function(t){c?lr("Connection","Not sending because WebChannel is closed:",t):(u||(lr("Connection","Opening WebChannel transport."),a.open(),u=!0),lr("Connection","WebChannel sending:",t),a.send(t))},Tl:function(){return a.close()}}),h=function(t,e){a.listen(t,(function(t){try{e(t)}catch(t){setTimeout((function(){throw t}),0)}}))};return h(rr.EventType.OPEN,(function(){c||lr("Connection","WebChannel transport opened.")})),h(rr.EventType.CLOSE,(function(){c||(c=!0,lr("Connection","WebChannel transport closed"),l.Pl())})),h(rr.EventType.ERROR,(function(t){c||(c=!0,fr("Connection","WebChannel transport errored:",t),l.Pl(new ar(sr.UNAVAILABLE,"The operation could not be completed")))})),h(rr.EventType.MESSAGE,(function(t){var e;if(!c){var n=t.data[0];vr(!!n);var r=n.error||(null===(e=n[0])||void 0===e?void 0:e.error);if(r){lr("Connection","WebChannel received error:",r);var i=r.status,o=function(t){var e=Kr[t];if(void 0!==e)return Jr(e)}(i),s=r.message;void 0===o&&(o=sr.INTERNAL,s="Unknown error status: "+i+" with message "+r.message),c=!0,l.Pl(new ar(o,s)),a.close()}else lr("Connection","WebChannel received:",n),l.gl(n)}})),setTimeout((function(){l.Rl()}),0),l},e}(function(){function t(t){this.yl=t,this._=t._,this.Vl=(t.ssl?"https":"http")+"://"+t.host,this.pl="projects/"+this._.projectId+"/databases/"+this._.database+"/documents"}return t.prototype.Sc=function(t,e,n,r){var i=this.bl(t,e);lr("RestConnection","Sending: ",i,n);var o={};return this.vl(o,r),this.Sl(t,i,o,n).then((function(t){return lr("RestConnection","Received: ",t),t}),(function(e){throw fr("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e}))},t.prototype.Dc=function(t,e,n,r){return this.Sc(t,e,n,r)},t.prototype.vl=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.0.1",t["Content-Type"]="text/plain",e)for(var n in e.si)e.si.hasOwnProperty(n)&&(t[n]=e.si[n])},t.prototype.bl=function(t,e){return this.Vl+"/v1/"+e+":"+Nl[t]},t}()),zl=function(){function t(){var t=this;this.Dl=function(){return t.Cl()},this.Nl=function(){return t.xl()},this.Fl=[],this.Ol()}return t.prototype.zc=function(t){this.Fl.push(t)},t.prototype.ga=function(){window.removeEventListener("online",this.Dl),window.removeEventListener("offline",this.Nl)},t.prototype.Ol=function(){window.addEventListener("online",this.Dl),window.addEventListener("offline",this.Nl)},t.prototype.Cl=function(){lr("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.Fl;t<e.length;t++)(0,e[t])(0)},t.prototype.xl=function(){lr("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.Fl;t<e.length;t++)(0,e[t])(1)},t.Ln=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),jl=function(){function t(){}return t.prototype.zc=function(t){},t.prototype.ga=function(){},t}();function Ll(t){return new Qi(t,!0)}var Fl=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return Object(r.b)(this,void 0,void 0,(function(){return Object(r.e)(this,(function(e){switch(e.label){case 0:return this.Sh=this.kl(t),this.persistence=this.Ml(t),[4,this.persistence.start()];case 1:return e.sent(),this.$l=this.Ll(t),this.Bc=this.Bl(t),[2]}}))}))},t.prototype.Ll=function(t){return null},t.prototype.Bl=function(t){return e=this.persistence,n=new El,new Vu(e,n,t.ql);var e,n},t.prototype.Ml=function(t){return new xl(Pl.fl)},t.prototype.kl=function(t){return new Uc},t.prototype.terminate=function(){return Object(r.b)(this,void 0,void 0,(function(){return Object(r.e)(this,(function(t){switch(t.label){case 0:return this.$l&&this.$l.stop(),[4,this.Sh.ga()];case 1:return t.sent(),[4,this.persistence.ga()];case 2:return t.sent(),[2]}}))}))},t}(),Ml=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Ul=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return Object(r.d)(e,t),e.prototype.initialize=function(e){return Object(r.b)(this,void 0,void 0,(function(){return Object(r.e)(this,(function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,Xu(this.Bc)];case 2:return n.sent(),[4,this.Ul.initialize(this,e)];case 3:return n.sent(),[4,kl(this.Ul.mu)];case 4:return n.sent(),[4,bc(this.Ul.ph)];case 5:return n.sent(),[2]}}))}))},e.prototype.Ll=function(t){return new Ra(this.persistence.qr.gr,t.cs)},e.prototype.Ml=function(t){var e=Mu(t.yl._,t.yl.persistenceKey),n=void 0!==this.cacheSizeBytes?Pa.Ir(this.cacheSizeBytes):Pa.Rr,r=Ll(t.yl._);return new Du(this.synchronizeTabs,e,t.clientId,n,t.cs,ea(),na(),r,this.Sh,!!this.forceOwnership)},e.prototype.kl=function(t){return new Uc},e}(Fl),Vl=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Ul=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return Object(r.d)(e,t),e.prototype.initialize=function(e){return Object(r.b)(this,void 0,void 0,(function(){var n,i=this;return Object(r.e)(this,(function(o){switch(o.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return o.sent(),n=this.Ul.mu,this.Sh instanceof Vc?(this.Sh.mu={sh:vl.bind(null,n),ih:bl.bind(null,n),rh:wl.bind(null,n),va:_l.bind(null,n)},[4,this.Sh.start()]):[3,3];case 2:o.sent(),o.label=3;case 3:return[4,this.persistence.ua((function(t){return Object(r.b)(i,void 0,void 0,(function(){return Object(r.e)(this,(function(e){switch(e.label){case 0:return[4,yl(this.Ul.mu,t)];case 1:return e.sent(),this.$l&&(t&&!this.$l.br?this.$l.start(this.Bc):t||this.$l.stop()),[2]}}))}))}))];case 4:return o.sent(),[2]}}))}))},e.prototype.kl=function(t){var e=ea();if(!Vc.Ln(e))throw new ar(sr.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=Mu(t.yl._,t.yl.persistenceKey);return new Vc(e,t.cs,n,t.clientId,t.ql)},e}(Ml),Ul=function(){function t(){}return t.prototype.initialize=function(t,e){return Object(r.b)(this,void 0,void 0,(function(){var n=this;return Object(r.e)(this,(function(r){switch(r.label){case 0:return this.Bc?[3,2]:(this.Bc=t.Bc,this.Sh=t.Sh,this.qc=this.Kl(e),this.ph=this.Ql(e),this.bh=this.Wl(e),this.mu=this.jl(e,!t.synchronizeTabs),this.Sh.Cc=function(t){return Jc(n.mu,t,1)},this.ph.Uc.Gl=fl.bind(null,this.mu),[4,Oc(this.ph,this.mu.Uh)]);case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},t.prototype.Wl=function(t){return new aa},t.prototype.Kl=function(t){var e=Ll(t.yl._),n=new Dl(t.yl);return function(t,e,n){return new nc(t,e,n)}(t.credentials,n,e)},t.prototype.Ql=function(t){var e,n,r,i,o,s=this;return e=this.Bc,n=this.qc,r=t.cs,i=function(t){return Jc(s.mu,t,0)},o=zl.Ln()?new zl:new jl,new ic(e,n,r,i,o)},t.prototype.jl=function(t,e){return function(t,e,n,r,i,o,s){var a=new Qc(t,e,n,r,i,o);return s&&(a.qh=!0),a}(this.Bc,this.ph,this.bh,this.Sh,t.ql,t.Dh,e)},t.prototype.terminate=function(){return function(t){return Object(r.b)(this,void 0,void 0,(function(){var e;return Object(r.e)(this,(function(n){switch(n.label){case 0:return e=yr(t),lr("RemoteStore","RemoteStore shutting down."),e.Wc.add(5),[4,sc(e)];case 1:return n.sent(),e.Gc.ga(),e.Hc.set("Unknown"),[2]}}))}))}(this.ph)},t}(),Bl=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.zl(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.zl(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.Hl=function(){this.muted=!0},t.prototype.zl=function(t,e){var n=this;this.muted||setTimeout((function(){n.muted||t(e)}),0)},t}();function ql(t,e,n){if(!n)throw new ar(sr.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function Hl(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new ar(sr.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function Wl(t,e,n,r){if(!0===e&&!0===r)throw new ar(sr.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function Gl(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":pr()}function Ql(t,e){if(e<=0)throw new ar(sr.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var Kl=function(t){for(var e=0;e<t.length;++e)if(0===t[e].length)throw new ar(sr.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this.Yl=new Fr(t)},Yl=function(t){function e(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.call(this,e)||this}return Object(r.d)(e,t),e.documentId=function(){return new e(Fr.j().B())},e.prototype.isEqual=function(t){return t instanceof e&&this.Yl.isEqual(t.Yl)},e}(Kl),$l=new RegExp("[~\\*/\\[\\]]"),Xl=function(t){this.Jl=t},Zl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r.d)(e,t),e.prototype.Xl=function(t){if(2!==t.Zl)throw t.t_(1===t.Zl?this.Jl+"() can only appear at the top level of your update data":this.Jl+"() cannot be used with set() unless you pass {merge:true}");return t.Qe.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(Xl);function Jl(t,e,n){return new hh({Zl:3,e_:e.settings.e_,methodName:t.Jl,n_:n},e._,e.serializer,e.ignoreUndefinedProperties)}var th=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r.d)(e,t),e.prototype.Xl=function(t){return new Fo(t.path,new xo)},e.prototype.isEqual=function(t){return t instanceof e},e}(Xl),eh=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).s_=n,r}return Object(r.d)(e,t),e.prototype.Xl=function(t){var e=Jl(this,t,!0),n=this.s_.map((function(t){return gh(t,e)})),r=new Ao(n);return new Fo(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(Xl),nh=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).s_=n,r}return Object(r.d)(e,t),e.prototype.Xl=function(t){var e=Jl(this,t,!0),n=this.s_.map((function(t){return gh(t,e)})),r=new Ro(n);return new Fo(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(Xl),rh=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).i_=n,r}return Object(r.d)(e,t),e.prototype.Xl=function(t){var e=new Do(t.serializer,$i(t.serializer,this.i_));return new Fo(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(Xl),ih=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new ar(sr.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new ar(sr.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this.r_=t,this.o_=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this.r_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this.o_},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.r_===t.r_&&this.o_===t.o_},t.prototype.toJSON=function(){return{latitude:this.r_,longitude:this.o_}},t.prototype.g=function(t){return _r(this.r_,t.r_)||_r(this.o_,t.o_)},t}(),oh=function(t){this.a_=t},sh=/^__.*__$/,ah=function(t,e,n){this.c_=t,this.u_=e,this.h_=n},uh=function(){function t(t,e,n){this.data=t,this.Qe=e,this.fieldTransforms=n}return t.prototype.l_=function(t,e){var n=[];return n.push(null!==this.Qe?new Yo(t,this.data,this.Qe,e):new Ko(t,this.data,e)),this.fieldTransforms.length>0&&n.push(new Xo(t,this.fieldTransforms)),n},t}(),ch=function(){function t(t,e,n){this.data=t,this.Qe=e,this.fieldTransforms=n}return t.prototype.l_=function(t,e){var n=[new Yo(t,this.data,this.Qe,e)];return this.fieldTransforms.length>0&&n.push(new Xo(t,this.fieldTransforms)),n},t}();function lh(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw pr()}}var hh=function(){function t(t,e,n,r,i,o){this.settings=t,this._=e,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.__(),this.fieldTransforms=i||[],this.Qe=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Zl",{get:function(){return this.settings.Zl},enumerable:!1,configurable:!0}),t.prototype.f_=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this._,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.Qe)},t.prototype.d_=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.f_({path:n,n_:!1});return r.w_(t),r},t.prototype.E_=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.f_({path:n,n_:!1});return r.__(),r},t.prototype.T_=function(t){return this.f_({path:void 0,n_:!0})},t.prototype.t_=function(t){return kh(t,this.settings.methodName,this.settings.I_||!1,this.path,this.settings.e_)},t.prototype.contains=function(t){return void 0!==this.Qe.find((function(e){return t.M(e)}))||void 0!==this.fieldTransforms.find((function(e){return t.M(e.field)}))},t.prototype.__=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.w_(this.path.get(t))},t.prototype.w_=function(t){if(0===t.length)throw this.t_("Document fields must not be empty");if(lh(this.Zl)&&sh.test(t))throw this.t_('Document fields cannot begin and end with "__"')},t}(),fh=function(){function t(t,e,n){this._=t,this.ignoreUndefinedProperties=e,this.serializer=n||Ll(t)}return t.prototype.m_=function(t,e,n,r){return void 0===r&&(r=!1),new hh({Zl:t,methodName:e,e_:n,path:Fr.U(),n_:!1,I_:r},this._,this.serializer,this.ignoreUndefinedProperties)},t}();function dh(t,e,n,r,i,o){void 0===o&&(o={});var s=t.m_(o.merge||o.mergeFields?2:0,e,n,i);bh("Data must be an object, but it was:",s,r);var a,u,c=mh(r,s);if(o.merge)a=new Lo(s.Qe),u=s.fieldTransforms;else if(o.mergeFields){for(var l=[],h=0,f=o.mergeFields;h<f.length;h++){var d=f[h],p=void 0;if(d instanceof Kl)p=d.Yl;else{if("string"!=typeof d)throw pr();p=Ch(e,d,n)}if(!s.contains(p))throw new ar(sr.INVALID_ARGUMENT,"Field '"+p+"' is specified in your field mask but missing from your input data.");Eh(l,p)||l.push(p)}a=new Lo(l),u=s.fieldTransforms.filter((function(t){return a.Ye(t.field)}))}else a=null,u=s.fieldTransforms;return new uh(new ns(c),a,u)}function ph(t,e,n,r){var i=t.m_(1,e,n);bh("Data must be an object, but it was:",i,r);var o=[],s=new rs;Ar(r,(function(t,r){var a=Ch(e,t,n),u=i.E_(a);if(r instanceof Zl||r instanceof oh&&r.a_ instanceof Zl)o.push(a);else{var c=gh(r,u);null!=c&&(o.push(a),s.set(a,c))}}));var a=new Lo(o);return new ch(s.Xe(),a,i.fieldTransforms)}function vh(t,e,n,r,i,o){var s=t.m_(1,e,n),a=[wh(e,r,n)],u=[i];if(o.length%2!=0)throw new ar(sr.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)a.push(wh(e,o[c])),u.push(o[c+1]);for(var l=[],h=new rs,f=a.length-1;f>=0;--f)if(!Eh(l,a[f])){var d=a[f],p=u[f],v=s.E_(d);if(p instanceof Zl||p instanceof oh&&p.a_ instanceof Zl)l.push(d);else{var y=gh(p,v);null!=y&&(l.push(d),h.set(d,y))}}var g=new Lo(l);return new ch(h.Xe(),g,s.fieldTransforms)}function yh(t,e,n,r){return void 0===r&&(r=!1),gh(n,t.m_(r?4:3,e))}function gh(t,e){if(t instanceof oh&&(t=t.a_),_h(t))return bh("Unsupported field value:",e,t),mh(t,e);if(t instanceof Xl)return function(t,e){if(!lh(e.Zl))throw e.t_(t.Jl+"() can only be used with update() and set()");if(!e.path)throw e.t_(t.Jl+"() is not currently supported inside arrays");var n=t.Xl(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(e.path&&e.Qe.push(e.path),t instanceof Array){if(e.settings.n_&&4!==e.Zl)throw e.t_("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=gh(o[i],e.T_(r));null==s&&(s={nullValue:"NULL_VALUE"}),n.push(s),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===t)return{nullValue:"NULL_VALUE"};if("number"==typeof t)return $i(e.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=Nr.fromDate(t);return{timestampValue:Xi(e.serializer,n)}}if(t instanceof Nr){var r=new Nr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Xi(e.serializer,r)}}if(t instanceof ih)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof kr)return{bytesValue:Zi(e.serializer,t.l)};if(t instanceof ah){var i=e._,o=t.c_;if(!o.isEqual(i))throw e.t_("Document reference is for database "+o.projectId+"/"+o.database+" but should be for database "+i.projectId+"/"+i.database);return{referenceValue:eo(t.c_||e._,t.u_.path)}}if(void 0===t&&e.ignoreUndefinedProperties)return null;throw e.t_("Unsupported field value: "+Gl(t))}(t,e)}function mh(t,e){var n={};return Pr(t)?e.path&&e.path.length>0&&e.Qe.push(e.path):Ar(t,(function(t,r){var i=gh(r,e.d_(t));null!=i&&(n[t]=i)})),{mapValue:{fields:n}}}function _h(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Nr||t instanceof ih||t instanceof kr||t instanceof ah||t instanceof Xl)}function bh(t,e,n){if(!_h(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=Gl(n);throw e.t_("an object"===r?t+" a custom object":t+" "+r)}}function wh(t,e,n){if(e instanceof Kl)return e.Yl;if("string"==typeof e)return Ch(t,e);throw kh("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}function Ch(t,e,n){try{return function(t){if(t.search($l)>=0)throw new ar(sr.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not contain '~', '*', '/', '[', or ']'");try{return new(Yl.bind.apply(Yl,Object(r.j)([void 0],t.split("."))))}catch(e){throw new ar(sr.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'")}}(e).Yl}catch(e){throw kh((i=e)instanceof Error?i.message:i.toString(),t,!1,void 0,n)}var i}function kh(t,e,n,r,i){var o=r&&!r.P(),s=void 0!==i,a="Function "+e+"() called with invalid data";n&&(a+=" (via `toFirestore()`)");var u="";return(o||s)&&(u+=" (found",o&&(u+=" in field "+r),s&&(u+=" in document "+i),u+=")"),new ar(sr.INVALID_ARGUMENT,(a+=". ")+t+u)}function Eh(t,e){return t.some((function(t){return t.isEqual(e)}))}var Sh=function(){function t(t){this.qc=t,this.A_=new Map,this.mutations=[],this.R_=!1,this.P_=null,this.g_=new Set}return t.prototype.y_=function(t){return Object(r.b)(this,void 0,void 0,(function(){var e,n=this;return Object(r.e)(this,(function(i){switch(i.label){case 0:if(this.V_(),this.mutations.length>0)throw new ar(sr.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return Object(r.b)(this,void 0,void 0,(function(){var n,i,o,s,a,u;return Object(r.e)(this,(function(r){switch(r.label){case 0:return n=yr(t),i=ao(n.serializer)+"/documents",o={documents:e.map((function(t){return ro(n.serializer,t)}))},[4,n.Dc("BatchGetDocuments",i,o)];case 1:return s=r.sent(),a=new Map,s.forEach((function(t){var e=function(t,e){return"found"in e?function(t,e){vr(!!e.found);var n=io(t,e.found.name),r=to(e.found.updateTime),i=new ns({mapValue:{fields:e.found.fields}});return new ss(n,r,i,{})}(t,e):"missing"in e?function(t,e){vr(!!e.missing),vr(!!e.readTime);var n=io(t,e.missing),r=to(e.readTime);return new as(n,r)}(t,e):pr()}(n.serializer,t);a.set(e.key.toString(),e)})),u=[],[2,(e.forEach((function(t){var e=a.get(t.toString());vr(!!e),u.push(e)})),u)]}}))}))}(this.qc,t)];case 1:return[2,((e=i.sent()).forEach((function(t){t instanceof as||t instanceof ss?n.p_(t):pr()})),e)]}}))}))},t.prototype.set=function(t,e){this.write(e.l_(t,this.Ge(t))),this.g_.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.l_(t,this.b_(t)))}catch(t){this.P_=t}this.g_.add(t.toString())},t.prototype.delete=function(t){this.write([new ts(t,this.Ge(t))]),this.g_.add(t.toString())},t.prototype.commit=function(){return Object(r.b)(this,void 0,void 0,(function(){var t,e=this;return Object(r.e)(this,(function(n){switch(n.label){case 0:if(this.V_(),this.P_)throw this.P_;return t=this.A_,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(t,n){var r=Mr.H(n);e.mutations.push(new es(r,e.Ge(r)))})),[4,function(t,e){return Object(r.b)(this,void 0,void 0,(function(){var n,i,o;return Object(r.e)(this,(function(r){switch(r.label){case 0:return n=yr(t),i=ao(n.serializer)+"/documents",o={writes:e.map((function(t){return lo(n.serializer,t)}))},[4,n.Sc("Commit",i,o)];case 1:return r.sent(),[2]}}))}))}(this.qc,this.mutations)];case 1:return n.sent(),this.R_=!0,[2]}}))}))},t.prototype.p_=function(t){var e;if(t instanceof ss)e=t.version;else{if(!(t instanceof as))throw pr();e=Dr.min()}var n=this.A_.get(t.key.toString());if(n){if(!e.isEqual(n))throw new ar(sr.ABORTED,"Document version changed between two reads.")}else this.A_.set(t.key.toString(),e)},t.prototype.Ge=function(t){var e=this.A_.get(t.toString());return!this.g_.has(t.toString())&&e?Vo.updateTime(e):Vo.ze()},t.prototype.b_=function(t){var e=this.A_.get(t.toString());if(!this.g_.has(t.toString())&&e){if(e.isEqual(Dr.min()))throw new ar(sr.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Vo.updateTime(e)}return Vo.exists(!0)},t.prototype.write=function(t){this.V_(),this.mutations=this.mutations.concat(t)},t.prototype.V_=function(){},t}(),Th=function(){function t(t,e,n,r){this.cs=t,this.qc=e,this.updateFunction=n,this.ls=r,this.v_=5,this.ys=new Hs(this.cs,"transaction_retry")}return t.prototype.run=function(){this.S_()},t.prototype.S_=function(){var t=this;this.ys.Pn((function(){return Object(r.b)(t,void 0,void 0,(function(){var t,e,n=this;return Object(r.e)(this,(function(r){return t=new Sh(this.qc),(e=this.D_(t))&&e.then((function(e){n.cs.ws((function(){return t.commit().then((function(){n.ls.resolve(e)})).catch((function(t){n.C_(t)}))}))})).catch((function(t){n.C_(t)})),[2]}))}))}))},t.prototype.D_=function(t){try{var e=this.updateFunction(t);return!Vr(e)&&e.catch&&e.then?e:(this.ls.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.ls.reject(t),null}},t.prototype.C_=function(t){var e=this;this.v_>0&&this.N_(t)?(this.v_-=1,this.cs.ws((function(){return e.S_(),Promise.resolve()}))):this.ls.reject(t)},t.prototype.N_=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!Zr(e)}return!1},t}(),Oh=function(){function t(t,e,n){var r=this;this.credentials=t,this.cs=e,this.yl=n,this.user=pa.UNAUTHENTICATED,this.clientId=mr.t(),this.x_=function(){},this.ui=new qs,this.credentials.oi((function(t){lr("FirestoreClient","Received user=",t.uid),r.user.isEqual(t)||(r.user=t,r.x_(t)),r.ui.resolve()}))}return t.prototype.getConfiguration=function(){return Object(r.b)(this,void 0,void 0,(function(){return Object(r.e)(this,(function(t){switch(t.label){case 0:return[4,this.ui.promise];case 1:return[2,(t.sent(),{cs:this.cs,yl:this.yl,clientId:this.clientId,credentials:this.credentials,ql:this.user,Dh:100})]}}))}))},t.prototype.F_=function(t){var e=this;this.x_=t,this.ui.promise.then((function(){return e.x_(e.user)}))},t.prototype.O_=function(){if(this.cs.ps)throw new ar(sr.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.cs.Ds();var e=new qs;return this.cs.bs((function(){return Object(r.b)(t,void 0,void 0,(function(){var t,n;return Object(r.e)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.k_?[4,this.k_.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.M_?[4,this.M_.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.ai(),e.resolve(),[3,6];case 5:return t=r.sent(),n=oa(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}}))}))})),e.promise},t}();function Ih(t,e){return Object(r.b)(this,void 0,void 0,(function(){var n,i=this;return Object(r.e)(this,(function(o){switch(o.label){case 0:return t.cs.Fs(),lr("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=o.sent(),[4,e.initialize(n)];case 2:return o.sent(),t.F_((function(n){return t.cs.Cs((function(){return Object(r.b)(i,void 0,void 0,(function(){return Object(r.e)(this,(function(t){switch(t.label){case 0:return[4,Uu(e.Bc,n)];case 1:return t.sent(),[2]}}))}))}))})),e.persistence.ha((function(){return t.terminate()})),t.M_=e,[2]}}))}))}function xh(t,e){return Object(r.b)(this,void 0,void 0,(function(){var n,i;return Object(r.e)(this,(function(o){switch(o.label){case 0:return t.cs.Fs(),[4,Ah(t)];case 1:return n=o.sent(),lr("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return i=o.sent(),[4,e.initialize(n,i)];case 3:return o.sent(),t.F_((function(n){return t.cs.Cs((function(){return function(t,e){return Object(r.b)(this,void 0,void 0,(function(){var n,i;return Object(r.e)(this,(function(r){switch(r.label){case 0:return(n=yr(t)).cs.Fs(),lr("RemoteStore","RemoteStore received new credentials"),i=dc(n),n.Wc.add(3),[4,sc(n)];case 1:return r.sent(),i&&n.Hc.set("Unknown"),[4,n.Uc.Gl(e)];case 2:return r.sent(),n.Wc.delete(3),[4,oc(n)];case 3:return r.sent(),[2]}}))}))}(e.ph,n)}))})),t.k_=e,[2]}}))}))}function Ah(t){return Object(r.b)(this,void 0,void 0,(function(){return Object(r.e)(this,(function(e){switch(e.label){case 0:return t.M_?[3,2]:(lr("FirestoreClient","Using default OfflineComponentProvider"),[4,Ih(t,new Fl)]);case 1:e.sent(),e.label=2;case 2:return[2,t.M_]}}))}))}function Ph(t){return Object(r.b)(this,void 0,void 0,(function(){return Object(r.e)(this,(function(e){switch(e.label){case 0:return t.k_?[3,2]:(lr("FirestoreClient","Using default OnlineComponentProvider"),[4,xh(t,new Ul)]);case 1:e.sent(),e.label=2;case 2:return[2,t.k_]}}))}))}function Rh(t){return Ah(t).then((function(t){return t.persistence}))}function Nh(t){return Ah(t).then((function(t){return t.Bc}))}function Dh(t){return Ph(t).then((function(t){return t.ph}))}function zh(t){return Ph(t).then((function(t){return t.mu}))}function jh(t){return Object(r.b)(this,void 0,void 0,(function(){var e,n;return Object(r.e)(this,(function(r){switch(r.label){case 0:return[4,Ph(t)];case 1:return e=r.sent(),[2,((n=e.bh).Us=Kc.bind(null,e.mu),n.Ws=$c.bind(null,e.mu),n)]}}))}))}function Lh(t,e,n,i){var o=this,s=new Bl(i),a=new da(e,s,n);return t.cs.ws((function(){return Object(r.b)(o,void 0,void 0,(function(){var e;return Object(r.e)(this,(function(n){switch(n.label){case 0:return e=ua,[4,jh(t)];case 1:return[2,e.apply(void 0,[n.sent(),a])]}}))}))})),function(){s.Hl(),t.cs.ws((function(){return Object(r.b)(o,void 0,void 0,(function(){var e;return Object(r.e)(this,(function(n){switch(n.label){case 0:return e=ca,[4,jh(t)];case 1:return[2,e.apply(void 0,[n.sent(),a])]}}))}))}))}}function Fh(t,e){var n=this,i=new qs;return t.cs.ws((function(){return Object(r.b)(n,void 0,void 0,(function(){var n;return Object(r.e)(this,(function(r){switch(r.label){case 0:return n=Xc,[4,zh(t)];case 1:return[2,n.apply(void 0,[r.sent(),e,i])]}}))}))})),i.promise}function Mh(t,e){var n=this,i=new Bl(e);return t.cs.ws((function(){return Object(r.b)(n,void 0,void 0,(function(){var e;return Object(r.e)(this,(function(n){switch(n.label){case 0:return e=function(t,e){yr(t).qs.add(e),e.next()},[4,jh(t)];case 1:return[2,e.apply(void 0,[n.sent(),i])]}}))}))})),function(){i.Hl(),t.cs.ws((function(){return Object(r.b)(n,void 0,void 0,(function(){var e;return Object(r.e)(this,(function(n){switch(n.label){case 0:return e=function(t,e){yr(t).qs.delete(e)},[4,jh(t)];case 1:return[2,e.apply(void 0,[n.sent(),i])]}}))}))}))}}function Vh(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}var Uh=function(){function t(t,e,n,r){this._=t,this.L_=e,this.B_=n,this.q_=r}return t.prototype.U_=function(t){switch(Ai(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Li(t.integerValue||t.doubleValue);case 3:return this.K_(t.timestampValue);case 4:return this.Q_(t);case 5:return t.stringValue;case 6:return this.q_(Fi(t.bytesValue));case 7:return this.W_(t.referenceValue);case 8:return this.j_(t.geoPointValue);case 9:return this.G_(t.arrayValue);case 10:return this.z_(t.mapValue);default:throw pr()}},t.prototype.z_=function(t){var e=this,n={};return Ar(t.fields||{},(function(t,r){n[t]=e.U_(r)})),n},t.prototype.j_=function(t){return new ih(Li(t.latitude),Li(t.longitude))},t.prototype.G_=function(t){var e=this;return(t.values||[]).map((function(t){return e.U_(t)}))},t.prototype.Q_=function(t){switch(this.L_){case"previous":var e=function t(e){var n=e.mapValue.fields.__previous_value__;return Oi(n)?t(n):n}(t);return null==e?null:this.U_(e);case"estimate":return this.K_(Ii(t));default:return null}},t.prototype.K_=function(t){var e=ji(t);return new Nr(e.seconds,e.nanos)},t.prototype.W_=function(t){var e=jr.q(t);vr(Eo(e));var n=new Ir(e.get(1),e.get(3)),r=new Mr(e.N(5));return n.isEqual(this._)||hr("Document "+r+" contains a document reference within a different database ("+n.projectId+"/"+n.database+") which is not supported. It will be treated as a reference in the current database ("+this._.projectId+"/"+this._.database+") instead."),this.B_(r)},t}(),Bh=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new ar(sr.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new ar(sr.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,Wl("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},t}();function qh(t){Gh(t);var e=Xh(t),n=t.H_(),r=new Ul;return Hh(e,r,new Vl(r,n.cacheSizeBytes))}function Hh(t,e,n){var i=this,o=new qs;return t.cs.enqueue((function(){return Object(r.b)(i,void 0,void 0,(function(){var i;return Object(r.e)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,3,,4]),[4,Ih(t,n)];case 1:return r.sent(),[4,xh(t,e)];case 2:return r.sent(),o.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===sr.FAILED_PRECONDITION||t.code===sr.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(i=r.sent()))throw i;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i),o.reject(i),[3,4];case 4:return[2]}}))}))})).then((function(){return o.promise}))}function Wh(t){var e=this;if(t.Y_&&!t.J_)throw new ar(sr.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new qs;return t.X_.bs((function(){return Object(r.b)(e,void 0,void 0,(function(){var e;return Object(r.e)(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,function(t){return Object(r.b)(this,void 0,void 0,(function(){return Object(r.e)(this,(function(e){switch(e.label){case 0:return Gs.Ln()?[4,Gs.delete(t+"main")]:[2,Promise.resolve()];case 1:return e.sent(),[2]}}))}))}(Mu(t.c_,t.Z_))];case 1:return i.sent(),n.resolve(),[3,3];case 2:return e=i.sent(),n.reject(e),[3,3];case 3:return[2]}}))}))})),n.promise}function Gh(t){if(t.Y_||t.J_)throw new ar(sr.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var Qh="You are using the memory-only build of Firestore. Persistence support is only available via the @firebase/firestore bundle or the firebase-firestore.js build.",Kh=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){throw new ar(sr.FAILED_PRECONDITION,Qh)},t.prototype.enableMultiTabIndexedDbPersistence=function(t){throw new ar(sr.FAILED_PRECONDITION,Qh)},t.prototype.clearIndexedDbPersistence=function(t){throw new ar(sr.FAILED_PRECONDITION,Qh)},t}(),Yh=function(){function t(){this.enableMultiTabIndexedDbPersistence=qh.bind(null),this.clearIndexedDbPersistence=Wh.bind(null)}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){Gh(t);var n=Xh(t),r=t.H_(),i=new Ul;return Hh(n,i,new Ml(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t,{forceOwnership:e})},t}(),$h=function(){function t(e,n,i){var o=this;if(void 0===i&&(i=new Kh),this.tf=i,this.ef=null,this.X_=new ia,this.INTERNAL={delete:function(){return Object(r.b)(o,void 0,void 0,(function(){return Object(r.e)(this,(function(t){switch(t.label){case 0:return this.nf||Zh(this),[4,this.nf.terminate()];case 1:return t.sent(),[2]}}))}))}},"object"==typeof e.options){var s=e;this.ef=s,this.c_=t.sf(s),this.Z_=s.name,this.if=new ga(n)}else{var a=e;if(!a.projectId)throw new ar(sr.INVALID_ARGUMENT,"Must provide projectId");this.c_=new Ir(a.projectId,a.database),this.Z_="[DEFAULT]",this.if=new ya}this.rf=new Bh({})}return Object.defineProperty(t.prototype,"Y_",{get:function(){return!!this.nf},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"J_",{get:function(){return this.X_.ps},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"af",{get:function(){return this.cf||(this.cf=new fh(this.c_,this.rf.ignoreUndefinedProperties)),this.cf},enumerable:!1,configurable:!0}),t.prototype.settings=function(t){t.merge&&delete(t=Object.assign(Object.assign({},this.rf),t)).merge;var e=new Bh(t);if(this.nf&&!this.rf.isEqual(e))throw new ar(sr.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this.rf=e,void 0!==e.credentials&&(this.if=function(t){if(!t)return new ya;switch(t.type){case"gapi":var e=t.client;return vr(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new _a(e,t.sessionIndex||"0");case"provider":return t.client;default:throw new ar(sr.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(e.credentials))},t.prototype.useEmulator=function(t,e){"firestore.googleapis.com"!==this.rf.host&&fr("Host has been set in both settings() and useEmulator(), emulator host will be used"),this.settings({host:t+":"+e,ssl:!1,merge:!0})},t.prototype.enableNetwork=function(){return Xh(this),function(t){var e=this;return t.cs.enqueue((function(){return Object(r.b)(e,void 0,void 0,(function(){var e,n;return Object(r.e)(this,(function(r){switch(r.label){case 0:return[4,Rh(t)];case 1:return e=r.sent(),[4,Dh(t)];case 2:return n=r.sent(),[2,(e.la(!0),function(t){var e=yr(t);return e.Wc.delete(0),oc(e)}(n))]}}))}))}))}(this.nf)},t.prototype.disableNetwork=function(){return Xh(this),function(t){var e=this;return t.cs.enqueue((function(){return Object(r.b)(e,void 0,void 0,(function(){var e,n;return Object(r.e)(this,(function(i){switch(i.label){case 0:return[4,Rh(t)];case 1:return e=i.sent(),[4,Dh(t)];case 2:return n=i.sent(),[2,(e.la(!1),function(t){return Object(r.b)(this,void 0,void 0,(function(){var e;return Object(r.e)(this,(function(n){switch(n.label){case 0:return(e=yr(t)).Wc.add(0),[4,sc(e)];case 1:return n.sent(),e.Hc.set("Offline"),[2]}}))}))}(n))]}}))}))}))}(this.nf)},t.prototype.enablePersistence=function(t){if(this.nf)throw new ar(sr.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only call enablePersistence() before calling any other methods on a Firestore object.");var e=!1,n=!1;return t&&Wl("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.tf.enableMultiTabIndexedDbPersistence(this):this.tf.enableIndexedDbPersistence(this,n)},t.prototype.clearPersistence=function(){return Object(r.b)(this,void 0,void 0,(function(){return Object(r.e)(this,(function(t){return[2,this.tf.clearIndexedDbPersistence(this)]}))}))},t.prototype.terminate=function(){return this.app._removeServiceInstance("firestore"),this.INTERNAL.delete()},t.prototype.waitForPendingWrites=function(){return Xh(this),function(t){var e=this,n=new qs;return t.cs.ws((function(){return Object(r.b)(e,void 0,void 0,(function(){var e;return Object(r.e)(this,(function(r){switch(r.label){case 0:return e=rl,[4,zh(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}}))}))})),n.promise}(this.nf)},t.prototype.onSnapshotsInSync=function(t){return Xh(this),Vh(t)?Mh(this.nf,t):Mh(this.nf,{next:t})},t.sf=function(t){if(!Object.prototype.hasOwnProperty.call(t.options,"projectId"))throw new ar(sr.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');var e=t.options.projectId;if(!e||"string"!=typeof e)throw new ar(sr.INVALID_ARGUMENT,"projectId must be a string in FirebaseApp.options");return new Ir(e)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.ef)throw new ar(sr.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.ef},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){return ql("Firestore.collection","path",t),Xh(this),new ff(jr.q(t),this,null)},t.prototype.doc=function(t){return ql("Firestore.doc","path",t),Xh(this),ef.uf(jr.q(t),this,null)},t.prototype.collectionGroup=function(t){if(ql("Firestore.collectionGroup","collectionId",t),t.indexOf("/")>=0)throw new ar(sr.INVALID_ARGUMENT,"Invalid collection ID '"+t+"' passed to function Firestore.collectionGroup(). Collection IDs must not contain '/'.");return Xh(this),new lf(function(t){return new cs(jr.U(),t)}(t),this,null)},t.prototype.runTransaction=function(t){var e=this;return function(t,e){var n=this,i=new qs;return t.cs.ws((function(){return Object(r.b)(n,void 0,void 0,(function(){var n;return Object(r.e)(this,(function(r){switch(r.label){case 0:return[4,function(t){return Ph(t).then((function(t){return t.qc}))}(t)];case 1:return n=r.sent(),new Th(t.cs,n,e,i).run(),[2]}}))}))})),i.promise}(Xh(this),(function(n){return t(new Jh(e,n))}))},t.prototype.batch=function(){return Xh(this),new tf(this)},t.prototype.H_=function(){return this.rf},t}();function Xh(t){return t.nf||Zh(t),t.nf.O_(),t.nf}function Zh(t){var e=t.H_(),n=function(t,e,n){return new Or(t,e,n.host,n.ssl,n.experimentalForceLongPolling,n.experimentalAutoDetectLongPolling)}(t.c_,t.Z_,e);t.nf=new Oh(t.if,t.X_,n)}var Jh=function(){function t(t,e){this.hf=t,this.lf=e}return t.prototype.get=function(t){var e=this,n=df(0,t,this.hf);return this.lf.y_([n.u_]).then((function(t){if(!t||1!==t.length)return pr();var r=t[0];if(r instanceof as)return new rf(e.hf,n.u_,null,!1,!1,n.h_);if(r instanceof ss)return new rf(e.hf,n.u_,r,!1,!1,n.h_);throw pr()}))},t.prototype.set=function(t,e,n){var r=df(0,t,this.hf);n=Hl("Transaction.set",n);var i=vf(r.h_,e,n),o=dh(this.hf.af,"Transaction.set",r.u_,i,null!==r.h_,n);return this.lf.set(r.u_,o),this},t.prototype.update=function(t,e,n){for(var r,i,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];return"string"==typeof e||e instanceof Yl?(r=df(0,t,this.hf),i=vh(this.hf.af,"Transaction.update",r.u_,e,n,o)):(r=df(0,t,this.hf),i=ph(this.hf.af,"Transaction.update",r.u_,e)),this.lf.update(r.u_,i),this},t.prototype.delete=function(t){var e=df(0,t,this.hf);return this.lf.delete(e.u_),this},t}(),tf=function(){function t(t){this.hf=t,this._f=[],this.ff=!1}return t.prototype.set=function(t,e,n){this.df();var r=df(0,t,this.hf);n=Hl("WriteBatch.set",n);var i=vf(r.h_,e,n),o=dh(this.hf.af,"WriteBatch.set",r.u_,i,null!==r.h_,n);return this._f=this._f.concat(o.l_(r.u_,Vo.ze())),this},t.prototype.update=function(t,e,n){for(var r,i,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];return this.df(),"string"==typeof e||e instanceof Yl?(r=df(0,t,this.hf),i=vh(this.hf.af,"WriteBatch.update",r.u_,e,n,o)):(r=df(0,t,this.hf),i=ph(this.hf.af,"WriteBatch.update",r.u_,e)),this._f=this._f.concat(i.l_(r.u_,Vo.exists(!0))),this},t.prototype.delete=function(t){this.df();var e=df(0,t,this.hf);return this._f=this._f.concat(new ts(e.u_,Vo.ze())),this},t.prototype.commit=function(){return this.df(),this.ff=!0,this._f.length>0?Fh(Xh(this.hf),this._f):Promise.resolve()},t.prototype.df=function(){if(this.ff)throw new ar(sr.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}(),ef=function(t){function e(e,n,r){var i=this;return(i=t.call(this,n.c_,e,r)||this).u_=e,i.firestore=n,i.h_=r,i.nf=Xh(n),i}return Object(r.d)(e,t),e.uf=function(t,n,r){if(t.length%2!=0)throw new ar(sr.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.B()+" has "+t.length);return new e(new Mr(t),n,r)},Object.defineProperty(e.prototype,"id",{get:function(){return this.u_.path.k()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new ff(this.u_.path.F(),this.firestore,this.h_)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.u_.path.B()},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){if(ql("DocumentReference.collection","path",t),!t)throw new ar(sr.INVALID_ARGUMENT,"Must provide a non-empty collection name to collection()");var e=jr.q(t);return new ff(this.u_.path.child(e),this.firestore,null)},e.prototype.isEqual=function(t){return t instanceof e&&this.firestore===t.firestore&&this.u_.isEqual(t.u_)&&this.h_===t.h_},e.prototype.set=function(t,e){e=Hl("DocumentReference.set",e);var n=vf(this.h_,t,e),r=dh(this.firestore.af,"DocumentReference.set",this.u_,n,null!==this.h_,e);return Fh(this.nf,r.l_(this.u_,Vo.ze()))},e.prototype.update=function(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];return n="string"==typeof t||t instanceof Yl?vh(this.firestore.af,"DocumentReference.update",this.u_,t,e,r):ph(this.firestore.af,"DocumentReference.update",this.u_,t),Fh(this.nf,n.l_(this.u_,Vo.exists(!0)))},e.prototype.delete=function(){return Fh(this.nf,[new ts(this.u_,Vo.ze())])},e.prototype.onSnapshot=function(){for(var t,e,n,r=this,i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];var s={includeMetadataChanges:!1},a=0;"object"!=typeof i[a]||Vh(i[a])||(s=i[a],a++);var u={includeMetadataChanges:s.includeMetadataChanges};if(Vh(i[a])){var c=i[a];i[a]=null===(t=c.next)||void 0===t?void 0:t.bind(c),i[a+1]=null===(e=c.error)||void 0===e?void 0:e.bind(c),i[a+2]=null===(n=c.complete)||void 0===n?void 0:n.bind(c)}var l={next:function(t){i[a]&&i[a](r.wf(t))},error:i[a+1],complete:i[a+2]};return Lh(this.nf,hs(this.u_.path),u,l)},e.prototype.get=function(t){var e=this;return t&&"cache"===t.source?function(t,e){var n=this,i=new qs;return t.cs.ws((function(){return Object(r.b)(n,void 0,void 0,(function(){var n;return Object(r.e)(this,(function(o){switch(o.label){case 0:return n=function(t,e,n){return Object(r.b)(this,void 0,void 0,(function(){var i,o,s;return Object(r.e)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t,e){var n=yr(t);return n.persistence.runTransaction("read document","readonly",(function(t){return n.Ka.Mi(t,e)}))}(t,e)];case 1:return(i=r.sent())instanceof ss?n.resolve(i):i instanceof as?n.resolve(null):n.reject(new ar(sr.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return o=r.sent(),s=oa(o,"Failed to get document '"+e+" from cache"),n.reject(s),[3,3];case 3:return[2]}}))}))},[4,Nh(t)];case 1:return[2,n.apply(void 0,[o.sent(),e,i])]}}))}))})),i.promise}(this.nf,this.u_).then((function(t){return new rf(e.firestore,e.u_,t,!0,t instanceof ss&&t.Je,e.h_)})):function(t,e,n){var i=this;void 0===n&&(n={});var o=new qs;return t.cs.ws((function(){return Object(r.b)(i,void 0,void 0,(function(){var i;return Object(r.e)(this,(function(r){switch(r.label){case 0:return i=function(t,e,n,r,i){var o=new Bl({next:function(o){e.ws((function(){return ca(t,s)}));var a=o.docs.has(n);!a&&o.fromCache?i.reject(new ar(sr.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&o.fromCache&&r&&"server"===r.source?i.reject(new ar(sr.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),s=new da(hs(n.path),o,{includeMetadataChanges:!0,Xs:!0});return ua(t,s)},[4,jh(t)];case 1:return[2,i.apply(void 0,[r.sent(),t.cs,e,n,o])]}}))}))})),o.promise}(this.nf,this.u_,t).then((function(t){return e.wf(t)}))},e.prototype.withConverter=function(t){return new e(this.u_,this.firestore,t)},e.prototype.wf=function(t){var e=t.docs.get(this.u_);return new rf(this.firestore,this.u_,e,t.fromCache,t.hasPendingWrites,this.h_)},e}(ah),nf=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),rf=function(){function t(t,e,n,r,i,o){this.hf=t,this.u_=e,this.Ef=n,this.Tf=r,this.If=i,this.h_=o}return t.prototype.data=function(t){var e=this;if(void 0===t&&(t={}),this.Ef){if(this.h_){var n=new of(this.hf,this.u_,this.Ef,this.Tf,this.If,null);return this.h_.fromFirestore(n,t)}return new Uh(this.hf.c_,t.serverTimestamps||"none",(function(t){return new ef(t,e.hf,null)}),(function(t){return new Tr(t)})).U_(this.Ef.rn())}},t.prototype.get=function(t,e){var n=this;if(void 0===e&&(e={}),this.Ef){var r=this.Ef.data().field(wh("DocumentSnapshot.get",t,this.u_));if(null!==r)return new Uh(this.hf.c_,e.serverTimestamps||"none",(function(t){return new ef(t,n.hf,n.h_)}),(function(t){return new Tr(t)})).U_(r)}},Object.defineProperty(t.prototype,"id",{get:function(){return this.u_.path.k()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new ef(this.u_,this.hf,this.h_)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return null!==this.Ef},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return new nf(this.If,this.Tf)},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&this.hf===e.hf&&this.Tf===e.Tf&&this.u_.isEqual(e.u_)&&(null===this.Ef?null===e.Ef:this.Ef.isEqual(e.Ef))&&this.h_===e.h_},t}(),of=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r.d)(e,t),e.prototype.data=function(e){return t.prototype.data.call(this,e)},e}(rf);function sf(t,e,n){if("string"==typeof n){if(""===n)throw new ar(sr.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!ys(e)&&-1!==n.indexOf("/"))throw new ar(sr.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(jr.q(n));if(!Mr.X(r))throw new ar(sr.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return Mi(t,new Mr(r))}if(n instanceof ah)return Mi(t,n.u_);throw new ar(sr.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+Gl(n)+".")}function af(t,e){if(!Array.isArray(t)||0===t.length)throw new ar(sr.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new ar(sr.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function uf(t,e,n){if(!n.isEqual(e))throw new ar(sr.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}function cf(t){if(ds(t)&&0===t.on.length)throw new ar(sr.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var lf=function(){function t(t,e,n){this.mf=t,this.firestore=e,this.h_=n}return t.prototype.where=function(e,n,r){var i=wh("Query.where",e),o=function(t,e,n,r,i,o,s){var a;if(i.W()){if("array-contains"===o||"array-contains-any"===o)throw new ar(sr.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){af(s,o);for(var u=[],c=0,l=s;c<l.length;c++)u.push(sf(r,t,l[c]));a={arrayValue:{values:u}}}else a=sf(r,t,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||af(s,o),a=yh(n,"Query.where",s,"in"===o||"not-in"===o);var h=Os.create(i,o,a);return function(t,e){if(e.hn()){var n=vs(t);if(null!==n&&!n.isEqual(e.field))throw new ar(sr.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=ps(t);null!==r&&uf(0,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw new ar(sr.INVALID_ARGUMENT,i===e.op?"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter.":"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,h),h}(this.mf,0,this.firestore.af,this.firestore.c_,i,n,r);return new t(function(t,e){var n=t.filters.concat([e]);return new cs(t.path,t.collectionGroup,t.on.slice(),n,t.limit,t.an,t.startAt,t.endAt)}(this.mf,o),this.firestore,this.h_)},t.prototype.orderBy=function(e,n){var r;if(void 0===n||"asc"===n)r="asc";else{if("desc"!==n)throw new ar(sr.INVALID_ARGUMENT,"Function Query.orderBy() has unknown direction '"+n+"', expected 'asc' or 'desc'.");r="desc"}var i=wh("Query.orderBy",e),o=function(t,e,n){if(null!==t.startAt)throw new ar(sr.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new ar(sr.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Vs(e,n);return function(t,e){if(null===ps(t)){var n=vs(t);null!==n&&uf(0,n,e.field)}}(t,r),r}(this.mf,i,r);return new t(function(t,e){var n=t.on.concat([e]);return new cs(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.an,t.startAt,t.endAt)}(this.mf,o),this.firestore,this.h_)},t.prototype.limit=function(e){return Ql("Query.limit",e),new t(_s(this.mf,e,"F"),this.firestore,this.h_)},t.prototype.limitToLast=function(e){return Ql("Query.limitToLast",e),new t(_s(this.mf,e,"L"),this.firestore,this.h_)},t.prototype.startAt=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=this.Af("Query.startAt",e,n,!0);return new t(bs(this.mf,i),this.firestore,this.h_)},t.prototype.startAfter=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=this.Af("Query.startAfter",e,n,!1);return new t(bs(this.mf,i),this.firestore,this.h_)},t.prototype.endBefore=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=this.Af("Query.endBefore",e,n,!0);return new t(ws(this.mf,i),this.firestore,this.h_)},t.prototype.endAt=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=this.Af("Query.endAt",e,n,!1);return new t(ws(this.mf,i),this.firestore,this.h_)},t.prototype.isEqual=function(e){return e instanceof t&&this.firestore===e.firestore&&Cs(this.mf,e.mf)&&this.h_===e.h_},t.prototype.withConverter=function(e){return new t(this.mf,this.firestore,e)},t.prototype.Af=function(t,e,n,r){if(e instanceof rf)return function(t,e,n,r,i){if(!r)throw new ar(sr.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],s=0,a=gs(t);s<a.length;s++){var u=a[s];if(u.field.W())o.push(Mi(e,r.key));else{var c=r.field(u.field);if(Oi(c))throw new ar(sr.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.B();throw new ar(sr.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+l+"' (used as the orderBy) does not exist.")}o.push(c)}}return new js(o,i)}(this.mf,this.firestore.c_,t,e.Ef,r);var i=[e].concat(n);return function(t,e,n,r,i,o){var s=t.on;if(i.length>s.length)throw new ar(sr.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var a=[],u=0;u<i.length;u++){var c=i[u];if(s[u].field.W()){if("string"!=typeof c)throw new ar(sr.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!ys(t)&&-1!==c.indexOf("/"))throw new ar(sr.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var l=t.path.child(jr.q(c));if(!Mr.X(l))throw new ar(sr.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+l+"' is not because it contains an odd number of segments.");var h=new Mr(l);a.push(Mi(e,h))}else{var f=yh(n,r,c);a.push(f)}}return new js(a,o)}(this.mf,this.firestore.c_,this.firestore.af,t,i,r)},t.prototype.onSnapshot=function(){for(var t,e,n,r=this,i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];var s={},a=0;if("object"!=typeof i[a]||Vh(i[a])||(s=i[a],a++),Vh(i[a])){var u=i[a];i[a]=null===(t=u.next)||void 0===t?void 0:t.bind(u),i[a+1]=null===(e=u.error)||void 0===e?void 0:e.bind(u),i[a+2]=null===(n=u.complete)||void 0===n?void 0:n.bind(u)}var c={next:function(t){i[a]&&i[a](new hf(r.firestore,r.mf,t,r.h_))},error:i[a+1],complete:i[a+2]};return cf(this.mf),Lh(Xh(this.firestore),this.mf,s,c)},t.prototype.get=function(t){var e=this;cf(this.mf);var n=Xh(this.firestore);return(t&&"cache"===t.source?function(t,e){var n=this,i=new qs;return t.cs.ws((function(){return Object(r.b)(n,void 0,void 0,(function(){var n;return Object(r.e)(this,(function(o){switch(o.label){case 0:return n=function(t,e,n){return Object(r.b)(this,void 0,void 0,(function(){var i,o,s,a,u,c;return Object(r.e)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,Ku(t,e,!0)];case 1:return i=r.sent(),o=new Hc(e,i.za),s=o.wh(i.documents),a=o.Di(s,!1),n.resolve(a.snapshot),[3,3];case 2:return u=r.sent(),c=oa(u,"Failed to execute query '"+e+" against cache"),n.reject(c),[3,3];case 3:return[2]}}))}))},[4,Nh(t)];case 1:return[2,n.apply(void 0,[o.sent(),e,i])]}}))}))})),i.promise}(n,this.mf):function(t,e,n){var i=this;void 0===n&&(n={});var o=new qs;return t.cs.ws((function(){return Object(r.b)(i,void 0,void 0,(function(){var i;return Object(r.e)(this,(function(r){switch(r.label){case 0:return i=function(t,e,n,r,i){var o=new Bl({next:function(n){e.ws((function(){return ca(t,s)})),n.fromCache&&"server"===r.source?i.reject(new ar(sr.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),s=new da(n,o,{includeMetadataChanges:!0,Xs:!0});return ua(t,s)},[4,jh(t)];case 1:return[2,i.apply(void 0,[r.sent(),t.cs,e,n,o])]}}))}))})),o.promise}(n,this.mf,t)).then((function(t){return new hf(e.firestore,e.mf,t,e.h_)}))},t}(),hf=function(){function t(t,e,n,r){this.hf=t,this.Rf=e,this.Pf=n,this.h_=r,this.gf=null,this.yf=null,this.metadata=new nf(n.hasPendingWrites,n.fromCache)}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this.Pf.docs.P()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this.Pf.docs.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this.Pf.docs.forEach((function(r){t.call(e,n.Vf(r,n.metadata.fromCache,n.Pf.Qt.has(r.key)))}))},Object.defineProperty(t.prototype,"query",{get:function(){return new lf(this.Rf,this.hf,this.h_)},enumerable:!1,configurable:!0}),t.prototype.docChanges=function(t){var e=!(!t||!t.includeMetadataChanges);if(e&&this.Pf.jt)throw new ar(sr.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this.gf&&this.yf===e||(this.gf=function(t,e,n){if(t.Kt.P()){var r=0;return t.docChanges.map((function(e){return{type:"added",doc:n(e.doc,t.fromCache,t.Qt.has(e.doc.key)),oldIndex:-1,newIndex:r++}}))}var i=t.Kt;return t.docChanges.filter((function(t){return e||3!==t.type})).map((function(e){var r=n(e.doc,t.fromCache,t.Qt.has(e.doc.key)),o=-1,s=-1;return 0!==e.type&&(o=i.indexOf(e.doc.key),i=i.delete(e.doc.key)),1!==e.type&&(s=(i=i.add(e.doc)).indexOf(e.doc.key)),{type:pf(e.type),doc:r,oldIndex:o,newIndex:s}}))}(this.Pf,e,this.Vf.bind(this)),this.yf=e),this.gf},t.prototype.isEqual=function(e){return e instanceof t&&this.hf===e.hf&&Cs(this.Rf,e.Rf)&&this.Pf.isEqual(e.Pf)&&this.h_===e.h_},t.prototype.Vf=function(t,e,n){return new of(this.hf,t.key,t,e,n,this.h_)},t}(),ff=function(t){function e(e,n,r){var i=this;if((i=t.call(this,hs(e),n,r)||this).pf=e,e.length%2!=1)throw new ar(sr.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+e.B()+" has "+e.length);return i}return Object(r.d)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this.mf.path.k()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this.mf.path.F();return t.P()?null:new ef(new Mr(t),this.firestore,null)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.mf.path.B()},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){0===arguments.length&&(t=mr.t()),ql("CollectionReference.doc","path",t);var e=jr.q(t);return ef.uf(this.mf.path.child(e),this.firestore,this.h_)},e.prototype.add=function(t){var e=this.h_?this.h_.toFirestore(t):t,n=this.doc();return new ef(n.u_,this.firestore,null).set(e).then((function(){return n}))},e.prototype.withConverter=function(t){return new e(this.pf,this.firestore,t)},e}(lf);function df(t,e,n){var r=function(t,e){if(!(t instanceof e)){if(e.name===t.constructor.name)throw new ar(sr.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=Gl(t);throw new ar(sr.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}(e,ef);if(r.firestore!==n)throw new ar(sr.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}function pf(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return pr()}}function vf(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var yf=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r.d)(e,t),e.serverTimestamp=function(){var t=new th("serverTimestamp");return t.Jl="FieldValue.serverTimestamp",new e(t)},e.delete=function(){var t=new Zl("deleteField");return t.Jl="FieldValue.delete",new e(t)},e.arrayUnion=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new eh("arrayUnion",t)}).apply(void 0,t);return r.Jl="FieldValue.arrayUnion",new e(r)},e.arrayRemove=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new nh("arrayRemove",t)}).apply(void 0,t);return r.Jl="FieldValue.arrayRemove",new e(r)},e.increment=function(t){var n=function(t){return new rh("increment",t)}(t);return n.Jl="FieldValue.increment",new e(n)},e.prototype.isEqual=function(t){return this.a_.isEqual(t.a_)},e}(oh),gf={Firestore:$h,GeoPoint:ih,Timestamp:Nr,Blob:Tr,Transaction:Jh,WriteBatch:tf,DocumentReference:ef,DocumentSnapshot:rf,Query:lf,QueryDocumentSnapshot:of,QuerySnapshot:hf,CollectionReference:ff,FieldPath:Yl,FieldValue:yf,setLogLevel:function(t){ur.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};function mf(t){!function(t,e){t.INTERNAL.registerComponent(new or.a("firestore",(function(t){return function(t,e){return new $h(t,e,new Yh)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(Object.assign({},gf)))}(t),t.registerVersion("@firebase/firestore","2.0.1")}mf(i.a)},zIRd:function(t,e,n){"use strict";var r,i,o=n("mrSG"),s=n("qOnz"),a=n("/6Yf"),u=n("q/0M"),c=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r["invalid-log-argument"]="First argument to `onLog` must be null or a function.",r),l=new s.b("app","Firebase",c),h=((i={})["@firebase/app"]="fire-core",i["@firebase/analytics"]="fire-analytics",i["@firebase/auth"]="fire-auth",i["@firebase/database"]="fire-rtdb",i["@firebase/functions"]="fire-fn",i["@firebase/installations"]="fire-iid",i["@firebase/messaging"]="fire-fcm",i["@firebase/performance"]="fire-perf",i["@firebase/remote-config"]="fire-rc",i["@firebase/storage"]="fire-gcs",i["@firebase/firestore"]="fire-fst",i["fire-js"]="fire-js",i["firebase-wrapper"]="fire-js-all",i),f=new u.b("@firebase/app"),d=function(){function t(t,e,n){var r,i,u=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=Object(s.k)(t),this.container=new a.b(e.name),this._addComponent(new a.a("app",(function(){return u}),"PUBLIC"));try{for(var c=Object(o.k)(this.firebase_.INTERNAL.components.values()),l=c.next();!l.done;l=c.next())this._addComponent(l.value)}catch(h){r={error:h}}finally{try{l&&!l.done&&(i=c.return)&&i.call(c)}finally{if(r)throw r.error}}}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise((function(e){t.checkDestroyed_(),e()})).then((function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map((function(t){return t.delete()})))})).then((function(){t.isDeleted_=!0}))},t.prototype._getService=function(t,e){return void 0===e&&(e="[DEFAULT]"),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e="[DEFAULT]"),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){f.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw l.create("app-deleted",{appName:this.name_})},t}();d.prototype.name&&d.prototype.options||d.prototype.delete||console.log("dc");var p=function t(){var e=function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),"object"==typeof i&&null!==i||(i={name:i});var o=i;void 0===o.name&&(o.name="[DEFAULT]");var a=o.name;if("string"!=typeof a||!a)throw l.create("bad-app-name",{appName:String(a)});if(Object(s.i)(e,a))throw l.create("duplicate-app",{appName:a});var u=new t(n,o,r);return e[a]=u,u},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=h[t])&&void 0!==r?r:t;n&&(i+="-"+n);var o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){var u=['Unable to register library "'+i+'" with version "'+e+'":'];return o&&u.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),o&&s&&u.push("and"),s&&u.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void f.warn(u.join(" "))}c(new a.a(i+"-version",(function(){return{library:i,version:e}}),"VERSION"))},setLogLevel:u.c,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw l.create("invalid-log-argument",{appName:name});Object(u.d)(t,e)},apps:null,SDK_VERSION:"8.0.1",INTERNAL:{registerComponent:c,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){return"serverAuth"===e?null:e}}};function i(t){if(t=t||"[DEFAULT]",!Object(s.i)(e,t))throw l.create("no-app",{appName:t});return e[t]}function c(a){var u,c,h=a.name;if(n.has(h))return f.debug("There were multiple attempts to register component "+h+"."),"PUBLIC"===a.type?r[h]:null;if(n.set(h,a),"PUBLIC"===a.type){var d=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[h])throw l.create("invalid-app-argument",{appName:h});return t[h]()};void 0!==a.serviceProps&&Object(s.l)(d,a.serviceProps),r[h]=d,t.prototype[h]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this._getService.bind(this,h);return n.apply(this,a.multipleInstances?t:[])}}try{for(var p=Object(o.k)(Object.keys(e)),v=p.next();!v.done;v=p.next())e[v.value]._addComponent(a)}catch(y){u={error:y}}finally{try{v&&!v.done&&(c=p.return)&&c.call(p)}finally{if(u)throw u.error}}return"PUBLIC"===a.type?r[h]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map((function(t){return e[t]}))}}),i.App=t,r}(d);return e.INTERNAL=Object(o.a)(Object(o.a)({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){Object(s.l)(e,t)},createSubscribe:s.j,ErrorFactory:s.b,deepExtend:s.l}),e}(),v=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null})).filter((function(t){return t})).join(" ")},t}();if(Object(s.p)()&&void 0!==self.firebase){f.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var y=self.firebase.SDK_VERSION;y&&y.indexOf("LITE")>=0&&f.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var g=p.initializeApp;p.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Object(s.v)()&&f.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),g.apply(void 0,t)};var m=p;!function(t,e){t.INTERNAL.registerComponent(new a.a("platform-logger",(function(t){return new v(t)}),"PRIVATE")),t.registerVersion("@firebase/app","0.6.13",void 0),t.registerVersion("fire-js","")}(m),e.a=m},zUnb:function(t,e,n){"use strict";function r(t){return"function"==typeof t}n.r(e);var i=!1,o={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){var e=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+e.stack)}else i&&console.log("RxJS: Back to a better error behavior. Thank you. <3");i=t},get useDeprecatedSynchronousErrorHandling(){return i}};function s(t){setTimeout((function(){throw t}),0)}var a={closed:!0,next:function(t){},error:function(t){if(o.useDeprecatedSynchronousErrorHandling)throw t;s(t)},complete:function(){}},u=Array.isArray||function(t){return t&&"number"==typeof t.length};function c(t){return null!==t&&"object"==typeof t}var l,h=function(){function t(t){return Error.call(this),this.message=t?"".concat(t.length," errors occurred during unsubscription:\n").concat(t.map((function(t,e){return"".concat(e+1,") ").concat(t.toString())})).join("\n  ")):"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t}(),f=((l=function(){function t(e){_classCallCheck(this,t),this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._unsubscribe=e)}return _createClass(t,[{key:"unsubscribe",value:function(){var e;if(!this.closed){var n=this._parentOrParents,i=this._unsubscribe,o=this._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof t)n.remove(this);else if(null!==n)for(var s=0;s<n.length;++s)n[s].remove(this);if(r(i))try{i.call(this)}catch(p){e=p instanceof h?d(p.errors):[p]}if(u(o))for(var a=-1,l=o.length;++a<l;){var f=o[a];if(c(f))try{f.unsubscribe()}catch(p){e=e||[],p instanceof h?e=e.concat(d(p.errors)):e.push(p)}}if(e)throw new h(e)}}},{key:"add",value:function(e){var n=e;if(!e)return t.EMPTY;switch(typeof e){case"function":n=new t(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof t)){var r=n;(n=new t)._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}var i=n._parentOrParents;if(null===i)n._parentOrParents=this;else if(i instanceof t){if(i===this)return n;n._parentOrParents=[i,this]}else{if(-1!==i.indexOf(this))return n;i.push(this)}var o=this._subscriptions;return null===o?this._subscriptions=[n]:o.push(n),n}},{key:"remove",value:function(t){var e=this._subscriptions;if(e){var n=e.indexOf(t);-1!==n&&e.splice(n,1)}}}]),t}()).EMPTY=function(t){return t.closed=!0,t}(new l),l);function d(t){return t.reduce((function(t,e){return t.concat(e instanceof h?e.errors:e)}),[])}var p="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random(),v=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r,i){var o;switch(_classCallCheck(this,n),(o=e.call(this)).syncErrorValue=null,o.syncErrorThrown=!1,o.syncErrorThrowable=!1,o.isStopped=!1,arguments.length){case 0:o.destination=a;break;case 1:if(!t){o.destination=a;break}if("object"==typeof t){t instanceof n?(o.syncErrorThrowable=t.syncErrorThrowable,o.destination=t,t.add(_assertThisInitialized(o))):(o.syncErrorThrowable=!0,o.destination=new y(_assertThisInitialized(o),t));break}default:o.syncErrorThrowable=!0,o.destination=new y(_assertThisInitialized(o),t,r,i)}return o}return _createClass(n,[{key:p,value:function(){return this}},{key:"next",value:function(t){this.isStopped||this._next(t)}},{key:"error",value:function(t){this.isStopped||(this.isStopped=!0,this._error(t))}},{key:"complete",value:function(){this.isStopped||(this.isStopped=!0,this._complete())}},{key:"unsubscribe",value:function(){this.closed||(this.isStopped=!0,_get(_getPrototypeOf(n.prototype),"unsubscribe",this).call(this))}},{key:"_next",value:function(t){this.destination.next(t)}},{key:"_error",value:function(t){this.destination.error(t),this.unsubscribe()}},{key:"_complete",value:function(){this.destination.complete(),this.unsubscribe()}},{key:"_unsubscribeAndRecycle",value:function(){var t=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this}}],[{key:"create",value:function(t,e,r){var i=new n(t,e,r);return i.syncErrorThrowable=!1,i}}]),n}(f),y=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,i,o,s){var u,c;_classCallCheck(this,n),(u=e.call(this))._parentSubscriber=t;var l=_assertThisInitialized(u);return r(i)?c=i:i&&(c=i.next,o=i.error,s=i.complete,i!==a&&(r((l=Object.create(i)).unsubscribe)&&u.add(l.unsubscribe.bind(l)),l.unsubscribe=u.unsubscribe.bind(_assertThisInitialized(u)))),u._context=l,u._next=c,u._error=o,u._complete=s,u}return _createClass(n,[{key:"next",value:function(t){if(!this.isStopped&&this._next){var e=this._parentSubscriber;o.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}},{key:"error",value:function(t){if(!this.isStopped){var e=this._parentSubscriber,n=o.useDeprecatedSynchronousErrorHandling;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):s(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;s(t)}}}},{key:"complete",value:function(){var t=this;if(!this.isStopped){var e=this._parentSubscriber;if(this._complete){var n=function(){return t._complete.call(t._context)};o.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}}},{key:"__tryOrUnsub",value:function(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),o.useDeprecatedSynchronousErrorHandling)throw n;s(n)}}},{key:"__tryOrSetError",value:function(t,e,n){if(!o.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(r){return o.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=r,t.syncErrorThrown=!0,!0):(s(r),!0)}return!1}},{key:"_unsubscribe",value:function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}]),n}(v),g="function"==typeof Symbol&&Symbol.observable||"@@observable";function m(t){return t}var _,b=((_=function(){function t(e){_classCallCheck(this,t),this._isScalar=!1,e&&(this._subscribe=e)}return _createClass(t,[{key:"lift",value:function(e){var n=new t;return n.source=this,n.operator=e,n}},{key:"subscribe",value:function(t,e,n){var r=this.operator,i=function(t,e,n){if(t){if(t instanceof v)return t;if(t[p])return t[p]()}return t||e||n?new v(t,e,n):new v(a)}(t,e,n);if(i.add(r?r.call(i,this.source):this.source||o.useDeprecatedSynchronousErrorHandling&&!i.syncErrorThrowable?this._subscribe(i):this._trySubscribe(i)),o.useDeprecatedSynchronousErrorHandling&&i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i}},{key:"_trySubscribe",value:function(t){try{return this._subscribe(t)}catch(e){o.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){var e=t,n=e.closed,r=e.destination,i=e.isStopped;if(n||i)return!1;t=r&&r instanceof v?r:null}return!0}(t)?t.error(e):console.warn(e)}}},{key:"forEach",value:function(t,e){var n=this;return new(e=w(e))((function(e,r){var i;i=n.subscribe((function(e){try{t(e)}catch(n){r(n),i&&i.unsubscribe()}}),r,e)}))}},{key:"_subscribe",value:function(t){var e=this.source;return e&&e.subscribe(t)}},{key:g,value:function(){return this}},{key:"pipe",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return 0===e.length?this:(0===(r=e).length?m:1===r.length?r[0]:function(t){return r.reduce((function(t,e){return e(t)}),t)})(this);var r}},{key:"toPromise",value:function(t){var e=this;return new(t=w(t))((function(t,n){var r;e.subscribe((function(t){return r=t}),(function(t){return n(t)}),(function(){return t(r)}))}))}}]),t}()).create=function(t){return new _(t)},_);function w(t){if(t||(t=o.Promise||Promise),!t)throw new Error("no Promise impl found");return t}var C,k=function(){function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t}(),E=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r){var i;return _classCallCheck(this,n),(i=e.call(this)).subject=t,i.subscriber=r,i.closed=!1,i}return _createClass(n,[{key:"unsubscribe",value:function(){if(!this.closed){this.closed=!0;var t=this.subject,e=t.observers;if(this.subject=null,e&&0!==e.length&&!t.isStopped&&!t.closed){var n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}}}]),n}(f),S=function(t){_inherits(n,t);var e=_createSuper(n);function n(t){var r;return _classCallCheck(this,n),(r=e.call(this,t)).destination=t,r}return n}(v),T=((C=function(t){_inherits(n,t);var e=_createSuper(n);function n(){var t;return _classCallCheck(this,n),(t=e.call(this)).observers=[],t.closed=!1,t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return _createClass(n,[{key:p,value:function(){return new S(this)}},{key:"lift",value:function(t){var e=new O(this,this);return e.operator=t,e}},{key:"next",value:function(t){if(this.closed)throw new k;if(!this.isStopped)for(var e=this.observers,n=e.length,r=e.slice(),i=0;i<n;i++)r[i].next(t)}},{key:"error",value:function(t){if(this.closed)throw new k;this.hasError=!0,this.thrownError=t,this.isStopped=!0;for(var e=this.observers,n=e.length,r=e.slice(),i=0;i<n;i++)r[i].error(t);this.observers.length=0}},{key:"complete",value:function(){if(this.closed)throw new k;this.isStopped=!0;for(var t=this.observers,e=t.length,n=t.slice(),r=0;r<e;r++)n[r].complete();this.observers.length=0}},{key:"unsubscribe",value:function(){this.isStopped=!0,this.closed=!0,this.observers=null}},{key:"_trySubscribe",value:function(t){if(this.closed)throw new k;return _get(_getPrototypeOf(n.prototype),"_trySubscribe",this).call(this,t)}},{key:"_subscribe",value:function(t){if(this.closed)throw new k;return this.hasError?(t.error(this.thrownError),f.EMPTY):this.isStopped?(t.complete(),f.EMPTY):(this.observers.push(t),new E(this,t))}},{key:"asObservable",value:function(){var t=new b;return t.source=this,t}}]),n}(b)).create=function(t,e){return new O(t,e)},C),O=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r){var i;return _classCallCheck(this,n),(i=e.call(this)).destination=t,i.source=r,i}return _createClass(n,[{key:"next",value:function(t){var e=this.destination;e&&e.next&&e.next(t)}},{key:"error",value:function(t){var e=this.destination;e&&e.error&&this.destination.error(t)}},{key:"complete",value:function(){var t=this.destination;t&&t.complete&&this.destination.complete()}},{key:"_subscribe",value:function(t){return this.source?this.source.subscribe(t):f.EMPTY}}]),n}(T);function I(t){return t&&"function"==typeof t.schedule}var x=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r,i){var o;return _classCallCheck(this,n),(o=e.call(this)).parent=t,o.outerValue=r,o.outerIndex=i,o.index=0,o}return _createClass(n,[{key:"_next",value:function(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}},{key:"_error",value:function(t){this.parent.notifyError(t,this),this.unsubscribe()}},{key:"_complete",value:function(){this.parent.notifyComplete(this),this.unsubscribe()}}]),n}(v),A=function(t){return function(e){for(var n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.complete()}};var P="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator",R=function(t){return t&&"number"==typeof t.length&&"function"!=typeof t};function N(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}var D=function(t){if(t&&"function"==typeof t[g])return r=t,function(t){var e=r[g]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)};if(R(t))return A(t);if(N(t))return n=t,function(t){return n.then((function(e){t.closed||(t.next(e),t.complete())}),(function(e){return t.error(e)})).then(null,s),t};if(t&&"function"==typeof t[P])return e=t,function(t){for(var n=e[P]();;){var r=n.next();if(r.done){t.complete();break}if(t.next(r.value),t.closed)break}return"function"==typeof n.return&&t.add((function(){n.return&&n.return()})),t};var e,n,r,i=c(t)?"an invalid object":"'".concat(t,"'");throw new TypeError("You provided ".concat(i," where a stream was expected. You can provide an Observable, Promise, Array, or Iterable."))};function z(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new x(t,n,r);if(!i.closed)return e instanceof b?e.subscribe(i):D(e)(i)}var j=function(t){_inherits(n,t);var e=_createSuper(n);function n(){return _classCallCheck(this,n),e.apply(this,arguments)}return _createClass(n,[{key:"notifyNext",value:function(t,e,n,r,i){this.destination.next(e)}},{key:"notifyError",value:function(t,e){this.destination.error(t)}},{key:"notifyComplete",value:function(t){this.destination.complete()}}]),n}(v);function L(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new F(t,e))}}var F=function(){function t(e,n){_classCallCheck(this,t),this.project=e,this.thisArg=n}return _createClass(t,[{key:"call",value:function(t,e){return e.subscribe(new M(t,this.project,this.thisArg))}}]),t}(),M=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r,i){var o;return _classCallCheck(this,n),(o=e.call(this,t)).project=r,o.count=0,o.thisArg=i||_assertThisInitialized(o),o}return _createClass(n,[{key:"_next",value:function(t){var e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}]),n}(v);function V(t,e){return new b((function(n){var r=new f,i=0;return r.add(e.schedule((function(){i!==t.length?(n.next(t[i++]),n.closed||r.add(this.schedule())):n.complete()}))),r}))}function U(t,e){return e?function(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[g]}(t))return function(t,e){return new b((function(n){var r=new f;return r.add(e.schedule((function(){var i=t[g]();r.add(i.subscribe({next:function(t){r.add(e.schedule((function(){return n.next(t)})))},error:function(t){r.add(e.schedule((function(){return n.error(t)})))},complete:function(){r.add(e.schedule((function(){return n.complete()})))}}))}))),r}))}(t,e);if(N(t))return function(t,e){return new b((function(n){var r=new f;return r.add(e.schedule((function(){return t.then((function(t){r.add(e.schedule((function(){n.next(t),r.add(e.schedule((function(){return n.complete()})))})))}),(function(t){r.add(e.schedule((function(){return n.error(t)})))}))}))),r}))}(t,e);if(R(t))return V(t,e);if(function(t){return t&&"function"==typeof t[P]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new b((function(n){var r,i=new f;return i.add((function(){r&&"function"==typeof r.return&&r.return()})),i.add(e.schedule((function(){r=t[P](),i.add(e.schedule((function(){if(!n.closed){var t,e;try{var i=r.next();t=i.value,e=i.done}catch(o){return void n.error(o)}e?n.complete():(n.next(t),this.schedule())}})))}))),i}))}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}(t,e):t instanceof b?t:new b(D(t))}function B(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.POSITIVE_INFINITY;return"function"==typeof e?function(r){return r.pipe(B((function(n,r){return U(t(n,r)).pipe(L((function(t,i){return e(n,t,r,i)})))}),n))}:("number"==typeof e&&(n=e),function(e){return e.lift(new q(t,n))})}var q=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.POSITIVE_INFINITY;_classCallCheck(this,t),this.project=e,this.concurrent=n}return _createClass(t,[{key:"call",value:function(t,e){return e.subscribe(new H(t,this.project,this.concurrent))}}]),t}(),H=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r){var i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.POSITIVE_INFINITY;return _classCallCheck(this,n),(i=e.call(this,t)).project=r,i.concurrent=o,i.hasCompleted=!1,i.buffer=[],i.active=0,i.index=0,i}return _createClass(n,[{key:"_next",value:function(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}},{key:"_tryNext",value:function(t){var e,n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(e,t,n)}},{key:"_innerSub",value:function(t,e,n){var r=new x(this,e,n),i=this.destination;i.add(r);var o=z(this,t,void 0,void 0,r);o!==r&&i.add(o)}},{key:"_complete",value:function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}},{key:"notifyNext",value:function(t,e,n,r,i){this.destination.next(e)}},{key:"notifyComplete",value:function(t){var e=this.buffer;this.remove(t),this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}]),n}(j);function W(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.POSITIVE_INFINITY;return B(m,t)}function G(t,e){return e?V(t,e):new b(A(t))}function Q(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=Number.POSITIVE_INFINITY,i=null,o=e[e.length-1];return I(o)?(i=e.pop(),e.length>1&&"number"==typeof e[e.length-1]&&(r=e.pop())):"number"==typeof o&&(r=e.pop()),null===i&&1===e.length&&e[0]instanceof b?e[0]:W(r)(G(e,i))}function K(){return function(t){return t.lift(new $(t))}}var Y,$=function(){function t(e){_classCallCheck(this,t),this.connectable=e}return _createClass(t,[{key:"call",value:function(t,e){var n=this.connectable;n._refCount++;var r=new X(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i}}]),t}(),X=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r){var i;return _classCallCheck(this,n),(i=e.call(this,t)).connectable=r,i}return _createClass(n,[{key:"_unsubscribe",value:function(){var t=this.connectable;if(t){this.connectable=null;var e=t._refCount;if(e<=0)this.connection=null;else if(t._refCount=e-1,e>1)this.connection=null;else{var n=this.connection,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}else this.connection=null}}]),n}(v),Z={operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:(Y=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r){var i;return _classCallCheck(this,n),(i=e.call(this)).source=t,i.subjectFactory=r,i._refCount=0,i._isComplete=!1,i}return _createClass(n,[{key:"_subscribe",value:function(t){return this.getSubject().subscribe(t)}},{key:"getSubject",value:function(){var t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject}},{key:"connect",value:function(){var t=this._connection;return t||(this._isComplete=!1,(t=this._connection=new f).add(this.source.subscribe(new J(this.getSubject(),this))),t.closed&&(this._connection=null,t=f.EMPTY)),t}},{key:"refCount",value:function(){return K()(this)}}]),n}(b).prototype)._subscribe},_isComplete:{value:Y._isComplete,writable:!0},getSubject:{value:Y.getSubject},connect:{value:Y.connect},refCount:{value:Y.refCount}},J=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r){var i;return _classCallCheck(this,n),(i=e.call(this,t)).connectable=r,i}return _createClass(n,[{key:"_error",value:function(t){this._unsubscribe(),_get(_getPrototypeOf(n.prototype),"_error",this).call(this,t)}},{key:"_complete",value:function(){this.connectable._isComplete=!0,this._unsubscribe(),_get(_getPrototypeOf(n.prototype),"_complete",this).call(this)}},{key:"_unsubscribe",value:function(){var t=this.connectable;if(t){this.connectable=null;var e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}}}]),n}(S);function tt(){return new T}function et(){return function(t){return K()((e=tt,function(t){var n;n="function"==typeof e?e:function(){return e};var r=Object.create(t,Z);return r.source=t,r.subjectFactory=n,r})(t));var e}}function nt(t){return{toString:t}.toString()}function rt(t,e,n){return nt((function(){var r=function(t){return function(){if(t){var e=t.apply(void 0,arguments);for(var n in e)this[n]=e[n]}}}(e);function i(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];if(this instanceof i)return r.apply(this,e),this;var o=_construct(i,e);return s.annotation=o,s;function s(t,e,n){for(var r=t.hasOwnProperty("__parameters__")?t.__parameters__:Object.defineProperty(t,"__parameters__",{value:[]}).__parameters__;r.length<=n;)r.push(null);return(r[n]=r[n]||[]).push(o),t}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i}))}var it=rt("Inject",(function(t){return{token:t}})),ot=rt("Optional"),st=rt("Self"),at=rt("SkipSelf");function ut(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(ut).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return""+t.overriddenName;if(t.name)return""+t.name;var e=t.toString();if(null==e)return""+e;var n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function ct(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}function lt(t){for(var e in t)if(t[e]===lt)return e;throw Error("Could not find renamed property on target object.")}function ht(t,e){for(var n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function ft(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function dt(t){return{factory:t.factory,providers:t.providers||[],imports:t.imports||[]}}function pt(t){return vt(t,gt)||vt(t,_t)}function vt(t,e){return t.hasOwnProperty(e)?t[e]:null}function yt(t){return t&&(t.hasOwnProperty(mt)||t.hasOwnProperty(bt))?t[mt]:null}var gt=lt({"\u0275prov":lt}),mt=lt({"\u0275inj":lt}),_t=lt({ngInjectableDef:lt}),bt=lt({ngInjectorDef:lt}),wt=function(){function t(e,n){_classCallCheck(this,t),this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=ft({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}return _createClass(t,[{key:"toString",value:function(){return"InjectionToken "+this._desc}}]),t}(),Ct=new wt("AnalyzeForEntryComponents"),kt=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}({}),Et="undefined"!=typeof globalThis&&globalThis,St="undefined"!=typeof window&&window,Tt="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Ot="undefined"!=typeof global&&global,It=Et||Ot||St||Tt,xt=lt({__forward_ref__:lt});function At(t){return t.__forward_ref__=At,t.toString=function(){return ut(this())},t}function Pt(t){return Rt(t)?t():t}function Rt(t){return"function"==typeof t&&t.hasOwnProperty(xt)&&t.__forward_ref__===At}var Nt=Function;function Dt(t,e){t.forEach((function(t){return Array.isArray(t)?Dt(t,e):e(t)}))}function zt(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function jt(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function Lt(t,e){for(var n=[],r=0;r<t;r++)n.push(e);return n}function Ft(t,e,n){var r=Vt(t,e);return r>=0?t[1|r]=n:function(t,e,n,r){var i=t.length;if(i==e)t.push(n,r);else if(1===i)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;)t[i]=t[i-2],i--;t[e]=n,t[e+1]=r}}(t,r=~r,e,n),r}function Mt(t,e){var n=Vt(t,e);if(n>=0)return t[1|n]}function Vt(t,e){return function(t,e,n){for(var r=0,i=t.length>>1;i!==r;){var o=r+(i-r>>1),s=t[o<<1];if(e===s)return o<<1;s>e?i=o:r=o+1}return~(i<<1)}(t,e)}var Ut,Bt=((Ut={})[Ut.Emulated=0]="Emulated",Ut[Ut.None=2]="None",Ut[Ut.ShadowDom=3]="ShadowDom",Ut),qt={},Ht=[],Wt=lt({"\u0275cmp":lt}),Gt=lt({"\u0275dir":lt}),Qt=lt({"\u0275pipe":lt}),Kt=lt({"\u0275mod":lt}),Yt=lt({"\u0275loc":lt}),$t=lt({"\u0275fac":lt}),Xt=lt({__NG_ELEMENT_ID__:lt}),Zt=0;function Jt(t){return nt((function(){var e={},n={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===kt.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||Ht,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||Bt.Emulated,id:"c",styles:t.styles||Ht,_:null,setInput:null,schemas:t.schemas||null,tView:null},r=t.directives,i=t.features,o=t.pipes;return n.id+=Zt++,n.inputs=ie(t.inputs,e),n.outputs=ie(t.outputs),i&&i.forEach((function(t){return t(n)})),n.directiveDefs=r?function(){return("function"==typeof r?r():r).map(te)}:null,n.pipeDefs=o?function(){return("function"==typeof o?o():o).map(ee)}:null,n}))}function te(t){return se(t)||function(t){return t[Gt]||null}(t)}function ee(t){return function(t){return t[Qt]||null}(t)}var ne={};function re(t){var e={type:t.type,bootstrap:t.bootstrap||Ht,declarations:t.declarations||Ht,imports:t.imports||Ht,exports:t.exports||Ht,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&nt((function(){ne[t.id]=t.type})),e}function ie(t,e){if(null==t)return qt;var n={};for(var r in t)if(t.hasOwnProperty(r)){var i=t[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),n[i]=r,e&&(e[i]=o)}return n}var oe=Jt;function se(t){return t[Wt]||null}function ae(t,e){var n=t[Kt]||null;if(!n&&!0===e)throw new Error("Type ".concat(ut(t)," does not have '\u0275mod' property."));return n}function ue(t){return"string"==typeof t?t:null==t?"":""+t}function ce(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():ue(t)}var le,he=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}({});function fe(t){var e=le;return le=t,e}function de(t,e,n){var r=pt(t);if(r&&"root"==r.providedIn)return void 0===r.value?r.value=r.factory():r.value;if(n&he.Optional)return null;if(void 0!==e)return e;throw new Error("Injector: NOT_FOUND [".concat(ut(t),"]"))}var pe={},ve=/\n/gm,ye=lt({provide:String,useValue:lt}),ge=void 0;function me(t){var e=ge;return ge=t,e}function _e(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:he.Default;if(void 0===ge)throw new Error("inject() must be called from an injection context");return null===ge?de(t,void 0,e):ge.get(t,e&he.Optional?null:void 0,e)}function be(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:he.Default;return(le||_e)(Pt(t),e)}var we=be;function Ce(t){for(var e=[],n=0;n<t.length;n++){var r=Pt(t[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");for(var i=void 0,o=he.Default,s=0;s<r.length;s++){var a=r[s];a instanceof ot||"Optional"===a.ngMetadataName||a===ot?o|=he.Optional:a instanceof at||"SkipSelf"===a.ngMetadataName||a===at?o|=he.SkipSelf:a instanceof st||"Self"===a.ngMetadataName||a===st?o|=he.Self:i=a instanceof it||a===it?a.token:a}e.push(be(i,o))}else e.push(be(r))}return e}var ke=void 0;function Ee(){return void 0!==ke?ke:"undefined"!=typeof document?document:void 0}function Se(t){return Array.isArray(t)&&"object"==typeof t[1]}function Te(t){return Array.isArray(t)&&!0===t[1]}function Oe(t){return 0!=(8&t.flags)}function Ie(t){return 2==(2&t.flags)}function xe(t){return 1==(1&t.flags)}function Ae(t){return null!==t.template}function Pe(t){return!!t.listen}var Re={createRenderer:function(t,e){return Ee()}};function Ne(t){for(;Array.isArray(t);)t=t[0];return t}function De(t,e){return Ne(e[t])}function ze(t,e){return Ne(e[t.index])}function je(t,e){return t.data[e]}function Le(t,e){return t[e]}function Fe(t,e){var n=e[t];return Se(n)?n:n[0]}function Me(t){var e=function(t){return t.__ngContext__||null}(t);return e?Array.isArray(e)?e:e.lView:null}function Ve(t){return 4==(4&t[2])}function Ue(t){return 128==(128&t[2])}function Be(t,e){return null==e?null:t[e]}function qe(t){t[18]=0}function He(t,e){t[5]+=e;for(var n=t,r=t[3];null!==r&&(1===e&&1===n[5]||-1===e&&0===n[5]);)r[5]+=e,n=r,r=r[3]}var We={lFrame:yn(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Ge(){return We.bindingsEnabled}function Qe(){return We.lFrame.lView}function Ke(){return We.lFrame.tView}function Ye(t){We.lFrame.contextLView=t}function $e(){for(var t=Xe();null!==t&&64===t.type;)t=t.parent;return t}function Xe(){return We.lFrame.currentTNode}function Ze(t,e){var n=We.lFrame;n.currentTNode=t,n.isParent=e}function Je(){return We.lFrame.isParent}function tn(){We.lFrame.isParent=!1}function en(){return We.isInCheckNoChangesMode}function nn(t){We.isInCheckNoChangesMode=t}function rn(){var t=We.lFrame,e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function on(){return We.lFrame.bindingIndex}function sn(){return We.lFrame.bindingIndex++}function an(t){var e=We.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function un(t){We.lFrame.currentDirectiveIndex=t}function cn(t){var e=We.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}function ln(){return We.lFrame.currentQueryIndex}function hn(t){We.lFrame.currentQueryIndex=t}function fn(t){var e=t[1];return 2===e.type?e.declTNode:1===e.type?t[6]:null}function dn(t,e,n){if(n&he.SkipSelf){for(var r=e,i=t;!(null!==(r=r.parent)||n&he.Host||(r=fn(i),null===r)||(i=i[15],10&r.type)););if(null===r)return!1;e=r,t=i}var o=We.lFrame=vn();return o.currentTNode=e,o.lView=t,!0}function pn(t){var e=vn(),n=t[1];We.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function vn(){var t=We.lFrame,e=null===t?null:t.child;return null===e?yn(t):e}function yn(t){var e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function gn(){var t=We.lFrame;return We.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var mn,_n=gn;function bn(){var t=gn();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function wn(){return We.lFrame.selectedIndex}function Cn(t){We.lFrame.selectedIndex=t}function kn(){var t=We.lFrame;return je(t.tView,t.selectedIndex)}function En(){We.lFrame.currentNamespace="http://www.w3.org/2000/svg"}function Sn(t){var e;return(null===(e=function(){if(void 0===mn&&(mn=null,It.trustedTypes))try{mn=It.trustedTypes.createPolicy("angular",{createHTML:function(t){return t},createScript:function(t){return t},createScriptURL:function(t){return t}})}catch(e){}return mn}())||void 0===e?void 0:e.createHTML(t))||t}var Tn=function(){function t(e){_classCallCheck(this,t),this.changingThisBreaksApplicationSecurity=e}return _createClass(t,[{key:"toString",value:function(){return"SafeValue must use [property]=binding: "+this.changingThisBreaksApplicationSecurity+" (see http://g.co/ng/security#xss)"}}]),t}(),On=function(t){_inherits(n,t);var e=_createSuper(n);function n(){return _classCallCheck(this,n),e.apply(this,arguments)}return _createClass(n,[{key:"getTypeName",value:function(){return"HTML"}}]),n}(Tn),In=function(t){_inherits(n,t);var e=_createSuper(n);function n(){return _classCallCheck(this,n),e.apply(this,arguments)}return _createClass(n,[{key:"getTypeName",value:function(){return"Style"}}]),n}(Tn),xn=function(t){_inherits(n,t);var e=_createSuper(n);function n(){return _classCallCheck(this,n),e.apply(this,arguments)}return _createClass(n,[{key:"getTypeName",value:function(){return"Script"}}]),n}(Tn),An=function(t){_inherits(n,t);var e=_createSuper(n);function n(){return _classCallCheck(this,n),e.apply(this,arguments)}return _createClass(n,[{key:"getTypeName",value:function(){return"URL"}}]),n}(Tn),Pn=function(t){_inherits(n,t);var e=_createSuper(n);function n(){return _classCallCheck(this,n),e.apply(this,arguments)}return _createClass(n,[{key:"getTypeName",value:function(){return"ResourceURL"}}]),n}(Tn);function Rn(t){return t instanceof Tn?t.changingThisBreaksApplicationSecurity:t}function Nn(t,e){var n=Dn(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error("Required a safe ".concat(e,", got a ").concat(n," (see http://g.co/ng/security#xss)"))}return n===e}function Dn(t){return t instanceof Tn&&t.getTypeName()||null}var zn=!0,jn=!1;function Ln(){return jn=!0,zn}var Fn=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"getInertBodyElement",value:function(t){t="<body><remove></remove>"+t;try{var e=(new window.DOMParser).parseFromString(Sn(t),"text/html").body;return e.removeChild(e.firstChild),e}catch(n){return null}}}]),t}(),Mn=function(){function t(e){if(_classCallCheck(this,t),this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){var n=this.inertDocument.createElement("html");this.inertDocument.appendChild(n);var r=this.inertDocument.createElement("body");n.appendChild(r)}}return _createClass(t,[{key:"getInertBodyElement",value:function(t){var e=this.inertDocument.createElement("template");if("content"in e)return e.innerHTML=Sn(t),e;var n=this.inertDocument.createElement("body");return n.innerHTML=Sn(t),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}},{key:"stripCustomNsAttrs",value:function(t){for(var e=t.attributes,n=e.length-1;0<n;n--){var r=e.item(n).name;"xmlns:ns1"!==r&&0!==r.indexOf("ns1:")||t.removeAttribute(r)}for(var i=t.firstChild;i;)i.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(i),i=i.nextSibling}}]),t}(),Vn=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Un=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Bn(t){return(t=String(t)).match(Vn)||t.match(Un)?t:(Ln()&&console.warn("WARNING: sanitizing unsafe URL value ".concat(t," (see http://g.co/ng/security#xss)")),"unsafe:"+t)}function qn(t){var e,n={},r=_createForOfIteratorHelper(t.split(","));try{for(r.s();!(e=r.n()).done;){n[e.value]=!0}}catch(i){r.e(i)}finally{r.f()}return n}function Hn(){for(var t={},e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];for(var i=0,o=n;i<o.length;i++){var s=o[i];for(var a in s)s.hasOwnProperty(a)&&(t[a]=!0)}return t}var Wn,Gn=qn("area,br,col,hr,img,wbr"),Qn=qn("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Kn=qn("rp,rt"),Yn=Hn(Kn,Qn),$n=Hn(Gn,Hn(Qn,qn("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Hn(Kn,qn("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Yn),Xn=qn("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Zn=qn("srcset"),Jn=Hn(Xn,Zn,qn("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),qn("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),tr=qn("script,style,template"),er=function(){function t(){_classCallCheck(this,t),this.sanitizedSomething=!1,this.buf=[]}return _createClass(t,[{key:"sanitizeChildren",value:function(t){for(var e=t.firstChild,n=!0;e;)if(e.nodeType===Node.ELEMENT_NODE?n=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,n&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);var r=this.checkClobberedElement(e,e.nextSibling);if(r){e=r;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}},{key:"startElement",value:function(t){var e=t.nodeName.toLowerCase();if(!$n.hasOwnProperty(e))return this.sanitizedSomething=!0,!tr.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);for(var n,r=t.attributes,i=0;i<r.length;i++){var o=r.item(i),s=o.name,a=s.toLowerCase();if(Jn.hasOwnProperty(a)){var u=o.value;Xn[a]&&(u=Bn(u)),Zn[a]&&(n=u,u=(n=String(n)).split(",").map((function(t){return Bn(t.trim())})).join(", ")),this.buf.push(" ",s,'="',ir(u),'"')}else this.sanitizedSomething=!0}return this.buf.push(">"),!0}},{key:"endElement",value:function(t){var e=t.nodeName.toLowerCase();$n.hasOwnProperty(e)&&!Gn.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}},{key:"chars",value:function(t){this.buf.push(ir(t))}},{key:"checkClobberedElement",value:function(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error("Failed to sanitize html because the element is clobbered: "+t.outerHTML);return e}}]),t}(),nr=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,rr=/([^\#-~ |!])/g;function ir(t){return t.replace(/&/g,"&amp;").replace(nr,(function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"})).replace(rr,(function(t){return"&#"+t.charCodeAt(0)+";"})).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function or(t,e){var n=null;try{Wn=Wn||function(t){return function(){try{return!!(new window.DOMParser).parseFromString(Sn(""),"text/html")}catch(t){return!1}}()?new Fn:new Mn(t)}(t);var r=e?String(e):"";n=Wn.getInertBodyElement(r);var i=5,o=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=n.innerHTML,n=Wn.getInertBodyElement(r)}while(r!==o);var s=new er,a=s.sanitizeChildren(sr(n)||n);return Ln()&&s.sanitizedSomething&&console.warn("WARNING: sanitizing HTML stripped some content, see http://g.co/ng/security#xss"),a}finally{if(n)for(var u=sr(n)||n;u.firstChild;)u.removeChild(u.firstChild)}}function sr(t){return"content"in t&&function(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var ar=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}({});function ur(t){var e=lr();return e?e.sanitize(ar.HTML,t)||"":Nn(t,"HTML")?Rn(t):or(Ee(),ue(t))}function cr(t){var e=lr();return e?e.sanitize(ar.URL,t)||"":Nn(t,"URL")?Rn(t):Bn(ue(t))}function lr(){var t=Qe();return t&&t[12]}function hr(t,e){return t.hasOwnProperty($t)?t[$t]:null}var fr=function(t){_inherits(n,_wrapNativeSuper(Error));var e=_createSuper(n);function n(t,r){var i;return _classCallCheck(this,n),(i=e.call(this,function(t,e){return"".concat(t?"NG0".concat(t,": "):"").concat(e)}(t,r))).code=t,i}return n}();function dr(t,e){var n=e?" in "+e:"";throw new fr("201","No provider for ".concat(ce(t)," found").concat(n))}var pr=function(){function t(e,n,r){_classCallCheck(this,t),this.previousValue=e,this.currentValue=n,this.firstChange=r}return _createClass(t,[{key:"isFirstChange",value:function(){return this.firstChange}}]),t}();function vr(){return yr}function yr(t){return t.type.prototype.ngOnChanges&&(t.setInput=mr),gr}function gr(){var t=_r(this),e=null==t?void 0:t.current;if(e){var n=t.previous;if(n===qt)t.previous=e;else for(var r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function mr(t,e,n,r){var i=_r(t)||function(t,e){return t.__ngSimpleChanges__=e}(t,{previous:qt,current:null}),o=i.current||(i.current={}),s=i.previous,a=this.declaredInputs[n],u=s[a];o[a]=new pr(u&&u.currentValue,e,s===qt),t[r]=e}function _r(t){return t.__ngSimpleChanges__||null}function br(t,e){for(var n=e.directiveStart,r=e.directiveEnd;n<r;n++){var i=t.data[n].type.prototype,o=i.ngAfterContentInit,s=i.ngAfterContentChecked,a=i.ngAfterViewInit,u=i.ngAfterViewChecked,c=i.ngOnDestroy;o&&(t.contentHooks||(t.contentHooks=[])).push(-n,o),s&&((t.contentHooks||(t.contentHooks=[])).push(n,s),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,s)),a&&(t.viewHooks||(t.viewHooks=[])).push(-n,a),u&&((t.viewHooks||(t.viewHooks=[])).push(n,u),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,u)),null!=c&&(t.destroyHooks||(t.destroyHooks=[])).push(n,c)}}function wr(t,e,n){Er(t,e,3,n)}function Cr(t,e,n,r){(3&t[2])===n&&Er(t,e,n,r)}function kr(t,e){var n=t[2];(3&n)===e&&(n&=2047,n+=1,t[2]=n)}function Er(t,e,n,r){for(var i=null!=r?r:-1,o=0,s=void 0!==r?65535&t[18]:0;s<e.length;s++)if("number"==typeof e[s+1]){if(o=e[s],null!=r&&o>=r)break}else e[s]<0&&(t[18]+=65536),(o<i||-1==i)&&(Sr(t,n,e,s),t[18]=(4294901760&t[18])+s+2),s++}function Sr(t,e,n,r){var i=n[r]<0,o=n[r+1],s=t[i?-n[r]:n[r]];i?t[2]>>11<t[18]>>16&&(3&t[2])===e&&(t[2]+=2048,o.call(s)):o.call(s)}vr.ngInherit=!0;var Tr=function t(e,n,r){_classCallCheck(this,t),this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r};function Or(t,e,n){for(var r=Pe(t),i=0;i<n.length;){var o=n[i];if("number"==typeof o){if(0!==o)break;i++;var s=n[i++],a=n[i++],u=n[i++];r?t.setAttribute(e,a,u,s):e.setAttributeNS(s,a,u)}else{var c=o,l=n[++i];xr(c)?r&&t.setProperty(e,c,l):r?t.setAttribute(e,c,l):e.setAttribute(c,l),i++}}return i}function Ir(t){return 3===t||4===t||6===t}function xr(t){return 64===t.charCodeAt(0)}function Ar(t,e){if(null===e||0===e.length);else if(null===t||0===t.length)t=e.slice();else for(var n=-1,r=0;r<e.length;r++){var i=e[r];"number"==typeof i?n=i:0===n||Pr(t,n,i,null,-1===n||2===n?e[++r]:null)}return t}function Pr(t,e,n,r,i){var o=0,s=t.length;if(-1===e)s=-1;else for(;o<t.length;){var a=t[o++];if("number"==typeof a){if(a===e){s=-1;break}if(a>e){s=o-1;break}}}for(;o<t.length;){var u=t[o];if("number"==typeof u)break;if(u===n){if(null===r)return void(null!==i&&(t[o+1]=i));if(r===t[o+1])return void(t[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==s&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),null!==r&&t.splice(o++,0,r),null!==i&&t.splice(o++,0,i)}function Rr(t){return-1!==t}function Nr(t){return 32767&t}function Dr(t,e){for(var n=t>>16,r=e;n>0;)r=r[15],n--;return r}var zr=!0;function jr(t){var e=zr;return zr=t,e}var Lr=0;function Fr(t,e){var n=Vr(t,e);if(-1!==n)return n;var r=e[1];r.firstCreatePass&&(t.injectorIndex=e.length,Mr(r.data,t),Mr(e,null),Mr(r.blueprint,null));var i=Ur(t,e),o=t.injectorIndex;if(Rr(i))for(var s=Nr(i),a=Dr(i,e),u=a[1].data,c=0;c<8;c++)e[o+c]=a[s+c]|u[s+c];return e[o+8]=i,o}function Mr(t,e){t.push(0,0,0,0,0,0,0,0,e)}function Vr(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function Ur(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;for(var n=0,r=null,i=e;null!==i;){var o=i[1],s=o.type;if(null===(r=2===s?o.declTNode:1===s?i[6]:null))return-1;if(n++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return-1}function Br(t,e,n){!function(t,e,n){var r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(Xt)&&(r=n[Xt]),null==r&&(r=n[Xt]=Lr++);var i=255&r,o=1<<i,s=64&i,a=32&i,u=e.data;128&i?s?a?u[t+7]|=o:u[t+6]|=o:a?u[t+5]|=o:u[t+4]|=o:s?a?u[t+3]|=o:u[t+2]|=o:a?u[t+1]|=o:u[t]|=o}(t,e,n)}function qr(t,e,n){if(n&he.Optional)return t;dr(e,"NodeInjector")}function Hr(t,e,n,r){if(n&he.Optional&&void 0===r&&(r=null),0==(n&(he.Self|he.Host))){var i=t[9],o=fe(void 0);try{return i?i.get(e,r,n&he.Optional):de(e,r,n&he.Optional)}finally{fe(o)}}return qr(r,e,n)}function Wr(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:he.Default,i=arguments.length>4?arguments[4]:void 0;if(null!==t){var o=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;var e=t.hasOwnProperty(Xt)?t[Xt]:void 0;return"number"==typeof e?e>=0?255&e:Qr:e}(n);if("function"==typeof o){if(!dn(e,t,r))return r&he.Host?qr(i,n,r):Hr(e,n,r,i);try{var s=o();if(null!=s||r&he.Optional)return s;dr(n)}finally{_n()}}else if("number"==typeof o){var a=null,u=Vr(t,e),c=-1,l=r&he.Host?e[16][6]:null;for((-1===u||r&he.SkipSelf)&&(-1!==(c=-1===u?Ur(t,e):e[u+8])&&Zr(r,!1)?(a=e[1],u=Nr(c),e=Dr(c,e)):u=-1);-1!==u;){var h=e[1];if(Xr(o,u,h.data)){var f=Kr(u,e,n,a,r,l);if(f!==Gr)return f}-1!==(c=e[u+8])&&Zr(r,e[1].data[u+8]===l)&&Xr(o,u,e)?(a=h,u=Nr(c),e=Dr(c,e)):u=-1}}}return Hr(e,n,r,i)}var Gr={};function Qr(){return new Jr($e(),Qe())}function Kr(t,e,n,r,i,o){var s=e[1],a=s.data[t+8],u=Yr(a,s,n,null==r?Ie(a)&&zr:r!=s&&0!=(3&a.type),i&he.Host&&o===a);return null!==u?$r(e,s,u,a):Gr}function Yr(t,e,n,r,i){for(var o=t.providerIndexes,s=e.data,a=1048575&o,u=t.directiveStart,c=o>>20,l=i?a+c:t.directiveEnd,h=r?a:a+c;h<l;h++){var f=s[h];if(h<u&&n===f||h>=u&&f.type===n)return h}if(i){var d=s[u];if(d&&Ae(d)&&d.type===n)return u}return null}function $r(t,e,n,r){var i=t[n],o=e.data;if(i instanceof Tr){var s=i;s.resolving&&function(t,e){throw new fr("200","Circular dependency in DI detected for "+t)}(ce(o[n]));var a=jr(s.canSeeViewProviders);s.resolving=!0;var u=s.injectImpl?fe(s.injectImpl):null;dn(t,r,he.Default);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&function(t,e,n){var r=e.type.prototype,i=r.ngOnChanges,o=r.ngOnInit,s=r.ngDoCheck;if(i){var a=yr(e);(n.preOrderHooks||(n.preOrderHooks=[])).push(t,a),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,a)}o&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-t,o),s&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,s),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,s))}(n,o[n],e)}finally{null!==u&&fe(u),jr(a),s.resolving=!1,_n()}}return i}function Xr(t,e,n){var r=64&t,i=32&t;return!!((128&t?r?i?n[e+7]:n[e+6]:i?n[e+5]:n[e+4]:r?i?n[e+3]:n[e+2]:i?n[e+1]:n[e])&1<<t)}function Zr(t,e){return!(t&he.Self||t&he.Host&&e)}var Jr=function(){function t(e,n){_classCallCheck(this,t),this._tNode=e,this._lView=n}return _createClass(t,[{key:"get",value:function(t,e){return Wr(this._tNode,this._lView,t,void 0,e)}}]),t}();function ti(t){var e=t;if(Rt(t))return function(){var t=ti(Pt(e));return t?t():null};var n=hr(e);if(null===n){var r=yt(e);n=r&&r.factory}return n||null}function ei(t){return t.ngDebugContext}function ni(t){return t.ngOriginalError}function ri(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];t.error.apply(t,n)}var ii=function(){function t(){_classCallCheck(this,t),this._console=console}return _createClass(t,[{key:"handleError",value:function(t){var e=this._findOriginalError(t),n=this._findContext(t),r=function(t){return t.ngErrorLogger||ri}(t);r(this._console,"ERROR",t),e&&r(this._console,"ORIGINAL ERROR",e),n&&r(this._console,"ERROR CONTEXT",n)}},{key:"_findContext",value:function(t){return t?ei(t)?ei(t):this._findContext(ni(t)):null}},{key:"_findOriginalError",value:function(t){for(var e=ni(t);e&&ni(e);)e=ni(e);return e}}]),t}();function oi(t,e){t.__ngContext__=e}var si=("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(It);function ai(t){return t instanceof Function?t():t}var ui=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}({});function ci(t,e){return(void 0)(t,e)}function li(t){var e=t[3];return Te(e)?e[3]:e}function hi(t){return di(t[13])}function fi(t){return di(t[4])}function di(t){for(;null!==t&&!Te(t);)t=t[4];return t}function pi(t,e,n,r,i){if(null!=r){var o,s=!1;Te(r)?o=r:Se(r)&&(s=!0,r=r[0]);var a=Ne(r);0===t&&null!==n?null==i?Ci(e,n,a):wi(e,n,a,i||null,!0):1===t&&null!==n?wi(e,n,a,i||null,!0):2===t?function(t,e,n){var r=Ei(t,e);r&&function(t,e,n,r){Pe(t)?t.removeChild(e,n,r):e.removeChild(n)}(t,r,e,n)}(e,a,s):3===t&&e.destroyNode(a),null!=o&&function(t,e,n,r,i){var o=n[7];o!==Ne(n)&&pi(e,t,r,o,i);for(var s=10;s<n.length;s++){var a=n[s];xi(a[1],a,t,e,r,o)}}(e,t,o,n,i)}}function vi(t,e,n){return Pe(t)?t.createElement(e,n):null===n?t.createElement(e):t.createElementNS(n,e)}function yi(t,e){var n=t[9],r=n.indexOf(e),i=e[3];1024&e[2]&&(e[2]&=-1025,He(i,-1)),n.splice(r,1)}function gi(t,e){if(!(t.length<=10)){var n,r=10+e,i=t[r];if(i){var o=i[17];null!==o&&o!==t&&yi(o,i),e>0&&(t[r-1][4]=i[4]);var s=jt(t,10+e);xi(i[1],n=i,n[11],2,null,null),n[0]=null,n[6]=null;var a=s[19];null!==a&&a.detachView(s[1]),i[3]=null,i[4]=null,i[2]&=-129}return i}}function mi(t,e){if(!(256&e[2])){var n=e[11];Pe(n)&&n.destroyNode&&xi(t,e,n,3,null,null),function(t){var e=t[13];if(!e)return _i(t[1],t);for(;e;){var n=null;if(Se(e))n=e[13];else{var r=e[10];r&&(n=r)}if(!n){for(;e&&!e[4]&&e!==t;)Se(e)&&_i(e[1],e),e=e[3];null===e&&(e=t),Se(e)&&_i(e[1],e),n=e&&e[4]}e=n}}(e)}}function _i(t,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function(t,e){var n;if(null!=t&&null!=(n=t.destroyHooks))for(var r=0;r<n.length;r+=2){var i=e[n[r]];if(!(i instanceof Tr)){var o=n[r+1];if(Array.isArray(o))for(var s=0;s<o.length;s+=2)o[s+1].call(i[o[s]]);else o.call(i)}}}(t,e),function(t,e){var n=t.cleanup;if(null!==n){for(var r=e[7],i=0;i<n.length-1;i+=2)if("string"==typeof n[i]){var o=n[i+1],s="function"==typeof o?o(e):Ne(e[o]),a=r[n[i+2]],u=n[i+3];"boolean"==typeof u?s.removeEventListener(n[i],a,u):u>=0?r[u]():r[-u].unsubscribe(),i+=2}else n[i].call(r[n[i+1]]);e[7]=null}}(t,e),1===e[1].type&&Pe(e[11])&&e[11].destroy();var n=e[17];if(null!==n&&Te(e[3])){n!==e[3]&&yi(n,e);var r=e[19];null!==r&&r.detachView(t)}}}function bi(t,e,n){return function(t,e,n){for(var r=e;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return n[0];if(2&r.flags){var i=t.data[r.directiveStart].encapsulation;if(i===Bt.None||i===Bt.Emulated)return null}return ze(r,n)}(t,e.parent,n)}function wi(t,e,n,r,i){Pe(t)?t.insertBefore(e,n,r,i):e.insertBefore(n,r,i)}function Ci(t,e,n){Pe(t)?t.appendChild(e,n):e.appendChild(n)}function ki(t,e,n,r,i){null!==r?wi(t,e,n,r,i):Ci(t,e,n)}function Ei(t,e){return Pe(t)?t.parentNode(e):e.parentNode}function Si(t,e,n){return Ti(t,e,n)}var Ti=function(t,e,n){return 40&t.type?ze(t,n):null};function Oi(t,e,n,r){var i=bi(t,r,e),o=e[11],s=Si(r.parent||e[6],r,e);if(null!=i)if(Array.isArray(n))for(var a=0;a<n.length;a++)ki(o,i,n[a],s,!1);else ki(o,i,n,s,!1)}function Ii(t,e,n,r,i,o,s){for(;null!=n;){var a=r[n.index],u=n.type;if(s&&0===e&&(a&&oi(Ne(a),r),n.flags|=4),64!=(64&n.flags))if(8&u)Ii(t,e,n.child,r,i,o,!1),pi(e,t,i,a,o);else if(32&u){for(var c=ci(n,r),l=void 0;l=c();)pi(e,t,i,l,o);pi(e,t,i,a,o)}else 16&u?Ai(t,e,r,n,i,o):pi(e,t,i,a,o);n=s?n.projectionNext:n.next}}function xi(t,e,n,r,i,o){Ii(n,r,t.firstChild,e,i,o,!1)}function Ai(t,e,n,r,i,o){var s=n[16],a=s[6].projection[r.projection];if(Array.isArray(a))for(var u=0;u<a.length;u++)pi(e,t,i,a[u],o);else Ii(t,e,a,s[3],i,o,!0)}function Pi(t,e,n){Pe(t)?t.setAttribute(e,"style",n):e.style.cssText=n}function Ri(t,e,n){Pe(t)?""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n):e.className=n}function Ni(t,e,n){for(var r=t.length;;){var i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){var o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}function Di(t,e,n){for(var r=0;r<t.length;){var i=t[r++];if(n&&"class"===i){if(-1!==Ni((i=t[r]).toLowerCase(),e,0))return!0}else if(1===i){for(;r<t.length&&"string"==typeof(i=t[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function zi(t){return 4===t.type&&"ng-template"!==t.value}function ji(t,e,n){return e===(4!==t.type||n?t.value:"ng-template")}function Li(t,e,n){for(var r=4,i=t.attrs||[],o=function(t){for(var e=0;e<t.length;e++)if(Ir(t[e]))return e;return t.length}(i),s=!1,a=0;a<e.length;a++){var u=e[a];if("number"!=typeof u){if(!s)if(4&r){if(r=2|1&r,""!==u&&!ji(t,u,n)||""===u&&1===e.length){if(Fi(r))return!1;s=!0}}else{var c=8&r?u:e[++a];if(8&r&&null!==t.attrs){if(!Di(t.attrs,c,n)){if(Fi(r))return!1;s=!0}continue}var l=Mi(8&r?"class":u,i,zi(t),n);if(-1===l){if(Fi(r))return!1;s=!0;continue}if(""!==c){var h;h=l>o?"":i[l+1].toLowerCase();var f=8&r?h:null;if(f&&-1!==Ni(f,c,0)||2&r&&c!==h){if(Fi(r))return!1;s=!0}}}}else{if(!s&&!Fi(r)&&!Fi(u))return!1;if(s&&Fi(u))continue;s=!1,r=u|1&r}}return Fi(r)||s}function Fi(t){return 0==(1&t)}function Mi(t,e,n,r){if(null===e)return-1;var i=0;if(r||!n){for(var o=!1;i<e.length;){var s=e[i];if(s===t)return i;if(3===s||6===s)o=!0;else{if(1===s||2===s){for(var a=e[++i];"string"==typeof a;)a=e[++i];continue}if(4===s)break;if(0===s){i+=4;continue}}i+=o?1:2}return-1}return function(t,e){var n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){var r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function Vi(t,e){for(var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=0;r<e.length;r++)if(Li(t,e[r],n))return!0;return!1}function Ui(t,e){t:for(var n=0;n<e.length;n++){var r=e[n];if(t.length===r.length){for(var i=0;i<t.length;i++)if(t[i]!==r[i])continue t;return!0}}return!1}function Bi(t,e){return t?":not("+e.trim()+")":e}function qi(t){for(var e=t[0],n=1,r=2,i="",o=!1;n<t.length;){var s=t[n];if("string"==typeof s)if(2&r){var a=t[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""===i||Fi(s)||(e+=Bi(o,i),i=""),r=s,o=o||!Fi(r);n++}return""!==i&&(e+=Bi(o,i)),e}var Hi={};function Wi(t){Gi(Ke(),Qe(),wn()+t,en())}function Gi(t,e,n,r){if(!r)if(3==(3&e[2])){var i=t.preOrderCheckHooks;null!==i&&wr(e,i,n)}else{var o=t.preOrderHooks;null!==o&&Cr(e,o,0,n)}Cn(n)}function Qi(t,e){return t<<17|e<<2}function Ki(t){return t>>17&32767}function Yi(t){return 2|t}function $i(t){return(131068&t)>>2}function Xi(t,e){return-131069&t|e<<2}function Zi(t){return 1|t}function Ji(t,e){var n=t.contentQueries;if(null!==n)for(var r=0;r<n.length;r+=2){var i=n[r],o=n[r+1];if(-1!==o){var s=t.data[o];hn(i),s.contentQueries(2,e[o],o)}}}function to(t,e,n,r,i,o,s,a,u,c){var l=e.blueprint.slice();return l[0]=i,l[2]=140|r,qe(l),l[3]=l[15]=t,l[8]=n,l[10]=s||t&&t[10],l[11]=a||t&&t[11],l[12]=u||t&&t[12]||null,l[9]=c||t&&t[9]||null,l[6]=o,l[16]=2==e.type?t[16]:l,l}function eo(t,e,n,r,i){var o,s,a=t.data[e];if(null===a)a=function(t,e,n,r,i){var o=Xe(),s=Je(),a=t.data[e]=function(t,e,n,r,i,o){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=a),null!==o&&(s?null==o.child&&null!==a.parent&&(o.child=a):null===o.next&&(o.next=a)),a}(t,e,n,r,i),We.lFrame.inI18n&&(a.flags|=64);else if(64&a.type){a.type=n,a.value=r,a.attrs=i;var u=(o=We.lFrame,s=o.currentTNode,o.isParent?s:s.parent);a.injectorIndex=null===u?-1:u.injectorIndex}return Ze(a,!0),a}function no(t,e,n,r){if(0===n)return-1;for(var i=e.length,o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function ro(t,e,n){pn(e);try{var r=t.viewQuery;null!==r&&No(1,r,n);var i=t.template;null!==i&&so(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&Ji(t,e),t.staticViewQueries&&No(2,t.viewQuery,n);var o=t.components;null!==o&&function(t,e){for(var n=0;n<e.length;n++)Io(t,e[n])}(e,o)}catch(s){throw t.firstCreatePass&&(t.incompleteFirstPass=!0),s}finally{e[2]&=-5,bn()}}function io(t,e,n,r){var i=e[2];if(256!=(256&i)){pn(e);var o=en();try{qe(e),We.lFrame.bindingIndex=t.bindingStartIndex,null!==n&&so(t,e,n,2,r);var s=3==(3&i);if(!o)if(s){var a=t.preOrderCheckHooks;null!==a&&wr(e,a,null)}else{var u=t.preOrderHooks;null!==u&&Cr(e,u,0,null),kr(e,0)}if(function(t){for(var e=hi(t);null!==e;e=fi(e))if(e[2])for(var n=e[9],r=0;r<n.length;r++){var i=n[r],o=i[3];0==(1024&i[2])&&He(o,1),i[2]|=1024}}(e),function(t){for(var e=hi(t);null!==e;e=fi(e))for(var n=10;n<e.length;n++){var r=e[n],i=r[1];Ue(r)&&io(i,r,i.template,r[8])}}(e),null!==t.contentQueries&&Ji(t,e),!o)if(s){var c=t.contentCheckHooks;null!==c&&wr(e,c)}else{var l=t.contentHooks;null!==l&&Cr(e,l,1),kr(e,1)}!function(t,e){var n,r,i,o=t.hostBindingOpCodes;if(null!==o)try{for(var s=0;s<o.length;s++){var a=o[s];if(a<0)Cn(~a);else{var u=a,c=o[++s],l=o[++s];n=c,r=u,i=void 0,(i=We.lFrame).bindingIndex=i.bindingRootIndex=n,un(r),l(2,e[u])}}}finally{Cn(-1)}}(t,e);var h=t.components;null!==h&&function(t,e){for(var n=0;n<e.length;n++)Oo(t,e[n])}(e,h);var f=t.viewQuery;if(null!==f&&No(2,f,r),!o)if(s){var d=t.viewCheckHooks;null!==d&&wr(e,d)}else{var p=t.viewHooks;null!==p&&Cr(e,p,2),kr(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),o||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,He(e[3],-1))}finally{bn()}}}function oo(t,e,n,r){var i=e[10],o=!en(),s=Ve(e);try{o&&!s&&i.begin&&i.begin(),s&&ro(t,e,r),io(t,e,n,r)}finally{o&&!s&&i.end&&i.end()}}function so(t,e,n,r,i){var o=wn();try{Cn(-1),2&r&&e.length>20&&Gi(t,e,20,en()),n(r,i)}finally{Cn(o)}}function ao(t,e,n){if(Oe(e))for(var r=e.directiveEnd,i=e.directiveStart;i<r;i++){var o=t.data[i];o.contentQueries&&o.contentQueries(1,n[i],i)}}function uo(t,e,n){Ge()&&(function(t,e,n,r){var i=n.directiveStart,o=n.directiveEnd;t.firstCreatePass||Fr(n,e),oi(r,e);for(var s=n.initialInputs,a=i;a<o;a++){var u=t.data[a],c=Ae(u);c&&ko(e,n,u);var l=$r(e,t,a,n);oi(l,e),null!==s&&Eo(0,a-i,l,u,0,s),c&&(Fe(n.index,e)[8]=l)}}(t,e,n,ze(n,e)),128==(128&n.flags)&&function(t,e,n){var r=n.directiveStart,i=n.directiveEnd,o=n.index,s=We.lFrame.currentDirectiveIndex;try{Cn(o);for(var a=r;a<i;a++){var u=t.data[a],c=e[a];un(a),null===u.hostBindings&&0===u.hostVars&&null===u.hostAttrs||mo(u,c)}}finally{Cn(-1),un(s)}}(t,e,n))}function co(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ze,r=e.localNames;if(null!==r)for(var i=e.index+1,o=0;o<r.length;o+=2){var s=r[o+1],a=-1===s?n(e,t):t[s];t[i++]=a}}function lo(t){var e=t.tView;return null===e||e.incompleteFirstPass?t.tView=ho(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):e}function ho(t,e,n,r,i,o,s,a,u,c){var l=20+r,h=l+i,f=function(t,e){for(var n=[],r=0;r<e;r++)n.push(r<t?null:Hi);return n}(l,h),d="function"==typeof c?c():c;return f[1]={type:t,blueprint:f,template:n,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,l),bindingStartIndex:l,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:u,consts:d,incompleteFirstPass:!1}}function fo(t,e,n,r){var i=zo(e);i.push(n),t.firstCreatePass&&function(t){return t.cleanup||(t.cleanup=[])}(t).push(r,i.length-1)}function po(t,e,n){for(var r in t)if(t.hasOwnProperty(r)){var i=t[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(e,i):n[r]=[e,i]}return n}function vo(t,e,n,r,i,o,s,a){var u,c=ze(e,n),l=e.inputs;!a&&null!=l&&(u=l[r])?(Fo(t,n,u,r,i),Ie(e)&&function(t,e){var n=Fe(e,t);16&n[2]||(n[2]|=64)}(n,e.index)):3&e.type&&(r=function(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(r),i=null!=s?s(i,e.value||"",r):i,Pe(o)?o.setProperty(c,r,i):xr(r)||(c.setProperty?c.setProperty(r,i):c[r]=i))}function yo(t,e,n,r){var i=!1;if(Ge()){var o=function(t,e,n){var r=t.directiveRegistry,i=null;if(r)for(var o=0;o<r.length;o++){var s=r[o];Vi(n,s.selectors,!1)&&(i||(i=[]),Br(Fr(n,e),t,s.type),Ae(s)?(_o(t,n),i.unshift(s)):i.push(s))}return i}(t,e,n),s=null===r?null:{"":-1};if(null!==o){i=!0,wo(n,t.data.length,o.length);for(var a=0;a<o.length;a++){var u=o[a];u.providersResolver&&u.providersResolver(u)}for(var c=!1,l=!1,h=no(t,e,o.length,null),f=0;f<o.length;f++){var d=o[f];n.mergedAttrs=Ar(n.mergedAttrs,d.hostAttrs),Co(t,n,e,h,d),bo(h,d,s),null!==d.contentQueries&&(n.flags|=8),null===d.hostBindings&&null===d.hostAttrs&&0===d.hostVars||(n.flags|=128);var p=d.type.prototype;!c&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index),c=!0),l||!p.ngOnChanges&&!p.ngDoCheck||((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index),l=!0),h++}!function(t,e){for(var n=e.directiveEnd,r=t.data,i=e.attrs,o=[],s=null,a=null,u=e.directiveStart;u<n;u++){var c=r[u],l=c.inputs,h=null===i||zi(e)?null:So(l,i);o.push(h),s=po(l,u,s),a=po(c.outputs,u,a)}null!==s&&(s.hasOwnProperty("class")&&(e.flags|=16),s.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=o,e.inputs=s,e.outputs=a}(t,n)}s&&function(t,e,n){if(e)for(var r=t.localNames=[],i=0;i<e.length;i+=2){var o=n[e[i+1]];if(null==o)throw new fr("301","Export of name '".concat(e[i+1],"' not found!"));r.push(e[i],o)}}(n,r,s)}return n.mergedAttrs=Ar(n.mergedAttrs,n.attrs),i}function go(t,e,n,r,i,o){var s=o.hostBindings;if(s){var a=t.hostBindingOpCodes;null===a&&(a=t.hostBindingOpCodes=[]);var u=~e.index;(function(t){for(var e=t.length;e>0;){var n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(a)!=u&&a.push(u),a.push(r,i,s)}}function mo(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function _o(t,e){e.flags|=2,(t.components||(t.components=[])).push(e.index)}function bo(t,e,n){if(n){if(e.exportAs)for(var r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;Ae(e)&&(n[""]=t)}}function wo(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function Co(t,e,n,r,i){t.data[r]=i;var o=i.factory||(i.factory=hr(i.type)),s=new Tr(o,Ae(i),null);t.blueprint[r]=s,n[r]=s,go(t,e,0,r,no(t,n,i.hostVars,Hi),i)}function ko(t,e,n){var r=ze(e,t),i=lo(n),o=t[10],s=xo(t,to(t,i,null,n.onPush?64:16,r,e,o,o.createRenderer(r,n),null,null));t[e.index]=s}function Eo(t,e,n,r,i,o){var s=o[e];if(null!==s)for(var a=r.setInput,u=0;u<s.length;){var c=s[u++],l=s[u++],h=s[u++];null!==a?r.setInput(n,h,c,l):n[l]=h}}function So(t,e){for(var n=null,r=0;r<e.length;){var i=e[r];if(0!==i)if(5!==i){if("number"==typeof i)break;t.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,t[i],e[r+1])),r+=2}else r+=2;else r+=4}return n}function To(t,e,n,r){return new Array(t,!0,!1,e,null,0,r,n,null,null)}function Oo(t,e){var n=Fe(e,t);if(Ue(n)){var r=n[1];80&n[2]?io(r,n,r.template,n[8]):n[5]>0&&function t(e){for(var n=hi(e);null!==n;n=fi(n))for(var r=10;r<n.length;r++){var i=n[r];if(1024&i[2]){var o=i[1];io(o,i,o.template,i[8])}else i[5]>0&&t(i)}var s=e[1].components;if(null!==s)for(var a=0;a<s.length;a++){var u=Fe(s[a],e);Ue(u)&&u[5]>0&&t(u)}}(n)}}function Io(t,e){var n=Fe(e,t),r=n[1];!function(t,e){for(var n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n),ro(r,n,n[8])}function xo(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function Ao(t){for(;t;){t[2]|=64;var e=li(t);if(0!=(512&t[2])&&!e)return t;t=e}return null}function Po(t,e,n){var r=e[10];r.begin&&r.begin();try{io(t,e,t.template,n)}catch(i){throw Lo(e,i),i}finally{r.end&&r.end()}}function Ro(t){!function(t){for(var e=0;e<t.components.length;e++){var n=t.components[e],r=Me(n),i=r[1];oo(i,r,i.template,n)}}(t[8])}function No(t,e,n){hn(0),e(t,n)}var Do=Promise.resolve(null);function zo(t){return t[7]||(t[7]=[])}function jo(t,e,n){return(null===t||Ae(t))&&(n=function(t){for(;Array.isArray(t);){if("object"==typeof t[1])return t;t=t[0]}return null}(n[e.index])),n[11]}function Lo(t,e){var n=t[9],r=n?n.get(ii,null):null;r&&r.handleError(e)}function Fo(t,e,n,r,i){for(var o=0;o<n.length;){var s=n[o++],a=n[o++],u=e[s],c=t.data[s];null!==c.setInput?c.setInput(u,i,r,a):u[a]=i}}function Mo(t,e,n){var r=n?t.styles:null,i=n?t.classes:null,o=0;if(null!==e)for(var s=0;s<e.length;s++){var a=e[s];"number"==typeof a?o=a:1==o?i=ct(i,a):2==o&&(r=ct(r,a+": "+e[++s]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}var Vo=new wt("INJECTOR",-1),Uo=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"get",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:pe;if(e===pe){var n=new Error("NullInjectorError: No provider for ".concat(ut(t),"!"));throw n.name="NullInjectorError",n}return e}}]),t}(),Bo=new wt("Set Injector scope."),qo={},Ho={},Wo=[],Go=void 0;function Qo(){return void 0===Go&&(Go=new Uo),Go}function Ko(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3?arguments[3]:void 0;return new Yo(t,n,e||Qo(),r)}var Yo=function(){function t(e,n,r){var i=this,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;_classCallCheck(this,t),this.parent=r,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;var s=[];n&&Dt(n,(function(t){return i.processProvider(t,e,n)})),Dt([e],(function(t){return i.processInjectorType(t,[],s)})),this.records.set(Vo,Zo(void 0,this));var a=this.records.get(Bo);this.scope=null!=a?a.value:null,this.source=o||("object"==typeof e?null:ut(e))}return _createClass(t,[{key:"destroy",value:function(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach((function(t){return t.ngOnDestroy()}))}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}},{key:"get",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:pe,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:he.Default;this.assertNotDestroyed();var r,i=me(this);try{if(!(n&he.SkipSelf)){var o=this.records.get(t);if(void 0===o){var s=("function"==typeof(r=t)||"object"==typeof r&&r instanceof wt)&&pt(t);o=s&&this.injectableDefInScope(s)?Zo($o(t),qo):null,this.records.set(t,o)}if(null!=o)return this.hydrate(t,o)}return(n&he.Self?Qo():this.parent).get(t,e=n&he.Optional&&e===pe?null:e)}catch(a){if("NullInjectorError"===a.name){if((a.ngTempTokenPath=a.ngTempTokenPath||[]).unshift(ut(t)),i)throw a;return function(t,e,n,r){var i=t.ngTempTokenPath;throw e.__source&&i.unshift(e.__source),t.message=function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;var i=ut(e);if(Array.isArray(e))i=e.map(ut).join(" -> ");else if("object"==typeof e){var o=[];for(var s in e)if(e.hasOwnProperty(s)){var a=e[s];o.push(s+":"+("string"==typeof a?JSON.stringify(a):ut(a)))}i="{".concat(o.join(", "),"}")}return"".concat(n).concat(r?"("+r+")":"","[").concat(i,"]: ").concat(t.replace(ve,"\n  "))}("\n"+t.message,i,"R3InjectorError",r),t.ngTokenPath=i,t.ngTempTokenPath=null,t}(a,t,0,this.source)}throw a}finally{me(i)}}},{key:"_resolveInjectorDefTypes",value:function(){var t=this;this.injectorDefTypes.forEach((function(e){return t.get(e)}))}},{key:"toString",value:function(){var t=[];return this.records.forEach((function(e,n){return t.push(ut(n))})),"R3Injector[".concat(t.join(", "),"]")}},{key:"assertNotDestroyed",value:function(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}},{key:"processInjectorType",value:function(t,e,n){var r=this;if(!(t=Pt(t)))return!1;var i=yt(t),o=null==i&&t.ngModule||void 0,s=void 0===o?t:o,a=-1!==n.indexOf(s);if(void 0!==o&&(i=yt(o)),null==i)return!1;if(null!=i.imports&&!a){var u;n.push(s);try{Dt(i.imports,(function(t){r.processInjectorType(t,e,n)&&(void 0===u&&(u=[]),u.push(t))}))}finally{}if(void 0!==u)for(var c=function(t){var e=u[t],n=e.ngModule,i=e.providers;Dt(i,(function(t){return r.processProvider(t,n,i||Wo)}))},l=0;l<u.length;l++)c(l)}this.injectorDefTypes.add(s),this.records.set(s,Zo(i.factory,qo));var h=i.providers;if(null!=h&&!a){var f=t;Dt(h,(function(t){return r.processProvider(t,f,h)}))}return void 0!==o&&void 0!==t.providers}},{key:"processProvider",value:function(t,e,n){var r=ts(t=Pt(t))?t:Pt(t&&t.provide),i=function(t,e,n){return Jo(t)?Zo(void 0,t.useValue):Zo(Xo(t),qo)}(t);if(ts(t)||!0!==t.multi)this.records.get(r);else{var o=this.records.get(r);o||((o=Zo(void 0,qo,!0)).factory=function(){return Ce(o.multi)},this.records.set(r,o)),r=t,o.multi.push(t)}this.records.set(r,i)}},{key:"hydrate",value:function(t,e){var n;return e.value===qo&&(e.value=Ho,e.value=e.factory()),"object"==typeof e.value&&e.value&&null!==(n=e.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(e.value),e.value}},{key:"injectableDefInScope",value:function(t){return!!t.providedIn&&("string"==typeof t.providedIn?"any"===t.providedIn||t.providedIn===this.scope:this.injectorDefTypes.has(t.providedIn))}},{key:"destroyed",get:function(){return this._destroyed}}]),t}();function $o(t){var e=pt(t),n=null!==e?e.factory:hr(t);if(null!==n)return n;var r=yt(t);if(null!==r)return r.factory;if(t instanceof wt)throw new Error("Token ".concat(ut(t)," is missing a \u0275prov definition."));if(t instanceof Function)return function(t){var e=t.length;if(e>0){var n=Lt(e,"?");throw new Error("Can't resolve all parameters for ".concat(ut(t),": (").concat(n.join(", "),")."))}var r=function(t){var e=t&&(t[gt]||t[_t]);if(e){var n=function(t){if(t.hasOwnProperty("name"))return t.name;var e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn('DEPRECATED: DI is instantiating a token "'.concat(n,'" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "').concat(n,'" class.')),e}return null}(t);return null!==r?function(){return r.factory(t)}:function(){return new t}}(t);throw new Error("unreachable")}function Xo(t,e,n){var r,i=void 0;if(ts(t)){var o=Pt(t);return hr(o)||$o(o)}if(Jo(t))i=function(){return Pt(t.useValue)};else if((r=t)&&r.useFactory)i=function(){return t.useFactory.apply(t,_toConsumableArray(Ce(t.deps||[])))};else if(function(t){return!(!t||!t.useExisting)}(t))i=function(){return be(Pt(t.useExisting))};else{var s=Pt(t&&(t.useClass||t.provide));if(!function(t){return!!t.deps}(t))return hr(s)||$o(s);i=function(){return _construct(s,_toConsumableArray(Ce(t.deps)))}}return i}function Zo(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return{factory:t,value:e,multi:n?[]:void 0}}function Jo(t){return null!==t&&"object"==typeof t&&ye in t}function ts(t){return"function"==typeof t}var es=function(t,e,n){return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3?arguments[3]:void 0,i=Ko(t,e,n,r);return i._resolveInjectorDefTypes(),i}({name:n},e,t,n)},ns=function(){var t=function(){function t(){_classCallCheck(this,t)}return _createClass(t,null,[{key:"create",value:function(t,e){return Array.isArray(t)?es(t,e,""):es(t.providers,t.parent,t.name||"")}}]),t}();return t.THROW_IF_NOT_FOUND=pe,t.NULL=new Uo,t.\u0275prov=ft({token:t,providedIn:"any",factory:function(){return be(Vo)}}),t.__NG_ELEMENT_ID__=-1,t}();function rs(t,e){br(Me(t)[1],$e())}function is(t){for(var e=Object.getPrototypeOf(t.type.prototype).constructor,n=!0,r=[t];e;){var i=void 0;if(Ae(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Error("Directives cannot inherit Components");i=e.\u0275dir}if(i){if(n){r.push(i);var o=t;o.inputs=os(t.inputs),o.declaredInputs=os(t.declaredInputs),o.outputs=os(t.outputs);var s=i.hostBindings;s&&us(t,s);var a=i.viewQuery,u=i.contentQueries;if(a&&ss(t,a),u&&as(t,u),ht(t.inputs,i.inputs),ht(t.declaredInputs,i.declaredInputs),ht(t.outputs,i.outputs),Ae(i)&&i.data.animation){var c=t.data;c.animation=(c.animation||[]).concat(i.data.animation)}}var l=i.features;if(l)for(var h=0;h<l.length;h++){var f=l[h];f&&f.ngInherit&&f(t),f===is&&(n=!1)}}e=Object.getPrototypeOf(e)}!function(t){for(var e=0,n=null,r=t.length-1;r>=0;r--){var i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Ar(i.hostAttrs,n=Ar(n,i.hostAttrs))}}(r)}function os(t){return t===qt?{}:t===Ht?[]:t}function ss(t,e){var n=t.viewQuery;t.viewQuery=n?function(t,r){e(t,r),n(t,r)}:e}function as(t,e){var n=t.contentQueries;t.contentQueries=n?function(t,r,i){e(t,r,i),n(t,r,i)}:e}function us(t,e){var n=t.hostBindings;t.hostBindings=n?function(t,r){e(t,r),n(t,r)}:e}var cs=null;function ls(){if(!cs){var t=It.Symbol;if(t&&t.iterator)cs=t.iterator;else for(var e=Object.getOwnPropertyNames(Map.prototype),n=0;n<e.length;++n){var r=e[n];"entries"!==r&&"size"!==r&&Map.prototype[r]===Map.prototype.entries&&(cs=r)}}return cs}var hs=function(){function t(e){_classCallCheck(this,t),this.wrapped=e}return _createClass(t,null,[{key:"wrap",value:function(e){return new t(e)}},{key:"unwrap",value:function(e){return t.isWrapped(e)?e.wrapped:e}},{key:"isWrapped",value:function(e){return e instanceof t}}]),t}();function fs(t){return!!ds(t)&&(Array.isArray(t)||!(t instanceof Map)&&ls()in t)}function ds(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function ps(t,e,n){return t[e]=n}function vs(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function ys(t,e,n,r){var i=Qe();return vs(i,sn(),e)&&(Ke(),function(t,e,n,r,i,o){var s=ze(t,e);!function(t,e,n,r,i,o,s){if(null==o)Pe(t)?t.removeAttribute(e,i,n):e.removeAttribute(i);else{var a=null==s?ue(o):s(o,r||"",i);Pe(t)?t.setAttribute(e,i,a,n):n?e.setAttributeNS(n,i,a):e.setAttribute(i,a)}}(e[11],s,o,t.value,n,r,i)}(kn(),i,t,e,n,r)),ys}function gs(t,e,n,r){return vs(t,sn(),n)?e+ue(n)+r:Hi}function ms(t,e,n,r,i,o,s,a){var u=Qe(),c=Ke(),l=t+20,h=c.firstCreatePass?function(t,e,n,r,i,o,s,a,u){var c=e.consts,l=eo(e,t,4,s||null,Be(c,a));yo(e,n,l,Be(c,u)),br(e,l);var h=l.tViews=ho(2,l,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c);return null!==e.queries&&(e.queries.template(e,l),h.queries=e.queries.embeddedTView(l)),l}(l,c,u,e,n,r,i,o,s):c.data[l];Ze(h,!1);var f=u[11].createComment("");Oi(c,u,f,h),oi(f,u),xo(u,u[l]=To(f,u,f,h)),xe(h)&&uo(c,u,h),null!=s&&co(u,h,a)}function _s(t){return Le(We.lFrame.contextLView,20+t)}function bs(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:he.Default,n=Qe();return null===n?be(t,e):Wr($e(),n,Pt(t),e)}function ws(t,e,n){var r=Qe();return vs(r,sn(),e)&&vo(Ke(),kn(),r,t,e,r[11],n,!1),ws}function Cs(t,e,n,r,i){var o=i?"class":"style";Fo(t,n,e.inputs[o],o,r)}function ks(t,e,n,r){var i=Qe(),o=Ke(),s=20+t,a=i[11],u=i[s]=vi(a,e,We.lFrame.currentNamespace),c=o.firstCreatePass?function(t,e,n,r,i,o,s){var a=e.consts,u=eo(e,t,2,i,Be(a,o));return yo(e,n,u,Be(a,s)),null!==u.attrs&&Mo(u,u.attrs,!1),null!==u.mergedAttrs&&Mo(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(s,o,i,0,e,n,r):o.data[s];Ze(c,!0);var l=c.mergedAttrs;null!==l&&Or(a,u,l);var h=c.classes;null!==h&&Ri(a,u,h);var f=c.styles;null!==f&&Pi(a,u,f),64!=(64&c.flags)&&Oi(o,i,u,c),0===We.lFrame.elementDepthCount&&oi(u,i),We.lFrame.elementDepthCount++,xe(c)&&(uo(o,i,c),ao(o,c,i)),null!==r&&co(i,c)}function Es(){var t=$e();Je()?tn():Ze(t=t.parent,!1);var e=t;We.lFrame.elementDepthCount--;var n=Ke();n.firstCreatePass&&(br(n,t),Oe(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function(t){return 0!=(16&t.flags)}(e)&&Cs(n,e,Qe(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function(t){return 0!=(32&t.flags)}(e)&&Cs(n,e,Qe(),e.stylesWithoutHost,!1)}function Ss(t,e,n,r){ks(t,e,n,r),Es()}function Ts(t,e,n){var r=Qe(),i=Ke(),o=t+20,s=i.firstCreatePass?function(t,e,n,r,i){var o=e.consts,s=Be(o,r),a=eo(e,t,8,"ng-container",s);return null!==s&&Mo(a,s,!0),yo(e,n,a,Be(o,i)),null!==e.queries&&e.queries.elementStart(e,a),a}(o,i,r,e,n):i.data[o];Ze(s,!0);var a=r[o]=r[11].createComment("");Oi(i,r,a,s),oi(a,r),xe(s)&&(uo(i,r,s),ao(i,s,r)),null!=n&&co(r,s)}function Os(){var t=$e(),e=Ke();Je()?tn():Ze(t=t.parent,!1),e.firstCreatePass&&(br(e,t),Oe(t)&&e.queries.elementEnd(t))}function Is(){return Qe()}function xs(t){return!!t&&"function"==typeof t.then}function As(t){return!!t&&"function"==typeof t.subscribe}function Ps(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0,i=Qe(),o=Ke(),s=$e();return Ns(o,i,i[11],s,t,e,n,r),Ps}function Rs(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0,i=$e(),o=Qe(),s=Ke();return Ns(s,o,jo(cn(s.data),i,o),i,t,e,n,r),Rs}function Ns(t,e,n,r,i,o){var s=arguments.length>6&&void 0!==arguments[6]&&arguments[6],a=arguments.length>7?arguments[7]:void 0,u=xe(r),c=t.firstCreatePass&&(t.cleanup||(t.cleanup=[])),l=zo(e),h=!0;if(3&r.type){var f=ze(r,e),d=a?a(f):qt,p=d.target||f,v=l.length,y=a?function(t){return a(Ne(t[r.index])).target}:r.index;if(Pe(n)){var g=null;if(!a&&u&&(g=function(t,e,n,r){var i=t.cleanup;if(null!=i)for(var o=0;o<i.length-1;o+=2){var s=i[o];if(s===n&&i[o+1]===r){var a=e[7],u=i[o+2];return a.length>u?a[u]:null}"string"==typeof s&&(o+=2)}return null}(t,e,i,r.index)),null!==g)(g.__ngLastListenerFn__||g).__ngNextListenerFn__=o,g.__ngLastListenerFn__=o,h=!1;else{o=zs(r,e,o,!1);var m=n.listen(d.name||p,i,o);l.push(o,m),c&&c.push(i,y,v,v+1)}}else o=zs(r,e,o,!0),p.addEventListener(i,o,s),l.push(o),c&&c.push(i,y,v,s)}var _,b=r.outputs;if(h&&null!==b&&(_=b[i])){var w=_.length;if(w)for(var C=0;C<w;C+=2){var k=e[_[C]][_[C+1]].subscribe(o),E=l.length;l.push(o,k),c&&c.push(i,r.index,E,-(E+1))}}}function Ds(t,e,n){try{return!1!==e(n)}catch(r){return Lo(t,r),!1}}function zs(t,e,n,r){return function i(o){if(o===Function)return n;var s=2&t.flags?Fe(t.index,e):e;0==(32&e[2])&&Ao(s);for(var a=Ds(e,n,o),u=i.__ngNextListenerFn__;u;)a=Ds(e,u,o)&&a,u=u.__ngNextListenerFn__;return r&&!1===a&&(o.preventDefault(),o.returnValue=!1),a}}function js(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return function(t){return(We.lFrame.contextLView=function(t,e){for(;t>0;)e=e[15],t--;return e}(t,We.lFrame.contextLView))[8]}(t)}function Ls(t,e){for(var n=null,r=function(t){var e=t.attrs;if(null!=e){var n=e.indexOf(5);if(0==(1&n))return e[n+1]}return null}(t),i=0;i<e.length;i++){var o=e[i];if("*"!==o){if(null===r?Vi(t,o,!0):Ui(r,o))return i}else n=i}return n}function Fs(t){var e=Qe()[16][6];if(!e.projection)for(var n=e.projection=Lt(t?t.length:1,null),r=n.slice(),i=e.child;null!==i;){var o=t?Ls(i,t):0;null!==o&&(r[o]?r[o].projectionNext=i:n[o]=i,r[o]=i),i=i.next}}function Ms(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0,r=Qe(),i=Ke(),o=eo(i,20+t,16,null,n||null);null===o.projection&&(o.projection=e),tn(),64!=(64&o.flags)&&function(t,e,n){Ai(e[11],0,e,n,bi(t,n,e),Si(n.parent||e[6],n,e))}(i,r,o)}function Vs(t,e,n){return Us(t,"",e,"",n),Vs}function Us(t,e,n,r,i){var o=Qe(),s=gs(o,e,n,r);return s!==Hi&&vo(Ke(),kn(),o,t,s,o[11],i,!1),Us}var Bs=[];function qs(t,e,n,r,i){for(var o=t[n+1],s=null===e,a=r?Ki(o):$i(o),u=!1;0!==a&&(!1===u||s);){var c=t[a+1];Hs(t[a],e)&&(u=!0,t[a+1]=r?Zi(c):Yi(c)),a=r?Ki(c):$i(c)}u&&(t[n+1]=r?Yi(o):Zi(o))}function Hs(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&Vt(t,e)>=0}var Ws={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Gs(t){return t.substring(Ws.key,Ws.keyEnd)}function Qs(t,e){var n=Ws.textEnd;return n===e?-1:(e=Ws.keyEnd=function(t,e,n){for(;e<n&&t.charCodeAt(e)>32;)e++;return e}(t,Ws.key=e,n),Ks(t,e,n))}function Ks(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function Ys(t,e,n){return Js(t,e,n,!1),Ys}function $s(t,e){return Js(t,e,null,!0),$s}function Xs(t){ta(Ft,Zs,t,!0)}function Zs(t,e){for(var n=function(t){return function(t){Ws.key=0,Ws.keyEnd=0,Ws.value=0,Ws.valueEnd=0,Ws.textEnd=t.length}(t),Qs(t,Ks(t,0,Ws.textEnd))}(e);n>=0;n=Qs(e,n))Ft(t,Gs(e),!0)}function Js(t,e,n,r){var i=Qe(),o=Ke(),s=an(2);o.firstUpdatePass&&na(o,t,s,r),e!==Hi&&vs(i,s,e)&&oa(o,o.data[wn()],i,i[11],t,i[s+1]=function(t,e){return null==t||("string"==typeof e?t+=e:"object"==typeof t&&(t=ut(Rn(t)))),t}(e,n),r,s)}function ta(t,e,n,r){var i=Ke(),o=an(2);i.firstUpdatePass&&na(i,null,o,r);var s=Qe();if(n!==Hi&&vs(s,o,n)){var a=i.data[wn()];if(ua(a,r)&&!ea(i,o)){var u=r?a.classesWithoutHost:a.stylesWithoutHost;null!==u&&(n=ct(u,n||"")),Cs(i,a,s,n,r)}else!function(t,e,n,r,i,o,s,a){i===Hi&&(i=Bs);for(var u=0,c=0,l=0<i.length?i[0]:null,h=0<o.length?o[0]:null;null!==l||null!==h;){var f=u<i.length?i[u+1]:void 0,d=c<o.length?o[c+1]:void 0,p=null,v=void 0;l===h?(u+=2,c+=2,f!==d&&(p=h,v=d)):null===h||null!==l&&l<h?(u+=2,p=l):(c+=2,p=h,v=d),null!==p&&oa(t,e,n,r,p,v,s,a),l=u<i.length?i[u]:null,h=c<o.length?o[c]:null}}(i,a,s,s[11],s[o+1],s[o+1]=function(t,e,n){if(null==n||""===n)return Bs;var r=[],i=Rn(n);if(Array.isArray(i))for(var o=0;o<i.length;o++)t(r,i[o],!0);else if("object"==typeof i)for(var s in i)i.hasOwnProperty(s)&&t(r,s,i[s]);else"string"==typeof i&&e(r,i);return r}(t,e,n),r,o)}}function ea(t,e){return e>=t.expandoStartIndex}function na(t,e,n,r){var i=t.data;if(null===i[n+1]){var o=i[wn()],s=ea(t,n);ua(o,r)&&null===e&&!s&&(e=!1),e=function(t,e,n,r){var i=cn(t),o=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(n=ia(n=ra(null,t,e,n,r),e.attrs,r),o=null);else{var s=e.directiveStylingLast;if(-1===s||t[s]!==i)if(n=ra(i,t,e,n,r),null===o){var a=function(t,e,n){var r=n?e.classBindings:e.styleBindings;if(0!==$i(r))return t[Ki(r)]}(t,e,r);void 0!==a&&Array.isArray(a)&&function(t,e,n,r){t[Ki(n?e.classBindings:e.styleBindings)]=r}(t,e,r,a=ia(a=ra(null,t,e,a[1],r),e.attrs,r))}else o=function(t,e,n){for(var r=void 0,i=e.directiveEnd,o=1+e.directiveStylingLast;o<i;o++)r=ia(r,t[o].hostAttrs,n);return ia(r,e.attrs,n)}(t,e,r)}return void 0!==o&&(r?e.residualClasses=o:e.residualStyles=o),n}(i,o,e,r),function(t,e,n,r,i,o){var s=o?e.classBindings:e.styleBindings,a=Ki(s),u=$i(s);t[r]=n;var c,l=!1;if(Array.isArray(n)){var h=n;(null===(c=h[1])||Vt(h,c)>0)&&(l=!0)}else c=n;if(i)if(0!==u){var f=Ki(t[a+1]);t[r+1]=Qi(f,a),0!==f&&(t[f+1]=Xi(t[f+1],r)),t[a+1]=131071&t[a+1]|r<<17}else t[r+1]=Qi(a,0),0!==a&&(t[a+1]=Xi(t[a+1],r)),a=r;else t[r+1]=Qi(u,0),0===a?a=r:t[u+1]=Xi(t[u+1],r),u=r;l&&(t[r+1]=Yi(t[r+1])),qs(t,c,r,!0),qs(t,c,r,!1),function(t,e,n,r,i){var o=i?t.residualClasses:t.residualStyles;null!=o&&"string"==typeof e&&Vt(o,e)>=0&&(n[r+1]=Zi(n[r+1]))}(e,c,t,r,o),s=Qi(a,u),o?e.classBindings=s:e.styleBindings=s}(i,o,e,n,s,r)}}function ra(t,e,n,r,i){var o=null,s=n.directiveEnd,a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<s&&(r=ia(r,(o=e[a]).hostAttrs,i),o!==t);)a++;return null!==t&&(n.directiveStylingLast=a),r}function ia(t,e,n){var r=n?1:2,i=-1;if(null!==e)for(var o=0;o<e.length;o++){var s=e[o];"number"==typeof s?i=s:i===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),Ft(t,s,!!n||e[++o]))}return void 0===t?null:t}function oa(t,e,n,r,i,o,s,a){if(3&e.type){var u=t.data,c=u[a+1];aa(1==(1&c)?sa(u,e,n,i,$i(c),s):void 0)||(aa(o)||2==(2&c)&&(o=sa(u,null,n,i,a,s)),function(t,e,n,r,i){var o=Pe(t);if(e)i?o?t.addClass(n,r):n.classList.add(r):o?t.removeClass(n,r):n.classList.remove(r);else{var s=-1===r.indexOf("-")?void 0:ui.DashCase;if(null==i)o?t.removeStyle(n,r,s):n.style.removeProperty(r);else{var a="string"==typeof i&&i.endsWith("!important");a&&(i=i.slice(0,-10),s|=ui.Important),o?t.setStyle(n,r,i,s):n.style.setProperty(r,i,a?"important":"")}}}(r,s,De(wn(),n),i,o))}}function sa(t,e,n,r,i,o){for(var s=null===e,a=void 0;i>0;){var u=t[i],c=Array.isArray(u),l=c?u[1]:u,h=null===l,f=n[i+1];f===Hi&&(f=h?Bs:void 0);var d=h?Mt(f,r):l===r?f:void 0;if(c&&!aa(d)&&(d=Mt(u,r)),aa(d)&&(a=d,s))return a;var p=t[i+1];i=s?Ki(p):$i(p)}if(null!==e){var v=o?e.residualClasses:e.residualStyles;null!=v&&(a=Mt(v,r))}return a}function aa(t){return void 0!==t}function ua(t,e){return 0!=(t.flags&(e?16:32))}function ca(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=Qe(),r=Ke(),i=t+20,o=r.firstCreatePass?eo(r,i,1,e,null):r.data[i],s=n[i]=function(t,e){return Pe(t)?t.createText(e):t.createTextNode(e)}(n[11],e);Oi(r,n,s,o),Ze(o,!1)}function la(t){return ha("",t,""),la}function ha(t,e,n){var r=Qe(),i=gs(r,t,e,n);return i!==Hi&&function(t,e,n){var r=De(e,t);!function(t,e,n){Pe(t)?t.setValue(e,n):e.textContent=n}(t[11],r,n)}(r,wn(),i),ha}function fa(t,e,n){var r=Qe();if(vs(r,sn(),e)){var i=Ke(),o=kn();vo(i,o,r,t,e,jo(cn(i.data),o,r),n,!0)}return fa}var da=void 0,pa=["en",[["a","p"],["AM","PM"],da],[["AM","PM"],da,da],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],da,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],da,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",da,"{1} 'at' {0}",da],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){var e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}],va={};function ya(t){return t in va||(va[t]=It.ng&&It.ng.common&&It.ng.common.locales&&It.ng.common.locales[t]),va[t]}var ga=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}({});function ma(t){var e;null==(e=t)&&function(t,e,n,r){throw new Error("ASSERTION ERROR: Expected localeId to be defined"+" [Expected=> null != ".concat(e," <=Actual]"))}(0,e),"string"==typeof t&&t.toLowerCase().replace(/_/g,"-")}function _a(t,e,n,r,i){if(t=Pt(t),Array.isArray(t))for(var o=0;o<t.length;o++)_a(t[o],e,n,r,i);else{var s=Ke(),a=Qe(),u=ts(t)?t:Pt(t.provide),c=Xo(t),l=$e(),h=1048575&l.providerIndexes,f=l.directiveStart,d=l.providerIndexes>>20;if(ts(t)||!t.multi){var p=new Tr(c,i,bs),v=Ca(u,e,i?h:h+d,f);-1===v?(Br(Fr(l,a),s,u),ba(s,t,e.length),e.push(u),l.directiveStart++,l.directiveEnd++,i&&(l.providerIndexes+=1048576),n.push(p),a.push(p)):(n[v]=p,a[v]=p)}else{var y=Ca(u,e,h+d,f),g=Ca(u,e,h,h+d),m=y>=0&&n[y],_=g>=0&&n[g];if(i&&!_||!i&&!m){Br(Fr(l,a),s,u);var b=function(t,e,n,r,i){var o=new Tr(t,n,bs);return o.multi=[],o.index=e,o.componentProviders=0,wa(o,i,r&&!n),o}(i?Ea:ka,n.length,i,r,c);!i&&_&&(n[g].providerFactory=b),ba(s,t,e.length,0),e.push(u),l.directiveStart++,l.directiveEnd++,i&&(l.providerIndexes+=1048576),n.push(b),a.push(b)}else ba(s,t,y>-1?y:g,wa(n[i?g:y],c,!i&&r));!i&&r&&_&&n[g].componentProviders++}}}function ba(t,e,n,r){var i=ts(e);if(i||e.useClass){var o=(e.useClass||e).prototype.ngOnDestroy;if(o){var s=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){var a=s.indexOf(n);-1===a?s.push(n,[r,o]):s[a+1].push(r,o)}else s.push(n,o)}}}function wa(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function Ca(t,e,n,r){for(var i=n;i<r;i++)if(e[i]===t)return i;return-1}function ka(t,e,n,r){return Sa(this.multi,[])}function Ea(t,e,n,r){var i,o=this.multi;if(this.providerFactory){var s=this.providerFactory.componentProviders,a=$r(n,n[1],this.providerFactory.index,r);Sa(o,i=a.slice(0,s));for(var u=s;u<a.length;u++)i.push(a[u])}else Sa(o,i=[]);return i}function Sa(t,e){for(var n=0;n<t.length;n++)e.push((0,t[n])());return e}function Ta(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return function(n){n.providersResolver=function(n,r){return function(t,e,n){var r=Ke();if(r.firstCreatePass){var i=Ae(t);_a(n,r.data,r.blueprint,i,!0),_a(e,r.data,r.blueprint,i,!1)}}(n,r?r(t):t,e)}}}var Oa=function t(){_classCallCheck(this,t)},Ia=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"resolveComponentFactory",value:function(t){throw function(t){var e=Error("No component factory found for ".concat(ut(t),". Did you add it to @NgModule.entryComponents?"));return e.ngComponent=t,e}(t)}}]),t}(),xa=function(){var t=function t(){_classCallCheck(this,t)};return t.NULL=new Ia,t}();function Aa(){}function Pa(t,e){return new Na(ze(t,e))}var Ra=function(){return Pa($e(),Qe())},Na=function(){var t=function t(e){_classCallCheck(this,t),this.nativeElement=e};return t.__NG_ELEMENT_ID__=Ra,t}(),Da=function t(){_classCallCheck(this,t)},za=function(){var t=function t(){_classCallCheck(this,t)};return t.__NG_ELEMENT_ID__=function(){return ja()},t}(),ja=function(){var t=Qe(),e=Fe($e().index,t);return function(t){return t[11]}(Se(e)?e:t)},La=function(){var t=function t(){_classCallCheck(this,t)};return t.\u0275prov=ft({token:t,providedIn:"root",factory:function(){return null}}),t}(),Fa=function t(e){_classCallCheck(this,t),this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")},Ma=new Fa("11.0.2"),Va=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"supports",value:function(t){return fs(t)}},{key:"create",value:function(t){return new Ba(t)}}]),t}(),Ua=function(t,e){return e},Ba=function(){function t(e){_classCallCheck(this,t),this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||Ua}return _createClass(t,[{key:"forEachItem",value:function(t){var e;for(e=this._itHead;null!==e;e=e._next)t(e)}},{key:"forEachOperation",value:function(t){for(var e=this._itHead,n=this._removalsHead,r=0,i=null;e||n;){var o=!n||e&&e.currentIndex<Ga(n,r,i)?e:n,s=Ga(o,r,i),a=o.currentIndex;if(o===n)r--,n=n._nextRemoved;else if(e=e._next,null==o.previousIndex)r++;else{i||(i=[]);var u=s-r,c=a-r;if(u!=c){for(var l=0;l<u;l++){var h=l<i.length?i[l]:i[l]=0,f=h+l;c<=f&&f<u&&(i[l]=h+1)}i[o.previousIndex]=c-u}}s!==a&&t(o,s,a)}}},{key:"forEachPreviousItem",value:function(t){var e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}},{key:"forEachAddedItem",value:function(t){var e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}},{key:"forEachMovedItem",value:function(t){var e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}},{key:"forEachRemovedItem",value:function(t){var e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}},{key:"forEachIdentityChange",value:function(t){var e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}},{key:"diff",value:function(t){if(null==t&&(t=[]),!fs(t))throw new Error("Error trying to diff '".concat(ut(t),"'. Only arrays and iterables are allowed"));return this.check(t)?this:null}},{key:"onDestroy",value:function(){}},{key:"check",value:function(t){var e=this;this._reset();var n,r,i,o=this._itHead,s=!1;if(Array.isArray(t)){this.length=t.length;for(var a=0;a<this.length;a++)r=t[a],i=this._trackByFn(a,r),null!==o&&Object.is(o.trackById,i)?(s&&(o=this._verifyReinsertion(o,r,i,a)),Object.is(o.item,r)||this._addIdentityChange(o,r)):(o=this._mismatch(o,r,i,a),s=!0),o=o._next}else n=0,function(t,e){if(Array.isArray(t))for(var n=0;n<t.length;n++)e(t[n]);else for(var r,i=t[ls()]();!(r=i.next()).done;)e(r.value)}(t,(function(t){i=e._trackByFn(n,t),null!==o&&Object.is(o.trackById,i)?(s&&(o=e._verifyReinsertion(o,t,i,n)),Object.is(o.item,t)||e._addIdentityChange(o,t)):(o=e._mismatch(o,t,i,n),s=!0),o=o._next,n++})),this.length=n;return this._truncate(o),this.collection=t,this.isDirty}},{key:"_reset",value:function(){if(this.isDirty){var t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}},{key:"_mismatch",value:function(t,e,n,r){var i;return null===t?i=this._itTail:(i=t._prev,this._remove(t)),null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,i,r)):null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,i,r)):t=this._addAfter(new qa(e,n),i,r),t}},{key:"_verifyReinsertion",value:function(t,e,n,r){var i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?t=this._reinsertAfter(i,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}},{key:"_truncate",value:function(t){for(;null!==t;){var e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}},{key:"_reinsertAfter",value:function(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);var r=t._prevRemoved,i=t._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t}},{key:"_moveAfter",value:function(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}},{key:"_addAfter",value:function(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}},{key:"_insertAfter",value:function(t,e,n){var r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new Wa),this._linkedRecords.put(t),t.currentIndex=n,t}},{key:"_remove",value:function(t){return this._addToRemovals(this._unlink(t))}},{key:"_unlink",value:function(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);var e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}},{key:"_addToMoves",value:function(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}},{key:"_addToRemovals",value:function(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Wa),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}},{key:"_addIdentityChange",value:function(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}},{key:"isDirty",get:function(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}}]),t}(),qa=function t(e,n){_classCallCheck(this,t),this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null},Ha=function(){function t(){_classCallCheck(this,t),this._head=null,this._tail=null}return _createClass(t,[{key:"add",value:function(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}},{key:"get",value:function(t,e){var n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Object.is(n.trackById,t))return n;return null}},{key:"remove",value:function(t){var e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}]),t}(),Wa=function(){function t(){_classCallCheck(this,t),this.map=new Map}return _createClass(t,[{key:"put",value:function(t){var e=t.trackById,n=this.map.get(e);n||(n=new Ha,this.map.set(e,n)),n.add(t)}},{key:"get",value:function(t,e){var n=this.map.get(t);return n?n.get(t,e):null}},{key:"remove",value:function(t){var e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}},{key:"clear",value:function(){this.map.clear()}},{key:"isEmpty",get:function(){return 0===this.map.size}}]),t}();function Ga(t,e,n){var r=t.previousIndex;if(null===r)return r;var i=0;return n&&r<n.length&&(i=n[r]),r+e+i}var Qa=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"supports",value:function(t){return t instanceof Map||ds(t)}},{key:"create",value:function(){return new Ka}}]),t}(),Ka=function(){function t(){_classCallCheck(this,t),this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}return _createClass(t,[{key:"forEachItem",value:function(t){var e;for(e=this._mapHead;null!==e;e=e._next)t(e)}},{key:"forEachPreviousItem",value:function(t){var e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}},{key:"forEachChangedItem",value:function(t){var e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}},{key:"forEachAddedItem",value:function(t){var e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}},{key:"forEachRemovedItem",value:function(t){var e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}},{key:"diff",value:function(t){if(t){if(!(t instanceof Map||ds(t)))throw new Error("Error trying to diff '".concat(ut(t),"'. Only maps and objects are allowed"))}else t=new Map;return this.check(t)?this:null}},{key:"onDestroy",value:function(){}},{key:"check",value:function(t){var e=this;this._reset();var n=this._mapHead;if(this._appendAfter=null,this._forEach(t,(function(t,r){if(n&&n.key===r)e._maybeAddToChanges(n,t),e._appendAfter=n,n=n._next;else{var i=e._getOrCreateRecordForKey(r,t);n=e._insertBeforeOrAppend(n,i)}})),n){n._prev&&(n._prev._next=null),this._removalsHead=n;for(var r=n;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}},{key:"_insertBeforeOrAppend",value:function(t,e){if(t){var n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}},{key:"_getOrCreateRecordForKey",value:function(t,e){if(this._records.has(t)){var n=this._records.get(t);this._maybeAddToChanges(n,e);var r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}var o=new Ya(t);return this._records.set(t,o),o.currentValue=e,this._addToAdditions(o),o}},{key:"_reset",value:function(){if(this.isDirty){var t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}},{key:"_maybeAddToChanges",value:function(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}},{key:"_addToAdditions",value:function(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}},{key:"_addToChanges",value:function(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}},{key:"_forEach",value:function(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach((function(n){return e(t[n],n)}))}},{key:"isDirty",get:function(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}}]),t}(),Ya=function t(e){_classCallCheck(this,t),this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null},$a=function(){var t=function(){function t(e){_classCallCheck(this,t),this.factories=e}return _createClass(t,[{key:"find",value:function(t){var e,n=this.factories.find((function(e){return e.supports(t)}));if(null!=n)return n;throw new Error("Cannot find a differ supporting object '".concat(t,"' of type '").concat((e=t).name||typeof e,"'"))}}],[{key:"create",value:function(e,n){if(null!=n){var r=n.factories.slice();e=e.concat(r)}return new t(e)}},{key:"extend",value:function(e){return{provide:t,useFactory:function(n){if(!n)throw new Error("Cannot extend IterableDiffers without a parent injector");return t.create(e,n)},deps:[[t,new at,new ot]]}}}]),t}();return t.\u0275prov=ft({token:t,providedIn:"root",factory:function(){return new t([new Va])}}),t}(),Xa=function(){var t=function(){function t(e){_classCallCheck(this,t),this.factories=e}return _createClass(t,[{key:"find",value:function(t){var e=this.factories.find((function(e){return e.supports(t)}));if(e)return e;throw new Error("Cannot find a differ supporting object '".concat(t,"'"))}}],[{key:"create",value:function(e,n){if(n){var r=n.factories.slice();e=e.concat(r)}return new t(e)}},{key:"extend",value:function(e){return{provide:t,useFactory:function(n){if(!n)throw new Error("Cannot extend KeyValueDiffers without a parent injector");return t.create(e,n)},deps:[[t,new at,new ot]]}}}]),t}();return t.\u0275prov=ft({token:t,providedIn:"root",factory:function(){return new t([new Qa])}}),t}(),Za=function(){function t(e,n){_classCallCheck(this,t),this._lView=e,this._cdRefInjectingView=n,this._appRef=null,this._viewContainerRef=null}return _createClass(t,[{key:"destroy",value:function(){if(this._appRef)this._appRef.detachView(this);else if(this._viewContainerRef){var t=this._viewContainerRef.indexOf(this);t>-1&&this._viewContainerRef.detach(t),this._viewContainerRef=null}mi(this._lView[1],this._lView)}},{key:"onDestroy",value:function(t){fo(this._lView[1],this._lView,null,t)}},{key:"markForCheck",value:function(){Ao(this._cdRefInjectingView||this._lView)}},{key:"detach",value:function(){this._lView[2]&=-129}},{key:"reattach",value:function(){this._lView[2]|=128}},{key:"detectChanges",value:function(){Po(this._lView[1],this._lView,this.context)}},{key:"checkNoChanges",value:function(){!function(t,e,n){nn(!0);try{Po(t,e,n)}finally{nn(!1)}}(this._lView[1],this._lView,this.context)}},{key:"attachToViewContainerRef",value:function(t){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._viewContainerRef=t}},{key:"detachFromAppRef",value:function(){var t;this._appRef=null,xi(this._lView[1],t=this._lView,t[11],2,null,null)}},{key:"attachToAppRef",value:function(t){if(this._viewContainerRef)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}},{key:"rootNodes",get:function(){var t=this._lView,e=t[1];return function t(e,n,r,i){for(var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];null!==r;){var s=n[r.index];if(null!==s&&i.push(Ne(s)),Te(s))for(var a=10;a<s.length;a++){var u=s[a],c=u[1].firstChild;null!==c&&t(u[1],u,c,i)}var l=r.type;if(8&l)t(e,n,r.child,i);else if(32&l)for(var h=ci(r,n),f=void 0;f=h();)i.push(f);else if(16&l){var d=n[16],p=d[6].projection[r.projection];if(Array.isArray(p))i.push.apply(i,_toConsumableArray(p));else{var v=li(d);t(v[1],v,p,i,!0)}}r=o?r.projectionNext:r.next}return i}(e,t,e.firstChild,[])}},{key:"context",get:function(){return this._lView[8]}},{key:"destroyed",get:function(){return 256==(256&this._lView[2])}}]),t}(),Ja=function(t){_inherits(n,t);var e=_createSuper(n);function n(t){var r;return _classCallCheck(this,n),(r=e.call(this,t))._view=t,r}return _createClass(n,[{key:"detectChanges",value:function(){Ro(this._view)}},{key:"checkNoChanges",value:function(){!function(t){nn(!0);try{Ro(t)}finally{nn(!1)}}(this._view)}},{key:"context",get:function(){return null}}]),n}(Za),tu=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function(t,e,n){if(!n&&Ie(t)){var r=Fe(t.index,e);return new Za(r,r)}return 47&t.type?new Za(e[16],e):null}($e(),Qe(),t)},eu=function(){var t=function t(){_classCallCheck(this,t)};return t.__NG_ELEMENT_ID__=tu,t.__ChangeDetectorRef__=!0,t}(),nu=[new Qa],ru=new $a([new Va]),iu=new Xa(nu),ou=function(){return uu($e(),Qe())},su=function(){var t=function t(){_classCallCheck(this,t)};return t.__NG_ELEMENT_ID__=ou,t}(),au=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r,i){var o;return _classCallCheck(this,n),(o=e.call(this))._declarationLView=t,o._declarationTContainer=r,o.elementRef=i,o}return _createClass(n,[{key:"createEmbeddedView",value:function(t){var e=this._declarationTContainer.tViews,n=to(this._declarationLView,e,t,16,null,e.declTNode,null,null,null,null);n[17]=this._declarationLView[this._declarationTContainer.index];var r=this._declarationLView[19];return null!==r&&(n[19]=r.createEmbeddedView(e)),ro(e,n,t),new Za(n)}}]),n}(su);function uu(t,e){return 4&t.type?new au(e,t,Pa(t,e)):null}var cu=function t(){_classCallCheck(this,t)},lu=function t(){_classCallCheck(this,t)},hu=function(){return yu($e(),Qe())},fu=function(){var t=function t(){_classCallCheck(this,t)};return t.__NG_ELEMENT_ID__=hu,t}(),du=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r,i){var o;return _classCallCheck(this,n),(o=e.call(this))._lContainer=t,o._hostTNode=r,o._hostLView=i,o}return _createClass(n,[{key:"clear",value:function(){for(;this.length>0;)this.remove(this.length-1)}},{key:"get",value:function(t){var e=pu(this._lContainer);return null!==e&&e[t]||null}},{key:"createEmbeddedView",value:function(t,e,n){var r=t.createEmbeddedView(e||{});return this.insert(r,n),r}},{key:"createComponent",value:function(t,e,n,r,i){var o=n||this.parentInjector;if(!i&&null==t.ngModule&&o){var s=o.get(cu,null);s&&(i=s)}var a=t.create(o,r,void 0,i);return this.insert(a.hostView,e),a}},{key:"insert",value:function(t,e){var r=t._lView,i=r[1];if(Te(r[3])){var o=this.indexOf(t);if(-1!==o)this.detach(o);else{var s=r[3],a=new n(s,s[6],s[3]);a.detach(a.indexOf(t))}}var u=this._adjustIndex(e),c=this._lContainer;!function(t,e,n,r){var i=10+r,o=n.length;r>0&&(n[i-1][4]=e),r<o-10?(e[4]=n[i],zt(n,10+r,e)):(n.push(e),e[4]=null),e[3]=n;var s=e[17];null!==s&&n!==s&&function(t,e){var n=t[9];e[16]!==e[3][3][16]&&(t[2]=!0),null===n?t[9]=[e]:n.push(e)}(s,e);var a=e[19];null!==a&&a.insertView(t),e[2]|=128}(i,r,c,u);var l=function t(e,n){var r=10+e+1;if(r<n.length){var i=n[r],o=i[1].firstChild;if(null!==o)return function e(n,r){if(null!==r){var i=r.type;if(3&i)return ze(r,n);if(4&i)return t(-1,n[r.index]);if(8&i){var o=r.child;if(null!==o)return e(n,o);var s=n[r.index];return Te(s)?t(-1,s):Ne(s)}if(32&i)return ci(r,n)()||Ne(n[r.index]);var a=n[16],u=a[6],c=li(a),l=u.projection[r.projection];return null!=l?e(c,l):e(n,r.next)}return null}(i,o)}return n[7]}(u,c),h=r[11],f=Ei(h,c[7]);return null!==f&&function(t,e,n,r,i,o){r[0]=i,r[6]=e,xi(t,r,n,1,i,o)}(i,c[6],h,r,f,l),t.attachToViewContainerRef(this),zt(vu(c),u,t),t}},{key:"move",value:function(t,e){return this.insert(t,e)}},{key:"indexOf",value:function(t){var e=pu(this._lContainer);return null!==e?e.indexOf(t):-1}},{key:"remove",value:function(t){var e=this._adjustIndex(t,-1),n=gi(this._lContainer,e);n&&(jt(vu(this._lContainer),e),mi(n[1],n))}},{key:"detach",value:function(t){var e=this._adjustIndex(t,-1),n=gi(this._lContainer,e);return n&&null!=jt(vu(this._lContainer),e)?new Za(n):null}},{key:"_adjustIndex",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return null==t?this.length+e:t}},{key:"element",get:function(){return Pa(this._hostTNode,this._hostLView)}},{key:"injector",get:function(){return new Jr(this._hostTNode,this._hostLView)}},{key:"parentInjector",get:function(){var t=Ur(this._hostTNode,this._hostLView);if(Rr(t)){var e=Dr(t,this._hostLView),n=Nr(t);return new Jr(e[1].data[n+8],e)}return new Jr(null,this._hostLView)}},{key:"length",get:function(){return this._lContainer.length-10}}]),n}(fu);function pu(t){return t[8]}function vu(t){return t[8]||(t[8]=[])}function yu(t,e){var n,r=e[t.index];if(Te(r))n=r;else{var i;if(8&t.type)i=Ne(r);else{var o=e[11];i=o.createComment("");var s=ze(t,e);wi(o,Ei(o,s),i,function(t,e){return Pe(t)?t.nextSibling(e):e.nextSibling}(o,s),!1)}e[t.index]=n=To(r,e,i,t),xo(e,n)}return new du(n,t,e)}var gu={},mu=function(t){_inherits(n,t);var e=_createSuper(n);function n(t){var r;return _classCallCheck(this,n),(r=e.call(this)).ngModule=t,r}return _createClass(n,[{key:"resolveComponentFactory",value:function(t){var e=se(t);return new wu(e,this.ngModule)}}]),n}(xa);function _u(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}var bu=new wt("SCHEDULER_TOKEN",{providedIn:"root",factory:function(){return si}}),wu=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r){var i;return _classCallCheck(this,n),(i=e.call(this)).componentDef=t,i.ngModule=r,i.componentType=t.type,i.selector=t.selectors.map(qi).join(","),i.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],i.isBoundToModule=!!r,i}return _createClass(n,[{key:"create",value:function(t,e,n,r){var i,o,s=(r=r||this.ngModule)?function(t,e){return{get:function(n,r,i){var o=t.get(n,gu,i);return o!==gu||r===gu?o:e.get(n,r,i)}}}(t,r.injector):t,a=s.get(Da,Re),u=s.get(La,null),c=a.createRenderer(null,this.componentDef),l=this.componentDef.selectors[0][0]||"div",h=n?function(t,e,n){if(Pe(t))return t.selectRootElement(e,n===Bt.ShadowDom);var r="string"==typeof e?t.querySelector(e):e;return r.textContent="",r}(c,n,this.componentDef.encapsulation):vi(a.createRenderer(null,this.componentDef),l,function(t){var e=t.toLowerCase();return"svg"===e?"http://www.w3.org/2000/svg":"math"===e?"http://www.w3.org/1998/MathML/":null}(l)),f=this.componentDef.onPush?576:528,d={components:[],scheduler:si,clean:Do,playerHandler:null,flags:0},p=ho(0,null,null,1,0,null,null,null,null,null),v=to(null,p,d,f,null,null,a,c,u,s);pn(v);try{var y=function(t,e,n,r,i,o){var s=n[1];n[20]=t;var a=eo(s,20,2,"#host",null),u=a.mergedAttrs=e.hostAttrs;null!==u&&(Mo(a,u,!0),null!==t&&(Or(i,t,u),null!==a.classes&&Ri(i,t,a.classes),null!==a.styles&&Pi(i,t,a.styles)));var c=r.createRenderer(t,e),l=to(n,lo(e),null,e.onPush?64:16,n[20],a,r,c,null,null);return s.firstCreatePass&&(Br(Fr(a,n),s,e.type),_o(s,a),wo(a,n.length,1)),xo(n,l),n[20]=l}(h,this.componentDef,v,a,c);if(h)if(n)Or(c,h,["ng-version",Ma.full]);else{var g=function(t){for(var e=[],n=[],r=1,i=2;r<t.length;){var o=t[r];if("string"==typeof o)2===i?""!==o&&e.push(o,t[++r]):8===i&&n.push(o);else{if(!Fi(i))break;i=o}r++}return{attrs:e,classes:n}}(this.componentDef.selectors[0]),m=g.attrs,_=g.classes;m&&Or(c,h,m),_&&_.length>0&&Ri(c,h,_.join(" "))}if(o=je(p,20),void 0!==e)for(var b=o.projection=[],w=0;w<this.ngContentSelectors.length;w++){var C=e[w];b.push(null!=C?Array.from(C):null)}i=function(t,e,n,r,i){var o=n[1],s=function(t,e,n){var r=$e();t.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),Co(t,r,e,no(t,e,1,null),n));var i=$r(e,t,r.directiveStart,r);oi(i,e);var o=ze(r,e);return o&&oi(o,e),i}(o,n,e);if(r.components.push(s),t[8]=s,i&&i.forEach((function(t){return t(s,e)})),e.contentQueries){var a=$e();e.contentQueries(1,s,a.directiveStart)}var u=$e();return!o.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(Cn(u.index),go(n[1],u,0,u.directiveStart,u.directiveEnd,e),mo(e,s)),s}(y,this.componentDef,v,d,[rs]),ro(p,v,null)}finally{bn()}return new Cu(this.componentType,i,Pa(o,v),v,o)}},{key:"inputs",get:function(){return _u(this.componentDef.inputs)}},{key:"outputs",get:function(){return _u(this.componentDef.outputs)}}]),n}(Oa),Cu=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r,i,o,s){var a;return _classCallCheck(this,n),(a=e.call(this)).location=i,a._rootLView=o,a._tNode=s,a.destroyCbs=[],a.instance=r,a.hostView=a.changeDetectorRef=new Ja(o),a.componentType=t,a}return _createClass(n,[{key:"destroy",value:function(){this.destroyCbs&&(this.destroyCbs.forEach((function(t){return t()})),this.destroyCbs=null,!this.hostView.destroyed&&this.hostView.destroy())}},{key:"onDestroy",value:function(t){this.destroyCbs&&this.destroyCbs.push(t)}},{key:"injector",get:function(){return new Jr(this._tNode,this._rootLView)}}]),n}(function(){return function t(){_classCallCheck(this,t)}}()),ku=new Map,Eu=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r){var i;_classCallCheck(this,n),(i=e.call(this))._parent=r,i._bootstrapComponents=[],i.injector=_assertThisInitialized(i),i.destroyCbs=[],i.componentFactoryResolver=new mu(_assertThisInitialized(i));var o=ae(t),s=t[Yt]||null;return s&&ma(s),i._bootstrapComponents=ai(o.bootstrap),i._r3Injector=Ko(t,r,[{provide:cu,useValue:_assertThisInitialized(i)},{provide:xa,useValue:i.componentFactoryResolver}],ut(t)),i._r3Injector._resolveInjectorDefTypes(),i.instance=i.get(t),i}return _createClass(n,[{key:"get",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ns.THROW_IF_NOT_FOUND,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:he.Default;return t===ns||t===cu||t===Vo?this:this._r3Injector.get(t,e,n)}},{key:"destroy",value:function(){var t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach((function(t){return t()})),this.destroyCbs=null}},{key:"onDestroy",value:function(t){this.destroyCbs.push(t)}}]),n}(cu),Su=function(t){_inherits(n,t);var e=_createSuper(n);function n(t){var r,i,o;return _classCallCheck(this,n),(r=e.call(this)).moduleType=t,null!==ae(t)&&(i=t,o=new Set,function t(e){var n=ae(e,!0),r=n.id;null!==r&&(function(t,e,n){if(e&&e!==n)throw new Error("Duplicate module registered for ".concat(t," - ").concat(ut(e)," vs ").concat(ut(e.name)))}(r,ku.get(r),e),ku.set(r,e));var i,s=_createForOfIteratorHelper(ai(n.imports));try{for(s.s();!(i=s.n()).done;){var a=i.value;o.has(a)||(o.add(a),t(a))}}catch(u){s.e(u)}finally{s.f()}}(i)),r}return _createClass(n,[{key:"create",value:function(t){return new Eu(this.moduleType,t)}}]),n}(lu);function Tu(t,e,n){var r=rn()+t,i=Qe();return i[r]===Hi?ps(i,r,n?e.call(n):e()):function(t,e){return t[e]}(i,r)}function Ou(t,e,n,r){return Iu(Qe(),rn(),t,e,n,r)}function Iu(t,e,n,r,i,o){var s=e+n;return vs(t,s,i)?ps(t,s+1,o?r.call(o,i):r(i)):function(t,e){var n=t[e];return n===Hi?void 0:n}(t,s+1)}function xu(t,e){var n,r=Ke(),i=t+20;r.firstCreatePass?(n=function(t,e){if(e)for(var n=e.length-1;n>=0;n--){var r=e[n];if(t===r.name)return r}throw new fr("302","The pipe '".concat(t,"' could not be found!"))}(e,r.pipeRegistry),r.data[i]=n,n.onDestroy&&(r.destroyHooks||(r.destroyHooks=[])).push(i,n.onDestroy)):n=r.data[i];var o=n.factory||(n.factory=hr(n.type)),s=fe(bs);try{var a=jr(!1),u=o();return jr(a),function(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}(r,Qe(),i,u),u}finally{fe(s)}}function Au(t,e,n){var r=t+20,i=Qe(),o=Le(i,r);return function(t,e){return hs.isWrapped(e)&&(e=hs.unwrap(e),t[on()]=Hi),e}(i,function(t,e){return t[1].data[e].pure}(i,r)?Iu(i,rn(),e,o.transform,n,o):o.transform(n))}var Pu=function(t){_inherits(n,t);var e=_createSuper(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return _classCallCheck(this,n),(t=e.call(this)).__isAsync=r,t}return _createClass(n,[{key:"emit",value:function(t){_get(_getPrototypeOf(n.prototype),"next",this).call(this,t)}},{key:"subscribe",value:function(t,e,r){var i,o=function(t){return null},s=function(){return null};t&&"object"==typeof t?(i=this.__isAsync?function(e){setTimeout((function(){return t.next(e)}))}:function(e){t.next(e)},t.error&&(o=this.__isAsync?function(e){setTimeout((function(){return t.error(e)}))}:function(e){t.error(e)}),t.complete&&(s=this.__isAsync?function(){setTimeout((function(){return t.complete()}))}:function(){t.complete()})):(i=this.__isAsync?function(e){setTimeout((function(){return t(e)}))}:function(e){t(e)},e&&(o=this.__isAsync?function(t){setTimeout((function(){return e(t)}))}:function(t){e(t)}),r&&(s=this.__isAsync?function(){setTimeout((function(){return r()}))}:function(){r()}));var a=_get(_getPrototypeOf(n.prototype),"subscribe",this).call(this,i,o,s);return t instanceof f&&t.add(a),a}}]),n}(T);function Ru(){return this._results[ls()]()}var Nu=function(){function t(){_classCallCheck(this,t),this.dirty=!0,this._results=[],this.changes=new Pu,this.length=0;var e=ls(),n=t.prototype;n[e]||(n[e]=Ru)}return _createClass(t,[{key:"map",value:function(t){return this._results.map(t)}},{key:"filter",value:function(t){return this._results.filter(t)}},{key:"find",value:function(t){return this._results.find(t)}},{key:"reduce",value:function(t,e){return this._results.reduce(t,e)}},{key:"forEach",value:function(t){this._results.forEach(t)}},{key:"some",value:function(t){return this._results.some(t)}},{key:"toArray",value:function(){return this._results.slice()}},{key:"toString",value:function(){return this._results.toString()}},{key:"reset",value:function(t){this._results=function t(e,n){void 0===n&&(n=e);for(var r=0;r<e.length;r++){var i=e[r];Array.isArray(i)?(n===e&&(n=e.slice(0,r)),t(i,n)):n!==e&&n.push(i)}return n}(t),this.dirty=!1,this.length=this._results.length,this.last=this._results[this.length-1],this.first=this._results[0]}},{key:"notifyOnChanges",value:function(){this.changes.emit(this)}},{key:"setDirty",value:function(){this.dirty=!0}},{key:"destroy",value:function(){this.changes.complete(),this.changes.unsubscribe()}}]),t}(),Du=function(){function t(e){_classCallCheck(this,t),this.queryList=e,this.matches=null}return _createClass(t,[{key:"clone",value:function(){return new t(this.queryList)}},{key:"setDirty",value:function(){this.queryList.setDirty()}}]),t}(),zu=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];_classCallCheck(this,t),this.queries=e}return _createClass(t,[{key:"createEmbeddedView",value:function(e){var n=e.queries;if(null!==n){for(var r=null!==e.contentQueries?e.contentQueries[0]:n.length,i=[],o=0;o<r;o++){var s=n.getByIndex(o);i.push(this.queries[s.indexInDeclarationView].clone())}return new t(i)}return null}},{key:"insertView",value:function(t){this.dirtyQueriesWithMatches(t)}},{key:"detachView",value:function(t){this.dirtyQueriesWithMatches(t)}},{key:"dirtyQueriesWithMatches",value:function(t){for(var e=0;e<this.queries.length;e++)null!==$u(t,e).matches&&this.queries[e].setDirty()}}]),t}(),ju=function t(e,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;_classCallCheck(this,t),this.predicate=e,this.descendants=n,this.isStatic=r,this.read=i},Lu=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];_classCallCheck(this,t),this.queries=e}return _createClass(t,[{key:"elementStart",value:function(t,e){for(var n=0;n<this.queries.length;n++)this.queries[n].elementStart(t,e)}},{key:"elementEnd",value:function(t){for(var e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}},{key:"embeddedTView",value:function(e){for(var n=null,r=0;r<this.length;r++){var i=null!==n?n.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,null!==n?n.push(o):n=[o])}return null!==n?new t(n):null}},{key:"template",value:function(t,e){for(var n=0;n<this.queries.length;n++)this.queries[n].template(t,e)}},{key:"getByIndex",value:function(t){return this.queries[t]}},{key:"track",value:function(t){this.queries.push(t)}},{key:"length",get:function(){return this.queries.length}}]),t}(),Fu=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;_classCallCheck(this,t),this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}return _createClass(t,[{key:"elementStart",value:function(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}},{key:"elementEnd",value:function(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}},{key:"template",value:function(t,e){this.elementStart(t,e)}},{key:"embeddedTView",value:function(e,n){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,n),new t(this.metadata)):null}},{key:"isApplyingToNode",value:function(t){if(this._appliesToNextNode&&!1===this.metadata.descendants){for(var e=this._declarationNodeIndex,n=t.parent;null!==n&&8&n.type&&n.index!==e;)n=n.parent;return e===(null!==n?n.index:-1)}return this._appliesToNextNode}},{key:"matchTNode",value:function(t,e){var n=this.metadata.predicate;if(Array.isArray(n))for(var r=0;r<n.length;r++){var i=n[r];this.matchTNodeWithReadOption(t,e,Mu(e,i)),this.matchTNodeWithReadOption(t,e,Yr(e,t,i,!1,!1))}else n===su?4&e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,Yr(e,t,n,!1,!1))}},{key:"matchTNodeWithReadOption",value:function(t,e,n){if(null!==n){var r=this.metadata.read;if(null!==r)if(r===Na||r===fu||r===su&&4&e.type)this.addMatch(e.index,-2);else{var i=Yr(e,t,r,!1,!1);null!==i&&this.addMatch(e.index,i)}else this.addMatch(e.index,n)}}},{key:"addMatch",value:function(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}]),t}();function Mu(t,e){var n=t.localNames;if(null!==n)for(var r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1];return null}function Vu(t,e,n,r){return-1===n?function(t,e){return 11&t.type?Pa(t,e):4&t.type?uu(t,e):null}(e,t):-2===n?function(t,e,n){return n===Na?Pa(e,t):n===su?uu(e,t):n===fu?yu(e,t):void 0}(t,e,r):$r(t,t[1],n,e)}function Uu(t,e,n,r){var i=e[19].queries[r];if(null===i.matches){for(var o=t.data,s=n.matches,a=[],u=0;u<s.length;u+=2){var c=s[u];a.push(c<0?null:Vu(e,o[c],s[u+1],n.metadata.read))}i.matches=a}return i.matches}function Bu(t){var e=Qe(),n=Ke(),r=ln();hn(r+1);var i=$u(n,r);if(t.dirty&&Ve(e)===i.metadata.isStatic){if(null===i.matches)t.reset([]);else{var o=i.crossesNgTemplate?function t(e,n,r,i){var o=e.queries.getByIndex(r),s=o.matches;if(null!==s)for(var a=Uu(e,n,o,r),u=0;u<s.length;u+=2){var c=s[u];if(c>0)i.push(a[u/2]);else{for(var l=s[u+1],h=n[-c],f=10;f<h.length;f++){var d=h[f];d[17]===d[3]&&t(d[1],d,l,i)}if(null!==h[9])for(var p=h[9],v=0;v<p.length;v++){var y=p[v];t(y[1],y,l,i)}}}return i}(n,e,r,[]):Uu(n,e,i,r);t.reset(o),t.notifyOnChanges()}return!0}return!1}function qu(t,e,n){Wu(Ke(),Qe(),t,e,n,!0)}function Hu(t,e,n){Wu(Ke(),Qe(),t,e,n,!1)}function Wu(t,e,n,r,i,o){t.firstCreatePass&&(Yu(t,new ju(n,r,o,i),-1),o&&(t.staticViewQueries=!0)),Ku(t,e)}function Gu(t,e,n,r){!function(t,e,n,r,i,o,s,a){t.firstCreatePass&&(Yu(t,new ju(n,r,!1,i),s.index),function(t,e){var n=t.contentQueries||(t.contentQueries=[]);e!==(n.length?n[n.length-1]:-1)&&n.push(t.queries.length-1,e)}(t,a)),Ku(t,e)}(Ke(),Qe(),e,n,r,0,$e(),t)}function Qu(){return t=Qe(),e=ln(),t[19].queries[e].queryList;var t,e}function Ku(t,e){var n=new Nu;fo(t,e,n,n.destroy),null===e[19]&&(e[19]=new zu),e[19].queries.push(new Du(n))}function Yu(t,e,n){null===t.queries&&(t.queries=new Lu),t.queries.track(new Fu(e,n))}function $u(t,e){return t.queries.getByIndex(e)}function Xu(t,e){return uu(t,e)}var Zu=new wt("Application Initializer"),Ju=function(){var t=function(){function t(e){var n=this;_classCallCheck(this,t),this.appInits=e,this.resolve=Aa,this.reject=Aa,this.initialized=!1,this.done=!1,this.donePromise=new Promise((function(t,e){n.resolve=t,n.reject=e}))}return _createClass(t,[{key:"runInitializers",value:function(){var t=this;if(!this.initialized){var e=[],n=function(){t.done=!0,t.resolve()};if(this.appInits)for(var r=0;r<this.appInits.length;r++){var i=this.appInits[r]();xs(i)&&e.push(i)}Promise.all(e).then((function(){n()})).catch((function(e){t.reject(e)})),0===e.length&&n(),this.initialized=!0}}}]),t}();return t.\u0275fac=function(e){return new(e||t)(be(Zu,8))},t.\u0275prov=ft({token:t,factory:t.\u0275fac}),t}(),tc=new wt("AppId"),ec={provide:tc,useFactory:function(){return"".concat(nc()).concat(nc()).concat(nc())},deps:[]};function nc(){return String.fromCharCode(97+Math.floor(25*Math.random()))}var rc=new wt("Platform Initializer"),ic=new wt("Platform ID"),oc=new wt("appBootstrapListener"),sc=function(){var t=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"log",value:function(t){console.log(t)}},{key:"warn",value:function(t){console.warn(t)}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ft({token:t,factory:t.\u0275fac}),t}(),ac=new wt("LocaleId"),uc=new wt("DefaultCurrencyCode"),cc=function t(e,n){_classCallCheck(this,t),this.ngModuleFactory=e,this.componentFactories=n},lc=function(t){return new Su(t)},hc=lc,fc=function(t){return Promise.resolve(lc(t))},dc=function(t){var e=lc(t),n=ai(ae(t).declarations).reduce((function(t,e){var n=se(e);return n&&t.push(new wu(n)),t}),[]);return new cc(e,n)},pc=dc,vc=function(t){return Promise.resolve(dc(t))},yc=function(){var t=function(){function t(){_classCallCheck(this,t),this.compileModuleSync=hc,this.compileModuleAsync=fc,this.compileModuleAndAllComponentsSync=pc,this.compileModuleAndAllComponentsAsync=vc}return _createClass(t,[{key:"clearCache",value:function(){}},{key:"clearCacheFor",value:function(t){}},{key:"getModuleId",value:function(t){}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ft({token:t,factory:t.\u0275fac}),t}(),gc=Promise.resolve(0);function mc(t){"undefined"==typeof Zone?gc.then((function(){t&&t.apply(null,null)})):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}var _c=function(){function t(e){var n,r,i=e.enableLongStackTrace,o=void 0!==i&&i,s=e.shouldCoalesceEventChangeDetection,a=void 0!==s&&s;if(_classCallCheck(this,t),this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Pu(!1),this.onMicrotaskEmpty=new Pu(!1),this.onStable=new Pu(!1),this.onError=new Pu(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched(),this._nesting=0,this._outer=this._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(this._inner=this._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(this._inner=this._inner.fork(Zone.longStackTraceZoneSpec)),this.shouldCoalesceEventChangeDetection=a,this.lastRequestAnimationFrameId=-1,this.nativeRequestAnimationFrame=function(){var t=It.requestAnimationFrame,e=It.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&e){var n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);var r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,r=!!(n=this).shouldCoalesceEventChangeDetection&&n.nativeRequestAnimationFrame&&function(){!function(t){-1===t.lastRequestAnimationFrameId&&(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(It,(function(){t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",(function(){t.lastRequestAnimationFrameId=-1,kc(t),Cc(t)}),void 0,(function(){}),(function(){}))),t.fakeTopEventTask.invoke()})),kc(t))}(n)},n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0,maybeDelayChangeDetection:r},onInvokeTask:function(t,e,i,o,s,a){try{return Ec(n),t.invokeTask(i,o,s,a)}finally{r&&"eventTask"===o.type&&r(),Sc(n)}},onInvoke:function(t,e,r,i,o,s,a){try{return Ec(n),t.invoke(r,i,o,s,a)}finally{Sc(n)}},onHasTask:function(t,e,r,i){t.hasTask(r,i),e===r&&("microTask"==i.change?(n._hasPendingMicrotasks=i.microTask,kc(n),Cc(n)):"macroTask"==i.change&&(n.hasPendingMacrotasks=i.macroTask))},onHandleError:function(t,e,r,i){return t.handleError(r,i),n.runOutsideAngular((function(){return n.onError.emit(i)})),!1}})}return _createClass(t,[{key:"run",value:function(t,e,n){return this._inner.run(t,e,n)}},{key:"runTask",value:function(t,e,n,r){var i=this._inner,o=i.scheduleEventTask("NgZoneEvent: "+r,t,wc,bc,bc);try{return i.runTask(o,e,n)}finally{i.cancelTask(o)}}},{key:"runGuarded",value:function(t,e,n){return this._inner.runGuarded(t,e,n)}},{key:"runOutsideAngular",value:function(t){return this._outer.run(t)}}],[{key:"isInAngularZone",value:function(){return!0===Zone.current.get("isAngularZone")}},{key:"assertInAngularZone",value:function(){if(!t.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}},{key:"assertNotInAngularZone",value:function(){if(t.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}}]),t}();function bc(){}var wc={};function Cc(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular((function(){return t.onStable.emit(null)}))}finally{t.isStable=!0}}}function kc(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||t.shouldCoalesceEventChangeDetection&&-1!==t.lastRequestAnimationFrameId)}function Ec(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function Sc(t){t._nesting--,Cc(t)}var Tc,Oc=function(){function t(){_classCallCheck(this,t),this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Pu,this.onMicrotaskEmpty=new Pu,this.onStable=new Pu,this.onError=new Pu}return _createClass(t,[{key:"run",value:function(t,e,n){return t.apply(e,n)}},{key:"runGuarded",value:function(t,e,n){return t.apply(e,n)}},{key:"runOutsideAngular",value:function(t){return t()}},{key:"runTask",value:function(t,e,n,r){return t.apply(e,n)}}]),t}(),Ic=function(){var t=function(){function t(e){var n=this;_classCallCheck(this,t),this._ngZone=e,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),e.run((function(){n.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")}))}return _createClass(t,[{key:"_watchAngularEvents",value:function(){var t=this;this._ngZone.onUnstable.subscribe({next:function(){t._didWork=!0,t._isZoneStable=!1}}),this._ngZone.runOutsideAngular((function(){t._ngZone.onStable.subscribe({next:function(){_c.assertNotInAngularZone(),mc((function(){t._isZoneStable=!0,t._runCallbacksIfReady()}))}})}))}},{key:"increasePendingRequestCount",value:function(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}},{key:"decreasePendingRequestCount",value:function(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}},{key:"isStable",value:function(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}},{key:"_runCallbacksIfReady",value:function(){var t=this;if(this.isStable())mc((function(){for(;0!==t._callbacks.length;){var e=t._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb(t._didWork)}t._didWork=!1}));else{var e=this.getPendingTasks();this._callbacks=this._callbacks.filter((function(t){return!t.updateCb||!t.updateCb(e)||(clearTimeout(t.timeoutId),!1)})),this._didWork=!0}}},{key:"getPendingTasks",value:function(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map((function(t){return{source:t.source,creationLocation:t.creationLocation,data:t.data}})):[]}},{key:"addCallback",value:function(t,e,n){var r=this,i=-1;e&&e>0&&(i=setTimeout((function(){r._callbacks=r._callbacks.filter((function(t){return t.timeoutId!==i})),t(r._didWork,r.getPendingTasks())}),e)),this._callbacks.push({doneCb:t,timeoutId:i,updateCb:n})}},{key:"whenStable",value:function(t,e,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(t,e,n),this._runCallbacksIfReady()}},{key:"getPendingRequestCount",value:function(){return this._pendingCount}},{key:"findProviders",value:function(t,e,n){return[]}}]),t}();return t.\u0275fac=function(e){return new(e||t)(be(_c))},t.\u0275prov=ft({token:t,factory:t.\u0275fac}),t}(),xc=function(){var t=function(){function t(){_classCallCheck(this,t),this._applications=new Map,Ac.addToWindow(this)}return _createClass(t,[{key:"registerApplication",value:function(t,e){this._applications.set(t,e)}},{key:"unregisterApplication",value:function(t){this._applications.delete(t)}},{key:"unregisterAllApplications",value:function(){this._applications.clear()}},{key:"getTestability",value:function(t){return this._applications.get(t)||null}},{key:"getAllTestabilities",value:function(){return Array.from(this._applications.values())}},{key:"getAllRootElements",value:function(){return Array.from(this._applications.keys())}},{key:"findTestabilityInTree",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return Ac.findTestabilityInTree(this,t,e)}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ft({token:t,factory:t.\u0275fac}),t}(),Ac=new(function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"addToWindow",value:function(t){}},{key:"findTestabilityInTree",value:function(t,e,n){return null}}]),t}()),Pc=new wt("AllowMultipleToken"),Rc=function t(e,n){_classCallCheck(this,t),this.name=e,this.token=n};function Nc(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r="Platform: "+e,i=new wt(r);return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],o=Dc();if(!o||o.injector.get(Pc,!1))if(t)t(n.concat(e).concat({provide:i,useValue:!0}));else{var s=n.concat(e).concat({provide:i,useValue:!0},{provide:Bo,useValue:"platform"});!function(t){if(Tc&&!Tc.destroyed&&!Tc.injector.get(Pc,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");Tc=t.get(zc);var e=t.get(rc,null);e&&e.forEach((function(t){return t()}))}(ns.create({providers:s,name:r}))}return function(t){var e=Dc();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(i)}}function Dc(){return Tc&&!Tc.destroyed?Tc:null}var zc=function(){var t=function(){function t(e){_classCallCheck(this,t),this._injector=e,this._modules=[],this._destroyListeners=[],this._destroyed=!1}return _createClass(t,[{key:"bootstrapModuleFactory",value:function(t,e){var n,r,i=this,o=(n=e?e.ngZone:void 0,r=e&&e.ngZoneEventCoalescing||!1,"noop"===n?new Oc:("zone.js"===n?void 0:n)||new _c({enableLongStackTrace:Ln(),shouldCoalesceEventChangeDetection:r})),s=[{provide:_c,useValue:o}];return o.run((function(){var e=ns.create({providers:s,parent:i.injector,name:t.moduleType.name}),n=t.create(e),r=n.injector.get(ii,null);if(!r)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return n.onDestroy((function(){return Mc(i._modules,n)})),o.runOutsideAngular((function(){return o.onError.subscribe({next:function(t){r.handleError(t)}})})),function(t,e,r){try{var o=((s=n.injector.get(Ju)).runInitializers(),s.donePromise.then((function(){return ma(n.injector.get(ac,"en-US")||"en-US"),i._moduleDoBootstrap(n),n})));return xs(o)?o.catch((function(n){throw e.runOutsideAngular((function(){return t.handleError(n)})),n})):o}catch(a){throw e.runOutsideAngular((function(){return t.handleError(a)})),a}var s}(r,o)}))}},{key:"bootstrapModule",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=jc({},n);return function(t,e,n){var r=new Su(n);return Promise.resolve(r)}(0,0,t).then((function(t){return e.bootstrapModuleFactory(t,r)}))}},{key:"_moduleDoBootstrap",value:function(t){var e=t.injector.get(Fc);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach((function(t){return e.bootstrap(t)}));else{if(!t.instance.ngDoBootstrap)throw new Error("The module ".concat(ut(t.instance.constructor),' was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.'));t.instance.ngDoBootstrap(e)}this._modules.push(t)}},{key:"onDestroy",value:function(t){this._destroyListeners.push(t)}},{key:"destroy",value:function(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach((function(t){return t.destroy()})),this._destroyListeners.forEach((function(t){return t()})),this._destroyed=!0}},{key:"injector",get:function(){return this._injector}},{key:"destroyed",get:function(){return this._destroyed}}]),t}();return t.\u0275fac=function(e){return new(e||t)(be(ns))},t.\u0275prov=ft({token:t,factory:t.\u0275fac}),t}();function jc(t,e){return Array.isArray(e)?e.reduce(jc,t):Object.assign(Object.assign({},t),e)}var Lc,Fc=((Lc=function(){function t(e,n,r,i,o,s){var a=this;_classCallCheck(this,t),this._zone=e,this._console=n,this._injector=r,this._exceptionHandler=i,this._componentFactoryResolver=o,this._initStatus=s,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._enforceNoNewChanges=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._enforceNoNewChanges=Ln(),this._zone.onMicrotaskEmpty.subscribe({next:function(){a._zone.run((function(){a.tick()}))}});var u=new b((function(t){a._stable=a._zone.isStable&&!a._zone.hasPendingMacrotasks&&!a._zone.hasPendingMicrotasks,a._zone.runOutsideAngular((function(){t.next(a._stable),t.complete()}))})),c=new b((function(t){var e;a._zone.runOutsideAngular((function(){e=a._zone.onStable.subscribe((function(){_c.assertNotInAngularZone(),mc((function(){a._stable||a._zone.hasPendingMacrotasks||a._zone.hasPendingMicrotasks||(a._stable=!0,t.next(!0))}))}))}));var n=a._zone.onUnstable.subscribe((function(){_c.assertInAngularZone(),a._stable&&(a._stable=!1,a._zone.runOutsideAngular((function(){t.next(!1)})))}));return function(){e.unsubscribe(),n.unsubscribe()}}));this.isStable=Q(u,c.pipe(et()))}return _createClass(t,[{key:"bootstrap",value:function(t,e){var n,r=this;if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");n=t instanceof Oa?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);var i=n.isBoundToModule?void 0:this._injector.get(cu),o=n.create(ns.NULL,[],e||n.selector,i);o.onDestroy((function(){r._unloadComponent(o)}));var s=o.injector.get(Ic,null);return s&&o.injector.get(xc).registerApplication(o.location.nativeElement,s),this._loadComponent(o),Ln()&&this._console.log("Angular is running in development mode. Call enableProdMode() to enable production mode."),o}},{key:"tick",value:function(){var t=this;if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;var e,n=_createForOfIteratorHelper(this._views);try{for(n.s();!(e=n.n()).done;)e.value.detectChanges()}catch(o){n.e(o)}finally{n.f()}if(this._enforceNoNewChanges){var r,i=_createForOfIteratorHelper(this._views);try{for(i.s();!(r=i.n()).done;)r.value.checkNoChanges()}catch(o){i.e(o)}finally{i.f()}}}catch(s){this._zone.runOutsideAngular((function(){return t._exceptionHandler.handleError(s)}))}finally{this._runningTick=!1}}},{key:"attachView",value:function(t){var e=t;this._views.push(e),e.attachToAppRef(this)}},{key:"detachView",value:function(t){var e=t;Mc(this._views,e),e.detachFromAppRef()}},{key:"_loadComponent",value:function(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(oc,[]).concat(this._bootstrapListeners).forEach((function(e){return e(t)}))}},{key:"_unloadComponent",value:function(t){this.detachView(t.hostView),Mc(this.components,t)}},{key:"ngOnDestroy",value:function(){this._views.slice().forEach((function(t){return t.destroy()}))}},{key:"viewCount",get:function(){return this._views.length}}]),t}()).\u0275fac=function(t){return new(t||Lc)(be(_c),be(sc),be(ns),be(ii),be(xa),be(Ju))},Lc.\u0275prov=ft({token:Lc,factory:Lc.\u0275fac}),Lc);function Mc(t,e){var n=t.indexOf(e);n>-1&&t.splice(n,1)}var Vc=function t(){_classCallCheck(this,t)},Uc=function t(){_classCallCheck(this,t)},Bc={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"},qc=function(){var t=function(){function t(e,n){_classCallCheck(this,t),this._compiler=e,this._config=n||Bc}return _createClass(t,[{key:"load",value:function(t){return this.loadAndCompile(t)}},{key:"loadAndCompile",value:function(t){var e=this,r=_slicedToArray(t.split("#"),2),i=r[0],o=r[1];return void 0===o&&(o="default"),n("zn8P")(i).then((function(t){return t[o]})).then((function(t){return Hc(t,i,o)})).then((function(t){return e._compiler.compileModuleAsync(t)}))}},{key:"loadFactory",value:function(t){var e=_slicedToArray(t.split("#"),2),r=e[0],i=e[1],o="NgFactory";return void 0===i&&(i="default",o=""),n("zn8P")(this._config.factoryPathPrefix+r+this._config.factoryPathSuffix).then((function(t){return t[i+o]})).then((function(t){return Hc(t,r,i)}))}}]),t}();return t.\u0275fac=function(e){return new(e||t)(be(yc),be(Uc,8))},t.\u0275prov=ft({token:t,factory:t.\u0275fac}),t}();function Hc(t,e,n){if(!t)throw new Error("Cannot find '".concat(n,"' in '").concat(e,"'"));return t}var Wc=Nc(null,"core",[{provide:ic,useValue:"unknown"},{provide:zc,deps:[ns]},{provide:xc,deps:[]},{provide:sc,deps:[]}]),Gc=[{provide:Fc,useClass:Fc,deps:[_c,sc,ns,ii,xa,Ju]},{provide:bu,deps:[_c],useFactory:function(t){var e=[];return t.onStable.subscribe((function(){for(;e.length;)e.pop()()})),function(t){e.push(t)}}},{provide:Ju,useClass:Ju,deps:[[new ot,Zu]]},{provide:yc,useClass:yc,deps:[]},ec,{provide:$a,useFactory:function(){return ru},deps:[]},{provide:Xa,useFactory:function(){return iu},deps:[]},{provide:ac,useFactory:function(t){return ma(t=t||"undefined"!=typeof $localize&&$localize.locale||"en-US"),t},deps:[[new it(ac),new ot,new at]]},{provide:uc,useValue:"USD"}],Qc=function(){var t=function t(e){_classCallCheck(this,t)};return t.\u0275mod=re({type:t}),t.\u0275inj=dt({factory:function(e){return new(e||t)(be(Fc))},providers:Gc}),t}(),Kc={apiKey:"AIzaSyAYc9THFlWORBHBNRmDa-va-IeC_DS62Q8",authDomain:"duygucakir-2538d.firebaseapp.com",databaseURL:"https://duygucakir-2538d.firebaseio.com",projectId:"duygucakir-2538d",storageBucket:"duygucakir-2538d.appspot.com",messagingSenderId:"67539697236",appId:"1:67539697236:web:8e55efb23b55460795f7c1",measurementId:"G-PM3CQWFRV1"},Yc=null;function $c(){return Yc}var Xc,Zc=new wt("DocumentToken"),Jc=((Xc=function t(){_classCallCheck(this,t)}).\u0275fac=function(t){return new(t||Xc)},Xc.\u0275prov=ft({factory:tl,token:Xc,providedIn:"platform"}),Xc);function tl(){return be(rl)}var el,nl=new wt("Location Initialized"),rl=((el=function(t){_inherits(n,t);var e=_createSuper(n);function n(t){var r;return _classCallCheck(this,n),(r=e.call(this))._doc=t,r._init(),r}return _createClass(n,[{key:"_init",value:function(){this.location=$c().getLocation(),this._history=$c().getHistory()}},{key:"getBaseHrefFromDOM",value:function(){return $c().getBaseHref(this._doc)}},{key:"onPopState",value:function(t){$c().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",t,!1)}},{key:"onHashChange",value:function(t){$c().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",t,!1)}},{key:"pushState",value:function(t,e,n){il()?this._history.pushState(t,e,n):this.location.hash=n}},{key:"replaceState",value:function(t,e,n){il()?this._history.replaceState(t,e,n):this.location.hash=n}},{key:"forward",value:function(){this._history.forward()}},{key:"back",value:function(){this._history.back()}},{key:"getState",value:function(){return this._history.state}},{key:"href",get:function(){return this.location.href}},{key:"protocol",get:function(){return this.location.protocol}},{key:"hostname",get:function(){return this.location.hostname}},{key:"port",get:function(){return this.location.port}},{key:"pathname",get:function(){return this.location.pathname},set:function(t){this.location.pathname=t}},{key:"search",get:function(){return this.location.search}},{key:"hash",get:function(){return this.location.hash}}]),n}(Jc)).\u0275fac=function(t){return new(t||el)(be(Zc))},el.\u0275prov=ft({factory:ol,token:el,providedIn:"platform"}),el);function il(){return!!window.history.pushState}function ol(){return new rl(be(Zc))}function sl(t,e){if(0==t.length)return e;if(0==e.length)return t;var n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function al(t){var e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function ul(t){return t&&"?"!==t[0]?"?"+t:t}var cl,ll=((cl=function t(){_classCallCheck(this,t)}).\u0275fac=function(t){return new(t||cl)},cl.\u0275prov=ft({factory:hl,token:cl,providedIn:"root"}),cl);function hl(t){var e=be(Zc).location;return new yl(be(Jc),e&&e.origin||"")}var fl,dl,pl,vl=new wt("appBaseHref"),yl=((pl=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r){var i;if(_classCallCheck(this,n),(i=e.call(this))._platformLocation=t,null==r&&(r=i._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");return i._baseHref=r,_possibleConstructorReturn(i)}return _createClass(n,[{key:"onPopState",value:function(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}},{key:"getBaseHref",value:function(){return this._baseHref}},{key:"prepareExternalUrl",value:function(t){return sl(this._baseHref,t)}},{key:"path",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this._platformLocation.pathname+ul(this._platformLocation.search),n=this._platformLocation.hash;return n&&t?"".concat(e).concat(n):e}},{key:"pushState",value:function(t,e,n,r){var i=this.prepareExternalUrl(n+ul(r));this._platformLocation.pushState(t,e,i)}},{key:"replaceState",value:function(t,e,n,r){var i=this.prepareExternalUrl(n+ul(r));this._platformLocation.replaceState(t,e,i)}},{key:"forward",value:function(){this._platformLocation.forward()}},{key:"back",value:function(){this._platformLocation.back()}}]),n}(ll)).\u0275fac=function(t){return new(t||pl)(be(Jc),be(vl,8))},pl.\u0275prov=ft({token:pl,factory:pl.\u0275fac}),pl),gl=((dl=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r){var i;return _classCallCheck(this,n),(i=e.call(this))._platformLocation=t,i._baseHref="",null!=r&&(i._baseHref=r),i}return _createClass(n,[{key:"onPopState",value:function(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}},{key:"getBaseHref",value:function(){return this._baseHref}},{key:"path",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var t=this._platformLocation.hash;return null==t&&(t="#"),t.length>0?t.substring(1):t}},{key:"prepareExternalUrl",value:function(t){var e=sl(this._baseHref,t);return e.length>0?"#"+e:e}},{key:"pushState",value:function(t,e,n,r){var i=this.prepareExternalUrl(n+ul(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(t,e,i)}},{key:"replaceState",value:function(t,e,n,r){var i=this.prepareExternalUrl(n+ul(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(t,e,i)}},{key:"forward",value:function(){this._platformLocation.forward()}},{key:"back",value:function(){this._platformLocation.back()}}]),n}(ll)).\u0275fac=function(t){return new(t||dl)(be(Jc),be(vl,8))},dl.\u0275prov=ft({token:dl,factory:dl.\u0275fac}),dl),ml=((fl=function(){function t(e,n){var r=this;_classCallCheck(this,t),this._subject=new Pu,this._urlChangeListeners=[],this._platformStrategy=e;var i=this._platformStrategy.getBaseHref();this._platformLocation=n,this._baseHref=al(bl(i)),this._platformStrategy.onPopState((function(t){r._subject.emit({url:r.path(!0),pop:!0,state:t.state,type:t.type})}))}return _createClass(t,[{key:"path",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.normalize(this._platformStrategy.path(t))}},{key:"getState",value:function(){return this._platformLocation.getState()}},{key:"isCurrentPathEqualTo",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return this.path()==this.normalize(t+ul(e))}},{key:"normalize",value:function(e){return t.stripTrailingSlash(function(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,bl(e)))}},{key:"prepareExternalUrl",value:function(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}},{key:"go",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._platformStrategy.pushState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ul(e)),n)}},{key:"replaceState",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._platformStrategy.replaceState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ul(e)),n)}},{key:"forward",value:function(){this._platformStrategy.forward()}},{key:"back",value:function(){this._platformStrategy.back()}},{key:"onUrlChange",value:function(t){var e=this;this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe((function(t){e._notifyUrlChangeListeners(t.url,t.state)})))}},{key:"_notifyUrlChangeListeners",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1?arguments[1]:void 0;this._urlChangeListeners.forEach((function(n){return n(t,e)}))}},{key:"subscribe",value:function(t,e,n){return this._subject.subscribe({next:t,error:e,complete:n})}}]),t}()).\u0275fac=function(t){return new(t||fl)(be(ll),be(Jc))},fl.normalizeQueryParams=ul,fl.joinWithSlash=sl,fl.stripTrailingSlash=al,fl.\u0275prov=ft({factory:_l,token:fl,providedIn:"root"}),fl);function _l(){return new ml(be(ll),be(Jc))}function bl(t){return t.replace(/\/index.html$/,"")}var wl,Cl=function(t){return t[t.Zero=0]="Zero",t[t.One=1]="One",t[t.Two=2]="Two",t[t.Few=3]="Few",t[t.Many=4]="Many",t[t.Other=5]="Other",t}({}),kl=function t(){_classCallCheck(this,t)},El=((wl=function(t){_inherits(n,t);var e=_createSuper(n);function n(t){var r;return _classCallCheck(this,n),(r=e.call(this)).locale=t,r}return _createClass(n,[{key:"getPluralCategory",value:function(t,e){switch(function(t){return function(t){var e=function(t){return t.toLowerCase().replace(/_/g,"-")}(t),n=ya(e);if(n)return n;var r=e.split("-")[0];if(n=ya(r))return n;if("en"===r)return pa;throw new Error('Missing locale data for the locale "'.concat(t,'".'))}(t)[ga.PluralCase]}(e||this.locale)(t)){case Cl.Zero:return"zero";case Cl.One:return"one";case Cl.Two:return"two";case Cl.Few:return"few";case Cl.Many:return"many";default:return"other"}}}]),n}(kl)).\u0275fac=function(t){return new(t||wl)(be(ac))},wl.\u0275prov=ft({token:wl,factory:wl.\u0275fac}),wl);function Sl(t,e){e=encodeURIComponent(e);var n,r=_createForOfIteratorHelper(t.split(";"));try{for(r.s();!(n=r.n()).done;){var i=n.value,o=i.indexOf("="),s=_slicedToArray(-1==o?[i,""]:[i.slice(0,o),i.slice(o+1)],2),a=s[0],u=s[1];if(a.trim()===e)return decodeURIComponent(u)}}catch(c){r.e(c)}finally{r.f()}return null}var Tl,Ol,Il,xl=((Tl=function(){function t(e,n,r,i){_classCallCheck(this,t),this._iterableDiffers=e,this._keyValueDiffers=n,this._ngEl=r,this._renderer=i,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}return _createClass(t,[{key:"ngDoCheck",value:function(){if(this._iterableDiffer){var t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){var e=this._keyValueDiffer.diff(this._rawClass);e&&this._applyKeyValueChanges(e)}}},{key:"_applyKeyValueChanges",value:function(t){var e=this;t.forEachAddedItem((function(t){return e._toggleClass(t.key,t.currentValue)})),t.forEachChangedItem((function(t){return e._toggleClass(t.key,t.currentValue)})),t.forEachRemovedItem((function(t){t.previousValue&&e._toggleClass(t.key,!1)}))}},{key:"_applyIterableChanges",value:function(t){var e=this;t.forEachAddedItem((function(t){if("string"!=typeof t.item)throw new Error("NgClass can only toggle CSS classes expressed as strings, got "+ut(t.item));e._toggleClass(t.item,!0)})),t.forEachRemovedItem((function(t){return e._toggleClass(t.item,!1)}))}},{key:"_applyClasses",value:function(t){var e=this;t&&(Array.isArray(t)||t instanceof Set?t.forEach((function(t){return e._toggleClass(t,!0)})):Object.keys(t).forEach((function(n){return e._toggleClass(n,!!t[n])})))}},{key:"_removeClasses",value:function(t){var e=this;t&&(Array.isArray(t)||t instanceof Set?t.forEach((function(t){return e._toggleClass(t,!1)})):Object.keys(t).forEach((function(t){return e._toggleClass(t,!1)})))}},{key:"_toggleClass",value:function(t,e){var n=this;(t=t.trim())&&t.split(/\s+/g).forEach((function(t){e?n._renderer.addClass(n._ngEl.nativeElement,t):n._renderer.removeClass(n._ngEl.nativeElement,t)}))}},{key:"klass",set:function(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}},{key:"ngClass",set:function(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&(fs(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}}]),t}()).\u0275fac=function(t){return new(t||Tl)(bs($a),bs(Xa),bs(Na),bs(za))},Tl.\u0275dir=oe({type:Tl,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),Tl),Al=function(){function t(e,n,r,i){_classCallCheck(this,t),this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}return _createClass(t,[{key:"first",get:function(){return 0===this.index}},{key:"last",get:function(){return this.index===this.count-1}},{key:"even",get:function(){return this.index%2==0}},{key:"odd",get:function(){return!this.even}}]),t}(),Pl=((Ol=function(){function t(e,n,r){_classCallCheck(this,t),this._viewContainer=e,this._template=n,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}return _createClass(t,[{key:"ngDoCheck",value:function(){if(this._ngForOfDirty){this._ngForOfDirty=!1;var t=this._ngForOf;if(!this._differ&&t)try{this._differ=this._differs.find(t).create(this.ngForTrackBy)}catch(r){throw new Error("Cannot find a differ supporting object '".concat(t,"' of type '").concat((e=t).name||typeof e,"'. NgFor only supports binding to Iterables such as Arrays."))}}var e;if(this._differ){var n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}},{key:"_applyChanges",value:function(t){var e=this,n=[];t.forEachOperation((function(t,r,i){if(null==t.previousIndex){var o=e._viewContainer.createEmbeddedView(e._template,new Al(null,e._ngForOf,-1,-1),null===i?void 0:i),s=new Rl(t,o);n.push(s)}else if(null==i)e._viewContainer.remove(null===r?void 0:r);else if(null!==r){var a=e._viewContainer.get(r);e._viewContainer.move(a,i);var u=new Rl(t,a);n.push(u)}}));for(var r=0;r<n.length;r++)this._perViewChange(n[r].view,n[r].record);for(var i=0,o=this._viewContainer.length;i<o;i++){var s=this._viewContainer.get(i);s.context.index=i,s.context.count=o,s.context.ngForOf=this._ngForOf}t.forEachIdentityChange((function(t){e._viewContainer.get(t.currentIndex).context.$implicit=t.item}))}},{key:"_perViewChange",value:function(t,e){t.context.$implicit=e.item}},{key:"ngForOf",set:function(t){this._ngForOf=t,this._ngForOfDirty=!0}},{key:"ngForTrackBy",set:function(t){Ln()&&null!=t&&"function"!=typeof t&&console&&console.warn&&console.warn("trackBy must be a function, but received ".concat(JSON.stringify(t),". See https://angular.io/api/common/NgForOf#change-propagation for more information.")),this._trackByFn=t},get:function(){return this._trackByFn}},{key:"ngForTemplate",set:function(t){t&&(this._template=t)}}],[{key:"ngTemplateContextGuard",value:function(t,e){return!0}}]),t}()).\u0275fac=function(t){return new(t||Ol)(bs(fu),bs(su),bs($a))},Ol.\u0275dir=oe({type:Ol,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),Ol),Rl=function t(e,n){_classCallCheck(this,t),this.record=e,this.view=n},Nl=((Il=function(){function t(e,n){_classCallCheck(this,t),this._viewContainer=e,this._context=new Dl,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=n}return _createClass(t,[{key:"_updateView",value:function(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}},{key:"ngIf",set:function(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}},{key:"ngIfThen",set:function(t){zl("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}},{key:"ngIfElse",set:function(t){zl("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}}],[{key:"ngTemplateContextGuard",value:function(t,e){return!0}}]),t}()).\u0275fac=function(t){return new(t||Il)(bs(fu),bs(su))},Il.\u0275dir=oe({type:Il,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),Il),Dl=function t(){_classCallCheck(this,t),this.$implicit=null,this.ngIf=null};function zl(t,e){if(e&&!e.createEmbeddedView)throw new Error("".concat(t," must be a TemplateRef, but received '").concat(ut(e),"'."))}var jl,Ll,Fl,Ml,Vl,Ul,Bl=function(){function t(e,n){_classCallCheck(this,t),this._viewContainerRef=e,this._templateRef=n,this._created=!1}return _createClass(t,[{key:"create",value:function(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}},{key:"destroy",value:function(){this._created=!1,this._viewContainerRef.clear()}},{key:"enforceState",value:function(t){t&&!this._created?this.create():!t&&this._created&&this.destroy()}}]),t}(),ql=((Ul=function(){function t(){_classCallCheck(this,t),this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}return _createClass(t,[{key:"_addCase",value:function(){return this._caseCount++}},{key:"_addDefault",value:function(t){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(t)}},{key:"_matchCase",value:function(t){var e=t==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||e,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),e}},{key:"_updateDefaultCases",value:function(t){if(this._defaultViews&&t!==this._defaultUsed){this._defaultUsed=t;for(var e=0;e<this._defaultViews.length;e++)this._defaultViews[e].enforceState(t)}}},{key:"ngSwitch",set:function(t){this._ngSwitch=t,0===this._caseCount&&this._updateDefaultCases(!0)}}]),t}()).\u0275fac=function(t){return new(t||Ul)},Ul.\u0275dir=oe({type:Ul,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"}}),Ul),Hl=((Vl=function(){function t(e,n,r){_classCallCheck(this,t),this.ngSwitch=r,r._addCase(),this._view=new Bl(e,n)}return _createClass(t,[{key:"ngDoCheck",value:function(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}]),t}()).\u0275fac=function(t){return new(t||Vl)(bs(fu),bs(su),bs(ql,1))},Vl.\u0275dir=oe({type:Vl,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"}}),Vl),Wl=((Ml=function t(e,n,r){_classCallCheck(this,t),r._addDefault(new Bl(e,n))}).\u0275fac=function(t){return new(t||Ml)(bs(fu),bs(su),bs(ql,1))},Ml.\u0275dir=oe({type:Ml,selectors:[["","ngSwitchDefault",""]]}),Ml),Gl=((Fl=function(){function t(e,n,r){_classCallCheck(this,t),this._ngEl=e,this._differs=n,this._renderer=r,this._ngStyle=null,this._differ=null}return _createClass(t,[{key:"ngDoCheck",value:function(){if(this._differ){var t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}},{key:"_setStyle",value:function(t,e){var n=_slicedToArray(t.split("."),2),r=n[0],i=n[1];null!=(e=null!=e&&i?"".concat(e).concat(i):e)?this._renderer.setStyle(this._ngEl.nativeElement,r,e):this._renderer.removeStyle(this._ngEl.nativeElement,r)}},{key:"_applyChanges",value:function(t){var e=this;t.forEachRemovedItem((function(t){return e._setStyle(t.key,null)})),t.forEachAddedItem((function(t){return e._setStyle(t.key,t.currentValue)})),t.forEachChangedItem((function(t){return e._setStyle(t.key,t.currentValue)}))}},{key:"ngStyle",set:function(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}}]),t}()).\u0275fac=function(t){return new(t||Fl)(bs(Na),bs(Xa),bs(za))},Fl.\u0275dir=oe({type:Fl,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}}),Fl),Ql=((Ll=function(){function t(e){_classCallCheck(this,t),this._viewContainerRef=e,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null}return _createClass(t,[{key:"ngOnChanges",value:function(t){if(this._shouldRecreateView(t)){var e=this._viewContainerRef;this._viewRef&&e.remove(e.indexOf(this._viewRef)),this._viewRef=this.ngTemplateOutlet?e.createEmbeddedView(this.ngTemplateOutlet,this.ngTemplateOutletContext):null}else this._viewRef&&this.ngTemplateOutletContext&&this._updateExistingContext(this.ngTemplateOutletContext)}},{key:"_shouldRecreateView",value:function(t){var e=t.ngTemplateOutletContext;return!!t.ngTemplateOutlet||e&&this._hasContextShapeChanged(e)}},{key:"_hasContextShapeChanged",value:function(t){var e=Object.keys(t.previousValue||{}),n=Object.keys(t.currentValue||{});if(e.length===n.length){var r,i=_createForOfIteratorHelper(n);try{for(i.s();!(r=i.n()).done;){var o=r.value;if(-1===e.indexOf(o))return!0}}catch(s){i.e(s)}finally{i.f()}return!1}return!0}},{key:"_updateExistingContext",value:function(t){for(var e=0,n=Object.keys(t);e<n.length;e++){var r=n[e];this._viewRef.context[r]=this.ngTemplateOutletContext[r]}}}]),t}()).\u0275fac=function(t){return new(t||Ll)(bs(fu))},Ll.\u0275dir=oe({type:Ll,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet"},features:[vr]}),Ll),Kl=((jl=function t(){_classCallCheck(this,t)}).\u0275mod=re({type:jl}),jl.\u0275inj=dt({factory:function(t){return new(t||jl)},providers:[{provide:kl,useClass:El}]}),jl);function Yl(t){return"server"===t}var $l,Xl=(($l=function t(){_classCallCheck(this,t)}).\u0275prov=ft({token:$l,providedIn:"root",factory:function(){return new Zl(be(Zc),window,be(ii))}}),$l),Zl=function(){function t(e,n,r){_classCallCheck(this,t),this.document=e,this.window=n,this.errorHandler=r,this.offset=function(){return[0,0]}}return _createClass(t,[{key:"setOffset",value:function(t){this.offset=Array.isArray(t)?function(){return t}:t}},{key:"getScrollPosition",value:function(){return this.supportsScrolling()?[this.window.scrollX,this.window.scrollY]:[0,0]}},{key:"scrollToPosition",value:function(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}},{key:"scrollToAnchor",value:function(t){if(this.supportsScrolling()){var e=this.document.getElementById(t)||this.document.getElementsByName(t)[0];e&&this.scrollToElement(e)}}},{key:"setHistoryScrollRestoration",value:function(t){if(this.supportScrollRestoration()){var e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}},{key:"scrollToElement",value:function(t){var e=t.getBoundingClientRect(),n=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(n-i[0],r-i[1])}},{key:"supportScrollRestoration",value:function(){try{if(!this.window||!this.window.scrollTo)return!1;var t=Jl(this.window.history)||Jl(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch(e){return!1}}},{key:"supportsScrolling",value:function(){try{return!!this.window.scrollTo}catch(t){return!1}}}]),t}();function Jl(t){return Object.getOwnPropertyDescriptor(t,"scrollRestoration")}var th,eh,nh,rh,ih=function(t){_inherits(n,t);var e=_createSuper(n);function n(){return _classCallCheck(this,n),e.apply(this,arguments)}return _createClass(n,[{key:"getProperty",value:function(t,e){return t[e]}},{key:"log",value:function(t){window.console&&window.console.log&&window.console.log(t)}},{key:"logGroup",value:function(t){window.console&&window.console.group&&window.console.group(t)}},{key:"logGroupEnd",value:function(){window.console&&window.console.groupEnd&&window.console.groupEnd()}},{key:"onAndCancel",value:function(t,e,n){return t.addEventListener(e,n,!1),function(){t.removeEventListener(e,n,!1)}}},{key:"dispatchEvent",value:function(t,e){t.dispatchEvent(e)}},{key:"remove",value:function(t){return t.parentNode&&t.parentNode.removeChild(t),t}},{key:"getValue",value:function(t){return t.value}},{key:"createElement",value:function(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}},{key:"createHtmlDocument",value:function(){return document.implementation.createHTMLDocument("fakeTitle")}},{key:"getDefaultDocument",value:function(){return document}},{key:"isElementNode",value:function(t){return t.nodeType===Node.ELEMENT_NODE}},{key:"isShadowRoot",value:function(t){return t instanceof DocumentFragment}},{key:"getGlobalEventTarget",value:function(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}},{key:"getHistory",value:function(){return window.history}},{key:"getLocation",value:function(){return window.location}},{key:"getBaseHref",value:function(t){var e,n=oh||(oh=document.querySelector("base"))?oh.getAttribute("href"):null;return null==n?null:(e=n,th||(th=document.createElement("a")),th.setAttribute("href",e),"/"===th.pathname.charAt(0)?th.pathname:"/"+th.pathname)}},{key:"resetBaseElement",value:function(){oh=null}},{key:"getUserAgent",value:function(){return window.navigator.userAgent}},{key:"performanceNow",value:function(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}},{key:"supportsCookies",value:function(){return!0}},{key:"getCookie",value:function(t){return Sl(document.cookie,t)}}],[{key:"makeCurrent",value:function(){var t;t=new n,Yc||(Yc=t)}}]),n}(function(t){_inherits(n,t);var e=_createSuper(n);function n(){return _classCallCheck(this,n),e.call(this)}return _createClass(n,[{key:"supportsDOMEvents",value:function(){return!0}}]),n}(function(){return function t(){_classCallCheck(this,t)}}())),oh=null,sh=new wt("TRANSITION_ID"),ah=[{provide:Zu,useFactory:function(t,e,n){return function(){n.get(Ju).donePromise.then((function(){var n=$c();Array.prototype.slice.apply(e.querySelectorAll("style[ng-transition]")).filter((function(e){return e.getAttribute("ng-transition")===t})).forEach((function(t){return n.remove(t)}))}))}},deps:[sh,Zc,ns],multi:!0}],uh=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"addToWindow",value:function(t){It.getAngularTestability=function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=t.findTestabilityInTree(e,n);if(null==r)throw new Error("Could not find testability for element.");return r},It.getAllAngularTestabilities=function(){return t.getAllTestabilities()},It.getAllAngularRootElements=function(){return t.getAllRootElements()},It.frameworkStabilizers||(It.frameworkStabilizers=[]),It.frameworkStabilizers.push((function(t){var e=It.getAllAngularTestabilities(),n=e.length,r=!1,i=function(e){r=r||e,0==--n&&t(r)};e.forEach((function(t){t.whenStable(i)}))}))}},{key:"findTestabilityInTree",value:function(t,e,n){if(null==e)return null;var r=t.getTestability(e);return null!=r?r:n?$c().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}],[{key:"init",value:function(){var e;e=new t,Ac=e}}]),t}(),ch=new wt("EventManagerPlugins"),lh=((eh=function(){function t(e,n){var r=this;_classCallCheck(this,t),this._zone=n,this._eventNameToPlugin=new Map,e.forEach((function(t){return t.manager=r})),this._plugins=e.slice().reverse()}return _createClass(t,[{key:"addEventListener",value:function(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)}},{key:"addGlobalEventListener",value:function(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)}},{key:"getZone",value:function(){return this._zone}},{key:"_findPluginFor",value:function(t){var e=this._eventNameToPlugin.get(t);if(e)return e;for(var n=this._plugins,r=0;r<n.length;r++){var i=n[r];if(i.supports(t))return this._eventNameToPlugin.set(t,i),i}throw new Error("No event manager plugin found for event "+t)}}]),t}()).\u0275fac=function(t){return new(t||eh)(be(ch),be(_c))},eh.\u0275prov=ft({token:eh,factory:eh.\u0275fac}),eh),hh=function(){function t(e){_classCallCheck(this,t),this._doc=e}return _createClass(t,[{key:"addGlobalEventListener",value:function(t,e,n){var r=$c().getGlobalEventTarget(this._doc,t);if(!r)throw new Error("Unsupported event target ".concat(r," for event ").concat(e));return this.addEventListener(r,e,n)}}]),t}(),fh=((rh=function(){function t(){_classCallCheck(this,t),this._stylesSet=new Set}return _createClass(t,[{key:"addStyles",value:function(t){var e=this,n=new Set;t.forEach((function(t){e._stylesSet.has(t)||(e._stylesSet.add(t),n.add(t))})),this.onStylesAdded(n)}},{key:"onStylesAdded",value:function(t){}},{key:"getAllStyles",value:function(){return Array.from(this._stylesSet)}}]),t}()).\u0275fac=function(t){return new(t||rh)},rh.\u0275prov=ft({token:rh,factory:rh.\u0275fac}),rh),dh=((nh=function(t){_inherits(n,t);var e=_createSuper(n);function n(t){var r;return _classCallCheck(this,n),(r=e.call(this))._doc=t,r._hostNodes=new Set,r._styleNodes=new Set,r._hostNodes.add(t.head),r}return _createClass(n,[{key:"_addStylesToHost",value:function(t,e){var n=this;t.forEach((function(t){var r=n._doc.createElement("style");r.textContent=t,n._styleNodes.add(e.appendChild(r))}))}},{key:"addHost",value:function(t){this._addStylesToHost(this._stylesSet,t),this._hostNodes.add(t)}},{key:"removeHost",value:function(t){this._hostNodes.delete(t)}},{key:"onStylesAdded",value:function(t){var e=this;this._hostNodes.forEach((function(n){return e._addStylesToHost(t,n)}))}},{key:"ngOnDestroy",value:function(){this._styleNodes.forEach((function(t){return $c().remove(t)}))}}]),n}(fh)).\u0275fac=function(t){return new(t||nh)(be(Zc))},nh.\u0275prov=ft({token:nh,factory:nh.\u0275fac}),nh),ph={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},vh=/%COMP%/g;function yh(t,e,n){for(var r=0;r<e.length;r++){var i=e[r];Array.isArray(i)?yh(t,i,n):(i=i.replace(vh,t),n.push(i))}return n}function gh(t){return function(e){if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}var mh,_h,bh,wh,Ch,kh,Eh=((mh=function(){function t(e,n,r){_classCallCheck(this,t),this.eventManager=e,this.sharedStylesHost=n,this.appId=r,this.rendererByCompId=new Map,this.defaultRenderer=new Sh(e)}return _createClass(t,[{key:"createRenderer",value:function(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case Bt.Emulated:var n=this.rendererByCompId.get(e.id);return n||(n=new Th(this.eventManager,this.sharedStylesHost,e,this.appId),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n;case 1:case Bt.ShadowDom:return new Oh(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){var r=yh(e.id,e.styles,[]);this.sharedStylesHost.addStyles(r),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}}},{key:"begin",value:function(){}},{key:"end",value:function(){}}]),t}()).\u0275fac=function(t){return new(t||mh)(be(lh),be(dh),be(tc))},mh.\u0275prov=ft({token:mh,factory:mh.\u0275fac}),mh),Sh=function(){function t(e){_classCallCheck(this,t),this.eventManager=e,this.data=Object.create(null)}return _createClass(t,[{key:"destroy",value:function(){}},{key:"createElement",value:function(t,e){return e?document.createElementNS(ph[e]||e,t):document.createElement(t)}},{key:"createComment",value:function(t){return document.createComment(t)}},{key:"createText",value:function(t){return document.createTextNode(t)}},{key:"appendChild",value:function(t,e){t.appendChild(e)}},{key:"insertBefore",value:function(t,e,n){t&&t.insertBefore(e,n)}},{key:"removeChild",value:function(t,e){t&&t.removeChild(e)}},{key:"selectRootElement",value:function(t,e){var n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error('The selector "'.concat(t,'" did not match any elements'));return e||(n.textContent=""),n}},{key:"parentNode",value:function(t){return t.parentNode}},{key:"nextSibling",value:function(t){return t.nextSibling}},{key:"setAttribute",value:function(t,e,n,r){if(r){e=r+":"+e;var i=ph[r];i?t.setAttributeNS(i,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}},{key:"removeAttribute",value:function(t,e,n){if(n){var r=ph[n];r?t.removeAttributeNS(r,e):t.removeAttribute("".concat(n,":").concat(e))}else t.removeAttribute(e)}},{key:"addClass",value:function(t,e){t.classList.add(e)}},{key:"removeClass",value:function(t,e){t.classList.remove(e)}},{key:"setStyle",value:function(t,e,n,r){r&(ui.DashCase|ui.Important)?t.style.setProperty(e,n,r&ui.Important?"important":""):t.style[e]=n}},{key:"removeStyle",value:function(t,e,n){n&ui.DashCase?t.style.removeProperty(e):t.style[e]=""}},{key:"setProperty",value:function(t,e,n){t[e]=n}},{key:"setValue",value:function(t,e){t.nodeValue=e}},{key:"listen",value:function(t,e,n){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,gh(n)):this.eventManager.addEventListener(t,e,gh(n))}}]),t}(),Th=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r,i,o){var s;_classCallCheck(this,n),(s=e.call(this,t)).component=i;var a,u=yh(o+"-"+i.id,i.styles,[]);return r.addStyles(u),s.contentAttr="_ngcontent-%COMP%".replace(vh,o+"-"+i.id),s.hostAttr=(a=o+"-"+i.id,"_nghost-%COMP%".replace(vh,a)),s}return _createClass(n,[{key:"applyToHost",value:function(t){_get(_getPrototypeOf(n.prototype),"setAttribute",this).call(this,t,this.hostAttr,"")}},{key:"createElement",value:function(t,e){var r=_get(_getPrototypeOf(n.prototype),"createElement",this).call(this,t,e);return _get(_getPrototypeOf(n.prototype),"setAttribute",this).call(this,r,this.contentAttr,""),r}}]),n}(Sh),Oh=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r,i,o){var s;_classCallCheck(this,n),(s=e.call(this,t)).sharedStylesHost=r,s.hostEl=i,s.shadowRoot=i.attachShadow({mode:"open"}),s.sharedStylesHost.addHost(s.shadowRoot);for(var a=yh(o.id,o.styles,[]),u=0;u<a.length;u++){var c=document.createElement("style");c.textContent=a[u],s.shadowRoot.appendChild(c)}return s}return _createClass(n,[{key:"nodeOrShadowRoot",value:function(t){return t===this.hostEl?this.shadowRoot:t}},{key:"destroy",value:function(){this.sharedStylesHost.removeHost(this.shadowRoot)}},{key:"appendChild",value:function(t,e){return _get(_getPrototypeOf(n.prototype),"appendChild",this).call(this,this.nodeOrShadowRoot(t),e)}},{key:"insertBefore",value:function(t,e,r){return _get(_getPrototypeOf(n.prototype),"insertBefore",this).call(this,this.nodeOrShadowRoot(t),e,r)}},{key:"removeChild",value:function(t,e){return _get(_getPrototypeOf(n.prototype),"removeChild",this).call(this,this.nodeOrShadowRoot(t),e)}},{key:"parentNode",value:function(t){return this.nodeOrShadowRoot(_get(_getPrototypeOf(n.prototype),"parentNode",this).call(this,this.nodeOrShadowRoot(t)))}}]),n}(Sh),Ih=((_h=function(t){_inherits(n,t);var e=_createSuper(n);function n(t){return _classCallCheck(this,n),e.call(this,t)}return _createClass(n,[{key:"supports",value:function(t){return!0}},{key:"addEventListener",value:function(t,e,n){var r=this;return t.addEventListener(e,n,!1),function(){return r.removeEventListener(t,e,n)}}},{key:"removeEventListener",value:function(t,e,n){return t.removeEventListener(e,n)}}]),n}(hh)).\u0275fac=function(t){return new(t||_h)(be(Zc))},_h.\u0275prov=ft({token:_h,factory:_h.\u0275fac}),_h),xh=["alt","control","meta","shift"],Ah={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Ph={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Rh={alt:function(t){return t.altKey},control:function(t){return t.ctrlKey},meta:function(t){return t.metaKey},shift:function(t){return t.shiftKey}},Nh=((Ch=function(t){_inherits(n,t);var e=_createSuper(n);function n(t){return _classCallCheck(this,n),e.call(this,t)}return _createClass(n,[{key:"supports",value:function(t){return null!=n.parseEventName(t)}},{key:"addEventListener",value:function(t,e,r){var i=n.parseEventName(e),o=n.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular((function(){return $c().onAndCancel(t,i.domEventName,o)}))}}],[{key:"parseEventName",value:function(t){var e=t.toLowerCase().split("."),r=e.shift();if(0===e.length||"keydown"!==r&&"keyup"!==r)return null;var i=n._normalizeKey(e.pop()),o="";if(xh.forEach((function(t){var n=e.indexOf(t);n>-1&&(e.splice(n,1),o+=t+".")})),o+=i,0!=e.length||0===i.length)return null;var s={};return s.domEventName=r,s.fullKey=o,s}},{key:"getEventFullKey",value:function(t){var e="",n=function(t){var e=t.key;if(null==e){if(null==(e=t.keyIdentifier))return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&Ph.hasOwnProperty(e)&&(e=Ph[e]))}return Ah[e]||e}(t);return" "===(n=n.toLowerCase())?n="space":"."===n&&(n="dot"),xh.forEach((function(r){r!=n&&(0,Rh[r])(t)&&(e+=r+".")})),e+=n}},{key:"eventCallback",value:function(t,e,r){return function(i){n.getEventFullKey(i)===t&&r.runGuarded((function(){return e(i)}))}}},{key:"_normalizeKey",value:function(t){switch(t){case"esc":return"escape";default:return t}}}]),n}(hh)).\u0275fac=function(t){return new(t||Ch)(be(Zc))},Ch.\u0275prov=ft({token:Ch,factory:Ch.\u0275fac}),Ch),Dh=((wh=function t(){_classCallCheck(this,t)}).\u0275fac=function(t){return new(t||wh)},wh.\u0275prov=ft({factory:function(){return be(zh)},token:wh,providedIn:"root"}),wh),zh=((bh=function(t){_inherits(n,t);var e=_createSuper(n);function n(t){var r;return _classCallCheck(this,n),(r=e.call(this))._doc=t,r}return _createClass(n,[{key:"sanitize",value:function(t,e){if(null==e)return null;switch(t){case ar.NONE:return e;case ar.HTML:return Nn(e,"HTML")?Rn(e):or(this._doc,String(e));case ar.STYLE:return Nn(e,"Style")?Rn(e):e;case ar.SCRIPT:if(Nn(e,"Script"))return Rn(e);throw new Error("unsafe value used in a script context");case ar.URL:return Dn(e),Nn(e,"URL")?Rn(e):Bn(String(e));case ar.RESOURCE_URL:if(Nn(e,"ResourceURL"))return Rn(e);throw new Error("unsafe value used in a resource URL context (see http://g.co/ng/security#xss)");default:throw new Error("Unexpected SecurityContext ".concat(t," (see http://g.co/ng/security#xss)"))}}},{key:"bypassSecurityTrustHtml",value:function(t){return new On(t)}},{key:"bypassSecurityTrustStyle",value:function(t){return new In(t)}},{key:"bypassSecurityTrustScript",value:function(t){return new xn(t)}},{key:"bypassSecurityTrustUrl",value:function(t){return new An(t)}},{key:"bypassSecurityTrustResourceUrl",value:function(t){return new Pn(t)}}]),n}(Dh)).\u0275fac=function(t){return new(t||bh)(be(Zc))},bh.\u0275prov=ft({factory:function(){return t=be(Vo),new zh(t.get(Zc));var t},token:bh,providedIn:"root"}),bh),jh=Nc(Wc,"browser",[{provide:ic,useValue:"browser"},{provide:rc,useValue:function(){ih.makeCurrent(),uh.init()},multi:!0},{provide:Zc,useFactory:function(){return function(t){ke=t}(document),document},deps:[]}]),Lh=[[],{provide:Bo,useValue:"root"},{provide:ii,useFactory:function(){return new ii},deps:[]},{provide:ch,useClass:Ih,multi:!0,deps:[Zc,_c,ic]},{provide:ch,useClass:Nh,multi:!0,deps:[Zc]},[],{provide:Eh,useClass:Eh,deps:[lh,dh,tc]},{provide:Da,useExisting:Eh},{provide:fh,useExisting:dh},{provide:dh,useClass:dh,deps:[Zc]},{provide:Ic,useClass:Ic,deps:[_c]},{provide:lh,useClass:lh,deps:[ch,_c]},[]],Fh=((kh=function(){function t(e){if(_classCallCheck(this,t),e)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}return _createClass(t,null,[{key:"withServerTransition",value:function(e){return{ngModule:t,providers:[{provide:tc,useValue:e.appId},{provide:sh,useExisting:tc},ah]}}}]),t}()).\u0275mod=re({type:kh}),kh.\u0275inj=dt({factory:function(t){return new(t||kh)(be(kh,12))},providers:Lh,imports:[Kl,Qc]}),kh);"undefined"!=typeof window&&window;var Mh=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r){var i;return _classCallCheck(this,n),(i=e.call(this,t,r)).scheduler=t,i.work=r,i.pending=!1,i}return _createClass(n,[{key:"schedule",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(this.closed)return this;this.state=t;var n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this}},{key:"requestAsyncId",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return setInterval(t.flush.bind(t,this),n)}},{key:"recycleAsyncId",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)}},{key:"execute",value:function(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}},{key:"_execute",value:function(t,e){var n=!1,r=void 0;try{this.work(t)}catch(i){n=!0,r=!!i&&i||new Error(i)}if(n)return this.unsubscribe(),r}},{key:"_unsubscribe",value:function(){var t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null}}]),n}(function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r){return _classCallCheck(this,n),e.call(this)}return _createClass(n,[{key:"schedule",value:function(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this}}]),n}(f)),Vh=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r){var i;return _classCallCheck(this,n),(i=e.call(this,t,r)).scheduler=t,i.work=r,i}return _createClass(n,[{key:"schedule",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e>0?_get(_getPrototypeOf(n.prototype),"schedule",this).call(this,t,e):(this.delay=e,this.state=t,this.scheduler.flush(this),this)}},{key:"execute",value:function(t,e){return e>0||this.closed?_get(_getPrototypeOf(n.prototype),"execute",this).call(this,t,e):this._execute(t,e)}},{key:"requestAsyncId",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return null!==r&&r>0||null===r&&this.delay>0?_get(_getPrototypeOf(n.prototype),"requestAsyncId",this).call(this,t,e,r):t.flush(this)}}]),n}(Mh),Uh=function(){var t=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.now;_classCallCheck(this,t),this.SchedulerAction=e,this.now=n}return _createClass(t,[{key:"schedule",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0;return new this.SchedulerAction(this,t).schedule(n,e)}}]),t}();return t.now=function(){return Date.now()},t}(),Bh=function(t){_inherits(n,t);var e=_createSuper(n);function n(t){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Uh.now;return _classCallCheck(this,n),(r=e.call(this,t,(function(){return n.delegate&&n.delegate!==_assertThisInitialized(r)?n.delegate.now():i()}))).actions=[],r.active=!1,r.scheduled=void 0,r}return _createClass(n,[{key:"schedule",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2?arguments[2]:void 0;return n.delegate&&n.delegate!==this?n.delegate.schedule(t,e,r):_get(_getPrototypeOf(n.prototype),"schedule",this).call(this,t,e,r)}},{key:"flush",value:function(t){var e=this.actions;if(this.active)e.push(t);else{var n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}}}]),n}(Uh),qh=new(function(t){_inherits(n,t);var e=_createSuper(n);function n(){return _classCallCheck(this,n),e.apply(this,arguments)}return n}(Bh))(Vh),Hh=new Bh(Mh);function Wh(){}function Gh(t,e,n){return function(r){return r.lift(new Qh(t,e,n))}}var Qh=function(){function t(e,n,r){_classCallCheck(this,t),this.nextOrObserver=e,this.error=n,this.complete=r}return _createClass(t,[{key:"call",value:function(t,e){return e.subscribe(new Kh(t,this.nextOrObserver,this.error,this.complete))}}]),t}(),Kh=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,i,o,s){var a;return _classCallCheck(this,n),(a=e.call(this,t))._tapNext=Wh,a._tapError=Wh,a._tapComplete=Wh,a._tapError=o||Wh,a._tapComplete=s||Wh,r(i)?(a._context=_assertThisInitialized(a),a._tapNext=i):i&&(a._context=i,a._tapNext=i.next||Wh,a._tapError=i.error||Wh,a._tapComplete=i.complete||Wh),a}return _createClass(n,[{key:"_next",value:function(t){try{this._tapNext.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.next(t)}},{key:"_error",value:function(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)}},{key:"_complete",value:function(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()}}]),n}(v),Yh=1,$h=Promise.resolve(),Xh={};function Zh(t){return t in Xh&&(delete Xh[t],!0)}var Jh=function(t){var e=Yh++;return Xh[e]=!0,$h.then((function(){return Zh(e)&&t()})),e},tf=function(t){Zh(t)},ef=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r){var i;return _classCallCheck(this,n),(i=e.call(this,t,r)).scheduler=t,i.work=r,i}return _createClass(n,[{key:"requestAsyncId",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return null!==r&&r>0?_get(_getPrototypeOf(n.prototype),"requestAsyncId",this).call(this,t,e,r):(t.actions.push(this),t.scheduled||(t.scheduled=Jh(t.flush.bind(t,null))))}},{key:"recycleAsyncId",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(null!==r&&r>0||null===r&&this.delay>0)return _get(_getPrototypeOf(n.prototype),"recycleAsyncId",this).call(this,t,e,r);0===t.actions.length&&(tf(e),t.scheduled=void 0)}}]),n}(Mh),nf=new(function(t){_inherits(n,t);var e=_createSuper(n);function n(){return _classCallCheck(this,n),e.apply(this,arguments)}return _createClass(n,[{key:"flush",value:function(t){this.active=!0,this.scheduled=void 0;var e,n=this.actions,r=-1,i=n.length;t=t||n.shift();do{if(e=t.execute(t.state,t.delay))break}while(++r<i&&(t=n.shift()));if(this.active=!1,e){for(;++r<i&&(t=n.shift());)t.unsubscribe();throw e}}}]),n}(Bh))(ef);function rf(t){return!u(t)&&t-parseFloat(t)+1>=0}var of=function(t){_inherits(n,t);var e=_createSuper(n);function n(t){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:nf;return _classCallCheck(this,n),(r=e.call(this)).source=t,r.delayTime=i,r.scheduler=o,(!rf(i)||i<0)&&(r.delayTime=0),o&&"function"==typeof o.schedule||(r.scheduler=nf),r}return _createClass(n,[{key:"_subscribe",value:function(t){return this.scheduler.schedule(n.dispatch,this.delayTime,{source:this.source,subscriber:t})}}],[{key:"create",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:nf;return new n(t,e,r)}},{key:"dispatch",value:function(t){var e=t.source,n=t.subscriber;return this.add(e.subscribe(n))}}]),n}(b);function sf(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return function(n){return n.lift(new af(t,e))}}var af=function(){function t(e,n){_classCallCheck(this,t),this.scheduler=e,this.delay=n}return _createClass(t,[{key:"call",value:function(t,e){return new of(e,this.delay,this.scheduler).subscribe(t)}}]),t}(),uf=new b((function(t){return t.complete()}));function cf(t){return t?function(t){return new b((function(e){return t.schedule((function(){return e.complete()}))}))}(t):uf}function lf(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=e[e.length-1];return I(r)?(e.pop(),V(e,r)):G(e)}function hf(t,e){return new b(e?function(n){return e.schedule(ff,0,{error:t,subscriber:n})}:function(e){return e.error(t)})}function ff(t){var e=t.error;t.subscriber.error(e)}var df=function(){var t=function(){function t(e,n,r){_classCallCheck(this,t),this.kind=e,this.value=n,this.error=r,this.hasValue="N"===e}return _createClass(t,[{key:"observe",value:function(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}}},{key:"do",value:function(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}}},{key:"accept",value:function(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)}},{key:"toObservable",value:function(){switch(this.kind){case"N":return lf(this.value);case"E":return hf(this.error);case"C":return cf()}throw new Error("unexpected notification kind value")}}],[{key:"createNext",value:function(e){return void 0!==e?new t("N",e):t.undefinedValueNotification}},{key:"createError",value:function(e){return new t("E",void 0,e)}},{key:"createComplete",value:function(){return t.completeNotification}}]),t}();return t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t}();function pf(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return function(n){return n.lift(new vf(t,e))}}var vf=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;_classCallCheck(this,t),this.scheduler=e,this.delay=n}return _createClass(t,[{key:"call",value:function(t,e){return e.subscribe(new yf(t,this.scheduler,this.delay))}}]),t}(),yf=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r){var i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return _classCallCheck(this,n),(i=e.call(this,t)).scheduler=r,i.delay=o,i}return _createClass(n,[{key:"scheduleMessage",value:function(t){this.destination.add(this.scheduler.schedule(n.dispatch,this.delay,new gf(t,this.destination)))}},{key:"_next",value:function(t){this.scheduleMessage(df.createNext(t))}},{key:"_error",value:function(t){this.scheduleMessage(df.createError(t)),this.unsubscribe()}},{key:"_complete",value:function(){this.scheduleMessage(df.createComplete()),this.unsubscribe()}}],[{key:"dispatch",value:function(t){var e=t.notification,n=t.destination;e.observe(n),this.unsubscribe()}}]),n}(v),gf=function t(e,n){_classCallCheck(this,t),this.notification=e,this.destination=n},mf=n("zIRd");function _f(){}mf.a.registerVersion("firebase","8.0.1","app");var bf=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:qh;_classCallCheck(this,t),this.zone=e,this.delegate=n}return _createClass(t,[{key:"now",value:function(){return this.delegate.now()}},{key:"schedule",value:function(t,e,n){var r=this.zone;return this.delegate.schedule((function(e){var n=this;r.runGuarded((function(){t.apply(n,[e])}))}),e,n)}}]),t}(),wf=function(){function t(e){_classCallCheck(this,t),this.zone=e,this.task=null}return _createClass(t,[{key:"call",value:function(t,e){var n=this.unscheduleTask.bind(this);return this.task=this.zone.run((function(){return Zone.current.scheduleMacroTask("firebaseZoneBlock",_f,{},_f,_f)})),e.pipe(Gh({next:n,complete:n,error:n})).subscribe(t).add(n)}},{key:"unscheduleTask",value:function(){var t=this;setTimeout((function(){null!=t.task&&"scheduled"===t.task.state&&(t.task.invoke(),t.task=null)}),10)}}]),t}(),Cf=function t(e){_classCallCheck(this,t),this.ngZone=e,this.outsideAngular=e.runOutsideAngular((function(){return new bf(Zone.current)})),this.insideAngular=e.run((function(){return new bf(Zone.current,Hh)}))};function kf(t){return function(e){return(e=e.lift(new wf(t.ngZone))).pipe(sf(t.outsideAngular),pf(t.insideAngular))}}var Ef=["ngOnDestroy"],Sf=function(t,e,n){return new Proxy(t,{get:function(r,i){return n.runOutsideAngular((function(){if(t[i])return t[i];if(Ef.includes(i))return function(){};var r=e.toPromise().then((function(t){var e=t&&t[i];return"function"==typeof e?e.bind(t):e&&e.then?e.then((function(t){return n.run((function(){return t}))})):n.run((function(){return e}))}));return new Proxy((function(){}),{get:function(t,e){return r[e]},apply:function(t,e,n){return r.then((function(t){return t&&t.apply(void 0,_toConsumableArray(n))}))}})}))}})},Tf=new wt("angularfire2.app.options"),Of=new wt("angularfire2.app.nameOrConfig"),If=function t(){_classCallCheck(this,t)},xf=new Fa("6.0.4");function Af(t,e,n){var r="object"==typeof n&&n||{};return r.name=r.name||"string"==typeof n&&n||"[DEFAULT]",mf.a.apps.filter((function(t){return t&&t.name===r.name}))[0]||e.runOutsideAngular((function(){return mf.a.initializeApp(t,r)}))}var Pf,Rf={provide:If,useFactory:Af,deps:[Tf,_c,[new ot,Of]]},Nf=((Pf=function(){function t(e){_classCallCheck(this,t),mf.a.registerVersion("angularfire",xf.full,e.toString()),mf.a.registerVersion("angular",Ma.full)}return _createClass(t,null,[{key:"initializeApp",value:function(e,n){return{ngModule:t,providers:[{provide:Tf,useValue:e},{provide:Of,useValue:n}]}}}]),t}()).\u0275mod=re({type:Pf}),Pf.\u0275inj=dt({factory:function(t){return new(t||Pf)(be(ic))},providers:[Rf]}),Pf),Df=n("mrSG");function zf(t,e){return function(n){return n.lift(new Lf(t,e))}}var jf,Lf=function(){function t(e,n){_classCallCheck(this,t),this.predicate=e,this.thisArg=n}return _createClass(t,[{key:"call",value:function(t,e){return e.subscribe(new Ff(t,this.predicate,this.thisArg))}}]),t}(),Ff=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r,i){var o;return _classCallCheck(this,n),(o=e.call(this,t)).predicate=r,o.thisArg=i,o.count=0,o}return _createClass(n,[{key:"_next",value:function(t){var e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}e&&this.destination.next(t)}}]),n}(v),Mf=function(){function t(e){_classCallCheck(this,t),this.value=e}return _createClass(t,[{key:"call",value:function(t,e){return e.subscribe(new Vf(t,this.value))}}]),t}(),Vf=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r){var i;return _classCallCheck(this,n),(i=e.call(this,t)).value=r,i}return _createClass(n,[{key:"_next",value:function(t){this.destination.next(this.value)}}]),n}(v),Uf=new wt("nz-config"),Bf=function(t){return void 0!==t},qf=((jf=function(){function t(e){_classCallCheck(this,t),this.configUpdated$=new T,this.config=e||{}}return _createClass(t,[{key:"getConfigForComponent",value:function(t){return this.config[t]}},{key:"getConfigChangeEventForComponent",value:function(t){return this.configUpdated$.pipe(zf((function(e){return e===t})),(function(t){return t.lift(new Mf(void 0))}))}},{key:"set",value:function(t,e){this.config[t]=Object.assign(Object.assign({},this.config[t]),e),this.configUpdated$.next(t)}}]),t}()).\u0275fac=function(t){return new(t||jf)(be(Uf,8))},jf.\u0275prov=ft({factory:function(){return new jf(be(Uf,8))},token:jf,providedIn:"root"}),jf);function Hf(t){return function(e,n,r){var i="$$__assignedValue__"+n;return Object.defineProperty(e,i,{configurable:!0,writable:!0,enumerable:!1}),{get:function(){var e=(null==r?void 0:r.get)?r.get.bind(this)():this[i];if(((this.assignmentCount||{})[n]||0)>1&&Bf(e))return e;var o=(this.nzConfigService.getConfigForComponent(t)||{})[n];return Bf(o)?o:e},set:function(t){this.assignmentCount=this.assignmentCount||{},this.assignmentCount[n]=(this.assignmentCount[n]||0)+1,(null==r?void 0:r.set)?r.set.bind(this)(t):this[i]=t},configurable:!0,enumerable:!0}}}function Wf(t){return null!=t&&""+t!="false"}function Gf(t){return Array.isArray(t)?t:[t]}function Qf(t){return null==t?"":"string"==typeof t?t:t+"px"}function Kf(t){return t instanceof Na?t.nativeElement:t}var Yf={};function $f(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];Ln()&&(function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=e.reduce((function(t,e){return t+e.toString()}),"");return!Yf[r]&&(Yf[r]=!0,!0)}).apply(void 0,n)&&t.apply(void 0,n)}var Xf=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return $f.apply(void 0,[function(){for(var t,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=console).warn.apply(t,["[NG-ZORRO]:"].concat(n))}].concat(e))},Zf=function(){for(var t=(new Error).stack,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return $f.apply(void 0,[function(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=console).warn.apply(e,["[NG-ZORRO]:","deprecated:"].concat(r,[t]))}].concat(n))},Jf=function(){function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t}();function td(t){return function(e){return 0===t?cf():e.lift(new nd(t))}}var ed,nd=function(){function t(e){if(_classCallCheck(this,t),this.total=e,this.total<0)throw new Jf}return _createClass(t,[{key:"call",value:function(t,e){return e.subscribe(new rd(t,this.total))}}]),t}(),rd=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r){var i;return _classCallCheck(this,n),(i=e.call(this,t)).total=r,i.count=0,i}return _createClass(n,[{key:"_next",value:function(t){var e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))}}]),n}(v);function id(t){return null!=t}function od(t){return Wf(t)}function sd(t,e){return function(n,r,i){var o="$$__"+r;return Object.prototype.hasOwnProperty.call(n,o)&&Xf('The prop "'.concat(o,'" is already exist, it will be overrided by ').concat(t," decorator.")),Object.defineProperty(n,o,{configurable:!0,writable:!0}),{get:function(){return i&&i.get?i.get.bind(this)():this[o]},set:function(t){i&&i.set&&i.set.bind(this)(e(t)),this[o]=e(t)}}}}function ad(){return sd("InputBoolean",od)}function ud(t){return sd("InputNumber",(function(e){return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return function(t){return!isNaN(parseFloat(t))&&!isNaN(Number(t))}(t)?Number(t):e}(e,t)}))}function cd(t){return!!t&&"function"==typeof t.then&&"function"==typeof t.catch}"undefined"!=typeof window&&window;try{ed="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(EN){ed=!1}var ld,hd,fd,dd,pd=((dd=function t(e){_classCallCheck(this,t),this._platformId=e,this.isBrowser=this._platformId?"browser"===this._platformId:"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!ed)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}).\u0275fac=function(t){return new(t||dd)(be(ic,8))},dd.\u0275prov=ft({factory:function(){return new dd(be(ic,8))},token:dd,providedIn:"root"}),dd),vd=((fd=function t(){_classCallCheck(this,t)}).\u0275mod=re({type:fd}),fd.\u0275inj=dt({factory:function(t){return new(t||fd)}}),fd);var yd=n("HXN9");function gd(t,e){return B(t,e,1)}var md=function t(){_classCallCheck(this,t)},_d=function t(){_classCallCheck(this,t)},bd=function(){function t(e){var n=this;_classCallCheck(this,t),this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?function(){n.headers=new Map,e.split("\n").forEach((function(t){var e=t.indexOf(":");if(e>0){var r=t.slice(0,e),i=r.toLowerCase(),o=t.slice(e+1).trim();n.maybeSetNormalizedName(r,i),n.headers.has(i)?n.headers.get(i).push(o):n.headers.set(i,[o])}}))}:function(){n.headers=new Map,Object.keys(e).forEach((function(t){var r=e[t],i=t.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(n.headers.set(i,r),n.maybeSetNormalizedName(t,i))}))}:this.headers=new Map}return _createClass(t,[{key:"has",value:function(t){return this.init(),this.headers.has(t.toLowerCase())}},{key:"get",value:function(t){this.init();var e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}},{key:"keys",value:function(){return this.init(),Array.from(this.normalizedNames.values())}},{key:"getAll",value:function(t){return this.init(),this.headers.get(t.toLowerCase())||null}},{key:"append",value:function(t,e){return this.clone({name:t,value:e,op:"a"})}},{key:"set",value:function(t,e){return this.clone({name:t,value:e,op:"s"})}},{key:"delete",value:function(t,e){return this.clone({name:t,value:e,op:"d"})}},{key:"maybeSetNormalizedName",value:function(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}},{key:"init",value:function(){var e=this;this.lazyInit&&(this.lazyInit instanceof t?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach((function(t){return e.applyUpdate(t)})),this.lazyUpdate=null))}},{key:"copyFrom",value:function(t){var e=this;t.init(),Array.from(t.headers.keys()).forEach((function(n){e.headers.set(n,t.headers.get(n)),e.normalizedNames.set(n,t.normalizedNames.get(n))}))}},{key:"clone",value:function(e){var n=new t;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof t?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([e]),n}},{key:"applyUpdate",value:function(t){var e=t.name.toLowerCase();switch(t.op){case"a":case"s":var n=t.value;if("string"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(t.name,e);var r=("a"===t.op?this.headers.get(e):void 0)||[];r.push.apply(r,_toConsumableArray(n)),this.headers.set(e,r);break;case"d":var i=t.value;if(i){var o=this.headers.get(e);if(!o)return;0===(o=o.filter((function(t){return-1===i.indexOf(t)}))).length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,o)}else this.headers.delete(e),this.normalizedNames.delete(e)}}},{key:"forEach",value:function(t){var e=this;this.init(),Array.from(this.normalizedNames.keys()).forEach((function(n){return t(e.normalizedNames.get(n),e.headers.get(n))}))}}]),t}(),wd=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"encodeKey",value:function(t){return Cd(t)}},{key:"encodeValue",value:function(t){return Cd(t)}},{key:"decodeKey",value:function(t){return decodeURIComponent(t)}},{key:"decodeValue",value:function(t){return decodeURIComponent(t)}}]),t}();function Cd(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/gi,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%2B/gi,"+").replace(/%3D/gi,"=").replace(/%3F/gi,"?").replace(/%2F/gi,"/")}var kd=function(){function t(){var e,n,r,i=this,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(_classCallCheck(this,t),this.updates=null,this.cloneFrom=null,this.encoder=o.encoder||new wd,o.fromString){if(o.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=(e=o.fromString,n=this.encoder,r=new Map,e.length>0&&e.split("&").forEach((function(t){var e=t.indexOf("="),i=_slicedToArray(-1==e?[n.decodeKey(t),""]:[n.decodeKey(t.slice(0,e)),n.decodeValue(t.slice(e+1))],2),o=i[0],s=i[1],a=r.get(o)||[];a.push(s),r.set(o,a)})),r)}else o.fromObject?(this.map=new Map,Object.keys(o.fromObject).forEach((function(t){var e=o.fromObject[t];i.map.set(t,Array.isArray(e)?e:[e])}))):this.map=null}return _createClass(t,[{key:"has",value:function(t){return this.init(),this.map.has(t)}},{key:"get",value:function(t){this.init();var e=this.map.get(t);return e?e[0]:null}},{key:"getAll",value:function(t){return this.init(),this.map.get(t)||null}},{key:"keys",value:function(){return this.init(),Array.from(this.map.keys())}},{key:"append",value:function(t,e){return this.clone({param:t,value:e,op:"a"})}},{key:"set",value:function(t,e){return this.clone({param:t,value:e,op:"s"})}},{key:"delete",value:function(t,e){return this.clone({param:t,value:e,op:"d"})}},{key:"toString",value:function(){var t=this;return this.init(),this.keys().map((function(e){var n=t.encoder.encodeKey(e);return t.map.get(e).map((function(e){return n+"="+t.encoder.encodeValue(e)})).join("&")})).filter((function(t){return""!==t})).join("&")}},{key:"clone",value:function(e){var n=new t({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat([e]),n}},{key:"init",value:function(){var t=this;null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach((function(e){return t.map.set(e,t.cloneFrom.map.get(e))})),this.updates.forEach((function(e){switch(e.op){case"a":case"s":var n=("a"===e.op?t.map.get(e.param):void 0)||[];n.push(e.value),t.map.set(e.param,n);break;case"d":if(void 0===e.value){t.map.delete(e.param);break}var r=t.map.get(e.param)||[],i=r.indexOf(e.value);-1!==i&&r.splice(i,1),r.length>0?t.map.set(e.param,r):t.map.delete(e.param)}})),this.cloneFrom=this.updates=null)}}]),t}();function Ed(t){return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer}function Sd(t){return"undefined"!=typeof Blob&&t instanceof Blob}function Td(t){return"undefined"!=typeof FormData&&t instanceof FormData}var Od=function(){function t(e,n,r,i){var o;if(_classCallCheck(this,t),this.url=n,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,o=i):o=r,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.params&&(this.params=o.params)),this.headers||(this.headers=new bd),this.params){var s=this.params.toString();if(0===s.length)this.urlWithParams=n;else{var a=n.indexOf("?");this.urlWithParams=n+(-1===a?"?":a<n.length-1?"&":"")+s}}else this.params=new kd,this.urlWithParams=n}return _createClass(t,[{key:"serializeBody",value:function(){return null===this.body?null:Ed(this.body)||Sd(this.body)||Td(this.body)||"string"==typeof this.body?this.body:this.body instanceof kd?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}},{key:"detectContentTypeHeader",value:function(){return null===this.body||Td(this.body)?null:Sd(this.body)?this.body.type||null:Ed(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof kd?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||Array.isArray(this.body)?"application/json":null}},{key:"clone",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,o=void 0!==e.body?e.body:this.body,s=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,a=void 0!==e.reportProgress?e.reportProgress:this.reportProgress,u=e.headers||this.headers,c=e.params||this.params;return void 0!==e.setHeaders&&(u=Object.keys(e.setHeaders).reduce((function(t,n){return t.set(n,e.setHeaders[n])}),u)),e.setParams&&(c=Object.keys(e.setParams).reduce((function(t,n){return t.set(n,e.setParams[n])}),c)),new t(n,r,o,{params:c,headers:u,reportProgress:a,responseType:i,withCredentials:s})}}]),t}(),Id=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}({}),xd=function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"OK";_classCallCheck(this,t),this.headers=e.headers||new bd,this.status=void 0!==e.status?e.status:n,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300},Ad=function(t){_inherits(n,t);var e=_createSuper(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,n),(t=e.call(this,r)).type=Id.ResponseHeader,t}return _createClass(n,[{key:"clone",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new n({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}]),n}(xd),Pd=function(t){_inherits(n,t);var e=_createSuper(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,n),(t=e.call(this,r)).type=Id.Response,t.body=void 0!==r.body?r.body:null,t}return _createClass(n,[{key:"clone",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new n({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}]),n}(xd),Rd=function(t){_inherits(n,t);var e=_createSuper(n);function n(t){var r;return _classCallCheck(this,n),(r=e.call(this,t,0,"Unknown Error")).name="HttpErrorResponse",r.ok=!1,r.message=r.status>=200&&r.status<300?"Http failure during parsing for "+(t.url||"(unknown url)"):"Http failure response for ".concat(t.url||"(unknown url)",": ").concat(t.status," ").concat(t.statusText),r.error=t.error||null,r}return n}(xd);function Nd(t,e){return{body:e,headers:t.headers,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials}}var Dd,zd,jd,Ld,Fd,Md,Vd,Ud,Bd,qd=((Dd=function(){function t(e){_classCallCheck(this,t),this.handler=e}return _createClass(t,[{key:"request",value:function(t,e){var n,r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(t instanceof Od)n=t;else{var o=void 0;o=i.headers instanceof bd?i.headers:new bd(i.headers);var s=void 0;i.params&&(s=i.params instanceof kd?i.params:new kd({fromObject:i.params})),n=new Od(t,e,void 0!==i.body?i.body:null,{headers:o,params:s,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}var a=lf(n).pipe(gd((function(t){return r.handler.handle(t)})));if(t instanceof Od||"events"===i.observe)return a;var u=a.pipe(zf((function(t){return t instanceof Pd})));switch(i.observe||"body"){case"body":switch(n.responseType){case"arraybuffer":return u.pipe(L((function(t){if(null!==t.body&&!(t.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return t.body})));case"blob":return u.pipe(L((function(t){if(null!==t.body&&!(t.body instanceof Blob))throw new Error("Response is not a Blob.");return t.body})));case"text":return u.pipe(L((function(t){if(null!==t.body&&"string"!=typeof t.body)throw new Error("Response is not a string.");return t.body})));case"json":default:return u.pipe(L((function(t){return t.body})))}case"response":return u;default:throw new Error("Unreachable: unhandled observe type ".concat(i.observe,"}"))}}},{key:"delete",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.request("DELETE",t,e)}},{key:"get",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.request("GET",t,e)}},{key:"head",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.request("HEAD",t,e)}},{key:"jsonp",value:function(t,e){return this.request("JSONP",t,{params:(new kd).append(e,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}},{key:"options",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.request("OPTIONS",t,e)}},{key:"patch",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.request("PATCH",t,Nd(n,e))}},{key:"post",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.request("POST",t,Nd(n,e))}},{key:"put",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.request("PUT",t,Nd(n,e))}}]),t}()).\u0275fac=function(t){return new(t||Dd)(be(md))},Dd.\u0275prov=ft({token:Dd,factory:Dd.\u0275fac}),Dd),Hd=function(){function t(e,n){_classCallCheck(this,t),this.next=e,this.interceptor=n}return _createClass(t,[{key:"handle",value:function(t){return this.interceptor.intercept(t,this.next)}}]),t}(),Wd=new wt("HTTP_INTERCEPTORS"),Gd=((zd=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"intercept",value:function(t,e){return e.handle(t)}}]),t}()).\u0275fac=function(t){return new(t||zd)},zd.\u0275prov=ft({token:zd,factory:zd.\u0275fac}),zd),Qd=/^\)\]\}',?\n/,Kd=function t(){_classCallCheck(this,t)},Yd=((Ld=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"build",value:function(){return new XMLHttpRequest}}]),t}()).\u0275fac=function(t){return new(t||Ld)},Ld.\u0275prov=ft({token:Ld,factory:Ld.\u0275fac}),Ld),$d=((jd=function(){function t(e){_classCallCheck(this,t),this.xhrFactory=e}return _createClass(t,[{key:"handle",value:function(t){var e=this;if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new b((function(n){var r=e.xhrFactory.build();if(r.open(t.method,t.urlWithParams),t.withCredentials&&(r.withCredentials=!0),t.headers.forEach((function(t,e){return r.setRequestHeader(t,e.join(","))})),t.headers.has("Accept")||r.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){var i=t.detectContentTypeHeader();null!==i&&r.setRequestHeader("Content-Type",i)}if(t.responseType){var o=t.responseType.toLowerCase();r.responseType="json"!==o?o:"text"}var s=t.serializeBody(),a=null,u=function(){if(null!==a)return a;var e=1223===r.status?204:r.status,n=r.statusText||"OK",i=new bd(r.getAllResponseHeaders()),o=function(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}(r)||t.url;return a=new Ad({headers:i,status:e,statusText:n,url:o})},c=function(){var e=u(),i=e.headers,o=e.status,s=e.statusText,a=e.url,c=null;204!==o&&(c=void 0===r.response?r.responseText:r.response),0===o&&(o=c?200:0);var l=o>=200&&o<300;if("json"===t.responseType&&"string"==typeof c){var h=c;c=c.replace(Qd,"");try{c=""!==c?JSON.parse(c):null}catch(f){c=h,l&&(l=!1,c={error:f,text:c})}}l?(n.next(new Pd({body:c,headers:i,status:o,statusText:s,url:a||void 0})),n.complete()):n.error(new Rd({error:c,headers:i,status:o,statusText:s,url:a||void 0}))},l=function(t){var e=u().url,i=new Rd({error:t,status:r.status||0,statusText:r.statusText||"Unknown Error",url:e||void 0});n.error(i)},h=!1,f=function(e){h||(n.next(u()),h=!0);var i={type:Id.DownloadProgress,loaded:e.loaded};e.lengthComputable&&(i.total=e.total),"text"===t.responseType&&r.responseText&&(i.partialText=r.responseText),n.next(i)},d=function(t){var e={type:Id.UploadProgress,loaded:t.loaded};t.lengthComputable&&(e.total=t.total),n.next(e)};return r.addEventListener("load",c),r.addEventListener("error",l),t.reportProgress&&(r.addEventListener("progress",f),null!==s&&r.upload&&r.upload.addEventListener("progress",d)),r.send(s),n.next({type:Id.Sent}),function(){r.removeEventListener("error",l),r.removeEventListener("load",c),t.reportProgress&&(r.removeEventListener("progress",f),null!==s&&r.upload&&r.upload.removeEventListener("progress",d)),r.readyState!==r.DONE&&r.abort()}}))}}]),t}()).\u0275fac=function(t){return new(t||jd)(be(Kd))},jd.\u0275prov=ft({token:jd,factory:jd.\u0275fac}),jd),Xd=new wt("XSRF_COOKIE_NAME"),Zd=new wt("XSRF_HEADER_NAME"),Jd=function t(){_classCallCheck(this,t)},tp=((Bd=function(){function t(e,n,r){_classCallCheck(this,t),this.doc=e,this.platform=n,this.cookieName=r,this.lastCookieString="",this.lastToken=null,this.parseCount=0}return _createClass(t,[{key:"getToken",value:function(){if("server"===this.platform)return null;var t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=Sl(t,this.cookieName),this.lastCookieString=t),this.lastToken}}]),t}()).\u0275fac=function(t){return new(t||Bd)(be(Zc),be(ic),be(Xd))},Bd.\u0275prov=ft({token:Bd,factory:Bd.\u0275fac}),Bd),ep=((Ud=function(){function t(e,n){_classCallCheck(this,t),this.tokenService=e,this.headerName=n}return _createClass(t,[{key:"intercept",value:function(t,e){var n=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||n.startsWith("http://")||n.startsWith("https://"))return e.handle(t);var r=this.tokenService.getToken();return null===r||t.headers.has(this.headerName)||(t=t.clone({headers:t.headers.set(this.headerName,r)})),e.handle(t)}}]),t}()).\u0275fac=function(t){return new(t||Ud)(be(Jd),be(Zd))},Ud.\u0275prov=ft({token:Ud,factory:Ud.\u0275fac}),Ud),np=((Vd=function(){function t(e,n){_classCallCheck(this,t),this.backend=e,this.injector=n,this.chain=null}return _createClass(t,[{key:"handle",value:function(t){if(null===this.chain){var e=this.injector.get(Wd,[]);this.chain=e.reduceRight((function(t,e){return new Hd(t,e)}),this.backend)}return this.chain.handle(t)}}]),t}()).\u0275fac=function(t){return new(t||Vd)(be(_d),be(ns))},Vd.\u0275prov=ft({token:Vd,factory:Vd.\u0275fac}),Vd),rp=((Md=function(){function t(){_classCallCheck(this,t)}return _createClass(t,null,[{key:"disable",value:function(){return{ngModule:t,providers:[{provide:ep,useClass:Gd}]}}},{key:"withOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{ngModule:t,providers:[e.cookieName?{provide:Xd,useValue:e.cookieName}:[],e.headerName?{provide:Zd,useValue:e.headerName}:[]]}}}]),t}()).\u0275mod=re({type:Md}),Md.\u0275inj=dt({factory:function(t){return new(t||Md)},providers:[ep,{provide:Wd,useExisting:ep,multi:!0},{provide:Jd,useClass:tp},{provide:Xd,useValue:"XSRF-TOKEN"},{provide:Zd,useValue:"X-XSRF-TOKEN"}]}),Md),ip=((Fd=function t(){_classCallCheck(this,t)}).\u0275mod=re({type:Fd}),Fd.\u0275inj=dt({factory:function(t){return new(t||Fd)},providers:[qd,{provide:md,useClass:np},$d,{provide:_d,useExisting:$d},Yd,{provide:Kd,useExisting:Yd}],imports:[[rp.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),Fd);function op(t){return function(e){return e.lift(new sp(t))}}var sp=function(){function t(e){_classCallCheck(this,t),this.callback=e}return _createClass(t,[{key:"call",value:function(t,e){return e.subscribe(new ap(t,this.callback))}}]),t}(),ap=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r){var i;return _classCallCheck(this,n),(i=e.call(this,t)).add(new f(r)),i}return n}(v);function up(t){return function(e){var n=new cp(t),r=e.lift(n);return n.caught=r}}var cp=function(){function t(e){_classCallCheck(this,t),this.selector=e}return _createClass(t,[{key:"call",value:function(t,e){return e.subscribe(new lp(t,this.selector,this.caught))}}]),t}(),lp=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r,i){var o;return _classCallCheck(this,n),(o=e.call(this,t)).selector=r,o.caught=i,o}return _createClass(n,[{key:"error",value:function(t){if(!this.isStopped){var e;try{e=this.selector(t,this.caught)}catch(o){return void _get(_getPrototypeOf(n.prototype),"error",this).call(this,o)}this._unsubscribeAndRecycle();var r=new x(this,void 0,void 0);this.add(r);var i=z(this,e,void 0,void 0,r);i!==r&&this.add(i)}}}]),n}(j);function hp(t){Ln()&&console.warn("[@ant-design/icons-angular]: ".concat(t,"."))}function fp(t){return Object(yd.generate)(t)[0]}function dp(t,e){switch(e){case"fill":return t+"-fill";case"outline":return t+"-o";case"twotone":return t+"-twotone";case void 0:return t;default:throw new Error('[@ant-design/icons-angular]:Theme "'.concat(e,'" is not a recognized theme!'))}}function pp(t){return"object"==typeof t&&"string"==typeof t.name&&("string"==typeof t.theme||void 0===t.theme)&&"string"==typeof t.icon}function vp(t){var e=t.split(":");switch(e.length){case 1:return[t,""];case 2:return[e[1],e[0]];default:throw new Error("[@ant-design/icons-angular]:The icon type ".concat(t," is not valid!"))}}function yp(){return new Error("[@ant-design/icons-angular]:<svg> tag not found.")}var gp,mp,_p,bp,wp,Cp,kp=((mp=function(){function t(e,n,r,i){_classCallCheck(this,t),this._rendererFactory=e,this._handler=n,this._document=r,this.sanitizer=i,this.defaultTheme="outline",this._svgDefinitions=new Map,this._svgRenderedDefinitions=new Map,this._inProgressFetches=new Map,this._assetsUrlRoot="",this._twoToneColorPalette={primaryColor:"#333333",secondaryColor:"#E6E6E6"},this._enableJsonpLoading=!1,this._jsonpIconLoad$=new T,this._renderer=this._rendererFactory.createRenderer(null,null),this._handler&&(this._http=new qd(this._handler))}return _createClass(t,[{key:"useJsonpLoading",value:function(){var t=this;this._enableJsonpLoading?hp("You are already using jsonp loading."):(this._enableJsonpLoading=!0,window.__ant_icon_load=function(e){t._jsonpIconLoad$.next(e)})}},{key:"changeAssetsSource",value:function(t){this._assetsUrlRoot=t.endsWith("/")?t:t+"/"}},{key:"addIcon",value:function(){for(var t=this,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];n.forEach((function(e){t._svgDefinitions.set(dp(e.name,e.theme),e)}))}},{key:"addIconLiteral",value:function(t,e){var n=_slicedToArray(vp(t),2);if(n[0],!n[1])throw new Error('[@ant-design/icons-angular]:Type should have a namespace. Try "namespace:'.concat(name,'".'));this.addIcon({name:t,icon:e})}},{key:"clear",value:function(){this._svgDefinitions.clear(),this._svgRenderedDefinitions.clear()}},{key:"getRenderedContent",value:function(t,e){var n=this,r=pp(t)?t:this._svgDefinitions.get(t)||null;return(r?lf(r):this._loadIconDynamically(t)).pipe(L((function(r){if(!r)throw function(t){return new Error("[@ant-design/icons-angular]:the icon ".concat(t," does not exist or is not registered."))}(t);return n._loadSVGFromCacheOrCreateNew(r,e)})))}},{key:"getCachedIcons",value:function(){return this._svgDefinitions}},{key:"_loadIconDynamically",value:function(t){var e=this;if(!this._http&&!this._enableJsonpLoading)return lf((console.error('[@ant-design/icons-angular]: you need to import "HttpClientModule" to use dynamic importing..'),null));var n,r,i,o=this._inProgressFetches.get(t);if(!o){var s=_slicedToArray(vp(t),2),a=s[0],u=s[1],c=u?{name:t,icon:""}:(r=a.split("-"),i="o"===(n=r.splice(r.length-1,1)[0])?"outline":n,{name:r.join("-"),theme:i,icon:""}),l=(u?"".concat(this._assetsUrlRoot,"assets/").concat(u,"/").concat(a):"".concat(this._assetsUrlRoot,"assets/").concat(c.theme,"/").concat(c.name))+(this._enableJsonpLoading?".js":".svg"),h=this.sanitizer.sanitize(ar.URL,l);if(!h)throw function(t){return new Error('[@ant-design/icons-angular]:The url "'.concat(t,'" is unsafe.'))}(l);o=(this._enableJsonpLoading?this._loadIconDynamicallyWithJsonp(c,h):this._http.get(h,{responseType:"text"}).pipe(L((function(t){return Object.assign(Object.assign({},c),{icon:t})})))).pipe(Gh((function(t){return e.addIcon(t)})),op((function(){return e._inProgressFetches.delete(t)})),up((function(){return lf(null)})),et()),this._inProgressFetches.set(t,o)}return o}},{key:"_loadIconDynamicallyWithJsonp",value:function(t,e){var n=this;return new b((function(r){var i=n._document.createElement("script"),o=setTimeout((function(){s(),r.error(new Error("[@ant-design/icons-angular]:Importing timeout error."))}),6e3);function s(){i.parentNode.removeChild(i),clearTimeout(o)}i.src=e,n._document.body.appendChild(i),n._jsonpIconLoad$.pipe(zf((function(e){return e.name===t.name&&e.theme===t.theme})),td(1)).subscribe((function(t){r.next(t),s()}))}))}},{key:"_loadSVGFromCacheOrCreateNew",value:function(t,e){var n,r=e||this._twoToneColorPalette.primaryColor,i=fp(r)||this._twoToneColorPalette.secondaryColor,o="twotone"===t.theme?function(t,e,n,r){return"".concat(dp(t,e),"-").concat(n,"-").concat(r)}(t.name,t.theme,r,i):void 0===t.theme?t.name:dp(t.name,t.theme),s=this._svgRenderedDefinitions.get(o);return s?n=s.icon:(n=this._setSVGAttribute(this._colorizeSVGIcon(this._createSVGElementFromString(""!==vp(t.name)[1]?t.icon:t.icon.replace(/['"]#333['"]/g,'"primaryColor"').replace(/['"]#E6E6E6['"]/g,'"secondaryColor"').replace(/['"]#D9D9D9['"]/g,'"secondaryColor"').replace(/['"]#D8D8D8['"]/g,'"secondaryColor"')),"twotone"===t.theme,r,i)),this._svgRenderedDefinitions.set(o,Object.assign(Object.assign({},t),{icon:n}))),function(t){return t.cloneNode(!0)}(n)}},{key:"_createSVGElementFromString",value:function(t){var e=this._document.createElement("div");e.innerHTML=t;var n=e.querySelector("svg");if(!n)throw yp;return n}},{key:"_setSVGAttribute",value:function(t){return this._renderer.setAttribute(t,"width","1em"),this._renderer.setAttribute(t,"height","1em"),t}},{key:"_colorizeSVGIcon",value:function(t,e,n,r){if(e)for(var i=t.childNodes,o=i.length,s=0;s<o;s++){var a=i[s];"secondaryColor"===a.getAttribute("fill")?this._renderer.setAttribute(a,"fill",r):this._renderer.setAttribute(a,"fill",n)}return this._renderer.setAttribute(t,"fill","currentColor"),t}},{key:"twoToneColor",set:function(t){var e=t.primaryColor,n=t.secondaryColor;this._twoToneColorPalette.primaryColor=e,this._twoToneColorPalette.secondaryColor=n||fp(e)},get:function(){return Object.assign({},this._twoToneColorPalette)}}]),t}()).\u0275fac=function(t){return new(t||mp)(be(Da),be(_d,8),be(Zc,8),be(Dh))},mp.\u0275prov=ft({token:mp,factory:function(t){return mp.\u0275fac(t)}}),mp),Ep=((gp=function(){function t(e,n,r){_classCallCheck(this,t),this._iconService=e,this._elementRef=n,this._renderer=r}return _createClass(t,[{key:"ngOnChanges",value:function(t){(t.type||t.theme||t.twoToneColor)&&this._changeIcon()}},{key:"_changeIcon",value:function(){var t=this;return new Promise((function(e){t.type?t._iconService.getRenderedContent(t._parseIconType(t.type,t.theme),t.twoToneColor).subscribe((function(n){t._setSVGElement(n),e(n)})):(t._clearSVGElement(),e(null))}))}},{key:"_parseIconType",value:function(t,e){if(pp(t))return t;var n=_slicedToArray(vp(t),2),r=n[0];return n[1]?t:function(t){return t.endsWith("-fill")||t.endsWith("-o")||t.endsWith("-twotone")}(r)?(e&&hp("'type' ".concat(r," already gets a theme inside so 'theme' ").concat(e," would be ignored")),r):dp(r,e||this._iconService.defaultTheme)}},{key:"_setSVGElement",value:function(t){this._clearSVGElement(),this._renderer.appendChild(this._elementRef.nativeElement,t)}},{key:"_clearSVGElement",value:function(){for(var t=this._elementRef.nativeElement,e=t.childNodes,n=e.length-1;n>=0;n--){var r=e[n];"svg"===r.tagName.toLowerCase()&&this._renderer.removeChild(t,r)}}}]),t}()).\u0275fac=function(t){return new(t||gp)(bs(kp),bs(Na),bs(za))},gp.\u0275dir=oe({type:gp,selectors:[["","antIcon",""]],inputs:{type:"type",theme:"theme",twoToneColor:"twoToneColor"},features:[vr]}),gp),Sp={name:"star",theme:"fill",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M908.1 353.1l-253.9-36.9L540.7 86.1c-3.1-6.3-8.2-11.4-14.5-14.5-15.8-7.8-35-1.3-42.9 14.5L369.8 316.2l-253.9 36.9c-7 1-13.4 4.3-18.3 9.3a32.05 32.05 0 00.6 45.3l183.7 179.1-43.4 252.9a31.95 31.95 0 0046.4 33.7L512 754l227.1 119.4c6.2 3.3 13.4 4.4 20.3 3.2 17.4-3 29.1-19.5 26.1-36.9l-43.4-252.9 183.7-179.1c5-4.9 8.3-11.3 9.3-18.3 2.7-17.5-9.5-33.7-27-36.3z" /></svg>'},Tp=[{name:"bars",theme:"outline",icon:'<svg viewBox="0 0 1024 1024" focusable="false"><path d="M912 192H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM104 228a56 56 0 10112 0 56 56 0 10-112 0zm0 284a56 56 0 10112 0 56 56 0 10-112 0zm0 284a56 56 0 10112 0 56 56 0 10-112 0z" /></svg>'},{name:"calendar",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M880 184H712v-64c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v64H384v-64c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v64H144c-17.7 0-32 14.3-32 32v664c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V216c0-17.7-14.3-32-32-32zm-40 656H184V460h656v380zM184 392V256h128v48c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-48h256v48c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-48h128v136H184z" /></svg>'},{name:"caret-up",theme:"fill",icon:'<svg viewBox="0 0 1024 1024" focusable="false"><path d="M858.9 689L530.5 308.2c-9.4-10.9-27.5-10.9-37 0L165.1 689c-12.2 14.2-1.2 35 18.5 35h656.8c19.7 0 30.7-20.8 18.5-35z" /></svg>'},{name:"caret-up",theme:"outline",icon:'<svg viewBox="0 0 1024 1024" focusable="false"><path d="M858.9 689L530.5 308.2c-9.4-10.9-27.5-10.9-37 0L165.1 689c-12.2 14.2-1.2 35 18.5 35h656.8c19.7 0 30.7-20.8 18.5-35z" /></svg>'},{name:"caret-down",theme:"fill",icon:'<svg viewBox="0 0 1024 1024" focusable="false"><path d="M840.4 300H183.6c-19.7 0-30.7 20.8-18.5 35l328.4 380.8c9.4 10.9 27.5 10.9 37 0L858.9 335c12.2-14.2 1.2-35-18.5-35z" /></svg>'},{name:"caret-down",theme:"outline",icon:'<svg viewBox="0 0 1024 1024" focusable="false"><path d="M840.4 300H183.6c-19.7 0-30.7 20.8-18.5 35l328.4 380.8c9.4 10.9 27.5 10.9 37 0L858.9 335c12.2-14.2 1.2-35-18.5-35z" /></svg>'},{name:"check-circle",theme:"fill",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm193.5 301.7l-210.6 292a31.8 31.8 0 01-51.7 0L318.5 484.9c-3.8-5.3 0-12.7 6.5-12.7h46.9c10.2 0 19.9 4.9 25.9 13.3l71.2 98.8 157.2-218c6-8.3 15.6-13.3 25.9-13.3H699c6.5 0 10.3 7.4 6.5 12.7z" /></svg>'},{name:"check-circle",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M699 353h-46.9c-10.2 0-19.9 4.9-25.9 13.3L469 584.3l-71.2-98.8c-6-8.3-15.6-13.3-25.9-13.3H325c-6.5 0-10.3 7.4-6.5 12.7l124.6 172.8a31.8 31.8 0 0051.7 0l210.6-292c3.9-5.3.1-12.7-6.4-12.7z" /><path d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z" /></svg>'},{name:"check",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M912 190h-69.9c-9.8 0-19.1 4.5-25.1 12.2L404.7 724.5 207 474a32 32 0 00-25.1-12.2H112c-6.7 0-10.4 7.7-6.3 12.9l273.9 347c12.8 16.2 37.4 16.2 50.3 0l488.4-618.9c4.1-5.1.4-12.8-6.3-12.8z" /></svg>'},{name:"clock-circle",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z" /><path d="M686.7 638.6L544.1 535.5V288c0-4.4-3.6-8-8-8H488c-4.4 0-8 3.6-8 8v275.4c0 2.6 1.2 5 3.3 6.5l165.4 120.6c3.6 2.6 8.6 1.8 11.2-1.7l28.6-39c2.6-3.7 1.8-8.7-1.8-11.2z" /></svg>'},{name:"close-circle",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M685.4 354.8c0-4.4-3.6-8-8-8l-66 .3L512 465.6l-99.3-118.4-66.1-.3c-4.4 0-8 3.5-8 8 0 1.9.7 3.7 1.9 5.2l130.1 155L340.5 670a8.32 8.32 0 00-1.9 5.2c0 4.4 3.6 8 8 8l66.1-.3L512 564.4l99.3 118.4 66 .3c4.4 0 8-3.5 8-8 0-1.9-.7-3.7-1.9-5.2L553.5 515l130.1-155c1.2-1.4 1.8-3.3 1.8-5.2z" /><path d="M512 65C264.6 65 64 265.6 64 513s200.6 448 448 448 448-200.6 448-448S759.4 65 512 65zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z" /></svg>'},{name:"close-circle",theme:"fill",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm165.4 618.2l-66-.3L512 563.4l-99.3 118.4-66.1.3c-4.4 0-8-3.5-8-8 0-1.9.7-3.7 1.9-5.2l130.1-155L340.5 359a8.32 8.32 0 01-1.9-5.2c0-4.4 3.6-8 8-8l66.1.3L512 464.6l99.3-118.4 66-.3c4.4 0 8 3.5 8 8 0 1.9-.7 3.7-1.9 5.2L553.5 514l130 155c1.2 1.5 1.9 3.3 1.9 5.2 0 4.4-3.6 8-8 8z" /></svg>'},{name:"close",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M563.8 512l262.5-312.9c4.4-5.2.7-13.1-6.1-13.1h-79.8c-4.7 0-9.2 2.1-12.3 5.7L511.6 449.8 295.1 191.7c-3-3.6-7.5-5.7-12.3-5.7H203c-6.8 0-10.5 7.9-6.1 13.1L459.4 512 196.9 824.9A7.95 7.95 0 00203 838h79.8c4.7 0 9.2-2.1 12.3-5.7l216.5-258.1 216.5 258.1c3 3.6 7.5 5.7 12.3 5.7h79.8c6.8 0 10.5-7.9 6.1-13.1L563.8 512z" /></svg>'},{name:"copy",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2L263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z" /></svg>'},{name:"double-left",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M272.9 512l265.4-339.1c4.1-5.2.4-12.9-6.3-12.9h-77.3c-4.9 0-9.6 2.3-12.6 6.1L186.8 492.3a31.99 31.99 0 000 39.5l255.3 326.1c3 3.9 7.7 6.1 12.6 6.1H532c6.7 0 10.4-7.7 6.3-12.9L272.9 512zm304 0l265.4-339.1c4.1-5.2.4-12.9-6.3-12.9h-77.3c-4.9 0-9.6 2.3-12.6 6.1L490.8 492.3a31.99 31.99 0 000 39.5l255.3 326.1c3 3.9 7.7 6.1 12.6 6.1H836c6.7 0 10.4-7.7 6.3-12.9L576.9 512z" /></svg>'},{name:"double-right",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M533.2 492.3L277.9 166.1c-3-3.9-7.7-6.1-12.6-6.1H188c-6.7 0-10.4 7.7-6.3 12.9L447.1 512 181.7 851.1A7.98 7.98 0 00188 864h77.3c4.9 0 9.6-2.3 12.6-6.1l255.3-326.1c9.1-11.7 9.1-27.9 0-39.5zm304 0L581.9 166.1c-3-3.9-7.7-6.1-12.6-6.1H492c-6.7 0-10.4 7.7-6.3 12.9L751.1 512 485.7 851.1A7.98 7.98 0 00492 864h77.3c4.9 0 9.6-2.3 12.6-6.1l255.3-326.1c9.1-11.7 9.1-27.9 0-39.5z" /></svg>'},{name:"down",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M884 256h-75c-5.1 0-9.9 2.5-12.9 6.6L512 654.2 227.9 262.6c-3-4.1-7.8-6.6-12.9-6.6h-75c-6.5 0-10.3 7.4-6.5 12.7l352.6 486.1c12.8 17.6 39 17.6 51.7 0l352.6-486.1c3.9-5.3.1-12.7-6.4-12.7z" /></svg>'},{name:"edit",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M257.7 752c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 000-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 009.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9zm67.4-174.4L687.8 215l73.3 73.3-362.7 362.6-88.9 15.7 15.6-89zM880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32z" /></svg>'},{name:"ellipsis",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M176 511a56 56 0 10112 0 56 56 0 10-112 0zm280 0a56 56 0 10112 0 56 56 0 10-112 0zm280 0a56 56 0 10112 0 56 56 0 10-112 0z" /></svg>'},{name:"exclamation-circle",theme:"fill",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm-32 232c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V296zm32 440a48.01 48.01 0 010-96 48.01 48.01 0 010 96z" /></svg>'},{name:"exclamation-circle",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z" /><path d="M464 688a48 48 0 1096 0 48 48 0 10-96 0zm24-112h48c4.4 0 8-3.6 8-8V296c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8z" /></svg>'},{name:"eye",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M942.2 486.2C847.4 286.5 704.1 186 512 186c-192.2 0-335.4 100.5-430.2 300.3a60.3 60.3 0 000 51.5C176.6 737.5 319.9 838 512 838c192.2 0 335.4-100.5 430.2-300.3 7.7-16.2 7.7-35 0-51.5zM512 766c-161.3 0-279.4-81.8-362.7-254C232.6 339.8 350.7 258 512 258c161.3 0 279.4 81.8 362.7 254C791.5 684.2 673.4 766 512 766zm-4-430c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm0 288c-61.9 0-112-50.1-112-112s50.1-112 112-112 112 50.1 112 112-50.1 112-112 112z" /></svg>'},{name:"file",theme:"fill",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M854.6 288.7c6 6 9.4 14.1 9.4 22.6V928c0 17.7-14.3 32-32 32H192c-17.7 0-32-14.3-32-32V96c0-17.7 14.3-32 32-32h424.7c8.5 0 16.7 3.4 22.7 9.4l215.2 215.3zM790.2 326L602 137.8V326h188.2z" /></svg>'},{name:"file",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0042 42h216v494z" /></svg>'},{name:"filter",theme:"fill",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M349 838c0 17.7 14.2 32 31.8 32h262.4c17.6 0 31.8-14.3 31.8-32V642H349v196zm531.1-684H143.9c-24.5 0-39.8 26.7-27.5 48l221.3 376h348.8l221.3-376c12.1-21.3-3.2-48-27.7-48z" /></svg>'},{name:"info-circle",theme:"fill",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm32 664c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V456c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272zm-32-344a48.01 48.01 0 010-96 48.01 48.01 0 010 96z" /></svg>'},{name:"info-circle",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z" /><path d="M464 336a48 48 0 1096 0 48 48 0 10-96 0zm72 112h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V456c0-4.4-3.6-8-8-8z" /></svg>'},{name:"left",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M724 218.3V141c0-6.7-7.7-10.4-12.9-6.3L260.3 486.8a31.86 31.86 0 000 50.3l450.8 352.1c5.3 4.1 12.9.4 12.9-6.3v-77.3c0-4.9-2.3-9.6-6.1-12.6l-360-281 360-281.1c3.8-3 6.1-7.7 6.1-12.6z" /></svg>'},{name:"loading",theme:"outline",icon:'<svg viewBox="0 0 1024 1024" focusable="false"><path d="M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 00-94.3-139.9 437.71 437.71 0 00-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z" /></svg>'},{name:"paper-clip",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M779.3 196.6c-94.2-94.2-247.6-94.2-341.7 0l-261 260.8c-1.7 1.7-2.6 4-2.6 6.4s.9 4.7 2.6 6.4l36.9 36.9a9 9 0 0012.7 0l261-260.8c32.4-32.4 75.5-50.2 121.3-50.2s88.9 17.8 121.2 50.2c32.4 32.4 50.2 75.5 50.2 121.2 0 45.8-17.8 88.8-50.2 121.2l-266 265.9-43.1 43.1c-40.3 40.3-105.8 40.3-146.1 0-19.5-19.5-30.2-45.4-30.2-73s10.7-53.5 30.2-73l263.9-263.8c6.7-6.6 15.5-10.3 24.9-10.3h.1c9.4 0 18.1 3.7 24.7 10.3 6.7 6.7 10.3 15.5 10.3 24.9 0 9.3-3.7 18.1-10.3 24.7L372.4 653c-1.7 1.7-2.6 4-2.6 6.4s.9 4.7 2.6 6.4l36.9 36.9a9 9 0 0012.7 0l215.6-215.6c19.9-19.9 30.8-46.3 30.8-74.4s-11-54.6-30.8-74.4c-41.1-41.1-107.9-41-149 0L463 364 224.8 602.1A172.22 172.22 0 00174 724.8c0 46.3 18.1 89.8 50.8 122.5 33.9 33.8 78.3 50.7 122.7 50.7 44.4 0 88.8-16.9 122.6-50.7l309.2-309C824.8 492.7 850 432 850 367.5c.1-64.6-25.1-125.3-70.7-170.9z" /></svg>'},{name:"question-circle",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z" /><path d="M623.6 316.7C593.6 290.4 554 276 512 276s-81.6 14.5-111.6 40.7C369.2 344 352 380.7 352 420v7.6c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V420c0-44.1 43.1-80 96-80s96 35.9 96 80c0 31.1-22 59.6-56.1 72.7-21.2 8.1-39.2 22.3-52.1 40.9-13.1 19-19.9 41.8-19.9 64.9V620c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8v-22.7a48.3 48.3 0 0130.9-44.8c59-22.7 97.1-74.7 97.1-132.5.1-39.3-17.1-76-48.3-103.3zM472 732a40 40 0 1080 0 40 40 0 10-80 0z" /></svg>'},{name:"right",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M765.7 486.8L314.9 134.7A7.97 7.97 0 00302 141v77.3c0 4.9 2.3 9.6 6.1 12.6l360 281.1-360 281.1c-3.9 3-6.1 7.7-6.1 12.6V883c0 6.7 7.7 10.4 12.9 6.3l450.8-352.1a31.96 31.96 0 000-50.4z" /></svg>'},Sp,{name:"search",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M909.6 854.5L649.9 594.8C690.2 542.7 712 479 712 412c0-80.2-31.3-155.4-87.9-212.1-56.6-56.7-132-87.9-212.1-87.9s-155.5 31.3-212.1 87.9C143.2 256.5 112 331.8 112 412c0 80.1 31.3 155.5 87.9 212.1C256.5 680.8 331.8 712 412 712c67 0 130.6-21.8 182.7-62l259.7 259.6a8.2 8.2 0 0011.6 0l43.6-43.5a8.2 8.2 0 000-11.6zM570.4 570.4C528 612.7 471.8 636 412 636s-116-23.3-158.4-65.6C211.3 528 188 471.8 188 412s23.3-116.1 65.6-158.4C296 211.3 352.2 188 412 188s116.1 23.2 158.4 65.6S636 352.2 636 412s-23.3 116.1-65.6 158.4z" /></svg>'},Sp,{name:"upload",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M400 317.7h73.9V656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V317.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 163a8 8 0 00-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z" /></svg>'},{name:"up",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M890.5 755.3L537.9 269.2c-12.8-17.6-39-17.6-51.7 0L133.5 755.3A8 8 0 00140 768h75c5.1 0 9.9-2.5 12.9-6.6L512 369.8l284.1 391.6c3 4.1 7.8 6.6 12.9 6.6h75c6.5 0 10.3-7.4 6.5-12.7z" /></svg>'},{name:"swap-right",theme:"outline",icon:'<svg viewBox="0 0 1024 1024" focusable="false"><path d="M873.1 596.2l-164-208A32 32 0 00684 376h-64.8c-6.7 0-10.4 7.7-6.3 13l144.3 183H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h695.9c26.8 0 41.7-30.8 25.2-51.8z" /></svg>'}],Op=new wt("nz_icons"),Ip=((_p=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r,i,o,s,a){var u,c;return _classCallCheck(this,n),(c=e.call(this,t,o,s,r)).nzConfigService=i,c.configUpdated$=new T,c.iconfontCache=new Set,c.onConfigChange(),(u=c).addIcon.apply(u,Tp.concat(_toConsumableArray(a||[]))),c.configDefaultTwotoneColor(),c.configDefaultTheme(),c}return _createClass(n,[{key:"normalizeSvgElement",value:function(t){t.getAttribute("viewBox")||this._renderer.setAttribute(t,"viewBox","0 0 1024 1024"),t.getAttribute("width")&&t.getAttribute("height")||(this._renderer.setAttribute(t,"width","1em"),this._renderer.setAttribute(t,"height","1em")),t.getAttribute("fill")||this._renderer.setAttribute(t,"fill","currentColor")}},{key:"fetchFromIconfont",value:function(t){var e=t.scriptUrl;if(this._document&&!this.iconfontCache.has(e)){var n=this._renderer.createElement("script");this._renderer.setAttribute(n,"src",e),this._renderer.setAttribute(n,"data-namespace",e.replace(/^(https?|http):/g,"")),this._renderer.appendChild(this._document.body,n),this.iconfontCache.add(e)}}},{key:"createIconfontIcon",value:function(t){return this._createSVGElementFromString('<svg><use xlink:href="'.concat(t,'"></svg>'))}},{key:"onConfigChange",value:function(){var t=this;this.nzConfigService.getConfigChangeEventForComponent("icon").subscribe((function(){t.configDefaultTwotoneColor(),t.configDefaultTheme(),t.configUpdated$.next()}))}},{key:"configDefaultTheme",value:function(){var t=this.getConfig();this.defaultTheme=t.nzTheme||"outline"}},{key:"configDefaultTwotoneColor",value:function(){var t=this.getConfig().nzTwotoneColor||"#1890ff",e="#1890ff";t&&(t.startsWith("#")?e=t:Xf("Twotone color must be a hex color!")),this.twoToneColor={primaryColor:e}}},{key:"getConfig",value:function(){return this.nzConfigService.getConfigForComponent("icon")||{}}}]),n}(kp)).\u0275fac=function(t){return new(t||_p)(be(Da),be(Dh),be(qf),be(_d,8),be(Zc,8),be(Op,8))},_p.\u0275prov=ft({factory:function(){return new _p(be(Da),be(Dh),be(qf),be(_d,8),be(Zc,8),be(Op,8))},token:_p,providedIn:"root"}),_p),xp=new wt("nz_icons_patch"),Ap=((Cp=function(){function t(e,n){_classCallCheck(this,t),this.extraIcons=e,this.rootIconService=n,this.patched=!1}return _createClass(t,[{key:"doPatch",value:function(){var t=this;this.patched||(this.extraIcons.forEach((function(e){return t.rootIconService.addIcon(e)})),this.patched=!0)}}]),t}()).\u0275fac=function(t){return new(t||Cp)(be(xp,2),be(Ip))},Cp.\u0275prov=ft({token:Cp,factory:Cp.\u0275fac}),Cp),Pp=((wp=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r,i,o){var s;return _classCallCheck(this,n),(s=e.call(this,r,t,i)).iconService=r,s.renderer=i,s.cacheClassName=null,s.nzRotate=0,s.spin=!1,o&&o.doPatch(),s.el=t.nativeElement,s}return _createClass(n,[{key:"ngOnChanges",value:function(t){var e=t.nzType,n=t.nzTwotoneColor,r=t.nzSpin,i=t.nzTheme,o=t.nzRotate;e||n||r||i?this.changeIcon2():o?this.handleRotate(this.el.firstChild):this._setSVGElement(this.iconService.createIconfontIcon("#"+this.iconfont))}},{key:"ngOnInit",value:function(){this.renderer.setAttribute(this.el,"class",("anticon "+this.el.className).trim())}},{key:"ngAfterContentChecked",value:function(){if(!this.type){var t=this.el.children,e=t.length;if(!this.type&&t.length)for(;e--;){var n=t[e];"svg"===n.tagName.toLowerCase()&&this.iconService.normalizeSvgElement(n)}}}},{key:"changeIcon2",value:function(){var t=this;this.setClassName(),this._changeIcon().then((function(e){e&&(t.setSVGData(e),t.handleSpin(e),t.handleRotate(e))}))}},{key:"handleSpin",value:function(t){this.spin||"loading"===this.type?this.renderer.addClass(t,"anticon-spin"):this.renderer.removeClass(t,"anticon-spin")}},{key:"handleRotate",value:function(t){this.nzRotate?this.renderer.setAttribute(t,"style","transform: rotate(".concat(this.nzRotate,"deg)")):this.renderer.removeAttribute(t,"style")}},{key:"setClassName",value:function(){this.cacheClassName&&this.renderer.removeClass(this.el,this.cacheClassName),this.cacheClassName="anticon-"+this.type,this.renderer.addClass(this.el,this.cacheClassName)}},{key:"setSVGData",value:function(t){this.renderer.setAttribute(t,"data-icon",this.type),this.renderer.setAttribute(t,"aria-hidden","true")}},{key:"nzSpin",set:function(t){this.spin=t}},{key:"nzType",set:function(t){this.type=t}},{key:"nzTheme",set:function(t){this.theme=t}},{key:"nzTwotoneColor",set:function(t){this.twoToneColor=t}},{key:"nzIconfont",set:function(t){this.iconfont=t}}]),n}(Ep)).\u0275fac=function(t){return new(t||wp)(bs(Na),bs(Ip),bs(za),bs(Ap,8))},wp.\u0275dir=oe({type:wp,selectors:[["","nz-icon",""]],hostVars:2,hostBindings:function(t,e){2&t&&$s("anticon",!0)},inputs:{nzRotate:"nzRotate",nzSpin:"nzSpin",nzType:"nzType",nzTheme:"nzTheme",nzTwotoneColor:"nzTwotoneColor",nzIconfont:"nzIconfont"},exportAs:["nzIcon"],features:[is,vr]}),Object(Df.c)([ad(),Object(Df.f)("design:type",Boolean),Object(Df.f)("design:paramtypes",[Boolean])],wp.prototype,"nzSpin",null),wp),Rp=((bp=function(){function t(){_classCallCheck(this,t)}return _createClass(t,null,[{key:"forRoot",value:function(e){return{ngModule:t,providers:[{provide:Op,useValue:e}]}}},{key:"forChild",value:function(e){return{ngModule:t,providers:[Ap,{provide:xp,useValue:e}]}}}]),t}()).\u0275mod=re({type:bp}),bp.\u0275inj=dt({factory:function(t){return new(t||bp)},imports:[[vd]]}),bp);function Np(t){return function(e){return e.lift(new Dp(t))}}var Dp=function(){function t(e){_classCallCheck(this,t),this.notifier=e}return _createClass(t,[{key:"call",value:function(t,e){var n=new zp(t),r=z(n,this.notifier);return r&&!n.seenValue?(n.add(r),e.subscribe(n)):n}}]),t}(),zp=function(t){_inherits(n,t);var e=_createSuper(n);function n(t){var r;return _classCallCheck(this,n),(r=e.call(this,t)).seenValue=!1,r}return _createClass(n,[{key:"notifyNext",value:function(t,e,n,r,i){this.seenValue=!0,this.complete()}},{key:"notifyComplete",value:function(){}}]),n}(j);function jp(){return W(1)}function Lp(){return jp()(lf.apply(void 0,arguments))}function Fp(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=e[e.length-1];return I(r)?(e.pop(),function(t){return Lp(e,t,r)}):function(t){return Lp(e,t)}}var Mp,Vp,Up=((Vp=function(){function t(e,n){_classCallCheck(this,t),this.elementRef=e,this.renderer=n,this.hidden=null,this.renderer.setAttribute(this.elementRef.nativeElement,"hidden","")}return _createClass(t,[{key:"setHiddenAttribute",value:function(){!0===this.hidden?this.renderer.setAttribute(this.elementRef.nativeElement,"hidden",""):!1===this.hidden||null===this.hidden?this.renderer.removeAttribute(this.elementRef.nativeElement,"hidden"):"string"==typeof this.hidden&&this.renderer.setAttribute(this.elementRef.nativeElement,"hidden",this.hidden)}},{key:"ngOnChanges",value:function(){this.setHiddenAttribute()}},{key:"ngAfterViewInit",value:function(){this.setHiddenAttribute()}}]),t}()).\u0275fac=function(t){return new(t||Vp)(bs(Na),bs(za))},Vp.\u0275dir=oe({type:Vp,selectors:[["","nz-button",""],["nz-button-group"],["","nz-icon",""],["","nz-menu-item",""],["","nz-submenu",""],["nz-select-top-control"],["nz-select-placeholder"]],inputs:{hidden:"hidden"},features:[vr]}),Vp),Bp=((Mp=function t(){_classCallCheck(this,t)}).\u0275mod=re({type:Mp}),Mp.\u0275inj=dt({factory:function(t){return new(t||Mp)},imports:[[vd]]}),Mp),qp=function t(){_classCallCheck(this,t)};function Hp(t,e){return{type:7,name:t,definitions:e,options:{}}}function Wp(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{type:4,styles:e,timings:t}}function Gp(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{type:2,steps:t,options:e}}function Qp(t){return{type:6,styles:t,offset:null}}function Kp(t,e,n){return{type:0,name:t,styles:e,options:n}}function Yp(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:1,expr:t,animation:e,options:n}}function $p(t){Promise.resolve(null).then(t)}var Xp=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;_classCallCheck(this,t),this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this.parentPlayer=null,this.totalTime=e+n}return _createClass(t,[{key:"_onFinish",value:function(){this._finished||(this._finished=!0,this._onDoneFns.forEach((function(t){return t()})),this._onDoneFns=[])}},{key:"onStart",value:function(t){this._onStartFns.push(t)}},{key:"onDone",value:function(t){this._onDoneFns.push(t)}},{key:"onDestroy",value:function(t){this._onDestroyFns.push(t)}},{key:"hasStarted",value:function(){return this._started}},{key:"init",value:function(){}},{key:"play",value:function(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}},{key:"triggerMicrotask",value:function(){var t=this;$p((function(){return t._onFinish()}))}},{key:"_onStart",value:function(){this._onStartFns.forEach((function(t){return t()})),this._onStartFns=[]}},{key:"pause",value:function(){}},{key:"restart",value:function(){}},{key:"finish",value:function(){this._onFinish()}},{key:"destroy",value:function(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach((function(t){return t()})),this._onDestroyFns=[])}},{key:"reset",value:function(){}},{key:"setPosition",value:function(t){}},{key:"getPosition",value:function(){return 0}},{key:"triggerCallback",value:function(t){var e="start"==t?this._onStartFns:this._onDoneFns;e.forEach((function(t){return t()})),e.length=0}}]),t}(),Zp=function(){function t(e){var n=this;_classCallCheck(this,t),this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;var r=0,i=0,o=0,s=this.players.length;0==s?$p((function(){return n._onFinish()})):this.players.forEach((function(t){t.onDone((function(){++r==s&&n._onFinish()})),t.onDestroy((function(){++i==s&&n._onDestroy()})),t.onStart((function(){++o==s&&n._onStart()}))})),this.totalTime=this.players.reduce((function(t,e){return Math.max(t,e.totalTime)}),0)}return _createClass(t,[{key:"_onFinish",value:function(){this._finished||(this._finished=!0,this._onDoneFns.forEach((function(t){return t()})),this._onDoneFns=[])}},{key:"init",value:function(){this.players.forEach((function(t){return t.init()}))}},{key:"onStart",value:function(t){this._onStartFns.push(t)}},{key:"_onStart",value:function(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach((function(t){return t()})),this._onStartFns=[])}},{key:"onDone",value:function(t){this._onDoneFns.push(t)}},{key:"onDestroy",value:function(t){this._onDestroyFns.push(t)}},{key:"hasStarted",value:function(){return this._started}},{key:"play",value:function(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach((function(t){return t.play()}))}},{key:"pause",value:function(){this.players.forEach((function(t){return t.pause()}))}},{key:"restart",value:function(){this.players.forEach((function(t){return t.restart()}))}},{key:"finish",value:function(){this._onFinish(),this.players.forEach((function(t){return t.finish()}))}},{key:"destroy",value:function(){this._onDestroy()}},{key:"_onDestroy",value:function(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach((function(t){return t.destroy()})),this._onDestroyFns.forEach((function(t){return t()})),this._onDestroyFns=[])}},{key:"reset",value:function(){this.players.forEach((function(t){return t.reset()})),this._destroyed=!1,this._finished=!1,this._started=!1}},{key:"setPosition",value:function(t){var e=t*this.totalTime;this.players.forEach((function(t){var n=t.totalTime?Math.min(1,e/t.totalTime):1;t.setPosition(n)}))}},{key:"getPosition",value:function(){var t=0;return this.players.forEach((function(e){var n=e.getPosition();t=Math.min(n,t)})),t}},{key:"beforeDestroy",value:function(){this.players.forEach((function(t){t.beforeDestroy&&t.beforeDestroy()}))}},{key:"triggerCallback",value:function(t){var e="start"==t?this._onStartFns:this._onDoneFns;e.forEach((function(t){return t()})),e.length=0}}]),t}();function Jp(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function tv(t){switch(t.length){case 0:return new Xp;case 1:return t[0];default:return new Zp(t)}}function ev(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},s=[],a=[],u=-1,c=null;if(r.forEach((function(t){var n=t.offset,r=n==u,l=r&&c||{};Object.keys(t).forEach((function(n){var r=n,a=t[n];if("offset"!==n)switch(r=e.normalizePropertyName(r,s),a){case"!":a=i[n];break;case"*":a=o[n];break;default:a=e.normalizeStyleValue(n,r,a,s)}l[r]=a})),r||a.push(l),c=l,u=n})),s.length){var l="\n - ";throw new Error("Unable to animate due to the following errors:".concat(l).concat(s.join(l)))}return a}function nv(t,e,n,r){switch(e){case"start":t.onStart((function(){return r(n&&rv(n,"start",t))}));break;case"done":t.onDone((function(){return r(n&&rv(n,"done",t))}));break;case"destroy":t.onDestroy((function(){return r(n&&rv(n,"destroy",t))}))}}function rv(t,e,n){var r=n.totalTime,i=iv(t.element,t.triggerName,t.fromState,t.toState,e||t.phaseName,null==r?t.totalTime:r,!!n.disabled),o=t._data;return null!=o&&(i._data=o),i}function iv(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,s=arguments.length>6?arguments[6]:void 0;return{element:t,triggerName:e,fromState:n,toState:r,phaseName:i,totalTime:o,disabled:!!s}}function ov(t,e,n){var r;return t instanceof Map?(r=t.get(e))||t.set(e,r=n):(r=t[e])||(r=t[e]=n),r}function sv(t){var e=t.indexOf(":");return[t.substring(1,e),t.substr(e+1)]}var av=function(t,e){return!1},uv=function(t,e){return!1},cv=function(t,e,n){return[]},lv=Jp();(lv||"undefined"!=typeof Element)&&(av=function(t,e){return t.contains(e)},uv=function(){if(lv||Element.prototype.matches)return function(t,e){return t.matches(e)};var t=Element.prototype,e=t.matchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector;return e?function(t,n){return e.apply(t,[n])}:uv}(),cv=function(t,e,n){var r=[];if(n)r.push.apply(r,_toConsumableArray(t.querySelectorAll(e)));else{var i=t.querySelector(e);i&&r.push(i)}return r});var hv=null,fv=!1;function dv(t){hv||(hv=("undefined"!=typeof document?document.body:null)||{},fv=!!hv.style&&"WebkitAppearance"in hv.style);var e=!0;return hv.style&&!function(t){return"ebkit"==t.substring(1,6)}(t)&&(!(e=t in hv.style)&&fv)&&(e="Webkit"+t.charAt(0).toUpperCase()+t.substr(1)in hv.style),e}var pv=uv,vv=av,yv=cv;function gv(t){var e={};return Object.keys(t).forEach((function(n){var r=n.replace(/([a-z])([A-Z])/g,"$1-$2");e[r]=t[n]})),e}var mv,_v=((mv=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"validateStyleProperty",value:function(t){return dv(t)}},{key:"matchesElement",value:function(t,e){return pv(t,e)}},{key:"containsElement",value:function(t,e){return vv(t,e)}},{key:"query",value:function(t,e,n){return yv(t,e,n)}},{key:"computeStyle",value:function(t,e,n){return n||""}},{key:"animate",value:function(t,e,n,r,i){return arguments.length>5&&void 0!==arguments[5]&&arguments[5],arguments.length>6&&arguments[6],new Xp(n,r)}}]),t}()).\u0275fac=function(t){return new(t||mv)},mv.\u0275prov=ft({token:mv,factory:mv.\u0275fac}),mv),bv=function(){var t=function t(){_classCallCheck(this,t)};return t.NOOP=new _v,t}();function wv(t){if("number"==typeof t)return t;var e=t.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:Cv(parseFloat(e[1]),e[2])}function Cv(t,e){switch(e){case"s":return 1e3*t;default:return t}}function kv(t,e,n){return t.hasOwnProperty("duration")?t:function(t,e,n){var r,i=0,o="";if("string"==typeof t){var s=t.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===s)return e.push('The provided timing value "'.concat(t,'" is invalid.')),{duration:0,delay:0,easing:""};r=Cv(parseFloat(s[1]),s[2]);var a=s[3];null!=a&&(i=Cv(parseFloat(a),s[4]));var u=s[5];u&&(o=u)}else r=t;if(!n){var c=!1,l=e.length;r<0&&(e.push("Duration values below 0 are not allowed for this animation step."),c=!0),i<0&&(e.push("Delay values below 0 are not allowed for this animation step."),c=!0),c&&e.splice(l,0,'The provided timing value "'.concat(t,'" is invalid.'))}return{duration:r,delay:i,easing:o}}(t,e,n)}function Ev(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.keys(t).forEach((function(n){e[n]=t[n]})),e}function Sv(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e)for(var r in t)n[r]=t[r];else Ev(t,n);return n}function Tv(t,e,n){return n?e+":"+n+";":""}function Ov(t){for(var e="",n=0;n<t.style.length;n++){var r=t.style.item(n);e+=Tv(0,r,t.style.getPropertyValue(r))}for(var i in t.style)t.style.hasOwnProperty(i)&&!i.startsWith("_")&&(e+=Tv(0,i.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),t.style[i]));t.setAttribute("style",e)}function Iv(t,e,n){t.style&&(Object.keys(e).forEach((function(r){var i=jv(r);n&&!n.hasOwnProperty(r)&&(n[r]=t.style[i]),t.style[i]=e[r]})),Jp()&&Ov(t))}function xv(t,e){t.style&&(Object.keys(e).forEach((function(e){var n=jv(e);t.style[n]=""})),Jp()&&Ov(t))}function Av(t){return Array.isArray(t)?1==t.length?t[0]:Gp(t):t}var Pv=new RegExp("{{\\s*(.+?)\\s*}}","g");function Rv(t){var e=[];if("string"==typeof t){for(var n;n=Pv.exec(t);)e.push(n[1]);Pv.lastIndex=0}return e}function Nv(t,e,n){var r=t.toString(),i=r.replace(Pv,(function(t,r){var i=e[r];return e.hasOwnProperty(r)||(n.push("Please provide a value for the animation param "+r),i=""),i.toString()}));return i==r?t:i}function Dv(t){for(var e=[],n=t.next();!n.done;)e.push(n.value),n=t.next();return e}var zv=/-+([a-z0-9])/g;function jv(t){return t.replace(zv,(function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e[1].toUpperCase()}))}function Lv(t,e){return 0===t||0===e}function Fv(t,e,n){var r=Object.keys(n);if(r.length&&e.length){var i=e[0],o=[];if(r.forEach((function(t){i.hasOwnProperty(t)||o.push(t),i[t]=n[t]})),o.length)for(var s=function(){var n=e[a];o.forEach((function(e){n[e]=Vv(t,e)}))},a=1;a<e.length;a++)s()}return e}function Mv(t,e,n){switch(e.type){case 7:return t.visitTrigger(e,n);case 0:return t.visitState(e,n);case 1:return t.visitTransition(e,n);case 2:return t.visitSequence(e,n);case 3:return t.visitGroup(e,n);case 4:return t.visitAnimate(e,n);case 5:return t.visitKeyframes(e,n);case 6:return t.visitStyle(e,n);case 8:return t.visitReference(e,n);case 9:return t.visitAnimateChild(e,n);case 10:return t.visitAnimateRef(e,n);case 11:return t.visitQuery(e,n);case 12:return t.visitStagger(e,n);default:throw new Error("Unable to resolve animation metadata node #"+e.type)}}function Vv(t,e){return window.getComputedStyle(t)[e]}var Uv=new Set(["true","1"]),Bv=new Set(["false","0"]);function qv(t,e){var n=Uv.has(t)||Bv.has(t),r=Uv.has(e)||Bv.has(e);return function(i,o){var s="*"==t||t==i,a="*"==e||e==o;return!s&&n&&"boolean"==typeof i&&(s=i?Uv.has(t):Bv.has(t)),!a&&r&&"boolean"==typeof o&&(a=o?Uv.has(e):Bv.has(e)),s&&a}}var Hv=new RegExp("s*:selfs*,?","g");function Wv(t,e,n){return new Gv(t).build(e,n)}var Gv=function(){function t(e){_classCallCheck(this,t),this._driver=e}return _createClass(t,[{key:"build",value:function(t,e){var n=new Qv(e);return this._resetContextStyleTimingState(n),Mv(this,Av(t),n)}},{key:"_resetContextStyleTimingState",value:function(t){t.currentQuerySelector="",t.collectedStyles={},t.collectedStyles[""]={},t.currentTime=0}},{key:"visitTrigger",value:function(t,e){var n=this,r=e.queryCount=0,i=e.depCount=0,o=[],s=[];return"@"==t.name.charAt(0)&&e.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),t.definitions.forEach((function(t){if(n._resetContextStyleTimingState(e),0==t.type){var a=t,u=a.name;u.toString().split(/\s*,\s*/).forEach((function(t){a.name=t,o.push(n.visitState(a,e))})),a.name=u}else if(1==t.type){var c=n.visitTransition(t,e);r+=c.queryCount,i+=c.depCount,s.push(c)}else e.errors.push("only state() and transition() definitions can sit inside of a trigger()")})),{type:7,name:t.name,states:o,transitions:s,queryCount:r,depCount:i,options:null}}},{key:"visitState",value:function(t,e){var n=this.visitStyle(t.styles,e),r=t.options&&t.options.params||null;if(n.containsDynamicStyles){var i=new Set,o=r||{};if(n.styles.forEach((function(t){if(Kv(t)){var e=t;Object.keys(e).forEach((function(t){Rv(e[t]).forEach((function(t){o.hasOwnProperty(t)||i.add(t)}))}))}})),i.size){var s=Dv(i.values());e.errors.push('state("'.concat(t.name,'", ...) must define default values for all the following style substitutions: ').concat(s.join(", ")))}}return{type:0,name:t.name,style:n,options:r?{params:r}:null}}},{key:"visitTransition",value:function(t,e){e.queryCount=0,e.depCount=0;var n,r,i,o=Mv(this,Av(t.animation),e);return{type:1,matchers:(n=t.expr,r=e.errors,i=[],"string"==typeof n?n.split(/\s*,\s*/).forEach((function(t){return function(t,e,n){if(":"==t[0]){var r=function(t,e){switch(t){case":enter":return"void => *";case":leave":return"* => void";case":increment":return function(t,e){return parseFloat(e)>parseFloat(t)};case":decrement":return function(t,e){return parseFloat(e)<parseFloat(t)};default:return e.push('The transition alias value "'.concat(t,'" is not supported')),"* => *"}}(t,n);if("function"==typeof r)return void e.push(r);t=r}var i=t.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==i||i.length<4)return n.push('The provided transition expression "'.concat(t,'" is not supported')),e;var o=i[1],s=i[2],a=i[3];e.push(qv(o,a)),"<"!=s[0]||"*"==o&&"*"==a||e.push(qv(a,o))}(t,i,r)})):i.push(n),i),animation:o,queryCount:e.queryCount,depCount:e.depCount,options:Yv(t.options)}}},{key:"visitSequence",value:function(t,e){var n=this;return{type:2,steps:t.steps.map((function(t){return Mv(n,t,e)})),options:Yv(t.options)}}},{key:"visitGroup",value:function(t,e){var n=this,r=e.currentTime,i=0,o=t.steps.map((function(t){e.currentTime=r;var o=Mv(n,t,e);return i=Math.max(i,e.currentTime),o}));return e.currentTime=i,{type:3,steps:o,options:Yv(t.options)}}},{key:"visitAnimate",value:function(t,e){var n,r=function(t,e){var n=null;if(t.hasOwnProperty("duration"))n=t;else if("number"==typeof t)return $v(kv(t,e).duration,0,"");var r=t;if(r.split(/\s+/).some((function(t){return"{"==t.charAt(0)&&"{"==t.charAt(1)}))){var i=$v(0,0,"");return i.dynamic=!0,i.strValue=r,i}return $v((n=n||kv(r,e)).duration,n.delay,n.easing)}(t.timings,e.errors);e.currentAnimateTimings=r;var i=t.styles?t.styles:Qp({});if(5==i.type)n=this.visitKeyframes(i,e);else{var o=t.styles,s=!1;if(!o){s=!0;var a={};r.easing&&(a.easing=r.easing),o=Qp(a)}e.currentTime+=r.duration+r.delay;var u=this.visitStyle(o,e);u.isEmptyStep=s,n=u}return e.currentAnimateTimings=null,{type:4,timings:r,style:n,options:null}}},{key:"visitStyle",value:function(t,e){var n=this._makeStyleAst(t,e);return this._validateStyleAst(n,e),n}},{key:"_makeStyleAst",value:function(t,e){var n=[];Array.isArray(t.styles)?t.styles.forEach((function(t){"string"==typeof t?"*"==t?n.push(t):e.errors.push("The provided style string value ".concat(t," is not allowed.")):n.push(t)})):n.push(t.styles);var r=!1,i=null;return n.forEach((function(t){if(Kv(t)){var e=t,n=e.easing;if(n&&(i=n,delete e.easing),!r)for(var o in e)if(e[o].toString().indexOf("{{")>=0){r=!0;break}}})),{type:6,styles:n,easing:i,offset:t.offset,containsDynamicStyles:r,options:null}}},{key:"_validateStyleAst",value:function(t,e){var n=this,r=e.currentAnimateTimings,i=e.currentTime,o=e.currentTime;r&&o>0&&(o-=r.duration+r.delay),t.styles.forEach((function(t){"string"!=typeof t&&Object.keys(t).forEach((function(r){if(n._driver.validateStyleProperty(r)){var s=e.collectedStyles[e.currentQuerySelector],a=s[r],u=!0;a&&(o!=i&&o>=a.startTime&&i<=a.endTime&&(e.errors.push('The CSS property "'.concat(r,'" that exists between the times of "').concat(a.startTime,'ms" and "').concat(a.endTime,'ms" is also being animated in a parallel animation between the times of "').concat(o,'ms" and "').concat(i,'ms"')),u=!1),o=a.startTime),u&&(s[r]={startTime:o,endTime:i}),e.options&&function(t,e,n){var r=e.params||{},i=Rv(t);i.length&&i.forEach((function(t){r.hasOwnProperty(t)||n.push("Unable to resolve the local animation param ".concat(t," in the given list of values"))}))}(t[r],e.options,e.errors)}else e.errors.push('The provided animation property "'.concat(r,'" is not a supported CSS property for animations'))}))}))}},{key:"visitKeyframes",value:function(t,e){var n=this,r={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push("keyframes() must be placed inside of a call to animate()"),r;var i=0,o=[],s=!1,a=!1,u=0,c=t.steps.map((function(t){var r=n._makeStyleAst(t,e),c=null!=r.offset?r.offset:function(t){if("string"==typeof t)return null;var e=null;if(Array.isArray(t))t.forEach((function(t){if(Kv(t)&&t.hasOwnProperty("offset")){var n=t;e=parseFloat(n.offset),delete n.offset}}));else if(Kv(t)&&t.hasOwnProperty("offset")){var n=t;e=parseFloat(n.offset),delete n.offset}return e}(r.styles),l=0;return null!=c&&(i++,l=r.offset=c),a=a||l<0||l>1,s=s||l<u,u=l,o.push(l),r}));a&&e.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),s&&e.errors.push("Please ensure that all keyframe offsets are in order");var l=t.steps.length,h=0;i>0&&i<l?e.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==i&&(h=1/(l-1));var f=l-1,d=e.currentTime,p=e.currentAnimateTimings,v=p.duration;return c.forEach((function(t,i){var s=h>0?i==f?1:h*i:o[i],a=s*v;e.currentTime=d+p.delay+a,p.duration=a,n._validateStyleAst(t,e),t.offset=s,r.styles.push(t)})),r}},{key:"visitReference",value:function(t,e){return{type:8,animation:Mv(this,Av(t.animation),e),options:Yv(t.options)}}},{key:"visitAnimateChild",value:function(t,e){return e.depCount++,{type:9,options:Yv(t.options)}}},{key:"visitAnimateRef",value:function(t,e){return{type:10,animation:this.visitReference(t.animation,e),options:Yv(t.options)}}},{key:"visitQuery",value:function(t,e){var n=e.currentQuerySelector,r=t.options||{};e.queryCount++,e.currentQuery=t;var i=_slicedToArray(function(t){var e=!!t.split(/\s*,\s*/).find((function(t){return":self"==t}));return e&&(t=t.replace(Hv,"")),[t=t.replace(/@\*/g,".ng-trigger").replace(/@\w+/g,(function(t){return".ng-trigger-"+t.substr(1)})).replace(/:animating/g,".ng-animating"),e]}(t.selector),2),o=i[0],s=i[1];e.currentQuerySelector=n.length?n+" "+o:o,ov(e.collectedStyles,e.currentQuerySelector,{});var a=Mv(this,Av(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=n,{type:11,selector:o,limit:r.limit||0,optional:!!r.optional,includeSelf:s,animation:a,originalSelector:t.selector,options:Yv(t.options)}}},{key:"visitStagger",value:function(t,e){e.currentQuery||e.errors.push("stagger() can only be used inside of query()");var n="full"===t.timings?{duration:0,delay:0,easing:"full"}:kv(t.timings,e.errors,!0);return{type:12,animation:Mv(this,Av(t.animation),e),timings:n,options:null}}}]),t}(),Qv=function t(e){_classCallCheck(this,t),this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null};function Kv(t){return!Array.isArray(t)&&"object"==typeof t}function Yv(t){var e;return t?(t=Ev(t)).params&&(t.params=(e=t.params)?Ev(e):null):t={},t}function $v(t,e,n){return{duration:t,delay:e,easing:n}}function Xv(t,e,n,r,i,o){var s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]&&arguments[7];return{type:1,element:t,keyframes:e,preStyleProps:n,postStyleProps:r,duration:i,delay:o,totalTime:i+o,easing:s,subTimeline:a}}var Zv=function(){function t(){_classCallCheck(this,t),this._map=new Map}return _createClass(t,[{key:"consume",value:function(t){var e=this._map.get(t);return e?this._map.delete(t):e=[],e}},{key:"append",value:function(t,e){var n,r=this._map.get(t);r||this._map.set(t,r=[]),(n=r).push.apply(n,_toConsumableArray(e))}},{key:"has",value:function(t){return this._map.has(t)}},{key:"clear",value:function(){this._map.clear()}}]),t}(),Jv=new RegExp(":enter","g"),ty=new RegExp(":leave","g");function ey(t,e,n,r,i){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{},a=arguments.length>7?arguments[7]:void 0,u=arguments.length>8?arguments[8]:void 0,c=arguments.length>9&&void 0!==arguments[9]?arguments[9]:[];return(new ny).buildKeyframes(t,e,n,r,i,o,s,a,u,c)}var ny=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"buildKeyframes",value:function(t,e,n,r,i,o,s,a,u){var c=arguments.length>9&&void 0!==arguments[9]?arguments[9]:[];u=u||new Zv;var l=new iy(t,e,u,r,i,c,[]);l.options=a,l.currentTimeline.setStyles([o],null,l.errors,a),Mv(this,n,l);var h=l.timelines.filter((function(t){return t.containsAnimation()}));if(h.length&&Object.keys(s).length){var f=h[h.length-1];f.allowOnlyTimelineStyles()||f.setStyles([s],null,l.errors,a)}return h.length?h.map((function(t){return t.buildKeyframes()})):[Xv(e,[],[],[],0,0,"",!1)]}},{key:"visitTrigger",value:function(t,e){}},{key:"visitState",value:function(t,e){}},{key:"visitTransition",value:function(t,e){}},{key:"visitAnimateChild",value:function(t,e){var n=e.subInstructions.consume(e.element);if(n){var r=e.createSubContext(t.options),i=e.currentTimeline.currentTime,o=this._visitSubInstructions(n,r,r.options);i!=o&&e.transformIntoNewTimeline(o)}e.previousNode=t}},{key:"visitAnimateRef",value:function(t,e){var n=e.createSubContext(t.options);n.transformIntoNewTimeline(),this.visitReference(t.animation,n),e.transformIntoNewTimeline(n.currentTimeline.currentTime),e.previousNode=t}},{key:"_visitSubInstructions",value:function(t,e,n){var r=e.currentTimeline.currentTime,i=null!=n.duration?wv(n.duration):null,o=null!=n.delay?wv(n.delay):null;return 0!==i&&t.forEach((function(t){var n=e.appendInstructionToTimeline(t,i,o);r=Math.max(r,n.duration+n.delay)})),r}},{key:"visitReference",value:function(t,e){e.updateOptions(t.options,!0),Mv(this,t.animation,e),e.previousNode=t}},{key:"visitSequence",value:function(t,e){var n=this,r=e.subContextCount,i=e,o=t.options;if(o&&(o.params||o.delay)&&((i=e.createSubContext(o)).transformIntoNewTimeline(),null!=o.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=ry);var s=wv(o.delay);i.delayNextStep(s)}t.steps.length&&(t.steps.forEach((function(t){return Mv(n,t,i)})),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),e.previousNode=t}},{key:"visitGroup",value:function(t,e){var n=this,r=[],i=e.currentTimeline.currentTime,o=t.options&&t.options.delay?wv(t.options.delay):0;t.steps.forEach((function(s){var a=e.createSubContext(t.options);o&&a.delayNextStep(o),Mv(n,s,a),i=Math.max(i,a.currentTimeline.currentTime),r.push(a.currentTimeline)})),r.forEach((function(t){return e.currentTimeline.mergeTimelineCollectedStyles(t)})),e.transformIntoNewTimeline(i),e.previousNode=t}},{key:"_visitTiming",value:function(t,e){if(t.dynamic){var n=t.strValue;return kv(e.params?Nv(n,e.params,e.errors):n,e.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}}},{key:"visitAnimate",value:function(t,e){var n=e.currentAnimateTimings=this._visitTiming(t.timings,e),r=e.currentTimeline;n.delay&&(e.incrementTime(n.delay),r.snapshotCurrentStyles());var i=t.style;5==i.type?this.visitKeyframes(i,e):(e.incrementTime(n.duration),this.visitStyle(i,e),r.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}},{key:"visitStyle",value:function(t,e){var n=e.currentTimeline,r=e.currentAnimateTimings;!r&&n.getCurrentStyleProperties().length&&n.forwardFrame();var i=r&&r.easing||t.easing;t.isEmptyStep?n.applyEmptyStep(i):n.setStyles(t.styles,i,e.errors,e.options),e.previousNode=t}},{key:"visitKeyframes",value:function(t,e){var n=e.currentAnimateTimings,r=e.currentTimeline.duration,i=n.duration,o=e.createSubContext().currentTimeline;o.easing=n.easing,t.styles.forEach((function(t){o.forwardTime((t.offset||0)*i),o.setStyles(t.styles,t.easing,e.errors,e.options),o.applyStylesToKeyframe()})),e.currentTimeline.mergeTimelineCollectedStyles(o),e.transformIntoNewTimeline(r+i),e.previousNode=t}},{key:"visitQuery",value:function(t,e){var n=this,r=e.currentTimeline.currentTime,i=t.options||{},o=i.delay?wv(i.delay):0;o&&(6===e.previousNode.type||0==r&&e.currentTimeline.getCurrentStyleProperties().length)&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=ry);var s=r,a=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!i.optional,e.errors);e.currentQueryTotal=a.length;var u=null;a.forEach((function(r,i){e.currentQueryIndex=i;var a=e.createSubContext(t.options,r);o&&a.delayNextStep(o),r===e.element&&(u=a.currentTimeline),Mv(n,t.animation,a),a.currentTimeline.applyStylesToKeyframe(),s=Math.max(s,a.currentTimeline.currentTime)})),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(s),u&&(e.currentTimeline.mergeTimelineCollectedStyles(u),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}},{key:"visitStagger",value:function(t,e){var n=e.parentContext,r=e.currentTimeline,i=t.timings,o=Math.abs(i.duration),s=o*(e.currentQueryTotal-1),a=o*e.currentQueryIndex;switch(i.duration<0?"reverse":i.easing){case"reverse":a=s-a;break;case"full":a=n.currentStaggerTime}var u=e.currentTimeline;a&&u.delayNextStep(a);var c=u.currentTime;Mv(this,t.animation,e),e.previousNode=t,n.currentStaggerTime=r.currentTime-c+(r.startTime-n.currentTimeline.startTime)}}]),t}(),ry={},iy=function(){function t(e,n,r,i,o,s,a,u){_classCallCheck(this,t),this._driver=e,this.element=n,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=o,this.errors=s,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=ry,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=u||new oy(this._driver,n,0),a.push(this.currentTimeline)}return _createClass(t,[{key:"updateOptions",value:function(t,e){var n=this;if(t){var r=t,i=this.options;null!=r.duration&&(i.duration=wv(r.duration)),null!=r.delay&&(i.delay=wv(r.delay));var o=r.params;if(o){var s=i.params;s||(s=this.options.params={}),Object.keys(o).forEach((function(t){e&&s.hasOwnProperty(t)||(s[t]=Nv(o[t],s,n.errors))}))}}}},{key:"_copyOptions",value:function(){var t={};if(this.options){var e=this.options.params;if(e){var n=t.params={};Object.keys(e).forEach((function(t){n[t]=e[t]}))}}return t}},{key:"createSubContext",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,i=n||this.element,o=new t(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return o.previousNode=this.previousNode,o.currentAnimateTimings=this.currentAnimateTimings,o.options=this._copyOptions(),o.updateOptions(e),o.currentQueryIndex=this.currentQueryIndex,o.currentQueryTotal=this.currentQueryTotal,o.parentContext=this,this.subContextCount++,o}},{key:"transformIntoNewTimeline",value:function(t){return this.previousNode=ry,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}},{key:"appendInstructionToTimeline",value:function(t,e,n){var r={duration:null!=e?e:t.duration,delay:this.currentTimeline.currentTime+(null!=n?n:0)+t.delay,easing:""},i=new sy(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,r,t.stretchStartingKeyframe);return this.timelines.push(i),r}},{key:"incrementTime",value:function(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}},{key:"delayNextStep",value:function(t){t>0&&this.currentTimeline.delayNextStep(t)}},{key:"invokeQuery",value:function(t,e,n,r,i,o){var s=[];if(r&&s.push(this.element),t.length>0){t=(t=t.replace(Jv,"."+this._enterClassName)).replace(ty,"."+this._leaveClassName);var a=this._driver.query(this.element,t,1!=n);0!==n&&(a=n<0?a.slice(a.length+n,a.length):a.slice(0,n)),s.push.apply(s,_toConsumableArray(a))}return i||0!=s.length||o.push('`query("'.concat(e,'")` returned zero elements. (Use `query("').concat(e,'", { optional: true })` if you wish to allow this.)')),s}},{key:"params",get:function(){return this.options.params}}]),t}(),oy=function(){function t(e,n,r,i){_classCallCheck(this,t),this._driver=e,this.element=n,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(n),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(n,this._localTimelineStyles)),this._loadKeyframe()}return _createClass(t,[{key:"containsAnimation",value:function(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}},{key:"getCurrentStyleProperties",value:function(){return Object.keys(this._currentKeyframe)}},{key:"delayNextStep",value:function(t){var e=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}},{key:"fork",value:function(e,n){return this.applyStylesToKeyframe(),new t(this._driver,e,n||this.currentTime,this._elementTimelineStylesLookup)}},{key:"_loadKeyframe",value:function(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}},{key:"forwardFrame",value:function(){this.duration+=1,this._loadKeyframe()}},{key:"forwardTime",value:function(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}},{key:"_updateStyle",value:function(t,e){this._localTimelineStyles[t]=e,this._globalTimelineStyles[t]=e,this._styleSummary[t]={time:this.currentTime,value:e}}},{key:"allowOnlyTimelineStyles",value:function(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}},{key:"applyEmptyStep",value:function(t){var e=this;t&&(this._previousKeyframe.easing=t),Object.keys(this._globalTimelineStyles).forEach((function(t){e._backFill[t]=e._globalTimelineStyles[t]||"*",e._currentKeyframe[t]="*"})),this._currentEmptyStepKeyframe=this._currentKeyframe}},{key:"setStyles",value:function(t,e,n,r){var i=this;e&&(this._previousKeyframe.easing=e);var o=r&&r.params||{},s=function(t,e){var n,r={};return t.forEach((function(t){"*"===t?(n=n||Object.keys(e)).forEach((function(t){r[t]="*"})):Sv(t,!1,r)})),r}(t,this._globalTimelineStyles);Object.keys(s).forEach((function(t){var e=Nv(s[t],o,n);i._pendingStyles[t]=e,i._localTimelineStyles.hasOwnProperty(t)||(i._backFill[t]=i._globalTimelineStyles.hasOwnProperty(t)?i._globalTimelineStyles[t]:"*"),i._updateStyle(t,e)}))}},{key:"applyStylesToKeyframe",value:function(){var t=this,e=this._pendingStyles,n=Object.keys(e);0!=n.length&&(this._pendingStyles={},n.forEach((function(n){t._currentKeyframe[n]=e[n]})),Object.keys(this._localTimelineStyles).forEach((function(e){t._currentKeyframe.hasOwnProperty(e)||(t._currentKeyframe[e]=t._localTimelineStyles[e])})))}},{key:"snapshotCurrentStyles",value:function(){var t=this;Object.keys(this._localTimelineStyles).forEach((function(e){var n=t._localTimelineStyles[e];t._pendingStyles[e]=n,t._updateStyle(e,n)}))}},{key:"getFinalKeyframe",value:function(){return this._keyframes.get(this.duration)}},{key:"mergeTimelineCollectedStyles",value:function(t){var e=this;Object.keys(t._styleSummary).forEach((function(n){var r=e._styleSummary[n],i=t._styleSummary[n];(!r||i.time>r.time)&&e._updateStyle(n,i.value)}))}},{key:"buildKeyframes",value:function(){var t=this;this.applyStylesToKeyframe();var e=new Set,n=new Set,r=1===this._keyframes.size&&0===this.duration,i=[];this._keyframes.forEach((function(o,s){var a=Sv(o,!0);Object.keys(a).forEach((function(t){var r=a[t];"!"==r?e.add(t):"*"==r&&n.add(t)})),r||(a.offset=s/t.duration),i.push(a)}));var o=e.size?Dv(e.values()):[],s=n.size?Dv(n.values()):[];if(r){var a=i[0],u=Ev(a);a.offset=0,u.offset=1,i=[a,u]}return Xv(this.element,i,o,s,this.duration,this.startTime,this.easing,!1)}},{key:"currentTime",get:function(){return this.startTime+this.duration}},{key:"properties",get:function(){var t=[];for(var e in this._currentKeyframe)t.push(e);return t}}]),t}(),sy=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r,i,o,s,a){var u,c=arguments.length>6&&void 0!==arguments[6]&&arguments[6];return _classCallCheck(this,n),(u=e.call(this,t,r,a.delay)).element=r,u.keyframes=i,u.preStyleProps=o,u.postStyleProps=s,u._stretchStartingKeyframe=c,u.timings={duration:a.duration,delay:a.delay,easing:a.easing},u}return _createClass(n,[{key:"containsAnimation",value:function(){return this.keyframes.length>1}},{key:"buildKeyframes",value:function(){var t=this.keyframes,e=this.timings,n=e.delay,r=e.duration,i=e.easing;if(this._stretchStartingKeyframe&&n){var o=[],s=r+n,a=n/s,u=Sv(t[0],!1);u.offset=0,o.push(u);var c=Sv(t[0],!1);c.offset=ay(a),o.push(c);for(var l=t.length-1,h=1;h<=l;h++){var f=Sv(t[h],!1);f.offset=ay((n+f.offset*r)/s),o.push(f)}r=s,n=0,i="",t=o}return Xv(this.element,t,this.preStyleProps,this.postStyleProps,r,n,i,!0)}}]),n}(oy);function ay(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,n=Math.pow(10,e-1);return Math.round(t*n)/n}var uy,cy,ly=function t(){_classCallCheck(this,t)},hy=function(t){_inherits(n,t);var e=_createSuper(n);function n(){return _classCallCheck(this,n),e.apply(this,arguments)}return _createClass(n,[{key:"normalizePropertyName",value:function(t,e){return jv(t)}},{key:"normalizeStyleValue",value:function(t,e,n,r){var i="",o=n.toString().trim();if(fy[e]&&0!==n&&"0"!==n)if("number"==typeof n)i="px";else{var s=n.match(/^[+-]?[\d\.]+([a-z]*)$/);s&&0==s[1].length&&r.push("Please provide a CSS unit value for ".concat(t,":").concat(n))}return o+i}}]),n}(ly),fy=(uy="width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(","),cy={},uy.forEach((function(t){return cy[t]=!0})),cy);function dy(t,e,n,r,i,o,s,a,u,c,l,h,f){return{type:0,element:t,triggerName:e,isRemovalTransition:i,fromState:n,fromStyles:o,toState:r,toStyles:s,timelines:a,queriedElements:u,preStyleProps:c,postStyleProps:l,totalTime:h,errors:f}}var py={},vy=function(){function t(e,n,r){_classCallCheck(this,t),this._triggerName=e,this.ast=n,this._stateStyles=r}return _createClass(t,[{key:"match",value:function(t,e,n,r){return function(t,e,n,r,i){return t.some((function(t){return t(e,n,r,i)}))}(this.ast.matchers,t,e,n,r)}},{key:"buildStyles",value:function(t,e,n){var r=this._stateStyles["*"],i=this._stateStyles[t],o=r?r.buildStyles(e,n):{};return i?i.buildStyles(e,n):o}},{key:"build",value:function(t,e,n,r,i,o,s,a,u,c){var l=[],h=this.ast.options&&this.ast.options.params||py,f=this.buildStyles(n,s&&s.params||py,l),d=a&&a.params||py,p=this.buildStyles(r,d,l),v=new Set,y=new Map,g=new Map,m="void"===r,_={params:Object.assign(Object.assign({},h),d)},b=c?[]:ey(t,e,this.ast.animation,i,o,f,p,_,u,l),w=0;if(b.forEach((function(t){w=Math.max(t.duration+t.delay,w)})),l.length)return dy(e,this._triggerName,n,r,m,f,p,[],[],y,g,w,l);b.forEach((function(t){var n=t.element,r=ov(y,n,{});t.preStyleProps.forEach((function(t){return r[t]=!0}));var i=ov(g,n,{});t.postStyleProps.forEach((function(t){return i[t]=!0})),n!==e&&v.add(n)}));var C=Dv(v.values());return dy(e,this._triggerName,n,r,m,f,p,b,C,y,g,w)}}]),t}(),yy=function(){function t(e,n){_classCallCheck(this,t),this.styles=e,this.defaultParams=n}return _createClass(t,[{key:"buildStyles",value:function(t,e){var n={},r=Ev(this.defaultParams);return Object.keys(t).forEach((function(e){var n=t[e];null!=n&&(r[e]=n)})),this.styles.styles.forEach((function(t){if("string"!=typeof t){var i=t;Object.keys(i).forEach((function(t){var o=i[t];o.length>1&&(o=Nv(o,r,e)),n[t]=o}))}})),n}}]),t}(),gy=function(){function t(e,n){var r=this;_classCallCheck(this,t),this.name=e,this.ast=n,this.transitionFactories=[],this.states={},n.states.forEach((function(t){r.states[t.name]=new yy(t.style,t.options&&t.options.params||{})})),my(this.states,"true","1"),my(this.states,"false","0"),n.transitions.forEach((function(t){r.transitionFactories.push(new vy(e,t,r.states))})),this.fallbackTransition=new vy(e,{type:1,animation:{type:2,steps:[],options:null},matchers:[function(t,e){return!0}],options:null,queryCount:0,depCount:0},this.states)}return _createClass(t,[{key:"matchTransition",value:function(t,e,n,r){return this.transitionFactories.find((function(i){return i.match(t,e,n,r)}))||null}},{key:"matchStyles",value:function(t,e,n){return this.fallbackTransition.buildStyles(t,e,n)}},{key:"containsQueries",get:function(){return this.ast.queryCount>0}}]),t}();function my(t,e,n){t.hasOwnProperty(e)?t.hasOwnProperty(n)||(t[n]=t[e]):t.hasOwnProperty(n)&&(t[e]=t[n])}var _y=new Zv,by=function(){function t(e,n,r){_classCallCheck(this,t),this.bodyNode=e,this._driver=n,this._normalizer=r,this._animations={},this._playersById={},this.players=[]}return _createClass(t,[{key:"register",value:function(t,e){var n=[],r=Wv(this._driver,e,n);if(n.length)throw new Error("Unable to build the animation due to the following errors: "+n.join("\n"));this._animations[t]=r}},{key:"_buildPlayer",value:function(t,e,n){var r=t.element,i=ev(0,this._normalizer,0,t.keyframes,e,n);return this._driver.animate(r,i,t.duration,t.delay,t.easing,[],!0)}},{key:"create",value:function(t,e){var n,r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=[],s=this._animations[t],a=new Map;if(s?(n=ey(this._driver,e,s,"ng-enter","ng-leave",{},{},i,_y,o)).forEach((function(t){var e=ov(a,t.element,{});t.postStyleProps.forEach((function(t){return e[t]=null}))})):(o.push("The requested animation doesn't exist or has already been destroyed"),n=[]),o.length)throw new Error("Unable to create the animation due to the following errors: "+o.join("\n"));a.forEach((function(t,e){Object.keys(t).forEach((function(n){t[n]=r._driver.computeStyle(e,n,"*")}))}));var u=tv(n.map((function(t){var e=a.get(t.element);return r._buildPlayer(t,{},e)})));return this._playersById[t]=u,u.onDestroy((function(){return r.destroy(t)})),this.players.push(u),u}},{key:"destroy",value:function(t){var e=this._getPlayer(t);e.destroy(),delete this._playersById[t];var n=this.players.indexOf(e);n>=0&&this.players.splice(n,1)}},{key:"_getPlayer",value:function(t){var e=this._playersById[t];if(!e)throw new Error("Unable to find the timeline player referenced by "+t);return e}},{key:"listen",value:function(t,e,n,r){var i=iv(e,"","","");return nv(this._getPlayer(t),n,i,r),function(){}}},{key:"command",value:function(t,e,n,r){if("register"!=n)if("create"!=n){var i=this._getPlayer(t);switch(n){case"play":i.play();break;case"pause":i.pause();break;case"reset":i.reset();break;case"restart":i.restart();break;case"finish":i.finish();break;case"init":i.init();break;case"setPosition":i.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(t)}}else this.create(t,e,r[0]||{});else this.register(t,r[0])}}]),t}(),wy=[],Cy={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},ky={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Ey=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";_classCallCheck(this,t),this.namespaceId=n;var r,i=e&&e.hasOwnProperty("value");if(this.value=null!=(r=i?e.value:e)?r:null,i){var o=Ev(e);delete o.value,this.options=o}else this.options={};this.options.params||(this.options.params={})}return _createClass(t,[{key:"absorbOptions",value:function(t){var e=t.params;if(e){var n=this.options.params;Object.keys(e).forEach((function(t){null==n[t]&&(n[t]=e[t])}))}}},{key:"params",get:function(){return this.options.params}}]),t}(),Sy=new Ey("void"),Ty=function(){function t(e,n,r){_classCallCheck(this,t),this.id=e,this.hostElement=n,this._engine=r,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,Ny(n,this._hostClassName)}return _createClass(t,[{key:"listen",value:function(t,e,n,r){var i,o=this;if(!this._triggers.hasOwnProperty(e))throw new Error('Unable to listen on the animation trigger event "'.concat(n,'" because the animation trigger "').concat(e,"\" doesn't exist!"));if(null==n||0==n.length)throw new Error('Unable to listen on the animation trigger "'.concat(e,'" because the provided event is undefined!'));if("start"!=(i=n)&&"done"!=i)throw new Error('The provided animation trigger event "'.concat(n,'" for the animation trigger "').concat(e,'" is not supported!'));var s=ov(this._elementListeners,t,[]),a={name:e,phase:n,callback:r};s.push(a);var u=ov(this._engine.statesByElement,t,{});return u.hasOwnProperty(e)||(Ny(t,"ng-trigger"),Ny(t,"ng-trigger-"+e),u[e]=Sy),function(){o._engine.afterFlush((function(){var t=s.indexOf(a);t>=0&&s.splice(t,1),o._triggers[e]||delete u[e]}))}}},{key:"register",value:function(t,e){return!this._triggers[t]&&(this._triggers[t]=e,!0)}},{key:"_getTrigger",value:function(t){var e=this._triggers[t];if(!e)throw new Error('The provided animation trigger "'.concat(t,'" has not been registered!'));return e}},{key:"trigger",value:function(t,e,n){var r=this,i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=this._getTrigger(e),s=new Iy(this.id,e,t),a=this._engine.statesByElement.get(t);a||(Ny(t,"ng-trigger"),Ny(t,"ng-trigger-"+e),this._engine.statesByElement.set(t,a={}));var u=a[e],c=new Ey(n,this.id);if(!(n&&n.hasOwnProperty("value"))&&u&&c.absorbOptions(u.options),a[e]=c,u||(u=Sy),"void"===c.value||u.value!==c.value){var l=ov(this._engine.playersByElement,t,[]);l.forEach((function(t){t.namespaceId==r.id&&t.triggerName==e&&t.queued&&t.destroy()}));var h=o.matchTransition(u.value,c.value,t,c.params),f=!1;if(!h){if(!i)return;h=o.fallbackTransition,f=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:h,fromState:u,toState:c,player:s,isFallbackTransition:f}),f||(Ny(t,"ng-animate-queued"),s.onStart((function(){Dy(t,"ng-animate-queued")}))),s.onDone((function(){var e=r.players.indexOf(s);e>=0&&r.players.splice(e,1);var n=r._engine.playersByElement.get(t);if(n){var i=n.indexOf(s);i>=0&&n.splice(i,1)}})),this.players.push(s),l.push(s),s}if(!function(t,e){var n=Object.keys(t),r=Object.keys(e);if(n.length!=r.length)return!1;for(var i=0;i<n.length;i++){var o=n[i];if(!e.hasOwnProperty(o)||t[o]!==e[o])return!1}return!0}(u.params,c.params)){var d=[],p=o.matchStyles(u.value,u.params,d),v=o.matchStyles(c.value,c.params,d);d.length?this._engine.reportError(d):this._engine.afterFlush((function(){xv(t,p),Iv(t,v)}))}}},{key:"deregister",value:function(t){var e=this;delete this._triggers[t],this._engine.statesByElement.forEach((function(e,n){delete e[t]})),this._elementListeners.forEach((function(n,r){e._elementListeners.set(r,n.filter((function(e){return e.name!=t})))}))}},{key:"clearElementCache",value:function(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);var e=this._engine.playersByElement.get(t);e&&(e.forEach((function(t){return t.destroy()})),this._engine.playersByElement.delete(t))}},{key:"_signalRemovalForInnerTriggers",value:function(t,e){var n=this,r=this._engine.driver.query(t,".ng-trigger",!0);r.forEach((function(t){if(!t.__ng_removed){var r=n._engine.fetchNamespacesByElement(t);r.size?r.forEach((function(n){return n.triggerLeaveAnimation(t,e,!1,!0)})):n.clearElementCache(t)}})),this._engine.afterFlushAnimationsDone((function(){return r.forEach((function(t){return n.clearElementCache(t)}))}))}},{key:"triggerLeaveAnimation",value:function(t,e,n,r){var i=this,o=this._engine.statesByElement.get(t);if(o){var s=[];if(Object.keys(o).forEach((function(e){if(i._triggers[e]){var n=i.trigger(t,e,"void",r);n&&s.push(n)}})),s.length)return this._engine.markElementAsRemoved(this.id,t,!0,e),n&&tv(s).onDone((function(){return i._engine.processLeaveNode(t)})),!0}return!1}},{key:"prepareLeaveAnimationListeners",value:function(t){var e=this,n=this._elementListeners.get(t);if(n){var r=new Set;n.forEach((function(n){var i=n.name;if(!r.has(i)){r.add(i);var o=e._triggers[i].fallbackTransition,s=e._engine.statesByElement.get(t)[i]||Sy,a=new Ey("void"),u=new Iy(e.id,i,t);e._engine.totalQueuedPlayers++,e._queue.push({element:t,triggerName:i,transition:o,fromState:s,toState:a,player:u,isFallbackTransition:!0})}}))}}},{key:"removeNode",value:function(t,e){var n=this,r=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e),!this.triggerLeaveAnimation(t,e,!0)){var i=!1;if(r.totalAnimations){var o=r.players.length?r.playersByQueriedElement.get(t):[];if(o&&o.length)i=!0;else for(var s=t;s=s.parentNode;)if(r.statesByElement.get(s)){i=!0;break}}if(this.prepareLeaveAnimationListeners(t),i)r.markElementAsRemoved(this.id,t,!1,e);else{var a=t.__ng_removed;a&&a!==Cy||(r.afterFlush((function(){return n.clearElementCache(t)})),r.destroyInnerAnimations(t),r._onRemovalComplete(t,e))}}}},{key:"insertNode",value:function(t,e){Ny(t,this._hostClassName)}},{key:"drainQueuedTransitions",value:function(t){var e=this,n=[];return this._queue.forEach((function(r){var i=r.player;if(!i.destroyed){var o=r.element,s=e._elementListeners.get(o);s&&s.forEach((function(e){if(e.name==r.triggerName){var n=iv(o,r.triggerName,r.fromState.value,r.toState.value);n._data=t,nv(r.player,e.phase,n,e.callback)}})),i.markedForDestroy?e._engine.afterFlush((function(){i.destroy()})):n.push(r)}})),this._queue=[],n.sort((function(t,n){var r=t.transition.ast.depCount,i=n.transition.ast.depCount;return 0==r||0==i?r-i:e._engine.driver.containsElement(t.element,n.element)?1:-1}))}},{key:"destroy",value:function(t){this.players.forEach((function(t){return t.destroy()})),this._signalRemovalForInnerTriggers(this.hostElement,t)}},{key:"elementContainsData",value:function(t){var e=!1;return this._elementListeners.has(t)&&(e=!0),e=!!this._queue.find((function(e){return e.element===t}))||e}}]),t}(),Oy=function(){function t(e,n,r){_classCallCheck(this,t),this.bodyNode=e,this.driver=n,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=function(t,e){}}return _createClass(t,[{key:"_onRemovalComplete",value:function(t,e){this.onRemovalComplete(t,e)}},{key:"createNamespace",value:function(t,e){var n=new Ty(t,e,this);return e.parentNode?this._balanceNamespaceList(n,e):(this.newHostElements.set(e,n),this.collectEnterElement(e)),this._namespaceLookup[t]=n}},{key:"_balanceNamespaceList",value:function(t,e){var n=this._namespaceList.length-1;if(n>=0){for(var r=!1,i=n;i>=0;i--)if(this.driver.containsElement(this._namespaceList[i].hostElement,e)){this._namespaceList.splice(i+1,0,t),r=!0;break}r||this._namespaceList.splice(0,0,t)}else this._namespaceList.push(t);return this.namespacesByHostElement.set(e,t),t}},{key:"register",value:function(t,e){var n=this._namespaceLookup[t];return n||(n=this.createNamespace(t,e)),n}},{key:"registerTrigger",value:function(t,e,n){var r=this._namespaceLookup[t];r&&r.register(e,n)&&this.totalAnimations++}},{key:"destroy",value:function(t,e){var n=this;if(t){var r=this._fetchNamespace(t);this.afterFlush((function(){n.namespacesByHostElement.delete(r.hostElement),delete n._namespaceLookup[t];var e=n._namespaceList.indexOf(r);e>=0&&n._namespaceList.splice(e,1)})),this.afterFlushAnimationsDone((function(){return r.destroy(e)}))}}},{key:"_fetchNamespace",value:function(t){return this._namespaceLookup[t]}},{key:"fetchNamespacesByElement",value:function(t){var e=new Set,n=this.statesByElement.get(t);if(n)for(var r=Object.keys(n),i=0;i<r.length;i++){var o=n[r[i]].namespaceId;if(o){var s=this._fetchNamespace(o);s&&e.add(s)}}return e}},{key:"trigger",value:function(t,e,n,r){if(xy(e)){var i=this._fetchNamespace(t);if(i)return i.trigger(e,n,r),!0}return!1}},{key:"insertNode",value:function(t,e,n,r){if(xy(e)){var i=e.__ng_removed;if(i&&i.setForRemoval){i.setForRemoval=!1,i.setForMove=!0;var o=this.collectedLeaveElements.indexOf(e);o>=0&&this.collectedLeaveElements.splice(o,1)}if(t){var s=this._fetchNamespace(t);s&&s.insertNode(e,n)}r&&this.collectEnterElement(e)}}},{key:"collectEnterElement",value:function(t){this.collectedEnterElements.push(t)}},{key:"markElementAsDisabled",value:function(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),Ny(t,"ng-animate-disabled")):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),Dy(t,"ng-animate-disabled"))}},{key:"removeNode",value:function(t,e,n,r){if(xy(e)){var i=t?this._fetchNamespace(t):null;if(i?i.removeNode(e,r):this.markElementAsRemoved(t,e,!1,r),n){var o=this.namespacesByHostElement.get(e);o&&o.id!==t&&o.removeNode(e,r)}}else this._onRemovalComplete(e,r)}},{key:"markElementAsRemoved",value:function(t,e,n,r){this.collectedLeaveElements.push(e),e.__ng_removed={namespaceId:t,setForRemoval:r,hasAnimation:n,removedBeforeQueried:!1}}},{key:"listen",value:function(t,e,n,r,i){return xy(e)?this._fetchNamespace(t).listen(e,n,r,i):function(){}}},{key:"_buildInstruction",value:function(t,e,n,r,i){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,n,r,t.fromState.options,t.toState.options,e,i)}},{key:"destroyInnerAnimations",value:function(t){var e=this,n=this.driver.query(t,".ng-trigger",!0);n.forEach((function(t){return e.destroyActiveAnimationsForElement(t)})),0!=this.playersByQueriedElement.size&&(n=this.driver.query(t,".ng-animating",!0)).forEach((function(t){return e.finishActiveQueriedAnimationOnElement(t)}))}},{key:"destroyActiveAnimationsForElement",value:function(t){var e=this.playersByElement.get(t);e&&e.forEach((function(t){t.queued?t.markedForDestroy=!0:t.destroy()}))}},{key:"finishActiveQueriedAnimationOnElement",value:function(t){var e=this.playersByQueriedElement.get(t);e&&e.forEach((function(t){return t.finish()}))}},{key:"whenRenderingDone",value:function(){var t=this;return new Promise((function(e){if(t.players.length)return tv(t.players).onDone((function(){return e()}));e()}))}},{key:"processLeaveNode",value:function(t){var e=this,n=t.__ng_removed;if(n&&n.setForRemoval){if(t.__ng_removed=Cy,n.namespaceId){this.destroyInnerAnimations(t);var r=this._fetchNamespace(n.namespaceId);r&&r.clearElementCache(t)}this._onRemovalComplete(t,n.setForRemoval)}this.driver.matchesElement(t,".ng-animate-disabled")&&this.markElementAsDisabled(t,!1),this.driver.query(t,".ng-animate-disabled",!0).forEach((function(t){e.markElementAsDisabled(t,!1)}))}},{key:"flush",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,n=[];if(this.newHostElements.size&&(this.newHostElements.forEach((function(e,n){return t._balanceNamespaceList(e,n)})),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(var r=0;r<this.collectedEnterElements.length;r++)Ny(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){var i=[];try{n=this._flushAnimations(i,e)}finally{for(var o=0;o<i.length;o++)i[o]()}}else for(var s=0;s<this.collectedLeaveElements.length;s++)this.processLeaveNode(this.collectedLeaveElements[s]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach((function(t){return t()})),this._flushFns=[],this._whenQuietFns.length){var a=this._whenQuietFns;this._whenQuietFns=[],n.length?tv(n).onDone((function(){a.forEach((function(t){return t()}))})):a.forEach((function(t){return t()}))}}},{key:"reportError",value:function(t){throw new Error("Unable to process animations due to the following failed trigger transitions\n "+t.join("\n"))}},{key:"_flushAnimations",value:function(t,e){var n=this,r=new Zv,i=[],o=new Map,s=[],a=new Map,u=new Map,c=new Map,l=new Set;this.disabledNodes.forEach((function(t){l.add(t);for(var e=n.driver.query(t,".ng-animate-queued",!0),r=0;r<e.length;r++)l.add(e[r])}));var h=this.bodyNode,f=Array.from(this.statesByElement.keys()),d=Ry(f,this.collectedEnterElements),p=new Map,v=0;d.forEach((function(t,e){var n="ng-enter"+v++;p.set(e,n),t.forEach((function(t){return Ny(t,n)}))}));for(var y=[],g=new Set,m=new Set,_=0;_<this.collectedLeaveElements.length;_++){var b=this.collectedLeaveElements[_],w=b.__ng_removed;w&&w.setForRemoval&&(y.push(b),g.add(b),w.hasAnimation?this.driver.query(b,".ng-star-inserted",!0).forEach((function(t){return g.add(t)})):m.add(b))}var C=new Map,k=Ry(f,Array.from(g));k.forEach((function(t,e){var n="ng-leave"+v++;C.set(e,n),t.forEach((function(t){return Ny(t,n)}))})),t.push((function(){d.forEach((function(t,e){var n=p.get(e);t.forEach((function(t){return Dy(t,n)}))})),k.forEach((function(t,e){var n=C.get(e);t.forEach((function(t){return Dy(t,n)}))})),y.forEach((function(t){n.processLeaveNode(t)}))}));for(var E=[],S=[],T=this._namespaceList.length-1;T>=0;T--)this._namespaceList[T].drainQueuedTransitions(e).forEach((function(t){var e=t.player,o=t.element;if(E.push(e),n.collectedEnterElements.length){var l=o.__ng_removed;if(l&&l.setForMove)return void e.destroy()}var f=!h||!n.driver.containsElement(h,o),d=C.get(o),v=p.get(o),y=n._buildInstruction(t,r,v,d,f);if(y.errors&&y.errors.length)S.push(y);else{if(f)return e.onStart((function(){return xv(o,y.fromStyles)})),e.onDestroy((function(){return Iv(o,y.toStyles)})),void i.push(e);if(t.isFallbackTransition)return e.onStart((function(){return xv(o,y.fromStyles)})),e.onDestroy((function(){return Iv(o,y.toStyles)})),void i.push(e);y.timelines.forEach((function(t){return t.stretchStartingKeyframe=!0})),r.append(o,y.timelines),s.push({instruction:y,player:e,element:o}),y.queriedElements.forEach((function(t){return ov(a,t,[]).push(e)})),y.preStyleProps.forEach((function(t,e){var n=Object.keys(t);if(n.length){var r=u.get(e);r||u.set(e,r=new Set),n.forEach((function(t){return r.add(t)}))}})),y.postStyleProps.forEach((function(t,e){var n=Object.keys(t),r=c.get(e);r||c.set(e,r=new Set),n.forEach((function(t){return r.add(t)}))}))}}));if(S.length){var O=[];S.forEach((function(t){O.push("@".concat(t.triggerName," has failed due to:\n")),t.errors.forEach((function(t){return O.push("- ".concat(t,"\n"))}))})),E.forEach((function(t){return t.destroy()})),this.reportError(O)}var I=new Map,x=new Map;s.forEach((function(t){var e=t.element;r.has(e)&&(x.set(e,e),n._beforeAnimationBuild(t.player.namespaceId,t.instruction,I))})),i.forEach((function(t){var e=t.element;n._getPreviousPlayers(e,!1,t.namespaceId,t.triggerName,null).forEach((function(t){ov(I,e,[]).push(t),t.destroy()}))}));var A=y.filter((function(t){return jy(t,u,c)})),P=new Map;Py(P,this.driver,m,c,"*").forEach((function(t){jy(t,u,c)&&A.push(t)}));var R=new Map;d.forEach((function(t,e){Py(R,n.driver,new Set(t),u,"!")})),A.forEach((function(t){var e=P.get(t),n=R.get(t);P.set(t,Object.assign(Object.assign({},e),n))}));var N=[],D=[],z={};s.forEach((function(t){var e=t.element,s=t.player,a=t.instruction;if(r.has(e)){if(l.has(e))return s.onDestroy((function(){return Iv(e,a.toStyles)})),s.disabled=!0,s.overrideTotalTime(a.totalTime),void i.push(s);var u=z;if(x.size>1){for(var c=e,h=[];c=c.parentNode;){var f=x.get(c);if(f){u=f;break}h.push(c)}h.forEach((function(t){return x.set(t,u)}))}var d=n._buildAnimation(s.namespaceId,a,I,o,R,P);if(s.setRealPlayer(d),u===z)N.push(s);else{var p=n.playersByElement.get(u);p&&p.length&&(s.parentPlayer=tv(p)),i.push(s)}}else xv(e,a.fromStyles),s.onDestroy((function(){return Iv(e,a.toStyles)})),D.push(s),l.has(e)&&i.push(s)})),D.forEach((function(t){var e=o.get(t.element);if(e&&e.length){var n=tv(e);t.setRealPlayer(n)}})),i.forEach((function(t){t.parentPlayer?t.syncPlayerEvents(t.parentPlayer):t.destroy()}));for(var j=0;j<y.length;j++){var L=y[j],F=L.__ng_removed;if(Dy(L,"ng-leave"),!F||!F.hasAnimation){var M=[];if(a.size){var V=a.get(L);V&&V.length&&M.push.apply(M,_toConsumableArray(V));for(var U=this.driver.query(L,".ng-animating",!0),B=0;B<U.length;B++){var q=a.get(U[B]);q&&q.length&&M.push.apply(M,_toConsumableArray(q))}}var H=M.filter((function(t){return!t.destroyed}));H.length?zy(this,L,H):this.processLeaveNode(L)}}return y.length=0,N.forEach((function(t){n.players.push(t),t.onDone((function(){t.destroy();var e=n.players.indexOf(t);n.players.splice(e,1)})),t.play()})),N}},{key:"elementContainsData",value:function(t,e){var n=!1,r=e.__ng_removed;return r&&r.setForRemoval&&(n=!0),this.playersByElement.has(e)&&(n=!0),this.playersByQueriedElement.has(e)&&(n=!0),this.statesByElement.has(e)&&(n=!0),this._fetchNamespace(t).elementContainsData(e)||n}},{key:"afterFlush",value:function(t){this._flushFns.push(t)}},{key:"afterFlushAnimationsDone",value:function(t){this._whenQuietFns.push(t)}},{key:"_getPreviousPlayers",value:function(t,e,n,r,i){var o=[];if(e){var s=this.playersByQueriedElement.get(t);s&&(o=s)}else{var a=this.playersByElement.get(t);if(a){var u=!i||"void"==i;a.forEach((function(t){t.queued||(u||t.triggerName==r)&&o.push(t)}))}}return(n||r)&&(o=o.filter((function(t){return!(n&&n!=t.namespaceId||r&&r!=t.triggerName)}))),o}},{key:"_beforeAnimationBuild",value:function(t,e,n){var r,i=this,o=e.element,s=e.isRemovalTransition?void 0:t,a=e.isRemovalTransition?void 0:e.triggerName,u=_createForOfIteratorHelper(e.timelines);try{var c=function(){var t=r.value.element,u=t!==o,c=ov(n,t,[]);i._getPreviousPlayers(t,u,s,a,e.toState).forEach((function(t){var e=t.getRealPlayer();e.beforeDestroy&&e.beforeDestroy(),t.destroy(),c.push(t)}))};for(u.s();!(r=u.n()).done;)c()}catch(l){u.e(l)}finally{u.f()}xv(o,e.fromStyles)}},{key:"_buildAnimation",value:function(t,e,n,r,i,o){var s=this,a=e.triggerName,u=e.element,c=[],l=new Set,h=new Set,f=e.timelines.map((function(e){var f=e.element;l.add(f);var d=f.__ng_removed;if(d&&d.removedBeforeQueried)return new Xp(e.duration,e.delay);var p,v,y=f!==u,g=(p=(n.get(f)||wy).map((function(t){return t.getRealPlayer()})),v=[],function t(e,n){for(var r=0;r<e.length;r++){var i=e[r];i instanceof Zp?t(i.players,n):n.push(i)}}(p,v),v).filter((function(t){return!!t.element&&t.element===f})),m=i.get(f),_=o.get(f),b=ev(0,s._normalizer,0,e.keyframes,m,_),w=s._buildPlayer(e,b,g);if(e.subTimeline&&r&&h.add(f),y){var C=new Iy(t,a,f);C.setRealPlayer(w),c.push(C)}return w}));c.forEach((function(t){ov(s.playersByQueriedElement,t.element,[]).push(t),t.onDone((function(){return function(t,e,n){var r;if(t instanceof Map){if(r=t.get(e)){if(r.length){var i=r.indexOf(n);r.splice(i,1)}0==r.length&&t.delete(e)}}else if(r=t[e]){if(r.length){var o=r.indexOf(n);r.splice(o,1)}0==r.length&&delete t[e]}return r}(s.playersByQueriedElement,t.element,t)}))})),l.forEach((function(t){return Ny(t,"ng-animating")}));var d=tv(f);return d.onDestroy((function(){l.forEach((function(t){return Dy(t,"ng-animating")})),Iv(u,e.toStyles)})),h.forEach((function(t){ov(r,t,[]).push(d)})),d}},{key:"_buildPlayer",value:function(t,e,n){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,n):new Xp(t.duration,t.delay)}},{key:"queuedPlayers",get:function(){var t=[];return this._namespaceList.forEach((function(e){e.players.forEach((function(e){e.queued&&t.push(e)}))})),t}}]),t}(),Iy=function(){function t(e,n,r){_classCallCheck(this,t),this.namespaceId=e,this.triggerName=n,this.element=r,this._player=new Xp,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}return _createClass(t,[{key:"setRealPlayer",value:function(t){var e=this;this._containsRealPlayer||(this._player=t,Object.keys(this._queuedCallbacks).forEach((function(n){e._queuedCallbacks[n].forEach((function(e){return nv(t,n,void 0,e)}))})),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}},{key:"getRealPlayer",value:function(){return this._player}},{key:"overrideTotalTime",value:function(t){this.totalTime=t}},{key:"syncPlayerEvents",value:function(t){var e=this,n=this._player;n.triggerCallback&&t.onStart((function(){return n.triggerCallback("start")})),t.onDone((function(){return e.finish()})),t.onDestroy((function(){return e.destroy()}))}},{key:"_queueEvent",value:function(t,e){ov(this._queuedCallbacks,t,[]).push(e)}},{key:"onDone",value:function(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}},{key:"onStart",value:function(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}},{key:"onDestroy",value:function(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}},{key:"init",value:function(){this._player.init()}},{key:"hasStarted",value:function(){return!this.queued&&this._player.hasStarted()}},{key:"play",value:function(){!this.queued&&this._player.play()}},{key:"pause",value:function(){!this.queued&&this._player.pause()}},{key:"restart",value:function(){!this.queued&&this._player.restart()}},{key:"finish",value:function(){this._player.finish()}},{key:"destroy",value:function(){this.destroyed=!0,this._player.destroy()}},{key:"reset",value:function(){!this.queued&&this._player.reset()}},{key:"setPosition",value:function(t){this.queued||this._player.setPosition(t)}},{key:"getPosition",value:function(){return this.queued?0:this._player.getPosition()}},{key:"triggerCallback",value:function(t){var e=this._player;e.triggerCallback&&e.triggerCallback(t)}}]),t}();function xy(t){return t&&1===t.nodeType}function Ay(t,e){var n=t.style.display;return t.style.display=null!=e?e:"none",n}function Py(t,e,n,r,i){var o=[];n.forEach((function(t){return o.push(Ay(t))}));var s=[];r.forEach((function(n,r){var o={};n.forEach((function(t){var n=o[t]=e.computeStyle(r,t,i);n&&0!=n.length||(r.__ng_removed=ky,s.push(r))})),t.set(r,o)}));var a=0;return n.forEach((function(t){return Ay(t,o[a++])})),s}function Ry(t,e){var n=new Map;if(t.forEach((function(t){return n.set(t,[])})),0==e.length)return n;var r=new Set(e),i=new Map;return e.forEach((function(t){var e=function t(e){if(!e)return 1;var o=i.get(e);if(o)return o;var s=e.parentNode;return o=n.has(s)?s:r.has(s)?1:t(s),i.set(e,o),o}(t);1!==e&&n.get(e).push(t)})),n}function Ny(t,e){if(t.classList)t.classList.add(e);else{var n=t.$$classes;n||(n=t.$$classes={}),n[e]=!0}}function Dy(t,e){if(t.classList)t.classList.remove(e);else{var n=t.$$classes;n&&delete n[e]}}function zy(t,e,n){tv(n).onDone((function(){return t.processLeaveNode(e)}))}function jy(t,e,n){var r=n.get(t);if(!r)return!1;var i=e.get(t);return i?r.forEach((function(t){return i.add(t)})):e.set(t,r),n.delete(t),!0}var Ly=function(){function t(e,n,r){var i=this;_classCallCheck(this,t),this.bodyNode=e,this._driver=n,this._triggerCache={},this.onRemovalComplete=function(t,e){},this._transitionEngine=new Oy(e,n,r),this._timelineEngine=new by(e,n,r),this._transitionEngine.onRemovalComplete=function(t,e){return i.onRemovalComplete(t,e)}}return _createClass(t,[{key:"registerTrigger",value:function(t,e,n,r,i){var o=t+"-"+r,s=this._triggerCache[o];if(!s){var a=[],u=Wv(this._driver,i,a);if(a.length)throw new Error('The animation trigger "'.concat(r,'" has failed to build due to the following errors:\n - ').concat(a.join("\n - ")));s=function(t,e){return new gy(t,e)}(r,u),this._triggerCache[o]=s}this._transitionEngine.registerTrigger(e,r,s)}},{key:"register",value:function(t,e){this._transitionEngine.register(t,e)}},{key:"destroy",value:function(t,e){this._transitionEngine.destroy(t,e)}},{key:"onInsert",value:function(t,e,n,r){this._transitionEngine.insertNode(t,e,n,r)}},{key:"onRemove",value:function(t,e,n,r){this._transitionEngine.removeNode(t,e,r||!1,n)}},{key:"disableAnimations",value:function(t,e){this._transitionEngine.markElementAsDisabled(t,e)}},{key:"process",value:function(t,e,n,r){if("@"==n.charAt(0)){var i=_slicedToArray(sv(n),2),o=i[0],s=i[1];this._timelineEngine.command(o,e,s,r)}else this._transitionEngine.trigger(t,e,n,r)}},{key:"listen",value:function(t,e,n,r,i){if("@"==n.charAt(0)){var o=_slicedToArray(sv(n),2),s=o[0],a=o[1];return this._timelineEngine.listen(s,e,a,i)}return this._transitionEngine.listen(t,e,n,r,i)}},{key:"flush",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;this._transitionEngine.flush(t)}},{key:"whenRenderingDone",value:function(){return this._transitionEngine.whenRenderingDone()}},{key:"players",get:function(){return this._transitionEngine.players.concat(this._timelineEngine.players)}}]),t}();function Fy(t,e){var n=null,r=null;return Array.isArray(e)&&e.length?(n=Vy(e[0]),e.length>1&&(r=Vy(e[e.length-1]))):e&&(n=Vy(e)),n||r?new My(t,n,r):null}var My=function(){var t=function(){function t(e,n,r){_classCallCheck(this,t),this._element=e,this._startStyles=n,this._endStyles=r,this._state=0;var i=t.initialStylesByElement.get(e);i||t.initialStylesByElement.set(e,i={}),this._initialStyles=i}return _createClass(t,[{key:"start",value:function(){this._state<1&&(this._startStyles&&Iv(this._element,this._startStyles,this._initialStyles),this._state=1)}},{key:"finish",value:function(){this.start(),this._state<2&&(Iv(this._element,this._initialStyles),this._endStyles&&(Iv(this._element,this._endStyles),this._endStyles=null),this._state=1)}},{key:"destroy",value:function(){this.finish(),this._state<3&&(t.initialStylesByElement.delete(this._element),this._startStyles&&(xv(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(xv(this._element,this._endStyles),this._endStyles=null),Iv(this._element,this._initialStyles),this._state=3)}}]),t}();return t.initialStylesByElement=new WeakMap,t}();function Vy(t){for(var e=null,n=Object.keys(t),r=0;r<n.length;r++){var i=n[r];Uy(i)&&((e=e||{})[i]=t[i])}return e}function Uy(t){return"display"===t||"position"===t}var By=function(){function t(e,n,r,i,o,s,a){var u=this;_classCallCheck(this,t),this._element=e,this._name=n,this._duration=r,this._delay=i,this._easing=o,this._fillMode=s,this._onDoneFn=a,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=function(t){return u._handleCallback(t)}}return _createClass(t,[{key:"apply",value:function(){var t,e,n;t=this._element,e="".concat(this._duration,"ms ").concat(this._easing," ").concat(this._delay,"ms 1 normal ").concat(this._fillMode," ").concat(this._name),(n=Ky(t,"").trim()).length&&(function(t,e){for(var n=0;n<t.length;n++)t.charAt(n)}(n),e="".concat(n,", ").concat(e)),Qy(t,"",e),Gy(this._element,this._eventFn,!1),this._startTime=Date.now()}},{key:"pause",value:function(){qy(this._element,this._name,"paused")}},{key:"resume",value:function(){qy(this._element,this._name,"running")}},{key:"setPosition",value:function(t){var e=Hy(this._element,this._name);this._position=t*this._duration,Qy(this._element,"Delay","-".concat(this._position,"ms"),e)}},{key:"getPosition",value:function(){return this._position}},{key:"_handleCallback",value:function(t){var e=t._ngTestManualTimestamp||Date.now(),n=1e3*parseFloat(t.elapsedTime.toFixed(3));t.animationName==this._name&&Math.max(e-this._startTime,0)>=this._delay&&n>=this._duration&&this.finish()}},{key:"finish",value:function(){this._finished||(this._finished=!0,this._onDoneFn(),Gy(this._element,this._eventFn,!0))}},{key:"destroy",value:function(){this._destroyed||(this._destroyed=!0,this.finish(),function(t,e){var n=Ky(t,"").split(","),r=Wy(n,e);r>=0&&(n.splice(r,1),Qy(t,"",n.join(",")))}(this._element,this._name))}}]),t}();function qy(t,e,n){Qy(t,"PlayState",n,Hy(t,e))}function Hy(t,e){var n=Ky(t,"");return n.indexOf(",")>0?Wy(n.split(","),e):Wy([n],e)}function Wy(t,e){for(var n=0;n<t.length;n++)if(t[n].indexOf(e)>=0)return n;return-1}function Gy(t,e,n){n?t.removeEventListener("animationend",e):t.addEventListener("animationend",e)}function Qy(t,e,n,r){var i="animation"+e;if(null!=r){var o=t.style[i];if(o.length){var s=o.split(",");s[r]=n,n=s.join(",")}}t.style[i]=n}function Ky(t,e){return t.style["animation"+e]}var Yy=function(){function t(e,n,r,i,o,s,a,u){_classCallCheck(this,t),this.element=e,this.keyframes=n,this.animationName=r,this._duration=i,this._delay=o,this._finalStyles=a,this._specialStyles=u,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this.currentSnapshot={},this._state=0,this.easing=s||"linear",this.totalTime=i+o,this._buildStyler()}return _createClass(t,[{key:"onStart",value:function(t){this._onStartFns.push(t)}},{key:"onDone",value:function(t){this._onDoneFns.push(t)}},{key:"onDestroy",value:function(t){this._onDestroyFns.push(t)}},{key:"destroy",value:function(){this.init(),this._state>=4||(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach((function(t){return t()})),this._onDestroyFns=[])}},{key:"_flushDoneFns",value:function(){this._onDoneFns.forEach((function(t){return t()})),this._onDoneFns=[]}},{key:"_flushStartFns",value:function(){this._onStartFns.forEach((function(t){return t()})),this._onStartFns=[]}},{key:"finish",value:function(){this.init(),this._state>=3||(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}},{key:"setPosition",value:function(t){this._styler.setPosition(t)}},{key:"getPosition",value:function(){return this._styler.getPosition()}},{key:"hasStarted",value:function(){return this._state>=2}},{key:"init",value:function(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}},{key:"play",value:function(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}},{key:"pause",value:function(){this.init(),this._styler.pause()}},{key:"restart",value:function(){this.reset(),this.play()}},{key:"reset",value:function(){this._styler.destroy(),this._buildStyler(),this._styler.apply()}},{key:"_buildStyler",value:function(){var t=this;this._styler=new By(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",(function(){return t.finish()}))}},{key:"triggerCallback",value:function(t){var e="start"==t?this._onStartFns:this._onDoneFns;e.forEach((function(t){return t()})),e.length=0}},{key:"beforeDestroy",value:function(){var t=this;this.init();var e={};if(this.hasStarted()){var n=this._state>=3;Object.keys(this._finalStyles).forEach((function(r){"offset"!=r&&(e[r]=n?t._finalStyles[r]:Vv(t.element,r))}))}this.currentSnapshot=e}}]),t}(),$y=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r){var i;return _classCallCheck(this,n),(i=e.call(this)).element=t,i._startingStyles={},i.__initialized=!1,i._styles=gv(r),i}return _createClass(n,[{key:"init",value:function(){var t=this;!this.__initialized&&this._startingStyles&&(this.__initialized=!0,Object.keys(this._styles).forEach((function(e){t._startingStyles[e]=t.element.style[e]})),_get(_getPrototypeOf(n.prototype),"init",this).call(this))}},{key:"play",value:function(){var t=this;this._startingStyles&&(this.init(),Object.keys(this._styles).forEach((function(e){return t.element.style.setProperty(e,t._styles[e])})),_get(_getPrototypeOf(n.prototype),"play",this).call(this))}},{key:"destroy",value:function(){var t=this;this._startingStyles&&(Object.keys(this._startingStyles).forEach((function(e){var n=t._startingStyles[e];n?t.element.style.setProperty(e,n):t.element.style.removeProperty(e)})),this._startingStyles=null,_get(_getPrototypeOf(n.prototype),"destroy",this).call(this))}}]),n}(Xp),Xy=function(){function t(){_classCallCheck(this,t),this._count=0,this._head=document.querySelector("head"),this._warningIssued=!1}return _createClass(t,[{key:"validateStyleProperty",value:function(t){return dv(t)}},{key:"matchesElement",value:function(t,e){return pv(t,e)}},{key:"containsElement",value:function(t,e){return vv(t,e)}},{key:"query",value:function(t,e,n){return yv(t,e,n)}},{key:"computeStyle",value:function(t,e,n){return window.getComputedStyle(t)[e]}},{key:"buildKeyframeElement",value:function(t,e,n){n=n.map((function(t){return gv(t)}));var r="@keyframes ".concat(e," {\n"),i="";n.forEach((function(t){i=" ";var e=parseFloat(t.offset);r+="".concat(i).concat(100*e,"% {\n"),i+=" ",Object.keys(t).forEach((function(e){var n=t[e];switch(e){case"offset":return;case"easing":return void(n&&(r+="".concat(i,"animation-timing-function: ").concat(n,";\n")));default:return void(r+="".concat(i).concat(e,": ").concat(n,";\n"))}})),r+=i+"}\n"})),r+="}\n";var o=document.createElement("style");return o.textContent=r,o}},{key:"animate",value:function(t,e,n,r,i){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[],s=arguments.length>6?arguments[6]:void 0;s&&this._notifyFaultyScrubber();var a=o.filter((function(t){return t instanceof Yy})),u={};Lv(n,r)&&a.forEach((function(t){var e=t.currentSnapshot;Object.keys(e).forEach((function(t){return u[t]=e[t]}))}));var c=function(t){var e={};return t&&(Array.isArray(t)?t:[t]).forEach((function(t){Object.keys(t).forEach((function(n){"offset"!=n&&"easing"!=n&&(e[n]=t[n])}))})),e}(e=Fv(t,e,u));if(0==n)return new $y(t,c);var l="gen_css_kf_"+this._count++,h=this.buildKeyframeElement(t,l,e);document.querySelector("head").appendChild(h);var f=Fy(t,e),d=new Yy(t,e,l,n,r,i,c,f);return d.onDestroy((function(){var t;(t=h).parentNode.removeChild(t)})),d}},{key:"_notifyFaultyScrubber",value:function(){this._warningIssued||(console.warn("@angular/animations: please load the web-animations.js polyfill to allow programmatic access...\n","  visit http://bit.ly/IWukam to learn more about using the web-animation-js polyfill."),this._warningIssued=!0)}}]),t}(),Zy=function(){function t(e,n,r,i){_classCallCheck(this,t),this.element=e,this.keyframes=n,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}return _createClass(t,[{key:"_onFinish",value:function(){this._finished||(this._finished=!0,this._onDoneFns.forEach((function(t){return t()})),this._onDoneFns=[])}},{key:"init",value:function(){this._buildPlayer(),this._preparePlayerBeforeStart()}},{key:"_buildPlayer",value:function(){var t=this;if(!this._initialized){this._initialized=!0;var e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:{},this.domPlayer.addEventListener("finish",(function(){return t._onFinish()}))}}},{key:"_preparePlayerBeforeStart",value:function(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}},{key:"_triggerWebAnimation",value:function(t,e,n){return t.animate(e,n)}},{key:"onStart",value:function(t){this._onStartFns.push(t)}},{key:"onDone",value:function(t){this._onDoneFns.push(t)}},{key:"onDestroy",value:function(t){this._onDestroyFns.push(t)}},{key:"play",value:function(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach((function(t){return t()})),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}},{key:"pause",value:function(){this.init(),this.domPlayer.pause()}},{key:"finish",value:function(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}},{key:"reset",value:function(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}},{key:"_resetDomPlayerState",value:function(){this.domPlayer&&this.domPlayer.cancel()}},{key:"restart",value:function(){this.reset(),this.play()}},{key:"hasStarted",value:function(){return this._started}},{key:"destroy",value:function(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach((function(t){return t()})),this._onDestroyFns=[])}},{key:"setPosition",value:function(t){this.domPlayer.currentTime=t*this.time}},{key:"getPosition",value:function(){return this.domPlayer.currentTime/this.time}},{key:"beforeDestroy",value:function(){var t=this,e={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach((function(n){"offset"!=n&&(e[n]=t._finished?t._finalKeyframe[n]:Vv(t.element,n))})),this.currentSnapshot=e}},{key:"triggerCallback",value:function(t){var e="start"==t?this._onStartFns:this._onDoneFns;e.forEach((function(t){return t()})),e.length=0}},{key:"totalTime",get:function(){return this._delay+this._duration}}]),t}(),Jy=function(){function t(){_classCallCheck(this,t),this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(tg().toString()),this._cssKeyframesDriver=new Xy}return _createClass(t,[{key:"validateStyleProperty",value:function(t){return dv(t)}},{key:"matchesElement",value:function(t,e){return pv(t,e)}},{key:"containsElement",value:function(t,e){return vv(t,e)}},{key:"query",value:function(t,e,n){return yv(t,e,n)}},{key:"computeStyle",value:function(t,e,n){return window.getComputedStyle(t)[e]}},{key:"overrideWebAnimationsSupport",value:function(t){this._isNativeImpl=t}},{key:"animate",value:function(t,e,n,r,i){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[],s=arguments.length>6?arguments[6]:void 0;if(!s&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(t,e,n,r,i,o);var a={duration:n,delay:r,fill:0==r?"both":"forwards"};i&&(a.easing=i);var u={},c=o.filter((function(t){return t instanceof Zy}));Lv(n,r)&&c.forEach((function(t){var e=t.currentSnapshot;Object.keys(e).forEach((function(t){return u[t]=e[t]}))}));var l=Fy(t,e=Fv(t,e=e.map((function(t){return Sv(t,!1)})),u));return new Zy(t,e,a,l)}}]),t}();function tg(){return"undefined"!=typeof window&&void 0!==window.document&&Element.prototype.animate||{}}var eg,ng=((eg=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r){var i;return _classCallCheck(this,n),(i=e.call(this))._nextAnimationId=0,i._renderer=t.createRenderer(r.body,{id:"0",encapsulation:Bt.None,styles:[],data:{animation:[]}}),i}return _createClass(n,[{key:"build",value:function(t){var e=this._nextAnimationId.toString();this._nextAnimationId++;var n=Array.isArray(t)?Gp(t):t;return og(this._renderer,null,e,"register",[n]),new rg(e,this._renderer)}}]),n}(qp)).\u0275fac=function(t){return new(t||eg)(be(Da),be(Zc))},eg.\u0275prov=ft({token:eg,factory:eg.\u0275fac}),eg),rg=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r){var i;return _classCallCheck(this,n),(i=e.call(this))._id=t,i._renderer=r,i}return _createClass(n,[{key:"create",value:function(t,e){return new ig(this._id,t,e||{},this._renderer)}}]),n}(function(){return function t(){_classCallCheck(this,t)}}()),ig=function(){function t(e,n,r,i){_classCallCheck(this,t),this.id=e,this.element=n,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}return _createClass(t,[{key:"_listen",value:function(t,e){return this._renderer.listen(this.element,"@@".concat(this.id,":").concat(t),e)}},{key:"_command",value:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return og(this._renderer,this.element,this.id,t,n)}},{key:"onDone",value:function(t){this._listen("done",t)}},{key:"onStart",value:function(t){this._listen("start",t)}},{key:"onDestroy",value:function(t){this._listen("destroy",t)}},{key:"init",value:function(){this._command("init")}},{key:"hasStarted",value:function(){return this._started}},{key:"play",value:function(){this._command("play"),this._started=!0}},{key:"pause",value:function(){this._command("pause")}},{key:"restart",value:function(){this._command("restart")}},{key:"finish",value:function(){this._command("finish")}},{key:"destroy",value:function(){this._command("destroy")}},{key:"reset",value:function(){this._command("reset")}},{key:"setPosition",value:function(t){this._command("setPosition",t)}},{key:"getPosition",value:function(){return 0}}]),t}();function og(t,e,n,r,i){return t.setProperty(e,"@@".concat(n,":").concat(r),i)}var sg,ag,ug,cg,lg,hg=((sg=function(){function t(e,n,r){_classCallCheck(this,t),this.delegate=e,this.engine=n,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),n.onRemovalComplete=function(t,e){e&&e.parentNode(t)&&e.removeChild(t.parentNode,t)}}return _createClass(t,[{key:"createRenderer",value:function(t,e){var n=this,r=this.delegate.createRenderer(t,e);if(!(t&&e&&e.data&&e.data.animation)){var i=this._rendererCache.get(r);return i||(i=new fg("",r,this.engine),this._rendererCache.set(r,i)),i}var o=e.id,s=e.id+"-"+this._currentId;return this._currentId++,this.engine.register(s,t),e.data.animation.forEach((function e(r){Array.isArray(r)?r.forEach(e):n.engine.registerTrigger(o,s,t,r.name,r)})),new dg(this,s,r,this.engine)}},{key:"begin",value:function(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}},{key:"_scheduleCountTask",value:function(){var t=this;this.promise.then((function(){t._microtaskId++}))}},{key:"scheduleListenerCallback",value:function(t,e,n){var r=this;t>=0&&t<this._microtaskId?this._zone.run((function(){return e(n)})):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then((function(){r._zone.run((function(){r._animationCallbacksBuffer.forEach((function(t){var e=_slicedToArray(t,2);(0,e[0])(e[1])})),r._animationCallbacksBuffer=[]}))})),this._animationCallbacksBuffer.push([e,n]))}},{key:"end",value:function(){var t=this;this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular((function(){t._scheduleCountTask(),t.engine.flush(t._microtaskId)})),this.delegate.end&&this.delegate.end()}},{key:"whenRenderingDone",value:function(){return this.engine.whenRenderingDone()}}]),t}()).\u0275fac=function(t){return new(t||sg)(be(Da),be(Ly),be(_c))},sg.\u0275prov=ft({token:sg,factory:sg.\u0275fac}),sg),fg=function(){function t(e,n,r){_classCallCheck(this,t),this.namespaceId=e,this.delegate=n,this.engine=r,this.destroyNode=this.delegate.destroyNode?function(t){return n.destroyNode(t)}:null}return _createClass(t,[{key:"destroy",value:function(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}},{key:"createElement",value:function(t,e){return this.delegate.createElement(t,e)}},{key:"createComment",value:function(t){return this.delegate.createComment(t)}},{key:"createText",value:function(t){return this.delegate.createText(t)}},{key:"appendChild",value:function(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}},{key:"insertBefore",value:function(t,e,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];this.delegate.insertBefore(t,e,n),this.engine.onInsert(this.namespaceId,e,t,r)}},{key:"removeChild",value:function(t,e,n){this.engine.onRemove(this.namespaceId,e,this.delegate,n)}},{key:"selectRootElement",value:function(t,e){return this.delegate.selectRootElement(t,e)}},{key:"parentNode",value:function(t){return this.delegate.parentNode(t)}},{key:"nextSibling",value:function(t){return this.delegate.nextSibling(t)}},{key:"setAttribute",value:function(t,e,n,r){this.delegate.setAttribute(t,e,n,r)}},{key:"removeAttribute",value:function(t,e,n){this.delegate.removeAttribute(t,e,n)}},{key:"addClass",value:function(t,e){this.delegate.addClass(t,e)}},{key:"removeClass",value:function(t,e){this.delegate.removeClass(t,e)}},{key:"setStyle",value:function(t,e,n,r){this.delegate.setStyle(t,e,n,r)}},{key:"removeStyle",value:function(t,e,n){this.delegate.removeStyle(t,e,n)}},{key:"setProperty",value:function(t,e,n){"@"==e.charAt(0)&&"@.disabled"==e?this.disableAnimations(t,!!n):this.delegate.setProperty(t,e,n)}},{key:"setValue",value:function(t,e){this.delegate.setValue(t,e)}},{key:"listen",value:function(t,e,n){return this.delegate.listen(t,e,n)}},{key:"disableAnimations",value:function(t,e){this.engine.disableAnimations(t,e)}},{key:"data",get:function(){return this.delegate.data}}]),t}(),dg=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r,i,o){var s;return _classCallCheck(this,n),(s=e.call(this,r,i,o)).factory=t,s.namespaceId=r,s}return _createClass(n,[{key:"setProperty",value:function(t,e,n){"@"==e.charAt(0)?"."==e.charAt(1)&&"@.disabled"==e?this.disableAnimations(t,n=void 0===n||!!n):this.engine.process(this.namespaceId,t,e.substr(1),n):this.delegate.setProperty(t,e,n)}},{key:"listen",value:function(t,e,n){var r,i,o=this;if("@"==e.charAt(0)){var s,a=function(t){switch(t){case"body":return document.body;case"document":return document;case"window":return window;default:return t}}(t),u=e.substr(1),c="";return"@"!=u.charAt(0)&&(i=(r=u).indexOf("."),u=(s=_slicedToArray([r.substring(0,i),r.substr(i+1)],2))[0],c=s[1]),this.engine.listen(this.namespaceId,a,u,c,(function(t){o.factory.scheduleListenerCallback(t._data||-1,n,t)}))}return this.delegate.listen(t,e,n)}}]),n}(fg),pg=((ag=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r,i){return _classCallCheck(this,n),e.call(this,t.body,r,i)}return n}(Ly)).\u0275fac=function(t){return new(t||ag)(be(Zc),be(bv),be(ly))},ag.\u0275prov=ft({token:ag,factory:ag.\u0275fac}),ag),vg=new wt("AnimationModuleType"),yg=[{provide:bv,useFactory:function(){return"function"==typeof tg()?new Jy:new Xy}},{provide:vg,useValue:"BrowserAnimations"},{provide:qp,useClass:ng},{provide:ly,useFactory:function(){return new hy}},{provide:Ly,useClass:pg},{provide:Da,useFactory:function(t,e,n){return new hg(t,e,n)},deps:[Eh,Ly,_c]}],gg=((ug=function t(){_classCallCheck(this,t)}).\u0275mod=re({type:ug}),ug.\u0275inj=dt({factory:function(t){return new(t||ug)},providers:yg,imports:[Fh]}),ug),mg=function(){function t(e,n,r){var i=this;_classCallCheck(this,t),this.triggerElement=e,this.ngZone=n,this.insertExtraNode=r,this.waveTransitionDuration=400,this.styleForPseudo=null,this.extraNode=null,this.lastTime=0,this.platform=new pd,this.onClick=function(t){!i.triggerElement||!i.triggerElement.getAttribute||i.triggerElement.getAttribute("disabled")||"INPUT"===t.target.tagName||i.triggerElement.className.indexOf("disabled")>=0||i.fadeOutWave()},this.clickHandler=this.onClick.bind(this),this.bindTriggerEvent()}return _createClass(t,[{key:"bindTriggerEvent",value:function(){var t=this;this.platform.isBrowser&&this.ngZone.runOutsideAngular((function(){t.removeTriggerEvent(),t.triggerElement&&t.triggerElement.addEventListener("click",t.clickHandler,!0)}))}},{key:"removeTriggerEvent",value:function(){this.triggerElement&&this.triggerElement.removeEventListener("click",this.clickHandler,!0)}},{key:"removeStyleAndExtraNode",value:function(){this.styleForPseudo&&document.body.contains(this.styleForPseudo)&&(document.body.removeChild(this.styleForPseudo),this.styleForPseudo=null),this.insertExtraNode&&this.triggerElement.contains(this.extraNode)&&this.triggerElement.removeChild(this.extraNode)}},{key:"destroy",value:function(){this.removeTriggerEvent(),this.removeStyleAndExtraNode()}},{key:"fadeOutWave",value:function(){var t=this,e=this.triggerElement,n=this.getWaveColor(e);e.setAttribute(this.waveAttributeName,"true"),Date.now()<this.lastTime+this.waveTransitionDuration||(this.isValidColor(n)&&(this.styleForPseudo||(this.styleForPseudo=document.createElement("style")),this.styleForPseudo.innerHTML="\n      [ant-click-animating-without-extra-node='true']::after, .ant-click-animating-node {\n        --antd-wave-shadow-color: ".concat(n,";\n      }"),document.body.appendChild(this.styleForPseudo)),this.insertExtraNode&&(this.extraNode||(this.extraNode=document.createElement("div")),this.extraNode.className="ant-click-animating-node",e.appendChild(this.extraNode)),this.lastTime=Date.now(),this.runTimeoutOutsideZone((function(){e.removeAttribute(t.waveAttributeName),t.removeStyleAndExtraNode()}),this.waveTransitionDuration))}},{key:"isValidColor",value:function(t){return!!t&&"#ffffff"!==t&&"rgb(255, 255, 255)"!==t&&this.isNotGrey(t)&&!/rgba\(\d*, \d*, \d*, 0\)/.test(t)&&"transparent"!==t}},{key:"isNotGrey",value:function(t){var e=t.match(/rgba?\((\d*), (\d*), (\d*)(, [\.\d]*)?\)/);return!(e&&e[1]&&e[2]&&e[3]&&e[1]===e[2]&&e[2]===e[3])}},{key:"getWaveColor",value:function(t){var e=getComputedStyle(t);return e.getPropertyValue("border-top-color")||e.getPropertyValue("border-color")||e.getPropertyValue("background-color")}},{key:"runTimeoutOutsideZone",value:function(t,e){this.ngZone.runOutsideAngular((function(){return setTimeout(t,e)}))}},{key:"waveAttributeName",get:function(){return this.insertExtraNode?"ant-click-animating":"ant-click-animating-without-extra-node"}}]),t}(),_g={disabled:!1},bg=new wt("nz-wave-global-options",{providedIn:"root",factory:function(){return _g}}),wg=((lg=function(){function t(e,n,r,i){_classCallCheck(this,t),this.ngZone=e,this.elementRef=n,this.config=r,this.animationType=i,this.nzWaveExtraNode=!1,this.waveDisabled=!1,this.waveDisabled=this.isConfigDisabled()}return _createClass(t,[{key:"isConfigDisabled",value:function(){var t=!1;return this.config&&"boolean"==typeof this.config.disabled&&(t=this.config.disabled),"NoopAnimations"===this.animationType&&(t=!0),t}},{key:"ngOnDestroy",value:function(){this.waveRenderer&&this.waveRenderer.destroy()}},{key:"ngOnInit",value:function(){this.renderWaveIfEnabled()}},{key:"renderWaveIfEnabled",value:function(){!this.waveDisabled&&this.elementRef.nativeElement&&(this.waveRenderer=new mg(this.elementRef.nativeElement,this.ngZone,this.nzWaveExtraNode))}},{key:"disable",value:function(){this.waveDisabled=!0,this.waveRenderer&&(this.waveRenderer.removeTriggerEvent(),this.waveRenderer.removeStyleAndExtraNode())}},{key:"enable",value:function(){this.waveDisabled=this.isConfigDisabled()||!1,this.waveRenderer&&this.waveRenderer.bindTriggerEvent()}},{key:"disabled",get:function(){return this.waveDisabled}},{key:"rendererRef",get:function(){return this.waveRenderer}}]),t}()).\u0275fac=function(t){return new(t||lg)(bs(_c),bs(Na),bs(bg,8),bs(vg,8))},lg.\u0275dir=oe({type:lg,selectors:[["","nz-wave",""],["button","nz-button","",3,"nzType","link"]],inputs:{nzWaveExtraNode:"nzWaveExtraNode"},exportAs:["nzWave"]}),lg),Cg=((cg=function t(){_classCallCheck(this,t)}).\u0275mod=re({type:cg}),cg.\u0275inj=dt({factory:function(t){return new(t||cg)},imports:[[vd]]}),cg),kg=["nz-button",""];function Eg(t,e){1&t&&Ss(0,"i",1)}var Sg,Tg,Og=["*"],Ig=((Tg=function(){function t(e,n,r,i){var o=this;_classCallCheck(this,t),this.elementRef=e,this.cdr=n,this.renderer=r,this.nzConfigService=i,this.nzBlock=!1,this.nzGhost=!1,this.nzSearch=!1,this.nzLoading=!1,this.nzDanger=!1,this.disabled=!1,this.tabIndex=null,this.nzType=null,this.nzShape=null,this.nzSize="default",this.destroy$=new T,this.loading$=new T,this.nzConfigService.getConfigChangeEventForComponent("button").pipe(Np(this.destroy$)).subscribe((function(){o.cdr.markForCheck()}))}return _createClass(t,[{key:"haltDisabledEvents",value:function(t){this.disabled&&(t.preventDefault(),t.stopImmediatePropagation())}},{key:"insertSpan",value:function(t,e){t.forEach((function(t){if("#text"===t.nodeName){var n=e.createElement("span"),r=e.parentNode(t);e.insertBefore(r,n,t),e.appendChild(n,t)}}))}},{key:"assertIconOnly",value:function(t,e){var n=Array.from(t.childNodes),r=n.filter((function(t){return"I"===t.nodeName})).length,i=n.every((function(t){return"#text"!==t.nodeName}));n.every((function(t){return"SPAN"!==t.nodeName}))&&i&&r>=1&&e.addClass(t,"ant-btn-icon-only")}},{key:"ngOnChanges",value:function(t){t.nzLoading&&this.loading$.next(this.nzLoading)}},{key:"ngAfterViewInit",value:function(){this.assertIconOnly(this.elementRef.nativeElement,this.renderer),this.insertSpan(this.elementRef.nativeElement.childNodes,this.renderer)}},{key:"ngAfterContentInit",value:function(){var t=this;this.loading$.pipe(Fp(this.nzLoading),zf((function(){return!!t.nzIconDirectiveElement})),Np(this.destroy$)).subscribe((function(e){var n=t.nzIconDirectiveElement.nativeElement;e?t.renderer.setStyle(n,"display","none"):t.renderer.removeStyle(n,"display")}))}},{key:"ngOnDestroy",value:function(){this.destroy$.next(),this.destroy$.complete()}}]),t}()).\u0275fac=function(t){return new(t||Tg)(bs(Na),bs(eu),bs(za),bs(qf))},Tg.\u0275cmp=Jt({type:Tg,selectors:[["button","nz-button",""],["a","nz-button",""]],contentQueries:function(t,e,n){var r;1&t&&Gu(n,Pp,!0,Na),2&t&&Bu(r=Qu())&&(e.nzIconDirectiveElement=r.first)},hostVars:30,hostBindings:function(t,e){1&t&&Ps("click",(function(t){return e.haltDisabledEvents(t)})),2&t&&(ys("tabindex",e.disabled?-1:null===e.tabIndex?null:e.tabIndex)("disabled",e.disabled||null),$s("ant-btn",!0)("ant-btn-primary","primary"===e.nzType)("ant-btn-dashed","dashed"===e.nzType)("ant-btn-link","link"===e.nzType)("ant-btn-danger","danger"===e.nzType)("ant-btn-circle","circle"===e.nzShape)("ant-btn-round","round"===e.nzShape)("ant-btn-lg","large"===e.nzSize)("ant-btn-sm","small"===e.nzSize)("ant-btn-dangerous",e.nzDanger)("ant-btn-loading",e.nzLoading)("ant-btn-background-ghost",e.nzGhost)("ant-btn-block",e.nzBlock)("ant-input-search-button",e.nzSearch))},inputs:{nzBlock:"nzBlock",nzGhost:"nzGhost",nzSearch:"nzSearch",nzLoading:"nzLoading",nzDanger:"nzDanger",disabled:"disabled",tabIndex:"tabIndex",nzType:"nzType",nzShape:"nzShape",nzSize:"nzSize"},exportAs:["nzButton"],features:[vr],attrs:kg,ngContentSelectors:Og,decls:2,vars:1,consts:[["nz-icon","","nzType","loading",4,"ngIf"],["nz-icon","","nzType","loading"]],template:function(t,e){1&t&&(Fs(),ms(0,Eg,1,0,"i",0),Ms(1)),2&t&&ws("ngIf",e.nzLoading)},directives:[Nl,Pp,Up],encapsulation:2,changeDetection:0}),Object(Df.c)([ad(),Object(Df.f)("design:type",Boolean)],Tg.prototype,"nzBlock",void 0),Object(Df.c)([ad(),Object(Df.f)("design:type",Boolean)],Tg.prototype,"nzGhost",void 0),Object(Df.c)([ad(),Object(Df.f)("design:type",Boolean)],Tg.prototype,"nzSearch",void 0),Object(Df.c)([ad(),Object(Df.f)("design:type",Boolean)],Tg.prototype,"nzLoading",void 0),Object(Df.c)([ad(),Object(Df.f)("design:type",Boolean)],Tg.prototype,"nzDanger",void 0),Object(Df.c)([ad(),Object(Df.f)("design:type",Boolean)],Tg.prototype,"disabled",void 0),Object(Df.c)([Hf("button"),Object(Df.f)("design:type",String)],Tg.prototype,"nzSize",void 0),Tg),xg=((Sg=function t(){_classCallCheck(this,t)}).\u0275mod=re({type:Sg}),Sg.\u0275inj=dt({factory:function(t){return new(t||Sg)},imports:[[Kl,Cg,Rp,Bp],Bp,Cg]}),Sg),Ag=function(t){_inherits(n,t);var e=_createSuper(n);function n(t){var r;return _classCallCheck(this,n),(r=e.call(this))._value=t,r}return _createClass(n,[{key:"_subscribe",value:function(t){var e=_get(_getPrototypeOf(n.prototype),"_subscribe",this).call(this,t);return e&&!e.closed&&t.next(this._value),e}},{key:"getValue",value:function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new k;return this._value}},{key:"next",value:function(t){_get(_getPrototypeOf(n.prototype),"next",this).call(this,this._value=t)}},{key:"value",get:function(){return this.getValue()}}]),n}(T),Pg=function(){function t(e,n){_classCallCheck(this,t),this.dueTime=e,this.scheduler=n}return _createClass(t,[{key:"call",value:function(t,e){return e.subscribe(new Rg(t,this.dueTime,this.scheduler))}}]),t}(),Rg=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r,i){var o;return _classCallCheck(this,n),(o=e.call(this,t)).dueTime=r,o.scheduler=i,o.debouncedSubscription=null,o.lastValue=null,o.hasValue=!1,o}return _createClass(n,[{key:"_next",value:function(t){this.clearDebounce(),this.lastValue=t,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(Ng,this.dueTime,this))}},{key:"_complete",value:function(){this.debouncedNext(),this.destination.complete()}},{key:"debouncedNext",value:function(){if(this.clearDebounce(),this.hasValue){var t=this.lastValue;this.lastValue=null,this.hasValue=!1,this.destination.next(t)}}},{key:"clearDebounce",value:function(){var t=this.debouncedSubscription;null!==t&&(this.remove(t),t.unsubscribe(),this.debouncedSubscription=null)}}]),n}(v);function Ng(t){t.debouncedNext()}var Dg,zg,jg=((zg=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"create",value:function(t){return"undefined"==typeof MutationObserver?null:new MutationObserver(t)}}]),t}()).\u0275fac=function(t){return new(t||zg)},zg.\u0275prov=ft({factory:function(){return new zg},token:zg,providedIn:"root"}),zg),Lg=((Dg=function t(){_classCallCheck(this,t)}).\u0275mod=re({type:Dg}),Dg.\u0275inj=dt({factory:function(t){return new(t||Dg)},providers:[jg]}),Dg);function Fg(t,e){1&t&&(ks(0,"span",3),Ss(1,"i",4),Ss(2,"i",4),Ss(3,"i",4),Ss(4,"i",4),Es())}function Mg(t,e){}function Vg(t,e){if(1&t&&(ks(0,"div",8),ca(1),Es()),2&t){var n=js(2);Wi(1),la(n.nzTip)}}function Ug(t,e){if(1&t&&(ks(0,"div"),ks(1,"div",5),ms(2,Mg,0,0,"ng-template",6),ms(3,Vg,2,1,"div",7),Es(),Es()),2&t){var n=js(),r=_s(1);Wi(1),$s("ant-spin-spinning",n.isLoading)("ant-spin-lg","large"===n.nzSize)("ant-spin-sm","small"===n.nzSize)("ant-spin-show-text",n.nzTip),Wi(1),ws("ngTemplateOutlet",n.nzIndicator||r),Wi(1),ws("ngIf",n.nzTip)}}function Bg(t,e){1&t&&(ks(0,"div",9),Ms(1),Es()),2&t&&$s("ant-spin-blur",js().isLoading)}var qg,Hg,Wg=["*"],Gg=((Hg=function(){function t(e,n){_classCallCheck(this,t),this.nzConfigService=e,this.cdr=n,this.nzIndicator=null,this.nzSize="default",this.nzTip=null,this.nzDelay=0,this.nzSimple=!1,this.nzSpinning=!0,this.destroy$=new T,this.spinning$=new Ag(this.nzSpinning),this.delay$=new Ag(this.nzDelay),this.isLoading=!0}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.spinning$.pipe(B((function(){return t.delay$})),B((function(e){return 0===e?t.spinning$:t.spinning$.pipe(function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Hh;return function(n){return n.lift(new Pg(t,e))}}(e))})),Np(this.destroy$)).subscribe((function(e){t.isLoading=e,t.cdr.markForCheck()})),this.nzConfigService.getConfigChangeEventForComponent("spin").pipe(Np(this.destroy$)).subscribe((function(){return t.cdr.markForCheck()}))}},{key:"ngOnChanges",value:function(t){var e=t.nzSpinning,n=t.nzDelay;e&&this.spinning$.next(this.nzSpinning),n&&this.delay$.next(this.nzDelay)}},{key:"ngOnDestroy",value:function(){this.destroy$.next(),this.destroy$.complete()}}]),t}()).\u0275fac=function(t){return new(t||Hg)(bs(qf),bs(eu))},Hg.\u0275cmp=Jt({type:Hg,selectors:[["nz-spin"]],hostVars:2,hostBindings:function(t,e){2&t&&$s("ant-spin-nested-loading",!e.nzSimple)},inputs:{nzIndicator:"nzIndicator",nzSize:"nzSize",nzTip:"nzTip",nzDelay:"nzDelay",nzSimple:"nzSimple",nzSpinning:"nzSpinning"},exportAs:["nzSpin"],features:[vr],ngContentSelectors:Wg,decls:4,vars:2,consts:[["defaultTemplate",""],[4,"ngIf"],["class","ant-spin-container",3,"ant-spin-blur",4,"ngIf"],[1,"ant-spin-dot","ant-spin-dot-spin"],[1,"ant-spin-dot-item"],[1,"ant-spin"],[3,"ngTemplateOutlet"],["class","ant-spin-text",4,"ngIf"],[1,"ant-spin-text"],[1,"ant-spin-container"]],template:function(t,e){1&t&&(Fs(),ms(0,Fg,5,0,"ng-template",null,0,Xu),ms(2,Ug,4,10,"div",1),ms(3,Bg,2,2,"div",2)),2&t&&(Wi(2),ws("ngIf",e.isLoading),Wi(1),ws("ngIf",!e.nzSimple))},directives:[Nl,Ql],encapsulation:2}),Object(Df.c)([Hf("spin"),Object(Df.f)("design:type",Object)],Hg.prototype,"nzIndicator",void 0),Object(Df.c)([ud(),Object(Df.f)("design:type",Object)],Hg.prototype,"nzDelay",void 0),Object(Df.c)([ad(),Object(Df.f)("design:type",Object)],Hg.prototype,"nzSimple",void 0),Object(Df.c)([ad(),Object(Df.f)("design:type",Object)],Hg.prototype,"nzSpinning",void 0),Hg),Qg=((qg=function t(){_classCallCheck(this,t)}).\u0275mod=re({type:qg}),qg.\u0275inj=dt({factory:function(t){return new(t||qg)},imports:[[Kl,Lg]]}),qg);function Kg(t,e){return new b((function(n){var r=t.length;if(0!==r)for(var i=new Array(r),o=0,s=0,a=function(a){var u=U(t[a]),c=!1;n.add(u.subscribe({next:function(t){c||(c=!0,s++),i[a]=t},error:function(t){return n.error(t)},complete:function(){++o!==r&&c||(s===r&&n.next(e?e.reduce((function(t,e,n){return t[e]=i[n],t}),{}):i),n.complete())}}))},u=0;u<r;u++)a(u);else n.complete()}))}var Yg,$g,Xg=new wt("NgValueAccessor"),Zg={provide:Xg,useExisting:At((function(){return Jg})),multi:!0},Jg=((Yg=function(){function t(e,n){_classCallCheck(this,t),this._renderer=e,this._elementRef=n,this.onChange=function(t){},this.onTouched=function(){}}return _createClass(t,[{key:"writeValue",value:function(t){this._renderer.setProperty(this._elementRef.nativeElement,"checked",t)}},{key:"registerOnChange",value:function(t){this.onChange=t}},{key:"registerOnTouched",value:function(t){this.onTouched=t}},{key:"setDisabledState",value:function(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}]),t}()).\u0275fac=function(t){return new(t||Yg)(bs(za),bs(Na))},Yg.\u0275dir=oe({type:Yg,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(t,e){1&t&&Ps("change",(function(t){return e.onChange(t.target.checked)}))("blur",(function(){return e.onTouched()}))},features:[Ta([Zg])]}),Yg),tm={provide:Xg,useExisting:At((function(){return nm})),multi:!0},em=new wt("CompositionEventMode"),nm=(($g=function(){function t(e,n,r){var i;_classCallCheck(this,t),this._renderer=e,this._elementRef=n,this._compositionMode=r,this.onChange=function(t){},this.onTouched=function(){},this._composing=!1,null==this._compositionMode&&(this._compositionMode=(i=$c()?$c().getUserAgent():"",!/android (\d+)/.test(i.toLowerCase())))}return _createClass(t,[{key:"writeValue",value:function(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)}},{key:"registerOnChange",value:function(t){this.onChange=t}},{key:"registerOnTouched",value:function(t){this.onTouched=t}},{key:"setDisabledState",value:function(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}},{key:"_handleInput",value:function(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}},{key:"_compositionStart",value:function(){this._composing=!0}},{key:"_compositionEnd",value:function(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}]),t}()).\u0275fac=function(t){return new(t||$g)(bs(za),bs(Na),bs(em,8))},$g.\u0275dir=oe({type:$g,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,e){1&t&&Ps("input",(function(t){return e._handleInput(t.target.value)}))("blur",(function(){return e.onTouched()}))("compositionstart",(function(){return e._compositionStart()}))("compositionend",(function(t){return e._compositionEnd(t.target.value)}))},features:[Ta([tm])]}),$g);function rm(t){return null==t||0===t.length}function im(t){return null!=t&&"number"==typeof t.length}var om=new wt("NgValidators"),sm=new wt("NgAsyncValidators"),am=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,um=function(){function t(){_classCallCheck(this,t)}return _createClass(t,null,[{key:"min",value:function(t){return function(e){if(rm(e.value)||rm(t))return null;var n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}},{key:"max",value:function(t){return function(e){if(rm(e.value)||rm(t))return null;var n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}},{key:"required",value:function(t){return rm(t.value)?{required:!0}:null}},{key:"requiredTrue",value:function(t){return!0===t.value?null:{required:!0}}},{key:"email",value:function(t){return rm(t.value)||am.test(t.value)?null:{email:!0}}},{key:"minLength",value:function(t){return function(e){return rm(e.value)||!im(e.value)?null:e.value.length<t?{minlength:{requiredLength:t,actualLength:e.value.length}}:null}}},{key:"maxLength",value:function(t){return function(e){return im(e.value)&&e.value.length>t?{maxlength:{requiredLength:t,actualLength:e.value.length}}:null}}},{key:"pattern",value:function(e){return e?("string"==typeof e?(r="","^"!==e.charAt(0)&&(r+="^"),r+=e,"$"!==e.charAt(e.length-1)&&(r+="$"),n=new RegExp(r)):(r=e.toString(),n=e),function(t){if(rm(t.value))return null;var e=t.value;return n.test(e)?null:{pattern:{requiredPattern:r,actualValue:e}}}):t.nullValidator;var n,r}},{key:"nullValidator",value:function(t){return null}},{key:"compose",value:function(t){if(!t)return null;var e=t.filter(cm);return 0==e.length?null:function(t){return hm(fm(t,e))}}},{key:"composeAsync",value:function(t){if(!t)return null;var e=t.filter(cm);return 0==e.length?null:function(t){return function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];if(1===e.length){var r=e[0];if(u(r))return Kg(r,null);if(c(r)&&Object.getPrototypeOf(r)===Object.prototype){var i=Object.keys(r);return Kg(i.map((function(t){return r[t]})),i)}}if("function"==typeof e[e.length-1]){var o=e.pop();return Kg(e=1===e.length&&u(e[0])?e[0]:e,null).pipe(L((function(t){return o.apply(void 0,_toConsumableArray(t))})))}return Kg(e,null)}(fm(t,e).map(lm)).pipe(L(hm))}}}]),t}();function cm(t){return null!=t}function lm(t){var e=xs(t)?U(t):t;return As(e),e}function hm(t){var e={};return t.forEach((function(t){e=null!=t?Object.assign(Object.assign({},e),t):e})),0===Object.keys(e).length?null:e}function fm(t,e){return e.map((function(e){return e(t)}))}function dm(t){return t.map((function(t){return function(t){return!t.validate}(t)?t:function(e){return t.validate(e)}}))}function pm(t){return null!=t?um.compose(dm(t)):null}function vm(t){return null!=t?um.composeAsync(dm(t)):null}function ym(t,e){return null===t?[e]:Array.isArray(t)?[].concat(_toConsumableArray(t),[e]):[t,e]}var gm,mm,_m,bm,wm,Cm,km,Em,Sm,Tm,Om=((mm=function(){function t(){_classCallCheck(this,t),this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}return _createClass(t,[{key:"_setValidators",value:function(t){this._rawValidators=t||[],this._composedValidatorFn=pm(this._rawValidators)}},{key:"_setAsyncValidators",value:function(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=vm(this._rawAsyncValidators)}},{key:"_registerOnDestroy",value:function(t){this._onDestroyCallbacks.push(t)}},{key:"_invokeOnDestroyCallbacks",value:function(){this._onDestroyCallbacks.forEach((function(t){return t()})),this._onDestroyCallbacks=[]}},{key:"reset",value:function(t){this.control&&this.control.reset(t)}},{key:"hasError",value:function(t,e){return!!this.control&&this.control.hasError(t,e)}},{key:"getError",value:function(t,e){return this.control?this.control.getError(t,e):null}},{key:"value",get:function(){return this.control?this.control.value:null}},{key:"valid",get:function(){return this.control?this.control.valid:null}},{key:"invalid",get:function(){return this.control?this.control.invalid:null}},{key:"pending",get:function(){return this.control?this.control.pending:null}},{key:"disabled",get:function(){return this.control?this.control.disabled:null}},{key:"enabled",get:function(){return this.control?this.control.enabled:null}},{key:"errors",get:function(){return this.control?this.control.errors:null}},{key:"pristine",get:function(){return this.control?this.control.pristine:null}},{key:"dirty",get:function(){return this.control?this.control.dirty:null}},{key:"touched",get:function(){return this.control?this.control.touched:null}},{key:"status",get:function(){return this.control?this.control.status:null}},{key:"untouched",get:function(){return this.control?this.control.untouched:null}},{key:"statusChanges",get:function(){return this.control?this.control.statusChanges:null}},{key:"valueChanges",get:function(){return this.control?this.control.valueChanges:null}},{key:"path",get:function(){return null}},{key:"validator",get:function(){return this._composedValidatorFn||null}},{key:"asyncValidator",get:function(){return this._composedAsyncValidatorFn||null}}]),t}()).\u0275fac=function(t){return new(t||mm)},mm.\u0275dir=oe({type:mm}),mm),Im=((gm=function(t){_inherits(n,t);var e=_createSuper(n);function n(){return _classCallCheck(this,n),e.apply(this,arguments)}return _createClass(n,[{key:"formDirective",get:function(){return null}},{key:"path",get:function(){return null}}]),n}(Om)).\u0275fac=function(t){return xm(t||gm)},gm.\u0275dir=oe({type:gm,features:[is]}),gm),xm=(_m=Im,nt((function(){for(var t=_m.prototype.constructor,e=t[$t]||ti(t),n=Object.prototype,r=Object.getPrototypeOf(_m.prototype).constructor;r&&r!==n;){var i=r[$t]||ti(r);if(i&&i!==e)return i;r=Object.getPrototypeOf(r)}return function(t){return new t}}))),Am=function(t){_inherits(n,t);var e=_createSuper(n);function n(){var t;return _classCallCheck(this,n),(t=e.apply(this,arguments))._parent=null,t.name=null,t.valueAccessor=null,t}return n}(Om),Pm=((bm=function(t){_inherits(n,t);var e=_createSuper(n);function n(t){return _classCallCheck(this,n),e.call(this,t)}return n}(function(){function t(e){_classCallCheck(this,t),this._cd=e}return _createClass(t,[{key:"ngClassUntouched",get:function(){return!!this._cd.control&&this._cd.control.untouched}},{key:"ngClassTouched",get:function(){return!!this._cd.control&&this._cd.control.touched}},{key:"ngClassPristine",get:function(){return!!this._cd.control&&this._cd.control.pristine}},{key:"ngClassDirty",get:function(){return!!this._cd.control&&this._cd.control.dirty}},{key:"ngClassValid",get:function(){return!!this._cd.control&&this._cd.control.valid}},{key:"ngClassInvalid",get:function(){return!!this._cd.control&&this._cd.control.invalid}},{key:"ngClassPending",get:function(){return!!this._cd.control&&this._cd.control.pending}}]),t}())).\u0275fac=function(t){return new(t||bm)(bs(Am,2))},bm.\u0275dir=oe({type:bm,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,e){2&t&&$s("ng-untouched",e.ngClassUntouched)("ng-touched",e.ngClassTouched)("ng-pristine",e.ngClassPristine)("ng-dirty",e.ngClassDirty)("ng-valid",e.ngClassValid)("ng-invalid",e.ngClassInvalid)("ng-pending",e.ngClassPending)},features:[is]}),bm),Rm={provide:Xg,useExisting:At((function(){return Nm})),multi:!0},Nm=((wm=function(){function t(e,n){_classCallCheck(this,t),this._renderer=e,this._elementRef=n,this.onChange=function(t){},this.onTouched=function(){}}return _createClass(t,[{key:"writeValue",value:function(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)}},{key:"registerOnChange",value:function(t){this.onChange=function(e){t(""==e?null:parseFloat(e))}}},{key:"registerOnTouched",value:function(t){this.onTouched=t}},{key:"setDisabledState",value:function(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}]),t}()).\u0275fac=function(t){return new(t||wm)(bs(za),bs(Na))},wm.\u0275dir=oe({type:wm,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,e){1&t&&Ps("input",(function(t){return e.onChange(t.target.value)}))("blur",(function(){return e.onTouched()}))},features:[Ta([Rm])]}),wm),Dm={provide:Xg,useExisting:At((function(){return jm})),multi:!0},zm=((km=function(){function t(){_classCallCheck(this,t),this._accessors=[]}return _createClass(t,[{key:"add",value:function(t,e){this._accessors.push([t,e])}},{key:"remove",value:function(t){for(var e=this._accessors.length-1;e>=0;--e)if(this._accessors[e][1]===t)return void this._accessors.splice(e,1)}},{key:"select",value:function(t){var e=this;this._accessors.forEach((function(n){e._isSameGroup(n,t)&&n[1]!==t&&n[1].fireUncheck(t.value)}))}},{key:"_isSameGroup",value:function(t,e){return!!t[0].control&&t[0]._parent===e._control._parent&&t[1].name===e.name}}]),t}()).\u0275fac=function(t){return new(t||km)},km.\u0275prov=ft({token:km,factory:km.\u0275fac}),km),jm=((Cm=function(){function t(e,n,r,i){_classCallCheck(this,t),this._renderer=e,this._elementRef=n,this._registry=r,this._injector=i,this.onChange=function(){},this.onTouched=function(){}}return _createClass(t,[{key:"ngOnInit",value:function(){this._control=this._injector.get(Am),this._checkName(),this._registry.add(this._control,this)}},{key:"ngOnDestroy",value:function(){this._registry.remove(this)}},{key:"writeValue",value:function(t){this._state=t===this.value,this._renderer.setProperty(this._elementRef.nativeElement,"checked",this._state)}},{key:"registerOnChange",value:function(t){var e=this;this._fn=t,this.onChange=function(){t(e.value),e._registry.select(e)}}},{key:"fireUncheck",value:function(t){this.writeValue(t)}},{key:"registerOnTouched",value:function(t){this.onTouched=t}},{key:"setDisabledState",value:function(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}},{key:"_checkName",value:function(){!this.name&&this.formControlName&&(this.name=this.formControlName)}}]),t}()).\u0275fac=function(t){return new(t||Cm)(bs(za),bs(Na),bs(zm),bs(ns))},Cm.\u0275dir=oe({type:Cm,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(t,e){1&t&&Ps("change",(function(){return e.onChange()}))("blur",(function(){return e.onTouched()}))},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[Ta([Dm])]}),Cm),Lm={provide:Xg,useExisting:At((function(){return Fm})),multi:!0},Fm=((Em=function(){function t(e,n){_classCallCheck(this,t),this._renderer=e,this._elementRef=n,this.onChange=function(t){},this.onTouched=function(){}}return _createClass(t,[{key:"writeValue",value:function(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",parseFloat(t))}},{key:"registerOnChange",value:function(t){this.onChange=function(e){t(""==e?null:parseFloat(e))}}},{key:"registerOnTouched",value:function(t){this.onTouched=t}},{key:"setDisabledState",value:function(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}]),t}()).\u0275fac=function(t){return new(t||Em)(bs(za),bs(Na))},Em.\u0275dir=oe({type:Em,selectors:[["input","type","range","formControlName",""],["input","type","range","formControl",""],["input","type","range","ngModel",""]],hostBindings:function(t,e){1&t&&Ps("change",(function(t){return e.onChange(t.target.value)}))("input",(function(t){return e.onChange(t.target.value)}))("blur",(function(){return e.onTouched()}))},features:[Ta([Lm])]}),Em),Mm={provide:Xg,useExisting:At((function(){return Vm})),multi:!0},Vm=((Sm=function(){function t(e,n){_classCallCheck(this,t),this._renderer=e,this._elementRef=n,this._optionMap=new Map,this._idCounter=0,this.onChange=function(t){},this.onTouched=function(){},this._compareWith=Object.is}return _createClass(t,[{key:"writeValue",value:function(t){this.value=t;var e=this._getOptionId(t);null==e&&this._renderer.setProperty(this._elementRef.nativeElement,"selectedIndex",-1);var n=function(t,e){return null==t?""+e:(e&&"object"==typeof e&&(e="Object"),"".concat(t,": ").concat(e).slice(0,50))}(e,t);this._renderer.setProperty(this._elementRef.nativeElement,"value",n)}},{key:"registerOnChange",value:function(t){var e=this;this.onChange=function(n){e.value=e._getOptionValue(n),t(e.value)}}},{key:"registerOnTouched",value:function(t){this.onTouched=t}},{key:"setDisabledState",value:function(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}},{key:"_registerOption",value:function(){return(this._idCounter++).toString()}},{key:"_getOptionId",value:function(t){for(var e=0,n=Array.from(this._optionMap.keys());e<n.length;e++){var r=n[e];if(this._compareWith(this._optionMap.get(r),t))return r}return null}},{key:"_getOptionValue",value:function(t){var e=function(t){return t.split(":")[0]}(t);return this._optionMap.has(e)?this._optionMap.get(e):t}},{key:"compareWith",set:function(t){this._compareWith=t}}]),t}()).\u0275fac=function(t){return new(t||Sm)(bs(za),bs(Na))},Sm.\u0275dir=oe({type:Sm,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,e){1&t&&Ps("change",(function(t){return e.onChange(t.target.value)}))("blur",(function(){return e.onTouched()}))},inputs:{compareWith:"compareWith"},features:[Ta([Mm])]}),Sm),Um={provide:Xg,useExisting:At((function(){return Bm})),multi:!0},Bm=((Tm=function(){function t(e,n){_classCallCheck(this,t),this._renderer=e,this._elementRef=n,this._optionMap=new Map,this._idCounter=0,this.onChange=function(t){},this.onTouched=function(){},this._compareWith=Object.is}return _createClass(t,[{key:"writeValue",value:function(t){var e,n=this;if(this.value=t,Array.isArray(t)){var r=t.map((function(t){return n._getOptionId(t)}));e=function(t,e){t._setSelected(r.indexOf(e.toString())>-1)}}else e=function(t,e){t._setSelected(!1)};this._optionMap.forEach(e)}},{key:"registerOnChange",value:function(t){var e=this;this.onChange=function(n){var r=[];if(void 0!==n.selectedOptions)for(var i=n.selectedOptions,o=0;o<i.length;o++){var s=i.item(o),a=e._getOptionValue(s.value);r.push(a)}else for(var u=n.options,c=0;c<u.length;c++){var l=u.item(c);if(l.selected){var h=e._getOptionValue(l.value);r.push(h)}}e.value=r,t(r)}}},{key:"registerOnTouched",value:function(t){this.onTouched=t}},{key:"setDisabledState",value:function(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}},{key:"_registerOption",value:function(t){var e=(this._idCounter++).toString();return this._optionMap.set(e,t),e}},{key:"_getOptionId",value:function(t){for(var e=0,n=Array.from(this._optionMap.keys());e<n.length;e++){var r=n[e];if(this._compareWith(this._optionMap.get(r)._value,t))return r}return null}},{key:"_getOptionValue",value:function(t){var e=function(t){return t.split(":")[0]}(t);return this._optionMap.has(e)?this._optionMap.get(e)._value:t}},{key:"compareWith",set:function(t){this._compareWith=t}}]),t}()).\u0275fac=function(t){return new(t||Tm)(bs(za),bs(Na))},Tm.\u0275dir=oe({type:Tm,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,e){1&t&&Ps("change",(function(t){return e.onChange(t.target)}))("blur",(function(){return e.onTouched()}))},inputs:{compareWith:"compareWith"},features:[Ta([Um])]}),Tm);function qm(t,e){t.forEach((function(t){t.registerOnValidatorChange&&t.registerOnValidatorChange(e)}))}function Hm(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}var Wm=[Jg,Fm,Nm,Vm,Bm,jm];function Gm(t,e){var n=t.indexOf(e);n>-1&&t.splice(n,1)}function Qm(t){return(Xm(t)?t.validators:t)||null}function Km(t){return Array.isArray(t)?pm(t):t||null}function Ym(t,e){return(Xm(e)?e.asyncValidators:t)||null}function $m(t){return Array.isArray(t)?vm(t):t||null}function Xm(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}var Zm,Jm,t_,e_=function(){function t(e,n){_classCallCheck(this,t),this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=function(){},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=n,this._composedValidatorFn=Km(this._rawValidators),this._composedAsyncValidatorFn=$m(this._rawAsyncValidators)}return _createClass(t,[{key:"setValidators",value:function(t){this._rawValidators=t,this._composedValidatorFn=Km(t)}},{key:"setAsyncValidators",value:function(t){this._rawAsyncValidators=t,this._composedAsyncValidatorFn=$m(t)}},{key:"clearValidators",value:function(){this.validator=null}},{key:"clearAsyncValidators",value:function(){this.asyncValidator=null}},{key:"markAsTouched",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}},{key:"markAllAsTouched",value:function(){this.markAsTouched({onlySelf:!0}),this._forEachChild((function(t){return t.markAllAsTouched()}))}},{key:"markAsUntouched",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.touched=!1,this._pendingTouched=!1,this._forEachChild((function(t){t.markAsUntouched({onlySelf:!0})})),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}},{key:"markAsDirty",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}},{key:"markAsPristine",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.pristine=!0,this._pendingDirty=!1,this._forEachChild((function(t){t.markAsPristine({onlySelf:!0})})),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}},{key:"markAsPending",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.status="PENDING",!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}},{key:"disable",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this._parentMarkedDirty(t.onlySelf);this.status="DISABLED",this.errors=null,this._forEachChild((function(e){e.disable(Object.assign(Object.assign({},t),{onlySelf:!0}))})),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach((function(t){return t(!0)}))}},{key:"enable",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this._parentMarkedDirty(t.onlySelf);this.status="VALID",this._forEachChild((function(e){e.enable(Object.assign(Object.assign({},t),{onlySelf:!0}))})),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach((function(t){return t(!1)}))}},{key:"_updateAncestors",value:function(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}},{key:"setParent",value:function(t){this._parent=t}},{key:"updateValueAndValidity",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),"VALID"!==this.status&&"PENDING"!==this.status||this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}},{key:"_updateTreeValidity",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{emitEvent:!0};this._forEachChild((function(e){return e._updateTreeValidity(t)})),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}},{key:"_setInitialStatus",value:function(){this.status=this._allControlsDisabled()?"DISABLED":"VALID"}},{key:"_runValidator",value:function(){return this.validator?this.validator(this):null}},{key:"_runAsyncValidator",value:function(t){var e=this;if(this.asyncValidator){this.status="PENDING",this._hasOwnPendingAsyncValidator=!0;var n=lm(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe((function(n){e._hasOwnPendingAsyncValidator=!1,e.setErrors(n,{emitEvent:t})}))}}},{key:"_cancelExistingSubscription",value:function(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}},{key:"setErrors",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}},{key:"get",value:function(t){return function(t,e,n){if(null==e)return null;if(Array.isArray(e)||(e=e.split(".")),Array.isArray(e)&&0===e.length)return null;var r=t;return e.forEach((function(t){r=r instanceof r_?r.controls.hasOwnProperty(t)?r.controls[t]:null:r instanceof i_&&r.at(t)||null})),r}(this,t)}},{key:"getError",value:function(t,e){var n=e?this.get(e):this;return n&&n.errors?n.errors[t]:null}},{key:"hasError",value:function(t,e){return!!this.getError(t,e)}},{key:"_updateControlsErrors",value:function(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}},{key:"_initObservables",value:function(){this.valueChanges=new Pu,this.statusChanges=new Pu}},{key:"_calculateStatus",value:function(){return this._allControlsDisabled()?"DISABLED":this.errors?"INVALID":this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus("PENDING")?"PENDING":this._anyControlsHaveStatus("INVALID")?"INVALID":"VALID"}},{key:"_anyControlsHaveStatus",value:function(t){return this._anyControls((function(e){return e.status===t}))}},{key:"_anyControlsDirty",value:function(){return this._anyControls((function(t){return t.dirty}))}},{key:"_anyControlsTouched",value:function(){return this._anyControls((function(t){return t.touched}))}},{key:"_updatePristine",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}},{key:"_updateTouched",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}},{key:"_isBoxedValue",value:function(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}},{key:"_registerOnCollectionChange",value:function(t){this._onCollectionChange=t}},{key:"_setUpdateStrategy",value:function(t){Xm(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}},{key:"_parentMarkedDirty",value:function(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}},{key:"validator",get:function(){return this._composedValidatorFn},set:function(t){this._rawValidators=this._composedValidatorFn=t}},{key:"asyncValidator",get:function(){return this._composedAsyncValidatorFn},set:function(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}},{key:"parent",get:function(){return this._parent}},{key:"valid",get:function(){return"VALID"===this.status}},{key:"invalid",get:function(){return"INVALID"===this.status}},{key:"pending",get:function(){return"PENDING"==this.status}},{key:"disabled",get:function(){return"DISABLED"===this.status}},{key:"enabled",get:function(){return"DISABLED"!==this.status}},{key:"dirty",get:function(){return!this.pristine}},{key:"untouched",get:function(){return!this.touched}},{key:"updateOn",get:function(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}},{key:"root",get:function(){for(var t=this;t._parent;)t=t._parent;return t}}]),t}(),n_=function(t){_inherits(n,t);var e=_createSuper(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1?arguments[1]:void 0,o=arguments.length>2?arguments[2]:void 0;return _classCallCheck(this,n),(t=e.call(this,Qm(i),Ym(o,i)))._onChange=[],t._applyFormState(r),t._setUpdateStrategy(i),t._initObservables(),t.updateValueAndValidity({onlySelf:!0,emitEvent:!!o}),t}return _createClass(n,[{key:"setValue",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.value=this._pendingValue=t,this._onChange.length&&!1!==n.emitModelToViewChange&&this._onChange.forEach((function(t){return t(e.value,!1!==n.emitViewToModelChange)})),this.updateValueAndValidity(n)}},{key:"patchValue",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.setValue(t,e)}},{key:"reset",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}},{key:"_updateValue",value:function(){}},{key:"_anyControls",value:function(t){return!1}},{key:"_allControlsDisabled",value:function(){return this.disabled}},{key:"registerOnChange",value:function(t){this._onChange.push(t)}},{key:"_unregisterOnChange",value:function(t){Gm(this._onChange,t)}},{key:"registerOnDisabledChange",value:function(t){this._onDisabledChange.push(t)}},{key:"_unregisterOnDisabledChange",value:function(t){Gm(this._onDisabledChange,t)}},{key:"_forEachChild",value:function(t){}},{key:"_syncPendingControls",value:function(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}},{key:"_applyFormState",value:function(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}}]),n}(e_),r_=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r,i){var o;return _classCallCheck(this,n),(o=e.call(this,Qm(r),Ym(i,r))).controls=t,o._initObservables(),o._setUpdateStrategy(r),o._setUpControls(),o.updateValueAndValidity({onlySelf:!0,emitEvent:!!i}),o}return _createClass(n,[{key:"registerControl",value:function(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}},{key:"addControl",value:function(t,e){this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}},{key:"removeControl",value:function(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange((function(){})),delete this.controls[t],this.updateValueAndValidity(),this._onCollectionChange()}},{key:"setControl",value:function(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange((function(){})),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}},{key:"contains",value:function(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}},{key:"setValue",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._checkAllValuesPresent(t),Object.keys(t).forEach((function(r){e._throwIfControlMissing(r),e.controls[r].setValue(t[r],{onlySelf:!0,emitEvent:n.emitEvent})})),this.updateValueAndValidity(n)}},{key:"patchValue",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object.keys(t).forEach((function(r){e.controls[r]&&e.controls[r].patchValue(t[r],{onlySelf:!0,emitEvent:n.emitEvent})})),this.updateValueAndValidity(n)}},{key:"reset",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._forEachChild((function(n,r){n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})})),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}},{key:"getRawValue",value:function(){return this._reduceChildren({},(function(t,e,n){return t[n]=e instanceof n_?e.value:e.getRawValue(),t}))}},{key:"_syncPendingControls",value:function(){var t=this._reduceChildren(!1,(function(t,e){return!!e._syncPendingControls()||t}));return t&&this.updateValueAndValidity({onlySelf:!0}),t}},{key:"_throwIfControlMissing",value:function(t){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[t])throw new Error("Cannot find form control with name: ".concat(t,"."))}},{key:"_forEachChild",value:function(t){var e=this;Object.keys(this.controls).forEach((function(n){return t(e.controls[n],n)}))}},{key:"_setUpControls",value:function(){var t=this;this._forEachChild((function(e){e.setParent(t),e._registerOnCollectionChange(t._onCollectionChange)}))}},{key:"_updateValue",value:function(){this.value=this._reduceValue()}},{key:"_anyControls",value:function(t){for(var e=0,n=Object.keys(this.controls);e<n.length;e++){var r=n[e],i=this.controls[r];if(this.contains(r)&&t(i))return!0}return!1}},{key:"_reduceValue",value:function(){var t=this;return this._reduceChildren({},(function(e,n,r){return(n.enabled||t.disabled)&&(e[r]=n.value),e}))}},{key:"_reduceChildren",value:function(t,e){var n=t;return this._forEachChild((function(t,r){n=e(n,t,r)})),n}},{key:"_allControlsDisabled",value:function(){for(var t=0,e=Object.keys(this.controls);t<e.length;t++){var n=e[t];if(this.controls[n].enabled)return!1}return Object.keys(this.controls).length>0||this.disabled}},{key:"_checkAllValuesPresent",value:function(t){this._forEachChild((function(e,n){if(void 0===t[n])throw new Error("Must supply a value for form control with name: '".concat(n,"'."))}))}}]),n}(e_),i_=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r,i){var o;return _classCallCheck(this,n),(o=e.call(this,Qm(r),Ym(i,r))).controls=t,o._initObservables(),o._setUpdateStrategy(r),o._setUpControls(),o.updateValueAndValidity({onlySelf:!0,emitEvent:!!i}),o}return _createClass(n,[{key:"at",value:function(t){return this.controls[t]}},{key:"push",value:function(t){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity(),this._onCollectionChange()}},{key:"insert",value:function(t,e){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity()}},{key:"removeAt",value:function(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange((function(){})),this.controls.splice(t,1),this.updateValueAndValidity()}},{key:"setControl",value:function(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange((function(){})),this.controls.splice(t,1),e&&(this.controls.splice(t,0,e),this._registerControl(e)),this.updateValueAndValidity(),this._onCollectionChange()}},{key:"setValue",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._checkAllValuesPresent(t),t.forEach((function(t,r){e._throwIfControlMissing(r),e.at(r).setValue(t,{onlySelf:!0,emitEvent:n.emitEvent})})),this.updateValueAndValidity(n)}},{key:"patchValue",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.forEach((function(t,r){e.at(r)&&e.at(r).patchValue(t,{onlySelf:!0,emitEvent:n.emitEvent})})),this.updateValueAndValidity(n)}},{key:"reset",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._forEachChild((function(n,r){n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})})),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}},{key:"getRawValue",value:function(){return this.controls.map((function(t){return t instanceof n_?t.value:t.getRawValue()}))}},{key:"clear",value:function(){this.controls.length<1||(this._forEachChild((function(t){return t._registerOnCollectionChange((function(){}))})),this.controls.splice(0),this.updateValueAndValidity())}},{key:"_syncPendingControls",value:function(){var t=this.controls.reduce((function(t,e){return!!e._syncPendingControls()||t}),!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}},{key:"_throwIfControlMissing",value:function(t){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(t))throw new Error("Cannot find form control at index "+t)}},{key:"_forEachChild",value:function(t){this.controls.forEach((function(e,n){t(e,n)}))}},{key:"_updateValue",value:function(){var t=this;this.value=this.controls.filter((function(e){return e.enabled||t.disabled})).map((function(t){return t.value}))}},{key:"_anyControls",value:function(t){return this.controls.some((function(e){return e.enabled&&t(e)}))}},{key:"_setUpControls",value:function(){var t=this;this._forEachChild((function(e){return t._registerControl(e)}))}},{key:"_checkAllValuesPresent",value:function(t){this._forEachChild((function(e,n){if(void 0===t[n])throw new Error("Must supply a value for form control at index: ".concat(n,"."))}))}},{key:"_allControlsDisabled",value:function(){var t,e=_createForOfIteratorHelper(this.controls);try{for(e.s();!(t=e.n()).done;){if(t.value.enabled)return!1}}catch(n){e.e(n)}finally{e.f()}return this.controls.length>0||this.disabled}},{key:"_registerControl",value:function(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}},{key:"length",get:function(){return this.controls.length}}]),n}(e_),o_={provide:Am,useExisting:At((function(){return a_}))},s_=Promise.resolve(null),a_=((t_=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r,i,o){var s;return _classCallCheck(this,n),(s=e.call(this)).control=new n_,s._registered=!1,s.update=new Pu,s._parent=t,s._setValidators(r),s._setAsyncValidators(i),s.valueAccessor=function(t,e){if(!e)return null;Array.isArray(e);var n=void 0,r=void 0,i=void 0;return e.forEach((function(t){var e;t.constructor===nm?n=t:(e=t,Wm.some((function(t){return e.constructor===t}))?r=t:i=t)})),i||r||n||null}(0,o),s}return _createClass(n,[{key:"ngOnChanges",value:function(t){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in t&&this._updateDisabled(t),function(t,e){if(!t.hasOwnProperty("model"))return!1;var n=t.model;return!!n.isFirstChange()||!Object.is(e,n.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}},{key:"ngOnDestroy",value:function(){this.formDirective&&this.formDirective.removeControl(this)}},{key:"viewToModelUpdate",value:function(t){this.viewModel=t,this.update.emit(t)}},{key:"_setUpControl",value:function(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}},{key:"_setUpdateStrategy",value:function(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}},{key:"_isStandalone",value:function(){return!this._parent||!(!this.options||!this.options.standalone)}},{key:"_setUpStandalone",value:function(){var t;(function(t,e,n){var r=function(t){return t._rawValidators}(t);null!==e.validator?t.setValidators(ym(r,e.validator)):"function"==typeof r&&t.setValidators([r]);var i=function(t){return t._rawAsyncValidators}(t);null!==e.asyncValidator?t.setAsyncValidators(ym(i,e.asyncValidator)):"function"==typeof i&&t.setAsyncValidators([i]);var o=function(){return t.updateValueAndValidity()};qm(e._rawValidators,o),qm(e._rawAsyncValidators,o)})(t=this.control,this),this.valueAccessor.writeValue(t.value),function(t,e){e.valueAccessor.registerOnChange((function(n){t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&Hm(t,e)}))}(t,this),function(t,e){var n=function(t,n){e.valueAccessor.writeValue(t),n&&e.viewToModelUpdate(t)};t.registerOnChange(n),e._registerOnDestroy((function(){t._unregisterOnChange(n)}))}(t,this),function(t,e){e.valueAccessor.registerOnTouched((function(){t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&Hm(t,e),"submit"!==t.updateOn&&t.markAsTouched()}))}(t,this),function(t,e){if(e.valueAccessor.setDisabledState){var n=function(t){e.valueAccessor.setDisabledState(t)};t.registerOnDisabledChange(n),e._registerOnDestroy((function(){t._unregisterOnDisabledChange(n)}))}}(t,this),this.control.updateValueAndValidity({emitEvent:!1})}},{key:"_checkForErrors",value:function(){this._isStandalone()||this._checkParentType(),this._checkName()}},{key:"_checkParentType",value:function(){}},{key:"_checkName",value:function(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}},{key:"_updateValue",value:function(t){var e=this;s_.then((function(){e.control.setValue(t,{emitViewToModelChange:!1})}))}},{key:"_updateDisabled",value:function(t){var e=this,n=t.isDisabled.currentValue,r=""===n||n&&"false"!==n;s_.then((function(){r&&!e.control.disabled?e.control.disable():!r&&e.control.disabled&&e.control.enable()}))}},{key:"path",get:function(){return this._parent?function(t,e){return[].concat(_toConsumableArray(e.path),[t])}(this.name,this._parent):[this.name]}},{key:"formDirective",get:function(){return this._parent?this._parent.formDirective:null}}]),n}(Am)).\u0275fac=function(t){return new(t||t_)(bs(Im,9),bs(om,10),bs(sm,10),bs(Xg,10))},t_.\u0275dir=oe({type:t_,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Ta([o_]),is,vr]}),t_),u_=((Jm=function t(){_classCallCheck(this,t)}).\u0275mod=re({type:Jm}),Jm.\u0275inj=dt({factory:function(t){return new(t||Jm)}}),Jm),c_=((Zm=function t(){_classCallCheck(this,t)}).\u0275mod=re({type:Zm}),Zm.\u0275inj=dt({factory:function(t){return new(t||Zm)},providers:[zm],imports:[u_]}),Zm),l_=function(t){_inherits(n,t);var e=_createSuper(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.POSITIVE_INFINITY,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.POSITIVE_INFINITY,o=arguments.length>2?arguments[2]:void 0;return _classCallCheck(this,n),(t=e.call(this)).scheduler=o,t._events=[],t._infiniteTimeWindow=!1,t._bufferSize=r<1?1:r,t._windowTime=i<1?1:i,i===Number.POSITIVE_INFINITY?(t._infiniteTimeWindow=!0,t.next=t.nextInfiniteTimeWindow):t.next=t.nextTimeWindow,t}return _createClass(n,[{key:"nextInfiniteTimeWindow",value:function(t){var e=this._events;e.push(t),e.length>this._bufferSize&&e.shift(),_get(_getPrototypeOf(n.prototype),"next",this).call(this,t)}},{key:"nextTimeWindow",value:function(t){this._events.push(new h_(this._getNow(),t)),this._trimBufferThenGetEvents(),_get(_getPrototypeOf(n.prototype),"next",this).call(this,t)}},{key:"_subscribe",value:function(t){var e,n=this._infiniteTimeWindow,r=n?this._events:this._trimBufferThenGetEvents(),i=this.scheduler,o=r.length;if(this.closed)throw new k;if(this.isStopped||this.hasError?e=f.EMPTY:(this.observers.push(t),e=new E(this,t)),i&&t.add(t=new yf(t,i)),n)for(var s=0;s<o&&!t.closed;s++)t.next(r[s]);else for(var a=0;a<o&&!t.closed;a++)t.next(r[a].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),e}},{key:"_getNow",value:function(){return(this.scheduler||qh).now()}},{key:"_trimBufferThenGetEvents",value:function(){for(var t=this._getNow(),e=this._bufferSize,n=this._windowTime,r=this._events,i=r.length,o=0;o<i&&!(t-r[o].time<n);)o++;return i>e&&(o=Math.max(o,i-e)),o>0&&r.splice(0,o),r}}]),n}(T),h_=function t(e,n){_classCallCheck(this,t),this.time=e,this.value=n};function f_(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return n.length?n.some((function(e){return t[e]})):t.altKey||t.shiftKey||t.ctrlKey||t.metaKey}var d_,p_=((d_=function(){function t(e){_classCallCheck(this,t),this._platform=e}return _createClass(t,[{key:"isDisabled",value:function(t){return t.hasAttribute("disabled")}},{key:"isVisible",value:function(t){return function(t){return!!(t.offsetWidth||t.offsetHeight||"function"==typeof t.getClientRects&&t.getClientRects().length)}(t)&&"visible"===getComputedStyle(t).visibility}},{key:"isTabbable",value:function(t){if(!this._platform.isBrowser)return!1;var e,n=function(t){try{return t.frameElement}catch(EN){return null}}((e=t).ownerDocument&&e.ownerDocument.defaultView||window);if(n){var r=n&&n.nodeName.toLowerCase();if(-1===y_(n))return!1;if((this._platform.BLINK||this._platform.WEBKIT)&&"object"===r)return!1;if((this._platform.BLINK||this._platform.WEBKIT)&&!this.isVisible(n))return!1}var i=t.nodeName.toLowerCase(),o=y_(t);if(t.hasAttribute("contenteditable"))return-1!==o;if("iframe"===i)return!1;if("audio"===i){if(!t.hasAttribute("controls"))return!1;if(this._platform.BLINK)return!0}if("video"===i){if(!t.hasAttribute("controls")&&this._platform.TRIDENT)return!1;if(this._platform.BLINK||this._platform.FIREFOX)return!0}return("object"!==i||!this._platform.BLINK&&!this._platform.WEBKIT)&&!(this._platform.WEBKIT&&this._platform.IOS&&!function(t){var e=t.nodeName.toLowerCase(),n="input"===e&&t.type;return"text"===n||"password"===n||"select"===e||"textarea"===e}(t))&&t.tabIndex>=0}},{key:"isFocusable",value:function(t){return function(t){return!function(t){return function(t){return"input"==t.nodeName.toLowerCase()}(t)&&"hidden"==t.type}(t)&&(function(t){var e=t.nodeName.toLowerCase();return"input"===e||"select"===e||"button"===e||"textarea"===e}(t)||function(t){return function(t){return"a"==t.nodeName.toLowerCase()}(t)&&t.hasAttribute("href")}(t)||t.hasAttribute("contenteditable")||v_(t))}(t)&&!this.isDisabled(t)&&this.isVisible(t)}}]),t}()).\u0275fac=function(t){return new(t||d_)(be(pd))},d_.\u0275prov=ft({factory:function(){return new d_(be(pd))},token:d_,providedIn:"root"}),d_);function v_(t){if(!t.hasAttribute("tabindex")||void 0===t.tabIndex)return!1;var e=t.getAttribute("tabindex");return"-32768"!=e&&!(!e||isNaN(parseInt(e,10)))}function y_(t){if(!v_(t))return null;var e=parseInt(t.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}var g_=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r,i,o,s,a,u){var c;return _classCallCheck(this,n),(c=e.call(this,t,r,i,o,u.defer))._focusTrapManager=s,c._inertStrategy=a,c._focusTrapManager.register(_assertThisInitialized(c)),c}return _createClass(n,[{key:"destroy",value:function(){this._focusTrapManager.deregister(this),_get(_getPrototypeOf(n.prototype),"destroy",this).call(this)}},{key:"_enable",value:function(){this._inertStrategy.preventFocus(this),this.toggleAnchors(!0)}},{key:"_disable",value:function(){this._inertStrategy.allowFocus(this),this.toggleAnchors(!1)}},{key:"enabled",get:function(){return this._enabled},set:function(t){this._enabled=t,this._enabled?this._focusTrapManager.register(this):this._focusTrapManager.deregister(this)}}]),n}(function(){function t(e,n,r,i){var o=this,s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];_classCallCheck(this,t),this._element=e,this._checker=n,this._ngZone=r,this._document=i,this._hasAttached=!1,this.startAnchorListener=function(){return o.focusLastTabbableElement()},this.endAnchorListener=function(){return o.focusFirstTabbableElement()},this._enabled=!0,s||this.attachAnchors()}return _createClass(t,[{key:"destroy",value:function(){var t=this._startAnchor,e=this._endAnchor;t&&(t.removeEventListener("focus",this.startAnchorListener),t.parentNode&&t.parentNode.removeChild(t)),e&&(e.removeEventListener("focus",this.endAnchorListener),e.parentNode&&e.parentNode.removeChild(e)),this._startAnchor=this._endAnchor=null}},{key:"attachAnchors",value:function(){var t=this;return!!this._hasAttached||(this._ngZone.runOutsideAngular((function(){t._startAnchor||(t._startAnchor=t._createAnchor(),t._startAnchor.addEventListener("focus",t.startAnchorListener)),t._endAnchor||(t._endAnchor=t._createAnchor(),t._endAnchor.addEventListener("focus",t.endAnchorListener))})),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}},{key:"focusInitialElementWhenReady",value:function(){var t=this;return new Promise((function(e){t._executeOnStable((function(){return e(t.focusInitialElement())}))}))}},{key:"focusFirstTabbableElementWhenReady",value:function(){var t=this;return new Promise((function(e){t._executeOnStable((function(){return e(t.focusFirstTabbableElement())}))}))}},{key:"focusLastTabbableElementWhenReady",value:function(){var t=this;return new Promise((function(e){t._executeOnStable((function(){return e(t.focusLastTabbableElement())}))}))}},{key:"_getRegionBoundary",value:function(t){for(var e=this._element.querySelectorAll("[cdk-focus-region-".concat(t,"], [cdkFocusRegion").concat(t,"], [cdk-focus-").concat(t,"]")),n=0;n<e.length;n++)e[n].hasAttribute("cdk-focus-"+t)?console.warn("Found use of deprecated attribute 'cdk-focus-".concat(t,"', use 'cdkFocusRegion").concat(t,"' instead. The deprecated attribute will be removed in 8.0.0."),e[n]):e[n].hasAttribute("cdk-focus-region-"+t)&&console.warn("Found use of deprecated attribute 'cdk-focus-region-".concat(t,"', use 'cdkFocusRegion").concat(t,"' instead. The deprecated attribute will be removed in 8.0.0."),e[n]);return"start"==t?e.length?e[0]:this._getFirstTabbableElement(this._element):e.length?e[e.length-1]:this._getLastTabbableElement(this._element)}},{key:"focusInitialElement",value:function(){var t=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");return t?(t.hasAttribute("cdk-focus-initial")&&console.warn("Found use of deprecated attribute 'cdk-focus-initial', use 'cdkFocusInitial' instead. The deprecated attribute will be removed in 8.0.0",t),Ln()&&!this._checker.isFocusable(t)&&console.warn("Element matching '[cdkFocusInitial]' is not focusable.",t),t.focus(),!0):this.focusFirstTabbableElement()}},{key:"focusFirstTabbableElement",value:function(){var t=this._getRegionBoundary("start");return t&&t.focus(),!!t}},{key:"focusLastTabbableElement",value:function(){var t=this._getRegionBoundary("end");return t&&t.focus(),!!t}},{key:"hasAttached",value:function(){return this._hasAttached}},{key:"_getFirstTabbableElement",value:function(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;for(var e=t.children||t.childNodes,n=0;n<e.length;n++){var r=e[n].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(e[n]):null;if(r)return r}return null}},{key:"_getLastTabbableElement",value:function(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;for(var e=t.children||t.childNodes,n=e.length-1;n>=0;n--){var r=e[n].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(e[n]):null;if(r)return r}return null}},{key:"_createAnchor",value:function(){var t=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,t),t.classList.add("cdk-visually-hidden"),t.classList.add("cdk-focus-trap-anchor"),t.setAttribute("aria-hidden","true"),t}},{key:"_toggleAnchorTabIndex",value:function(t,e){t?e.setAttribute("tabindex","0"):e.removeAttribute("tabindex")}},{key:"toggleAnchors",value:function(t){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}},{key:"_executeOnStable",value:function(t){this._ngZone.isStable?t():this._ngZone.onStable.asObservable().pipe(td(1)).subscribe(t)}},{key:"enabled",get:function(){return this._enabled},set:function(t){this._enabled=t,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}}]),t}()),m_="undefined"!=typeof Element&&!!Element.prototype.closest;function __(t,e){return t.matches?t.matches(e):t.msMatchesSelector(e)}var b_,w_,C_,k_,E_=function(){function t(){_classCallCheck(this,t),this._listener=null}return _createClass(t,[{key:"preventFocus",value:function(t){var e=this;this._listener&&t._document.removeEventListener("focus",this._listener,!0),this._listener=function(n){return e._trapFocus(t,n)},t._ngZone.runOutsideAngular((function(){t._document.addEventListener("focus",e._listener,!0)}))}},{key:"allowFocus",value:function(t){this._listener&&(t._document.removeEventListener("focus",this._listener,!0),this._listener=null)}},{key:"_trapFocus",value:function(t,e){var n=e.target,r=t._element;r.contains(n)||null!==function(t,e){if(!(t instanceof Node))return null;for(var n=t;null!=n&&!(n instanceof Element);)n=n.parentNode;return n&&(m_?n.closest("div.cdk-overlay-pane"):function(t,e){for(var n=t;null!=n&&!(n instanceof Element&&__(n,"div.cdk-overlay-pane"));)n=n.parentNode;return n||null}(n))}(n)||setTimeout((function(){t.enabled&&!r.contains(t._document.activeElement)&&t.focusFirstTabbableElement()}))}}]),t}(),S_=function t(){_classCallCheck(this,t),this.defer=!1},T_=new wt("FOCUS_TRAP_INERT_STRATEGY"),O_=((w_=function(){function t(){_classCallCheck(this,t),this._focusTrapStack=[]}return _createClass(t,[{key:"register",value:function(t){this._focusTrapStack=this._focusTrapStack.filter((function(e){return e!==t}));var e=this._focusTrapStack;e.length&&e[e.length-1]._disable(),e.push(t),t._enable()}},{key:"deregister",value:function(t){t._disable();var e=this._focusTrapStack,n=e.indexOf(t);-1!==n&&(e.splice(n,1),e.length&&e[e.length-1]._enable())}}]),t}()).\u0275fac=function(t){return new(t||w_)},w_.\u0275prov=ft({factory:function(){return new w_},token:w_,providedIn:"root"}),w_),I_=((b_=function(){function t(e,n,r,i,o){_classCallCheck(this,t),this._checker=e,this._ngZone=n,this._focusTrapManager=r,this._document=i,this._inertStrategy=o||new E_}return _createClass(t,[{key:"create",value:function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new S_;return"boolean"==typeof n?(e=new S_).defer=n:e=n,new g_(t,this._checker,this._ngZone,this._document,this._focusTrapManager,this._inertStrategy,e)}}]),t}()).\u0275fac=function(t){return new(t||b_)(be(p_),be(_c),be(O_),be(Zc),be(T_,8))},b_.\u0275prov=ft({factory:function(){return new b_(be(p_),be(_c),be(O_),be(Zc),be(T_,8))},token:b_,providedIn:"root"}),b_),x_=new wt("cdk-focus-monitor-default-options"),A_=(C_={passive:!0,capture:!0},function(){if(null==ld&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){return ld=!0}}))}finally{ld=ld||!1}return ld}()?C_:!!C_.capture),P_=((k_=function(){function t(e,n,r,i){var o=this;_classCallCheck(this,t),this._ngZone=e,this._platform=n,this._origin=null,this._windowFocused=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._documentKeydownListener=function(){o._lastTouchTarget=null,o._setOriginForCurrentEventQueue("keyboard")},this._documentMousedownListener=function(t){if(!o._lastTouchTarget){var e=function(t){return 0===t.buttons}(t)?"keyboard":"mouse";o._setOriginForCurrentEventQueue(e)}},this._documentTouchstartListener=function(t){null!=o._touchTimeoutId&&clearTimeout(o._touchTimeoutId),o._lastTouchTarget=R_(t),o._touchTimeoutId=setTimeout((function(){return o._lastTouchTarget=null}),650)},this._windowFocusListener=function(){o._windowFocused=!0,o._windowFocusTimeoutId=setTimeout((function(){return o._windowFocused=!1}))},this._rootNodeFocusAndBlurListener=function(t){for(var e=R_(t),n="focus"===t.type?o._onFocus:o._onBlur,r=e;r;r=r.parentElement)n.call(o,t,r)},this._document=r,this._detectionMode=(null==i?void 0:i.detectionMode)||0}return _createClass(t,[{key:"monitor",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._platform.isBrowser)return lf(null);var n=Kf(t),r=function(t){if(function(){if(null==hd){var t="undefined"!=typeof document?document.head:null;hd=!(!t||!t.createShadowRoot&&!t.attachShadow)}return hd}()){var e=t.getRootNode?t.getRootNode():null;if("undefined"!=typeof ShadowRoot&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}(n)||this._getDocument(),i=this._elementInfo.get(n);if(i)return e&&(i.checkChildren=!0),i.subject.asObservable();var o={checkChildren:e,subject:new T,rootNode:r};return this._elementInfo.set(n,o),this._registerGlobalListeners(o),o.subject.asObservable()}},{key:"stopMonitoring",value:function(t){var e=Kf(t),n=this._elementInfo.get(e);n&&(n.subject.complete(),this._setClasses(e),this._elementInfo.delete(e),this._removeGlobalListeners(n))}},{key:"focusVia",value:function(t,e,n){var r=Kf(t);this._setOriginForCurrentEventQueue(e),"function"==typeof r.focus&&r.focus(n)}},{key:"ngOnDestroy",value:function(){var t=this;this._elementInfo.forEach((function(e,n){return t.stopMonitoring(n)}))}},{key:"_getDocument",value:function(){return this._document||document}},{key:"_getWindow",value:function(){return this._getDocument().defaultView||window}},{key:"_toggleClass",value:function(t,e,n){n?t.classList.add(e):t.classList.remove(e)}},{key:"_getFocusOrigin",value:function(t){return this._origin?this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:this._wasCausedByTouch(t)?"touch":"program"}},{key:"_setClasses",value:function(t,e){this._toggleClass(t,"cdk-focused",!!e),this._toggleClass(t,"cdk-touch-focused","touch"===e),this._toggleClass(t,"cdk-keyboard-focused","keyboard"===e),this._toggleClass(t,"cdk-mouse-focused","mouse"===e),this._toggleClass(t,"cdk-program-focused","program"===e)}},{key:"_setOriginForCurrentEventQueue",value:function(t){var e=this;this._ngZone.runOutsideAngular((function(){e._origin=t,0===e._detectionMode&&(e._originTimeoutId=setTimeout((function(){return e._origin=null}),1))}))}},{key:"_wasCausedByTouch",value:function(t){var e=R_(t);return this._lastTouchTarget instanceof Node&&e instanceof Node&&(e===this._lastTouchTarget||e.contains(this._lastTouchTarget))}},{key:"_onFocus",value:function(t,e){var n=this._elementInfo.get(e);if(n&&(n.checkChildren||e===R_(t))){var r=this._getFocusOrigin(t);this._setClasses(e,r),this._emitOrigin(n.subject,r),this._lastFocusOrigin=r}}},{key:"_onBlur",value:function(t,e){var n=this._elementInfo.get(e);!n||n.checkChildren&&t.relatedTarget instanceof Node&&e.contains(t.relatedTarget)||(this._setClasses(e),this._emitOrigin(n.subject,null))}},{key:"_emitOrigin",value:function(t,e){this._ngZone.run((function(){return t.next(e)}))}},{key:"_registerGlobalListeners",value:function(t){var e=this;if(this._platform.isBrowser){var n=t.rootNode,r=this._rootNodeFocusListenerCount.get(n)||0;r||this._ngZone.runOutsideAngular((function(){n.addEventListener("focus",e._rootNodeFocusAndBlurListener,A_),n.addEventListener("blur",e._rootNodeFocusAndBlurListener,A_)})),this._rootNodeFocusListenerCount.set(n,r+1),1==++this._monitoredElementCount&&this._ngZone.runOutsideAngular((function(){var t=e._getDocument(),n=e._getWindow();t.addEventListener("keydown",e._documentKeydownListener,A_),t.addEventListener("mousedown",e._documentMousedownListener,A_),t.addEventListener("touchstart",e._documentTouchstartListener,A_),n.addEventListener("focus",e._windowFocusListener)}))}}},{key:"_removeGlobalListeners",value:function(t){var e=t.rootNode;if(this._rootNodeFocusListenerCount.has(e)){var n=this._rootNodeFocusListenerCount.get(e);n>1?this._rootNodeFocusListenerCount.set(e,n-1):(e.removeEventListener("focus",this._rootNodeFocusAndBlurListener,A_),e.removeEventListener("blur",this._rootNodeFocusAndBlurListener,A_),this._rootNodeFocusListenerCount.delete(e))}if(!--this._monitoredElementCount){var r=this._getDocument(),i=this._getWindow();r.removeEventListener("keydown",this._documentKeydownListener,A_),r.removeEventListener("mousedown",this._documentMousedownListener,A_),r.removeEventListener("touchstart",this._documentTouchstartListener,A_),i.removeEventListener("focus",this._windowFocusListener),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._touchTimeoutId),clearTimeout(this._originTimeoutId)}}}]),t}()).\u0275fac=function(t){return new(t||k_)(be(_c),be(pd),be(Zc,8),be(x_,8))},k_.\u0275prov=ft({factory:function(){return new k_(be(_c),be(pd),be(Zc,8),be(x_,8))},token:k_,providedIn:"root"}),k_);function R_(t){return t.composedPath?t.composedPath()[0]:t.target}var N_,D_,z_,j_,L_,F_,M_,V_=((D_=function(){function t(e,n){_classCallCheck(this,t),this._platform=e,this._document=n}return _createClass(t,[{key:"getHighContrastMode",value:function(){if(!this._platform.isBrowser)return 0;var t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);var e=this._document.defaultView||window,n=e&&e.getComputedStyle?e.getComputedStyle(t):null,r=(n&&n.backgroundColor||"").replace(/ /g,"");switch(this._document.body.removeChild(t),r){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}},{key:"_applyBodyHighContrastModeCssClasses",value:function(){if(this._platform.isBrowser&&this._document.body){var t=this._document.body.classList;t.remove("cdk-high-contrast-active"),t.remove("cdk-high-contrast-black-on-white"),t.remove("cdk-high-contrast-white-on-black");var e=this.getHighContrastMode();1===e?(t.add("cdk-high-contrast-active"),t.add("cdk-high-contrast-black-on-white")):2===e&&(t.add("cdk-high-contrast-active"),t.add("cdk-high-contrast-white-on-black"))}}}]),t}()).\u0275fac=function(t){return new(t||D_)(be(pd),be(Zc))},D_.\u0275prov=ft({factory:function(){return new D_(be(pd),be(Zc))},token:D_,providedIn:"root"}),D_),U_=((N_=function t(e){_classCallCheck(this,t),e._applyBodyHighContrastModeCssClasses()}).\u0275mod=re({type:N_}),N_.\u0275inj=dt({factory:function(t){return new(t||N_)(be(V_))},imports:[[vd,Lg]]}),N_),B_=["*"],q_=["inputElement"],H_=["nz-radio",""],W_=((M_=function t(){_classCallCheck(this,t)}).\u0275fac=function(t){return new(t||M_)},M_.\u0275dir=oe({type:M_,selectors:[["","nz-radio-button",""]]}),M_),G_=((F_=function(){function t(){_classCallCheck(this,t),this.selected$=new l_(1),this.touched$=new T,this.disabled$=new l_(1),this.name$=new l_(1)}return _createClass(t,[{key:"touch",value:function(){this.touched$.next()}},{key:"select",value:function(t){this.selected$.next(t)}},{key:"setDisabled",value:function(t){this.disabled$.next(t)}},{key:"setName",value:function(t){this.name$.next(t)}}]),t}()).\u0275fac=function(t){return new(t||F_)},F_.\u0275prov=ft({token:F_,factory:F_.\u0275fac}),F_),Q_=((L_=function(){function t(e,n){_classCallCheck(this,t),this.cdr=e,this.nzRadioService=n,this.value=null,this.destroy$=new T,this.onChange=function(){},this.onTouched=function(){},this.nzDisabled=!1,this.nzButtonStyle="outline",this.nzSize="default",this.nzName=null}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.nzRadioService.selected$.subscribe((function(e){t.value!==e&&(t.value=e,t.onChange(t.value))})),this.nzRadioService.touched$.subscribe((function(){Promise.resolve().then((function(){return t.onTouched()}))}))}},{key:"ngOnChanges",value:function(t){var e=t.nzDisabled,n=t.nzName;e&&this.nzRadioService.setDisabled(this.nzDisabled),n&&this.nzRadioService.setName(this.nzName)}},{key:"ngOnDestroy",value:function(){this.destroy$.next(),this.destroy$.complete()}},{key:"writeValue",value:function(t){this.value=t,this.nzRadioService.select(t),this.cdr.markForCheck()}},{key:"registerOnChange",value:function(t){this.onChange=t}},{key:"registerOnTouched",value:function(t){this.onTouched=t}},{key:"setDisabledState",value:function(t){this.nzDisabled=t,this.nzRadioService.setDisabled(t),this.cdr.markForCheck()}}]),t}()).\u0275fac=function(t){return new(t||L_)(bs(eu),bs(G_))},L_.\u0275cmp=Jt({type:L_,selectors:[["nz-radio-group"]],hostVars:8,hostBindings:function(t,e){2&t&&$s("ant-radio-group",!0)("ant-radio-group-large","large"===e.nzSize)("ant-radio-group-small","small"===e.nzSize)("ant-radio-group-solid","solid"===e.nzButtonStyle)},inputs:{nzDisabled:"nzDisabled",nzButtonStyle:"nzButtonStyle",nzSize:"nzSize",nzName:"nzName"},exportAs:["nzRadioGroup"],features:[Ta([G_,{provide:Xg,useExisting:At((function(){return L_})),multi:!0}]),vr],ngContentSelectors:B_,decls:1,vars:0,template:function(t,e){1&t&&(Fs(),Ms(0))},encapsulation:2,changeDetection:0}),Object(Df.c)([ad(),Object(Df.f)("design:type",Object)],L_.prototype,"nzDisabled",void 0),L_),K_=((j_=function(){function t(e,n,r,i,o){_classCallCheck(this,t),this.elementRef=e,this.cdr=n,this.focusMonitor=r,this.nzRadioService=i,this.nzRadioButtonDirective=o,this.isNgModel=!1,this.destroy$=new T,this.isChecked=!1,this.name=null,this.isRadioButton=!!this.nzRadioButtonDirective,this.onChange=function(){},this.onTouched=function(){},this.nzValue=null,this.nzDisabled=!1,this.nzAutoFocus=!1}return _createClass(t,[{key:"onHostClick",value:function(t){t.stopPropagation(),t.preventDefault(),this.nzDisabled||this.isChecked||(this.nzRadioService&&this.nzRadioService.select(this.nzValue),this.isNgModel&&(this.isChecked=!0,this.onChange(!0)))}},{key:"focus",value:function(){this.focusMonitor.focusVia(this.inputElement,"keyboard")}},{key:"blur",value:function(){this.inputElement.nativeElement.blur()}},{key:"setDisabledState",value:function(t){this.nzDisabled=t,this.cdr.markForCheck()}},{key:"writeValue",value:function(t){this.isChecked=t,this.cdr.markForCheck()}},{key:"registerOnChange",value:function(t){this.isNgModel=!0,this.onChange=t}},{key:"registerOnTouched",value:function(t){this.onTouched=t}},{key:"ngOnInit",value:function(){var t=this;this.nzRadioService&&(this.nzRadioService.name$.pipe(Np(this.destroy$)).subscribe((function(e){t.name=e,t.cdr.markForCheck()})),this.nzRadioService.disabled$.pipe(Np(this.destroy$)).subscribe((function(e){t.nzDisabled=e,t.cdr.markForCheck()})),this.nzRadioService.selected$.pipe(Np(this.destroy$)).subscribe((function(e){t.isChecked=t.nzValue===e,t.cdr.markForCheck()}))),this.focusMonitor.monitor(this.elementRef,!0).subscribe((function(e){e||(Promise.resolve().then((function(){return t.onTouched()})),t.nzRadioService&&t.nzRadioService.touch())}))}},{key:"ngAfterViewInit",value:function(){this.nzAutoFocus&&this.focus()}},{key:"ngOnDestroy",value:function(){this.destroy$.next(),this.destroy$.complete(),this.focusMonitor.stopMonitoring(this.elementRef)}}]),t}()).\u0275fac=function(t){return new(t||j_)(bs(Na),bs(eu),bs(P_),bs(G_,8),bs(W_,8))},j_.\u0275cmp=Jt({type:j_,selectors:[["","nz-radio",""],["","nz-radio-button",""]],viewQuery:function(t,e){var n;1&t&&Hu(q_,!0),2&t&&Bu(n=Qu())&&(e.inputElement=n.first)},hostVars:12,hostBindings:function(t,e){1&t&&Ps("click",(function(t){return e.onHostClick(t)})),2&t&&$s("ant-radio-wrapper",!e.isRadioButton)("ant-radio-button-wrapper",e.isRadioButton)("ant-radio-wrapper-checked",e.isChecked&&!e.isRadioButton)("ant-radio-button-wrapper-checked",e.isChecked&&e.isRadioButton)("ant-radio-wrapper-disabled",e.nzDisabled&&!e.isRadioButton)("ant-radio-button-wrapper-disabled",e.nzDisabled&&e.isRadioButton)},inputs:{nzValue:"nzValue",nzDisabled:"nzDisabled",nzAutoFocus:"nzAutoFocus"},exportAs:["nzRadio"],features:[Ta([{provide:Xg,useExisting:At((function(){return j_})),multi:!0}])],attrs:H_,ngContentSelectors:B_,decls:6,vars:24,consts:[["type","radio",3,"disabled","checked"],["inputElement",""]],template:function(t,e){1&t&&(Fs(),ks(0,"span"),Ss(1,"input",0,1),Ss(3,"span"),Es(),ks(4,"span"),Ms(5),Es()),2&t&&($s("ant-radio",!e.isRadioButton)("ant-radio-checked",e.isChecked&&!e.isRadioButton)("ant-radio-disabled",e.nzDisabled&&!e.isRadioButton)("ant-radio-button",e.isRadioButton)("ant-radio-button-checked",e.isChecked&&e.isRadioButton)("ant-radio-button-disabled",e.nzDisabled&&e.isRadioButton),Wi(1),$s("ant-radio-input",!e.isRadioButton)("ant-radio-button-input",e.isRadioButton),ws("disabled",e.nzDisabled)("checked",e.isChecked),ys("autofocus",e.nzAutoFocus?"autofocus":null)("name",e.name),Wi(2),$s("ant-radio-inner",!e.isRadioButton)("ant-radio-button-inner",e.isRadioButton))},encapsulation:2,changeDetection:0}),Object(Df.c)([ad(),Object(Df.f)("design:type",Object)],j_.prototype,"nzDisabled",void 0),Object(Df.c)([ad(),Object(Df.f)("design:type",Object)],j_.prototype,"nzAutoFocus",void 0),j_),Y_=((z_=function t(){_classCallCheck(this,t)}).\u0275mod=re({type:z_}),z_.\u0275inj=dt({factory:function(t){return new(t||z_)},imports:[[Kl,c_]]}),z_);function $_(t,e){if(1&t){var n=Is();ks(0,"div",5),ks(1,"button",6),Ps("click",(function(){return Ye(n),js().onStartButtonClicked()})),ca(2,"Start"),Es(),Es()}}function X_(t,e){if(1&t&&(Ts(0),ks(1,"label",13),ks(2,"div",14),ca(3),Es(),Es(),Os()),2&t){var n=e.$implicit;Wi(1),ws("nzValue",n),Wi(2),ha(" ",n," ")}}function Z_(t,e){if(1&t){var n=Is();ks(0,"div",7),ks(1,"nz-spin",8),Ss(2,"img",9),Es(),Es(),ks(3,"div",10),ks(4,"nz-radio-group",11),Ps("ngModelChange",(function(t){return Ye(n),js().radioValue=t}))("ngModelChange",(function(){return Ye(n),js().onRadioChange()})),ms(5,X_,4,2,"ng-container",12),Es(),Es()}if(2&t){var r=js();Wi(1),ws("nzSpinning",!r.imagePath),Wi(1),ws("src",r.imagePath,cr),Wi(2),ws("ngModel",r.radioValue),Wi(1),ws("ngForOf",r.radioOptions)}}var J_,tb=((J_=function(){function t(e){_classCallCheck(this,t),this.firebase=e,this.title="duygu-cakir",this.numberOfImages=599,this.storage=this.firebase.storage(),this.database=this.firebase.database(),this.ckFirstEmotionGroup=["surprised","sadness","neutral","happiness","fear","disgust","contempt","anger"],this.radioOptions=[],this.timePassed=0,this.isStarted=!1}return _createClass(t,[{key:"ngOnInit",value:function(){this.startTimer()}},{key:"getRandomImage",value:function(){var t=this;this.storage.ref("images").list().then((function(e){var n=Math.floor(Math.random()*e.items.length);e.items[n].getMetadata().then((function(e){t.imageType=e.customMetadata.imageType,t.datasetType=e.contentType,"ck1"===t.datasetType&&(t.radioOptions=t.ckFirstEmotionGroup)})),t.imageRef=e.items[n].name,t.storage.ref().child("images/"+t.imageRef).getDownloadURL().then((function(e){t.imagePath=e,t.timePassed=0,t.radioValue=null}))}))}},{key:"startTimer",value:function(){var t=this;setInterval((function(){t.timePassed++}),1e3)}},{key:"onRadioChange",value:function(){var t={imageRef:this.imageRef,timePassed:this.timePassed,imageType:this.imageType,userSelection:this.radioValue};this.imageRef.split(".",1),this.database.ref().push(t),this.getRandomImage()}},{key:"onStartButtonClicked",value:function(){this.getRandomImage(),this.isStarted=!0}}]),t}()).\u0275fac=function(t){return new(t||J_)(bs(If))},J_.\u0275cmp=Jt({type:J_,selectors:[["app-root"]],decls:8,vars:2,consts:[[1,"container"],[1,"image-area"],["class","button",4,"ngIf","ngIfElse"],["imageTmpl",""],[1,"footer"],[1,"button"],["nz-button","","nzType","primary",3,"click"],[1,"image"],[3,"nzSpinning"],[3,"src"],[1,"radio"],[3,"ngModel","ngModelChange"],[4,"ngFor","ngForOf"],["nz-radio","",3,"nzValue"],[1,"label"]],template:function(t,e){if(1&t&&(ks(0,"div",0),ks(1,"div",1),ms(2,$_,3,0,"div",2),ms(3,Z_,6,4,"ng-template",null,3,Xu),Es(),ks(5,"footer",4),ks(6,"b"),ca(7,"Duygu \xc7ak\u0131r-Talha Akca "),Es(),Es(),Es()),2&t){var n=_s(4);Wi(2),ws("ngIf",!e.isStarted)("ngIfElse",n)}},directives:[Nl,Ig,wg,Up,Gg,Q_,Pm,a_,Pl,K_],styles:[".container[_ngcontent-%COMP%]{display:flex;height:100%;flex-direction:column;justify-content:center;align-items:center;background-color:#434f46}.image-area[_ngcontent-%COMP%]{text-align:center}.radio[_ngcontent-%COMP%]{margin-top:50px}.footer[_ngcontent-%COMP%]{position:absolute;bottom:20px;right:50px;color:#fff}.label[_ngcontent-%COMP%]{display:inline;color:#fff}"]}),J_);function eb(t,e){var n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new nb(t,e,n))}}var nb=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];_classCallCheck(this,t),this.accumulator=e,this.seed=n,this.hasSeed=r}return _createClass(t,[{key:"call",value:function(t,e){return e.subscribe(new rb(t,this.accumulator,this.seed,this.hasSeed))}}]),t}(),rb=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r,i,o){var s;return _classCallCheck(this,n),(s=e.call(this,t)).accumulator=r,s._seed=i,s.hasSeed=o,s.index=0,s}return _createClass(n,[{key:"_next",value:function(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}},{key:"_tryNext",value:function(t){var e,n=this.index++;try{e=this.accumulator(this.seed,t,n)}catch(r){this.destination.error(r)}this.seed=e,this.destination.next(e)}},{key:"seed",get:function(){return this._seed},set:function(t){this.hasSeed=!0,this._seed=t}}]),n}(v);function ib(t,e){return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Hh;return new b((function(n){var r;return null!=e?e.schedule((function(){r=t.onSnapshot(n)})):r=t.onSnapshot(n),function(){null!=r&&r()}}))}(t,e)}function ob(t,e){return ib(t,e).pipe(L((function(t){return{payload:t,type:"query"}})))}function sb(t,e){return ob(t,e).pipe(L((function(t){return t.payload.docChanges().map((function(t){return{type:t.type,payload:t}}))})))}function ab(t,e,n){return ob(t,n).pipe(L((function(t){return t.payload.docChanges()})),eb((function(t,n){return function(t,e,n){return e.forEach((function(e){n.indexOf(e.type)>-1&&(t=function(t,e){switch(e.type){case"added":t[e.newIndex]&&t[e.newIndex].doc.ref.isEqual(e.doc.ref)||t.splice(e.newIndex,0,e);break;case"modified":(null==t[e.oldIndex]||t[e.oldIndex].doc.ref.isEqual(e.doc.ref))&&(e.oldIndex!==e.newIndex?(t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e)):t.splice(e.newIndex,1,e));break;case"removed":t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref)&&t.splice(e.oldIndex,1)}return t}(t,e))})),t}(t,n,e)}),[]),L((function(t){return t.map((function(t){return{type:t.type,payload:t}}))})))}function ub(t){return t&&0!==t.length||(t=["added","removed","modified"]),t}n("xsWp");var cb=function(){function t(e,n,r){_classCallCheck(this,t),this.ref=e,this.query=n,this.afs=r}return _createClass(t,[{key:"stateChanges",value:function(t){return t&&0!==t.length?sb(this.query,this.afs.schedulers.outsideAngular).pipe(L((function(e){return e.filter((function(e){return t.indexOf(e.type)>-1}))})),zf((function(t){return t.length>0})),this.afs.keepUnstableUntilFirst):sb(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}},{key:"auditTrail",value:function(t){return this.stateChanges(t).pipe(eb((function(t,e){return[].concat(_toConsumableArray(t),_toConsumableArray(e))}),[]))}},{key:"snapshotChanges",value:function(t){var e=ub(t);return ab(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}},{key:"valueChanges",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return ob(this.query,this.afs.schedulers.outsideAngular).pipe(L((function(e){return e.payload.docs.map((function(e){return t.idField?Object.assign(Object.assign({},e.data()),_defineProperty({},t.idField,e.id)):e.data()}))})),this.afs.keepUnstableUntilFirst)}},{key:"get",value:function(t){return U(this.query.get(t)).pipe(pf(this.afs.schedulers.insideAngular))}},{key:"add",value:function(t){return this.ref.add(t)}},{key:"doc",value:function(t){return new lb(this.ref.doc(t),this.afs)}}]),t}(),lb=function(){function t(e,n){_classCallCheck(this,t),this.ref=e,this.afs=n}return _createClass(t,[{key:"set",value:function(t,e){return this.ref.set(t,e)}},{key:"update",value:function(t){return this.ref.update(t)}},{key:"delete",value:function(){return this.ref.delete()}},{key:"collection",value:function(t,e){var n=yb(this.ref.collection(t),e),r=n.ref,i=n.query;return new cb(r,i,this.afs)}},{key:"snapshotChanges",value:function(){return ib(this.ref,this.afs.schedulers.outsideAngular).pipe(L((function(t){return{payload:t,type:"value"}}))).pipe(this.afs.keepUnstableUntilFirst)}},{key:"valueChanges",value:function(){return this.snapshotChanges().pipe(L((function(t){return t.payload.data()})))}},{key:"get",value:function(t){return U(this.ref.get(t)).pipe(pf(this.afs.schedulers.insideAngular))}}]),t}(),hb=function(){function t(e,n){_classCallCheck(this,t),this.query=e,this.afs=n}return _createClass(t,[{key:"stateChanges",value:function(t){return t&&0!==t.length?sb(this.query,this.afs.schedulers.outsideAngular).pipe(L((function(e){return e.filter((function(e){return t.indexOf(e.type)>-1}))})),zf((function(t){return t.length>0})),this.afs.keepUnstableUntilFirst):sb(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}},{key:"auditTrail",value:function(t){return this.stateChanges(t).pipe(eb((function(t,e){return[].concat(_toConsumableArray(t),_toConsumableArray(e))}),[]))}},{key:"snapshotChanges",value:function(t){var e=ub(t);return ab(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}},{key:"valueChanges",value:function(){return ob(this.query,this.afs.schedulers.outsideAngular).pipe(L((function(t){return t.payload.docs.map((function(t){return t.data()}))})),this.afs.keepUnstableUntilFirst)}},{key:"get",value:function(t){return U(this.query.get(t)).pipe(pf(this.afs.schedulers.insideAngular))}}]),t}(),fb=n("xsWp"),db=new wt("angularfire2.enableFirestorePersistence"),pb=new wt("angularfire2.firestore.persistenceSettings"),vb=new wt("angularfire2.firestore.settings");function yb(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(t){return t};return{query:e(t),ref:t}}var gb,mb,_b=((mb=function(){function t(e,n,r,i,o,s,a){var u=this;_classCallCheck(this,t),this.schedulers=new Cf(s),this.keepUnstableUntilFirst=kf(this.schedulers),this.firestore=s.runOutsideAngular((function(){var t=Af(e,s,n);"registerFirestore"in fb&&fb.registerFirestore(mf.a);var r=t.firestore();return i&&r.settings(i),r})),this.persistenceEnabled$=r&&!Yl(o)?s.runOutsideAngular((function(){try{return U(u.firestore.enablePersistence(a||void 0).then((function(){return!0}),(function(){return!1})))}catch(t){return lf(!1)}})):lf(!1)}return _createClass(t,[{key:"collection",value:function(t,e){var n=yb("string"==typeof t?this.firestore.collection(t):t,e),r=n.ref,i=n.query,o=this.schedulers.ngZone.run((function(){return r}));return new cb(o,i,this)}},{key:"collectionGroup",value:function(t,e){var n=e||function(t){return t},r=this.firestore.collectionGroup(t);return new hb(n(r),this)}},{key:"doc",value:function(t){var e;e="string"==typeof t?this.firestore.doc(t):t;var n=this.schedulers.ngZone.run((function(){return e}));return new lb(n,this)}},{key:"createId",value:function(){return this.firestore.collection("_").doc().id}}]),t}()).\u0275fac=function(t){return new(t||mb)(be(Tf),be(Of,8),be(db,8),be(vb,8),be(ic),be(_c),be(pb,8))},mb.\u0275prov=ft({factory:function(){return new mb(be(Tf),be(Of,8),be(db,8),be(vb,8),be(ic),be(_c),be(pb,8))},token:mb,providedIn:"any"}),mb),bb=((gb=function(){function t(){_classCallCheck(this,t)}return _createClass(t,null,[{key:"enablePersistence",value:function(e){return{ngModule:t,providers:[{provide:db,useValue:!0},{provide:pb,useValue:e}]}}}]),t}()).\u0275mod=re({type:gb}),gb.\u0275inj=dt({factory:function(t){return new(t||gb)},providers:[_b]}),gb);function wb(t,e){return"function"==typeof e?function(n){return n.pipe(wb((function(n,r){return U(t(n,r)).pipe(L((function(t,i){return e(n,t,r,i)})))})))}:function(e){return e.lift(new Cb(t))}}var Cb=function(){function t(e){_classCallCheck(this,t),this.project=e}return _createClass(t,[{key:"call",value:function(t,e){return e.subscribe(new kb(t,this.project))}}]),t}(),kb=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r){var i;return _classCallCheck(this,n),(i=e.call(this,t)).project=r,i.index=0,i}return _createClass(n,[{key:"_next",value:function(t){var e,n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this._innerSub(e,t,n)}},{key:"_innerSub",value:function(t,e,n){var r=this.innerSubscription;r&&r.unsubscribe();var i=new x(this,e,n),o=this.destination;o.add(i),this.innerSubscription=z(this,t,void 0,void 0,i),this.innerSubscription!==i&&o.add(this.innerSubscription)}},{key:"_complete",value:function(){var t=this.innerSubscription;t&&!t.closed||_get(_getPrototypeOf(n.prototype),"_complete",this).call(this),this.unsubscribe()}},{key:"_unsubscribe",value:function(){this.innerSubscription=null}},{key:"notifyComplete",value:function(t){this.destination.remove(t),this.innerSubscription=null,this.isStopped&&_get(_getPrototypeOf(n.prototype),"_complete",this).call(this)}},{key:"notifyNext",value:function(t,e,n,r,i){this.destination.next(e)}}]),n}(j),Eb=n("qOnz"),Sb=n("/6Yf"),Tb=function(t){function e(n,r){var i=t.call(this,Ob(n),"Firebase Storage: "+r)||this;return i.customData={serverResponse:null},Object.setPrototypeOf(i,e.prototype),i}return Object(Df.d)(e,t),e.prototype.codeEquals=function(t){return Ob(t)===this.code},Object.defineProperty(e.prototype,"message",{get:function(){return this.customData.serverResponse?this.message+"\n"+this.customData.serverResponse:this.message},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"serverResponse",{get:function(){return this.customData.serverResponse},set:function(t){this.customData.serverResponse=t},enumerable:!1,configurable:!0}),e}(Eb.c);function Ob(t){return"storage/"+t}function Ib(){return new Tb("unknown","An unknown error occurred, please check the error payload for server response.")}function xb(){return new Tb("canceled","User canceled the upload/download.")}function Ab(){return new Tb("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function Pb(){return new Tb("app-deleted","The Firebase app was deleted.")}function Rb(t,e){return new Tb("invalid-format","String does not match format '"+t+"': "+e)}function Nb(t){throw new Tb("internal-error","Internal error: "+t)}var Db={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},zb=function(t,e){this.data=t,this.contentType=e||null};function jb(t,e){switch(t){case Db.RAW:return new zb(Lb(e));case Db.BASE64:case Db.BASE64URL:return new zb(Fb(t,e));case Db.DATA_URL:return new zb((n=new Mb(e)).base64?Fb(Db.BASE64,n.rest):function(t){var e;try{e=decodeURIComponent(t)}catch(n){throw Rb(Db.DATA_URL,"Malformed data URL.")}return Lb(e)}(n.rest),new Mb(e).contentType)}var n;throw Ib()}function Lb(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|63&r);else if(55296==(64512&r))if(n<t.length-1&&56320==(64512&t.charCodeAt(n+1))){var i=r,o=t.charCodeAt(++n);e.push(240|(r=65536|(1023&i)<<10|1023&o)>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else e.push(239,191,189);else 56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function Fb(t,e){switch(t){case Db.BASE64:var n=-1!==e.indexOf("-"),r=-1!==e.indexOf("_");if(n||r)throw Rb(t,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case Db.BASE64URL:var i=-1!==e.indexOf("+"),o=-1!==e.indexOf("/");if(i||o)throw Rb(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/")}var s;try{s=atob(e)}catch(c){throw Rb(t,"Invalid character found")}for(var a=new Uint8Array(s.length),u=0;u<s.length;u++)a[u]=s.charCodeAt(u);return a}var Mb=function(t){this.base64=!1,this.contentType=null;var e=t.match(/^data:([^,]+)?,/);if(null===e)throw Rb(Db.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n,r=e[1]||null;null!=r&&(this.base64=(n=r).length>=";base64".length&&";base64"===n.substring(n.length-";base64".length),this.contentType=this.base64?r.substring(0,r.length-";base64".length):r),this.rest=t.substring(t.indexOf(",")+1)},Vb={STATE_CHANGED:"state_changed"},Ub={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Bb(t){switch(t){case"running":case"pausing":case"canceling":return Ub.RUNNING;case"paused":return Ub.PAUSED;case"success":return Ub.SUCCESS;case"canceled":return Ub.CANCELED;case"error":default:return Ub.ERROR}}function qb(t){return null!=t}function Hb(t){return"string"==typeof t||t instanceof String}function Wb(t){return Gb()&&t instanceof Blob}function Gb(){return"undefined"!=typeof Blob}function Qb(t,e,n,r){if(r<e)throw new Tb("invalid-argument","Invalid value for '"+t+"'. Expected "+e+" or greater.");if(r>n)throw new Tb("invalid-argument","Invalid value for '"+t+"'. Expected "+n+" or less.")}var Kb=function(t){return t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT",t}({}),Yb=function(){function t(){var t=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=Kb.NO_ERROR,this.sendPromise_=new Promise((function(e){t.xhr_.addEventListener("abort",(function(){t.errorCode_=Kb.ABORT,e(t)})),t.xhr_.addEventListener("error",(function(){t.errorCode_=Kb.NETWORK_ERROR,e(t)})),t.xhr_.addEventListener("load",(function(){e(t)}))}))}return t.prototype.send=function(t,e,n,r){if(this.sent_)throw Nb("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),qb(r))for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return qb(n)?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},t.prototype.getErrorCode=function(){if(!this.sent_)throw Nb("cannot .getErrorCode() before sending");return this.errorCode_},t.prototype.getStatus=function(){if(!this.sent_)throw Nb("cannot .getStatus() before sending");try{return this.xhr_.status}catch(t){return-1}},t.prototype.getResponseText=function(){if(!this.sent_)throw Nb("cannot .getResponseText() before sending");return this.xhr_.responseText},t.prototype.abort=function(){this.xhr_.abort()},t.prototype.getResponseHeader=function(t){return this.xhr_.getResponseHeader(t)},t.prototype.addUploadProgressListener=function(t){qb(this.xhr_.upload)&&this.xhr_.upload.addEventListener("progress",t)},t.prototype.removeUploadProgressListener=function(t){qb(this.xhr_.upload)&&this.xhr_.upload.removeEventListener("progress",t)},t}(),$b=function(){function t(){}return t.prototype.createXhrIo=function(){return new Yb},t}();function Xb(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function Zb(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=Xb();if(void 0!==n){for(var r=new n,i=0;i<t.length;i++)r.append(t[i]);return r.getBlob()}if(Gb())return new Blob(t);throw Error("This browser doesn't seem to support creating Blobs")}var Jb=function(){function t(t,e){var n=0,r="";Wb(t)?(this.data_=t,n=t.size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=r}return t.prototype.size=function(){return this.size_},t.prototype.type=function(){return this.type_},t.prototype.slice=function(e,n){if(Wb(this.data_)){var r=(o=e,s=n,(i=this.data_).webkitSlice?i.webkitSlice(o,s):i.mozSlice?i.mozSlice(o,s):i.slice?i.slice(o,s):null);return null===r?null:new t(r)}var i,o,s;return new t(new Uint8Array(this.data_.buffer,e,n-e),!0)},t.getBlob=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(Gb()){var r=e.map((function(e){return e instanceof t?e.data_:e}));return new t(Zb.apply(null,r))}var i=e.map((function(t){return Hb(t)?jb(Db.RAW,t).data:t.data_})),o=0;i.forEach((function(t){o+=t.byteLength}));var s=new Uint8Array(o),a=0;return i.forEach((function(t){for(var e=0;e<t.length;e++)s[a++]=t[e]})),new t(s,!0)},t.prototype.uploadData=function(){return this.data_},t}(),tw=function(){function t(t,e){this.bucket=t,this.path_=e}return Object.defineProperty(t.prototype,"path",{get:function(){return this.path_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!1,configurable:!0}),t.prototype.fullServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)},t.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},t.makeFromBucketSpec=function(e){var n;try{n=t.makeFromUrl(e)}catch(r){return new t(e,"")}if(""===n.path)return n;throw new Tb("invalid-default-bucket","Invalid default bucket '"+e+"'.")},t.makeFromUrl=function(e){var n=null,r=new RegExp("^gs://([A-Za-z0-9.\\-_]+)(/(.*))?$","i");function i(t){t.path_=decodeURIComponent(t.path)}for(var o="firebasestorage.googleapis.com".replace(/[.]/g,"\\."),s=[{regex:r,indices:{bucket:1,path:3},postModify:function(t){"/"===t.path.charAt(t.path.length-1)&&(t.path_=t.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+o+"/v[A-Za-z0-9_]+/b/([A-Za-z0-9.\\-_]+)/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:i},{regex:new RegExp("^https?://(?:storage.googleapis.com|storage.cloud.google.com)/([A-Za-z0-9.\\-_]+)/([^?#]*)","i"),indices:{bucket:1,path:2},postModify:i}],a=0;a<s.length;a++){var u=s[a],c=u.regex.exec(e);if(c){var l=c[u.indices.path];l||(l=""),n=new t(c[u.indices.bucket],l),u.postModify(n);break}}if(null==n)throw function(t){return new Tb("invalid-url","Invalid URL '"+t+"'.")}(e);return n},t}();function ew(t){var e,n;try{e=JSON.parse(t)}catch(r){return null}return"object"!=typeof(n=e)||Array.isArray(n)?null:e}function nw(t){var e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}function rw(t){return"https://firebasestorage.googleapis.com/v0"+t}function iw(t){var e=encodeURIComponent,n="?";for(var r in t)t.hasOwnProperty(r)&&(n=n+(e(r)+"=")+e(t[r])+"&");return n.slice(0,-1)}function ow(t,e){return e}var sw=function(t,e,n,r){this.server=t,this.local=e||t,this.writable=!!n,this.xform=r||ow},aw=null;function uw(t,e,n){var r=ew(e);return null===r?null:function(t,e,n){for(var r={type:"file"},i=n.length,o=0;o<i;o++){var s=n[o];r[s.local]=s.xform(r,e[s.server])}return function(t,e){Object.defineProperty(t,"ref",{get:function(){var n=new tw(t.bucket,t.fullPath);return e.makeStorageReference(n)}})}(r,t),r}(t,r,n)}function cw(t,e){for(var n={},r=e.length,i=0;i<r;i++){var o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}var lw=function(t,e,n,r){this.url=t,this.method=e,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]};function hw(t){if(!t)throw Ib()}function fw(t,e){return function(n,r){var i=uw(t,r,e);return hw(null!==i),i}}function dw(t){return function(e,n){var r;return(r=401===e.getStatus()?new Tb("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===e.getStatus()?new Tb("quota-exceeded","Quota for bucket '"+t.bucket+"' exceeded, please view quota on https://firebase.google.com/pricing/."):403===e.getStatus()?new Tb("unauthorized","User does not have permission to access '"+t.path+"'."):n).serverResponse=n.serverResponse,r}}function pw(t){var e=dw(t);return function(n,r){var i=e(n,r);return 404===n.getStatus()&&(i=new Tb("object-not-found","Object '"+t.path+"' does not exist.")),i.serverResponse=r.serverResponse,i}}function vw(t,e,n){var r=rw(e.fullServerUrl()),i=t.maxOperationRetryTime,o=new lw(r,"GET",fw(t,n),i);return o.errorHandler=pw(e),o}function yw(t,e,n){var r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=function(t,e){return e&&e.type()||"application/octet-stream"}(0,e)),r}var gw=function(t,e,n,r){this.current=t,this.total=e,this.finalized=!!n,this.metadata=r||null};function mw(t,e){var n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch(r){hw(!1)}return hw(!!n&&-1!==(e||["active"]).indexOf(n)),n}var _w=function(t,e,n){if("function"==typeof t||qb(e)||qb(n))this.next=t,this.error=e||null,this.complete=n||null;else{var r=t;this.next=r.next||null,this.error=r.error||null,this.complete=r.complete||null}},bw=function(t,e,n,r,i,o){this.bytesTransferred=t,this.totalBytes=e,this.state=n,this.metadata=r,this.task=i,this.ref=o};function ww(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];Promise.resolve().then((function(){return t.apply(void 0,e)}))}}var Cw=function(){function t(t,e,n,r,i,o){var s=this;void 0===o&&(o=null),this.transferred_=0,this.needToFetchStatus_=!1,this.needToFetchMetadata_=!1,this.observers_=[],this.error_=null,this.uploadUrl_=null,this.request_=null,this.chunkMultiplier_=1,this.resolve_=null,this.reject_=null,this.ref_=t,this.service_=e,this.location_=n,this.blob_=i,this.metadata_=o,this.mappings_=r,this.resumable_=this.shouldDoResumable_(this.blob_),this.state_="running",this.errorHandler_=function(t){s.request_=null,s.chunkMultiplier_=1,t.codeEquals("canceled")?(s.needToFetchStatus_=!0,s.completeTransitions_()):(s.error_=t,s.transition_("error"))},this.metadataErrorHandler_=function(t){s.request_=null,t.codeEquals("canceled")?s.completeTransitions_():(s.error_=t,s.transition_("error"))},this.promise_=new Promise((function(t,e){s.resolve_=t,s.reject_=e,s.start_()})),this.promise_.then(null,(function(){}))}return t.prototype.makeProgressCallback_=function(){var t=this,e=this.transferred_;return function(n){return t.updateProgress_(e+n)}},t.prototype.shouldDoResumable_=function(t){return t.size()>262144},t.prototype.start_=function(){"running"===this.state_&&null===this.request_&&(this.resumable_?null===this.uploadUrl_?this.createResumable_():this.needToFetchStatus_?this.fetchStatus_():this.needToFetchMetadata_?this.fetchMetadata_():this.continueUpload_():this.oneShotUpload_())},t.prototype.resolveToken_=function(t){var e=this;this.service_.getAuthToken().then((function(n){switch(e.state_){case"running":t(n);break;case"canceling":e.transition_("canceled");break;case"pausing":e.transition_("paused")}}))},t.prototype.createResumable_=function(){var t=this;this.resolveToken_((function(e){var n=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s=yw(e,r,i),a={name:s.fullPath},u=rw(o),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":r.size(),"X-Goog-Upload-Header-Content-Type":s.contentType,"Content-Type":"application/json; charset=utf-8"},l=cw(s,n),h=new lw(u,"POST",(function(t){var e;mw(t);try{e=t.getResponseHeader("X-Goog-Upload-URL")}catch(n){hw(!1)}return hw(Hb(e)),e}),t.maxUploadRetryTime);return h.urlParams=a,h.headers=c,h.body=l,h.errorHandler=dw(e),h}(t.service_,t.location_,t.mappings_,t.blob_,t.metadata_),r=t.service_.makeRequest(n,e);t.request_=r,r.getPromise().then((function(e){t.request_=null,t.uploadUrl_=e,t.needToFetchStatus_=!1,t.completeTransitions_()}),t.errorHandler_)}))},t.prototype.fetchStatus_=function(){var t=this,e=this.uploadUrl_;this.resolveToken_((function(n){var r=function(t,e,n,r){var i=new lw(n,"POST",(function(t){var e=mw(t,["active","final"]),n=null;try{n=t.getResponseHeader("X-Goog-Upload-Size-Received")}catch(o){hw(!1)}n||hw(!1);var i=Number(n);return hw(!isNaN(i)),new gw(i,r.size(),"final"===e)}),t.maxUploadRetryTime);return i.headers={"X-Goog-Upload-Command":"query"},i.errorHandler=dw(e),i}(t.service_,t.location_,e,t.blob_),i=t.service_.makeRequest(r,n);t.request_=i,i.getPromise().then((function(e){e=e,t.request_=null,t.updateProgress_(e.current),t.needToFetchStatus_=!1,e.finalized&&(t.needToFetchMetadata_=!0),t.completeTransitions_()}),t.errorHandler_)}))},t.prototype.continueUpload_=function(){var t=this,e=262144*this.chunkMultiplier_,n=new gw(this.transferred_,this.blob_.size()),r=this.uploadUrl_;this.resolveToken_((function(i){var o;try{o=function(t,e,n,r,i,o,s,a){var u=new gw(0,0);if(s?(u.current=s.current,u.total=s.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw new Tb("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var c=u.total-u.current,l=c;i>0&&(l=Math.min(l,i));var h=u.current,f={"X-Goog-Upload-Command":l===c?"upload, finalize":"upload","X-Goog-Upload-Offset":u.current},d=r.slice(h,h+l);if(null===d)throw Ab();var p=new lw(n,"POST",(function(t,n){var i,s=mw(t,["active","final"]),a=u.current+l,c=r.size();return i="final"===s?fw(e,o)(t,n):null,new gw(a,c,"final"===s,i)}),e.maxUploadRetryTime);return p.headers=f,p.body=d.uploadData(),p.progressCallback=a||null,p.errorHandler=dw(t),p}(t.location_,t.service_,r,t.blob_,e,t.mappings_,n,t.makeProgressCallback_())}catch(a){return t.error_=a,void t.transition_("error")}var s=t.service_.makeRequest(o,i);t.request_=s,s.getPromise().then((function(e){t.increaseMultiplier_(),t.request_=null,t.updateProgress_(e.current),e.finalized?(t.metadata_=e.metadata,t.transition_("success")):t.completeTransitions_()}),t.errorHandler_)}))},t.prototype.increaseMultiplier_=function(){262144*this.chunkMultiplier_<33554432&&(this.chunkMultiplier_*=2)},t.prototype.fetchMetadata_=function(){var t=this;this.resolveToken_((function(e){var n=vw(t.service_,t.location_,t.mappings_),r=t.service_.makeRequest(n,e);t.request_=r,r.getPromise().then((function(e){t.request_=null,t.metadata_=e,t.transition_("success")}),t.metadataErrorHandler_)}))},t.prototype.oneShotUpload_=function(){var t=this;this.resolveToken_((function(e){var n=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"},a=function(){for(var t="",e=0;e<2;e++)t+=Math.random().toString().slice(2);return t}();s["Content-Type"]="multipart/related; boundary="+a;var u=yw(e,r,i),c=cw(u,n),l=Jb.getBlob("--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+c+"\r\n--"+a+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",r,"\r\n--"+a+"--");if(null===l)throw Ab();var h={name:u.fullPath},f=rw(o),d=t.maxUploadRetryTime,p=new lw(f,"POST",fw(t,n),d);return p.urlParams=h,p.headers=s,p.body=l.uploadData(),p.errorHandler=dw(e),p}(t.service_,t.location_,t.mappings_,t.blob_,t.metadata_),r=t.service_.makeRequest(n,e);t.request_=r,r.getPromise().then((function(e){t.request_=null,t.metadata_=e,t.updateProgress_(t.blob_.size()),t.transition_("success")}),t.errorHandler_)}))},t.prototype.updateProgress_=function(t){var e=this.transferred_;this.transferred_=t,this.transferred_!==e&&this.notifyObservers_()},t.prototype.transition_=function(t){if(this.state_!==t)switch(t){case"canceling":case"pausing":this.state_=t,null!==this.request_&&this.request_.cancel();break;case"running":var e="paused"===this.state_;this.state_=t,e&&(this.notifyObservers_(),this.start_());break;case"paused":this.state_=t,this.notifyObservers_();break;case"canceled":this.error_=xb(),this.state_=t,this.notifyObservers_();break;case"error":case"success":this.state_=t,this.notifyObservers_()}},t.prototype.completeTransitions_=function(){switch(this.state_){case"pausing":this.transition_("paused");break;case"canceling":this.transition_("canceled");break;case"running":this.start_()}},Object.defineProperty(t.prototype,"snapshot",{get:function(){var t=Bb(this.state_);return new bw(this.transferred_,this.blob_.size(),t,this.metadata_,this,this.ref_)},enumerable:!1,configurable:!0}),t.prototype.on=function(t,e,n,r){var i=this,o=new _w(e,n,r);return this.addObserver_(o),function(){i.removeObserver_(o)}},t.prototype.then=function(t,e){return this.promise_.then(t,e)},t.prototype.catch=function(t){return this.then(null,t)},t.prototype.addObserver_=function(t){this.observers_.push(t),this.notifyObserver_(t)},t.prototype.removeObserver_=function(t){var e=this.observers_.indexOf(t);-1!==e&&this.observers_.splice(e,1)},t.prototype.notifyObservers_=function(){var t=this;this.finishPromise_(),this.observers_.slice().forEach((function(e){t.notifyObserver_(e)}))},t.prototype.finishPromise_=function(){if(null!==this.resolve_){var t=!0;switch(Bb(this.state_)){case Ub.SUCCESS:ww(this.resolve_.bind(null,this.snapshot))();break;case Ub.CANCELED:case Ub.ERROR:ww(this.reject_.bind(null,this.error_))();break;default:t=!1}t&&(this.resolve_=null,this.reject_=null)}},t.prototype.notifyObserver_=function(t){switch(Bb(this.state_)){case Ub.RUNNING:case Ub.PAUSED:t.next&&ww(t.next.bind(t,this.snapshot))();break;case Ub.SUCCESS:t.complete&&ww(t.complete.bind(t))();break;case Ub.CANCELED:case Ub.ERROR:t.error&&ww(t.error.bind(t,this.error_))();break;default:t.error&&ww(t.error.bind(t,this.error_))()}},t.prototype.resume=function(){var t="paused"===this.state_||"pausing"===this.state_;return t&&this.transition_("running"),t},t.prototype.pause=function(){var t="running"===this.state_;return t&&this.transition_("pausing"),t},t.prototype.cancel=function(){var t="running"===this.state_||"pausing"===this.state_;return t&&this.transition_("canceling"),t},t}(),kw=function(){function t(t,e){this.service=t,this.location=e instanceof tw?e:tw.makeFromUrl(e)}return t.prototype.toString=function(){return"gs://"+this.location.bucket+"/"+this.location.path},t.prototype.newRef=function(e,n){return new t(e,n)},t.prototype.mappings=function(){return function(){if(aw)return aw;var t=[];t.push(new sw("bucket")),t.push(new sw("generation")),t.push(new sw("metageneration")),t.push(new sw("name","fullPath",!0));var e=new sw("name");e.xform=function(t,e){return function(t){return!Hb(t)||t.length<2?t:nw(t)}(e)},t.push(e);var n=new sw("size");return n.xform=function(t,e){return qb(e)?Number(e):e},t.push(n),t.push(new sw("timeCreated")),t.push(new sw("updated")),t.push(new sw("md5Hash",null,!0)),t.push(new sw("cacheControl",null,!0)),t.push(new sw("contentDisposition",null,!0)),t.push(new sw("contentEncoding",null,!0)),t.push(new sw("contentLanguage",null,!0)),t.push(new sw("contentType",null,!0)),t.push(new sw("metadata","customMetadata",!0)),aw=t}()},t.prototype.child=function(t){var e=function(t,e){var n=e.split("/").filter((function(t){return t.length>0})).join("/");return 0===t.length?n:t+"/"+n}(this.location.path,t),n=new tw(this.location.bucket,e);return this.newRef(this.service,n)},Object.defineProperty(t.prototype,"parent",{get:function(){var t=function(t){if(0===t.length)return null;var e=t.lastIndexOf("/");return-1===e?"":t.slice(0,e)}(this.location.path);if(null===t)return null;var e=new tw(this.location.bucket,t);return this.newRef(this.service,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){var t=new tw(this.location.bucket,"");return this.newRef(this.service,t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this.location.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this.location.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return nw(this.location.path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"storage",{get:function(){return this.service},enumerable:!1,configurable:!0}),t.prototype.put=function(t,e){return void 0===e&&(e=null),this.throwIfRoot_("put"),new Cw(this,this.service,this.location,this.mappings(),new Jb(t),e)},t.prototype.putString=function(t,e,n){void 0===e&&(e=Db.RAW),this.throwIfRoot_("putString");var r=jb(e,t),i=Object.assign({},n);return!qb(i.contentType)&&qb(r.contentType)&&(i.contentType=r.contentType),new Cw(this,this.service,this.location,this.mappings(),new Jb(r.data,!0),i)},t.prototype.delete=function(){var t=this;return this.throwIfRoot_("delete"),this.service.getAuthToken().then((function(e){var n=function(t,e){var n=rw(e.fullServerUrl()),r=new lw(n,"DELETE",(function(t,e){}),t.maxOperationRetryTime);return r.successCodes=[200,204],r.errorHandler=pw(e),r}(t.service,t.location);return t.service.makeRequest(n,e).getPromise()}))},t.prototype.listAll=function(){var t={prefixes:[],items:[]};return this.listAllHelper(t).then((function(){return t}))},t.prototype.listAllHelper=function(t,e){return Object(Df.b)(this,void 0,void 0,(function(){var n,r,i;return Object(Df.e)(this,(function(o){switch(o.label){case 0:return[4,this.list({pageToken:e})];case 1:return n=o.sent(),(r=t.prefixes).push.apply(r,n.prefixes),(i=t.items).push.apply(i,n.items),null==n.nextPageToken?[3,3]:[4,this.listAllHelper(t,n.nextPageToken)];case 2:o.sent(),o.label=3;case 3:return[2]}}))}))},t.prototype.list=function(t){var e=this,n=t||{};return"number"==typeof n.maxResults&&Qb("options.maxResults",1,1e3,n.maxResults),this.service.getAuthToken().then((function(t){var r=function(t,e,n,r,i){var o={};o.prefix=e.isRoot?"":e.path+"/","/".length>0&&(o.delimiter="/"),r&&(o.pageToken=r),i&&(o.maxResults=i);var s=rw(e.bucketOnlyServerUrl()),a=t.maxOperationRetryTime,u=new lw(s,"GET",function(t,e){return function(n,r){var i=function(t,e,n){var r=ew(n);return null===r?null:function(t,e,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n.prefixes)for(var i=0,o=n.prefixes;i<o.length;i++){var s=o[i].replace(/\/$/,""),a=t.makeStorageReference(new tw(e,s));r.prefixes.push(a)}if(n.items)for(var u=0,c=n.items;u<c.length;u++)a=t.makeStorageReference(new tw(e,c[u].name)),r.items.push(a);return r}(t,e,r)}(t,e,r);return hw(null!==i),i}}(t,e.bucket),a);return u.urlParams=o,u.errorHandler=dw(e),u}(e.service,e.location,0,n.pageToken,n.maxResults);return e.service.makeRequest(r,t).getPromise()}))},t.prototype.getMetadata=function(){var t=this;return this.throwIfRoot_("getMetadata"),this.service.getAuthToken().then((function(e){var n=vw(t.service,t.location,t.mappings());return t.service.makeRequest(n,e).getPromise()}))},t.prototype.updateMetadata=function(t){var e=this;return this.throwIfRoot_("updateMetadata"),this.service.getAuthToken().then((function(n){var r=function(t,e,n,r){var i=rw(e.fullServerUrl()),o=cw(n,r),s=t.maxOperationRetryTime,a=new lw(i,"PATCH",fw(t,r),s);return a.headers={"Content-Type":"application/json; charset=utf-8"},a.body=o,a.errorHandler=pw(e),a}(e.service,e.location,t,e.mappings());return e.service.makeRequest(r,n).getPromise()}))},t.prototype.getDownloadURL=function(){var t=this;return this.throwIfRoot_("getDownloadURL"),this.service.getAuthToken().then((function(e){var n=function(t,e,n){var r=rw(e.fullServerUrl()),i=t.maxOperationRetryTime,o=new lw(r,"GET",function(t,e){return function(n,r){var i=uw(t,r,e);return hw(null!==i),function(t,e){var n=ew(e);if(null===n)return null;if(!Hb(n.downloadTokens))return null;var r=n.downloadTokens;if(0===r.length)return null;var i=encodeURIComponent;return r.split(",").map((function(e){var n=t.fullPath;return rw("/b/"+i(t.bucket)+"/o/"+i(n))+iw({alt:"media",token:e})}))[0]}(i,r)}}(t,n),i);return o.errorHandler=pw(e),o}(t.service,t.location,t.mappings());return t.service.makeRequest(n,e).getPromise().then((function(t){if(null===t)throw new Tb("no-download-url","The given file does not have any download URLs.");return t}))}))},t.prototype.throwIfRoot_=function(t){if(""===this.location.path)throw function(t){return new Tb("invalid-root-operation","The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(t)},t}(),Ew=function(){function t(t){this.promise_=Promise.reject(t)}return t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){},t}(),Sw=function(){function t(t,e,n,r,i,o,s,a,u,c,l){var h=this;this.pendingXhr_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=t,this.method_=e,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=s,this.errorCallback_=a,this.progressCallback_=c,this.timeout_=u,this.pool_=l,this.promise_=new Promise((function(t,e){h.resolve_=t,h.reject_=e,h.start_()}))}return t.prototype.start_=function(){var t=this;function e(e,n){var r,i=t.resolve_,o=t.reject_,s=n.xhr;if(n.wasSuccessCode)try{var a=t.callback_(s,s.getResponseText());void 0!==a?i(a):i()}catch(u){o(u)}else null!==s?((r=Ib()).serverResponse=s.getResponseText(),o(t.errorCallback_?t.errorCallback_(s,r):r)):o(r=n.canceled?t.appDelete_?Pb():xb():new Tb("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}this.canceled_?e(0,new Tw(!1,null,!0)):this.backoffId_=function(e,n,r){var i=1,o=null,s=!1,a=0;function u(){return 2===a}var c=!1;function l(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];c||(c=!0,n.apply(null,t))}function h(e){o=setTimeout((function(){o=null,function(e,n){if(n)e(!1,new Tw(!1,null,!0));else{var r=t.pool_.createXhrIo();t.pendingXhr_=r,null!==t.progressCallback_&&r.addUploadProgressListener(i),r.send(t.url_,t.method_,t.body_,t.headers_).then((function(n){null!==t.progressCallback_&&n.removeUploadProgressListener(i),t.pendingXhr_=null;var r=(n=n).getErrorCode()===Kb.NO_ERROR,o=n.getStatus();if(r&&!t.isRetryStatusCode_(o)){var s=-1!==t.successCodes_.indexOf(o);e(!0,new Tw(s,n))}else{var a=n.getErrorCode()===Kb.ABORT;e(!1,new Tw(!1,null,a))}}))}function i(e){null!==t.progressCallback_&&t.progressCallback_(e.loaded,e.lengthComputable?e.total:-1)}}(f,u())}),e)}function f(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(!c)if(t)l.call.apply(l,Object(Df.j)([null,t],e));else{var r,o=u()||s;o?l.call.apply(l,Object(Df.j)([null,t],e)):(i<64&&(i*=2),1===a?(a=2,r=0):r=1e3*(i+Math.random()),h(r))}}var d=!1;function p(t){d||(d=!0,c||(null!==o?(t||(a=2),clearTimeout(o),h(0)):t||(a=1)))}return h(0),setTimeout((function(){s=!0,p(!0)}),r),p}(0,e,this.timeout_)},t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingXhr_&&this.pendingXhr_.abort()},t.prototype.isRetryStatusCode_=function(t){var e=t>=500&&t<600,n=-1!==[408,429].indexOf(t),r=-1!==this.additionalRetryCodes_.indexOf(t);return e||n||r},t}(),Tw=function(t,e,n){this.wasSuccessCode=t,this.xhr=e,this.canceled=!!n},Ow=function(){function t(e,n,r,i){var o;this.bucket_=null,this.appId_=null,this.deleted_=!1,this.app_=e,this.authProvider_=n,this.maxOperationRetryTime_=12e4,this.maxUploadRetryTime_=6e5,this.requests_=new Set,this.pool_=r,this.bucket_=null!=i?tw.makeFromBucketSpec(i):t.extractBucket_(null===(o=this.app_)||void 0===o?void 0:o.options),this.internals_=new Iw(this)}return t.extractBucket_=function(t){var e=null==t?void 0:t.storageBucket;return null==e?null:tw.makeFromBucketSpec(e)},t.prototype.getAuthToken=function(){return Object(Df.b)(this,void 0,void 0,(function(){var t,e;return Object(Df.e)(this,(function(n){switch(n.label){case 0:return(t=this.authProvider_.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:if(null!==(e=n.sent()))return[2,e.accessToken];n.label=2;case 2:return[2,null]}}))}))},t.prototype.deleteApp=function(){this.deleted_=!0,this.app_=null,this.requests_.forEach((function(t){return t.cancel()})),this.requests_.clear()},t.prototype.makeStorageReference=function(t){return new kw(this,t)},t.prototype.makeRequest=function(t,e){var n=this;if(this.deleted_)return new Ew(Pb());var r=function(t,e,n,r){var i=iw(t.urlParams),o=t.url+i,s=Object.assign({},t.headers);return function(t,e){e&&(t["X-Firebase-GMPID"]=e)}(s,e),function(t,e){null!==e&&e.length>0&&(t.Authorization="Firebase "+e)}(s,n),function(t){t["X-Firebase-Storage-Version"]="webjs/"+(void 0!==mf.a?mf.a.SDK_VERSION:"AppManager")}(s),new Sw(o,t.method,s,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,r)}(t,this.appId_,e,this.pool_);return this.requests_.add(r),r.getPromise().then((function(){return n.requests_.delete(r)}),(function(){return n.requests_.delete(r)})),r},t.prototype.ref=function(t){if(/^[A-Za-z]+:\/\//.test(t))throw new Tb("invalid-argument","Expected child path but got a URL, use refFromURL instead.");if(null==this.bucket_)throw new Error("No Storage Bucket defined in Firebase Options.");var e=new kw(this,this.bucket_);return null!=t?e.child(t):e},t.prototype.refFromURL=function(t){if(!/^[A-Za-z]+:\/\//.test(t))throw new Tb("invalid-argument","Expected full URL but got a child path, use ref instead.");try{tw.makeFromUrl(t)}catch(e){throw new Tb("invalid-argument","Expected valid full URL but got an invalid one.")}return new kw(this,t)},Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this.maxUploadRetryTime_},enumerable:!1,configurable:!0}),t.prototype.setMaxUploadRetryTime=function(t){Qb("time",0,Number.POSITIVE_INFINITY,t),this.maxUploadRetryTime_=t},Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this.maxOperationRetryTime_},enumerable:!1,configurable:!0}),t.prototype.setMaxOperationRetryTime=function(t){Qb("time",0,Number.POSITIVE_INFINITY,t),this.maxOperationRetryTime_=t},Object.defineProperty(t.prototype,"app",{get:function(){return this.app_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"INTERNAL",{get:function(){return this.internals_},enumerable:!1,configurable:!0}),t}(),Iw=function(){function t(t){this.service_=t}return t.prototype.delete=function(){return this.service_.deleteApp(),Promise.resolve()},t}();function xw(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal");return new Ow(n,r,new $b,e)}function Aw(t){var e={TaskState:Ub,TaskEvent:Vb,StringFormat:Db,Storage:Ow,Reference:kw};t.INTERNAL.registerComponent(new Sb.a("storage",xw,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),t.registerVersion("@firebase/storage","0.4.1")}function Pw(t){var e=function(t){return new b((function(e){var n=function(t){return e.next(t)};return t.on("state_changed",n,(function(t){return e.error(t)}),(function(){n(t.snapshot),e.complete()})),function(){return t.cancel()}}))}(t);return{task:t,then:t.then.bind(t),catch:t.catch.bind(t),pause:t.pause.bind(t),cancel:t.cancel.bind(t),resume:t.resume.bind(t),snapshotChanges:function(){return e},percentageChanges:function(){return e.pipe(L((function(t){return t.bytesTransferred/t.totalBytes*100})))}}}function Rw(t,e,n){return{getDownloadURL:function(){return lf(void 0).pipe(pf(e.outsideAngular),wb((function(){return t.getDownloadURL()})),n)},getMetadata:function(){return lf(void 0).pipe(pf(e.outsideAngular),wb((function(){return t.getMetadata()})),n)},delete:function(){return U(t.delete())},child:function(r){return Rw(t.child(r),e,n)},updateMetadata:function(e){return U(t.updateMetadata(e))},put:function(e,n){return Pw(t.put(e,n))},putString:function(e,n,r){return Pw(t.putString(e,n,r))},listAll:function(){return U(t.listAll())}}}Aw(mf.a);var Nw,Dw,zw=new wt("angularfire2.storageBucket"),jw=((Dw=function(){function t(e,n,r,i,o){_classCallCheck(this,t),this.schedulers=new Cf(o),this.keepUnstableUntilFirst=kf(this.schedulers),this.storage=o.runOutsideAngular((function(){var t=Af(e,o,n);return Aw&&Aw(mf.a),t.storage(r||void 0)}))}return _createClass(t,[{key:"ref",value:function(t){return Rw(this.storage.ref(t),this.schedulers,this.keepUnstableUntilFirst)}},{key:"upload",value:function(t,e,n){return Rw(this.storage.ref(t),this.schedulers,this.keepUnstableUntilFirst).put(e,n)}}]),t}()).\u0275fac=function(t){return new(t||Dw)(be(Tf),be(Of,8),be(zw,8),be(ic),be(_c))},Dw.\u0275prov=ft({factory:function(){return new Dw(be(Tf),be(Of,8),be(zw,8),be(ic),be(_c))},token:Dw,providedIn:"any"}),Dw),Lw=((Nw=function t(){_classCallCheck(this,t)}).\u0275mod=re({type:Nw}),Nw.\u0275inj=dt({factory:function(t){return new(t||Nw)},providers:[jw]}),Nw);function Fw(t,e,n){var r;return r=t&&"object"==typeof t?t:{bufferSize:t,windowTime:e,refCount:!1,scheduler:n},function(t){return t.lift(function(t){var e,n,r=t.bufferSize,i=void 0===r?Number.POSITIVE_INFINITY:r,o=t.windowTime,s=void 0===o?Number.POSITIVE_INFINITY:o,a=t.refCount,u=t.scheduler,c=0,l=!1,h=!1;return function(t){c++,e&&!l||(l=!1,e=new l_(i,s,u),n=t.subscribe({next:function(t){e.next(t)},error:function(t){l=!0,e.error(t)},complete:function(){h=!0,n=void 0,e.complete()}}));var r=e.subscribe(this);this.add((function(){c--,r.unsubscribe(),n&&!h&&a&&0===c&&(n.unsubscribe(),n=void 0,e=void 0)}))}}(r))}}var Mw=function(){function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t}();function Vw(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return function(e){return e.lift(new Uw(t))}}var Uw=function(){function t(e){_classCallCheck(this,t),this.defaultValue=e}return _createClass(t,[{key:"call",value:function(t,e){return e.subscribe(new Bw(t,this.defaultValue))}}]),t}(),Bw=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r){var i;return _classCallCheck(this,n),(i=e.call(this,t)).defaultValue=r,i.isEmpty=!0,i}return _createClass(n,[{key:"_next",value:function(t){this.isEmpty=!1,this.destination.next(t)}},{key:"_complete",value:function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}]),n}(v);function qw(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gw;return function(e){return e.lift(new Hw(t))}}var Hw=function(){function t(e){_classCallCheck(this,t),this.errorFactory=e}return _createClass(t,[{key:"call",value:function(t,e){return e.subscribe(new Ww(t,this.errorFactory))}}]),t}(),Ww=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r){var i;return _classCallCheck(this,n),(i=e.call(this,t)).errorFactory=r,i.hasValue=!1,i}return _createClass(n,[{key:"_next",value:function(t){this.hasValue=!0,this.destination.next(t)}},{key:"_complete",value:function(){if(this.hasValue)return this.destination.complete();var t;try{t=this.errorFactory()}catch(e){t=e}this.destination.error(t)}}]),n}(v);function Gw(){return new Mw}function Qw(t,e){var n=arguments.length>=2;return function(r){return r.pipe(t?zf((function(e,n){return t(e,n,r)})):m,td(1),n?Vw(e):qw((function(){return new Mw})))}}var Kw,Yw,$w,Xw,Zw=((Xw=function t(e,r,i,o){_classCallCheck(this,t);var s=new Cf(o),a=kf(s),u=lf(void 0).pipe(pf(s.outsideAngular),wb((function(){return o.runOutsideAngular((function(){return n.e(6).then(n.bind(null,"6nsN"))}))})),L((function(){return Af(e,o,r)})),L((function(t){return o.runOutsideAngular((function(){return t.auth()}))})),Fw({bufferSize:1,refCount:!1}));return Yl(i)?this.authState=this.user=this.idToken=this.idTokenResult=lf(null):(u.pipe(Qw()).subscribe(),this.authState=u.pipe(wb((function(t){return t.getRedirectResult().then((function(){return t}),(function(){return t}))})),wb((function(t){return o.runOutsideAngular((function(){return new b(t.onAuthStateChanged.bind(t))}))})),a),this.user=u.pipe(wb((function(t){return t.getRedirectResult().then((function(){return t}),(function(){return t}))})),wb((function(t){return o.runOutsideAngular((function(){return new b(t.onIdTokenChanged.bind(t))}))})),a),this.idToken=this.user.pipe(wb((function(t){return t?U(t.getIdToken()):lf(null)}))),this.idTokenResult=this.user.pipe(wb((function(t){return t?U(t.getIdTokenResult()):lf(null)})))),Sf(this,u,o)}).\u0275fac=function(t){return new(t||Xw)(be(Tf),be(Of,8),be(ic),be(_c))},Xw.\u0275prov=ft({factory:function(){return new Xw(be(Tf),be(Of,8),be(ic),be(_c))},token:Xw,providedIn:"any"}),Xw),Jw=(($w=function t(){_classCallCheck(this,t)}).\u0275mod=re({type:$w}),$w.\u0275inj=dt({factory:function(t){return new(t||$w)},providers:[Zw]}),$w),tC=((Yw=function t(e,r,i,o){var s=this;_classCallCheck(this,t);var a=new Cf(o),u=lf(void 0).pipe(sf(a.outsideAngular),pf(a.insideAngular),wb((function(){return Yl(i)?uf:n.e(5).then(n.bind(null,"dB9c"))})),L((function(){return Af(e,o,r)})),L((function(t){return t.messaging()})),Fw({bufferSize:1,refCount:!1}));this.requestPermission=u.pipe(sf(a.outsideAngular),pf(a.insideAngular),wb((function(t){return mf.a.messaging.isSupported()?t.requestPermission():hf("Not supported.")}))),this.getToken=u.pipe(sf(a.outsideAngular),pf(a.insideAngular),wb((function(t){return mf.a.messaging.isSupported()&&"granted"===Notification.permission?t.getToken():uf})),Vw(null));var c,l=u.pipe(sf(a.outsideAngular),pf(a.insideAngular),wb((function(t){return mf.a.messaging.isSupported()?new b((function(e){return t.onTokenRefresh(e.next,e.error,e.complete)})):uf})),(c=this.getToken,wb((function(){return c}))));return this.tokenChanges=u.pipe(sf(a.outsideAngular),pf(a.insideAngular),wb((function(t){return mf.a.messaging.isSupported()?Lp(s.getToken,l):uf}))),this.messages=u.pipe(sf(a.outsideAngular),pf(a.insideAngular),wb((function(t){return mf.a.messaging.isSupported()?new b((function(e){return t.onMessage((function(t){return e.next(t)}),(function(t){return e.error(t)}),(function(){return e.complete()}))})):uf}))),this.requestToken=lf(void 0).pipe(wb((function(){return s.requestPermission})),up((function(){return lf(null)})),B((function(){return s.tokenChanges}))),this.deleteToken=function(t){return u.pipe(sf(a.outsideAngular),pf(a.insideAngular),wb((function(e){return e.deleteToken(t)})),Vw(!1))},Sf(this,u,o)}).\u0275fac=function(t){return new(t||Yw)(be(Tf),be(Of,8),be(ic),be(_c))},Yw.\u0275prov=ft({factory:function(){return new Yw(be(Tf),be(Of,8),be(ic),be(_c))},token:Yw,providedIn:"any"}),Yw),eC=((Kw=function t(){_classCallCheck(this,t)}).\u0275mod=re({type:Kw}),Kw.\u0275inj=dt({factory:function(t){return new(t||Kw)},providers:[tC]}),Kw);function nC(t,e){return function(n){return n.lift(new rC(t,e))}}var rC=function(){function t(e,n){_classCallCheck(this,t),this.compare=e,this.keySelector=n}return _createClass(t,[{key:"call",value:function(t,e){return e.subscribe(new iC(t,this.compare,this.keySelector))}}]),t}(),iC=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r,i){var o;return _classCallCheck(this,n),(o=e.call(this,t)).keySelector=i,o.hasKey=!1,"function"==typeof r&&(o.compare=r),o}return _createClass(n,[{key:"compare",value:function(t,e){return t===e}},{key:"_next",value:function(t){var e;try{var n=this.keySelector;e=n?n(t):t}catch(i){return this.destination.error(i)}var r=!1;if(this.hasKey)try{r=(0,this.compare)(this.key,e)}catch(i){return this.destination.error(i)}else this.hasKey=!0;r||(this.key=e,this.destination.next(t))}}]),n}(v),oC=function(){function t(e,n){_classCallCheck(this,t),this.observables=e,this.project=n}return _createClass(t,[{key:"call",value:function(t,e){return e.subscribe(new sC(t,this.observables,this.project))}}]),t}(),sC=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r,i){var o;_classCallCheck(this,n),(o=e.call(this,t)).observables=r,o.project=i,o.toRespond=[];var s=r.length;o.values=new Array(s);for(var a=0;a<s;a++)o.toRespond.push(a);for(var u=0;u<s;u++){var c=r[u];o.add(z(_assertThisInitialized(o),c,c,u))}return o}return _createClass(n,[{key:"notifyNext",value:function(t,e,n,r,i){this.values[n]=e;var o=this.toRespond;if(o.length>0){var s=o.indexOf(n);-1!==s&&o.splice(s,1)}}},{key:"notifyComplete",value:function(){}},{key:"_next",value:function(t){if(0===this.toRespond.length){var e=[t].concat(_toConsumableArray(this.values));this.project?this._tryProject(e):this.destination.next(e)}}},{key:"_tryProject",value:function(t){var e;try{e=this.project.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}]),n}(j),aC=function(){function t(e){_classCallCheck(this,t),this.predicate=e}return _createClass(t,[{key:"call",value:function(t,e){return e.subscribe(new uC(t,this.predicate))}}]),t}(),uC=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r){var i;return _classCallCheck(this,n),(i=e.call(this,t)).predicate=r,i.skipping=!0,i.index=0,i}return _createClass(n,[{key:"_next",value:function(t){var e=this.destination;this.skipping&&this.tryCallPredicate(t),this.skipping||e.next(t)}},{key:"tryCallPredicate",value:function(t){try{var e=this.predicate(t,this.index++);this.skipping=Boolean(e)}catch(n){this.destination.error(n)}}}]),n}(v),cC=n("6Uf2");function lC(t){return null==t}function hC(t){return"function"==typeof t.set}function fC(t,e){return hC(e)?e:t.ref(e)}function dC(t,e){if("string"==typeof t)return e.stringCase();if(hC(t))return e.firebaseCase();if("function"==typeof t.exportVal)return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof t)}function pC(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"on",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Hh;return new b((function(i){var o;return o=t[n](e,(function(t,e){r.schedule((function(){i.next({snapshot:t,prevKey:e})})),"once"===n&&r.schedule((function(){return i.complete()}))}),(function(t){r.schedule((function(){return i.error(t)}))})),"on"===n?{unsubscribe:function(){null!=o&&t.off(e,o)}}:{unsubscribe:function(){}}})).pipe(L((function(t){var n=t.snapshot,r=t.prevKey,i=null;return n.exists()&&(i=n.key),{type:e,payload:n,prevKey:r,key:i}})),et())}function vC(t,e){for(var n=t.length,r=0;r<n;r++)if(t[r].payload.key===e)return r;return-1}function yC(t,e){var n=e.payload,r=e.prevKey,i=e.key,o=vC(t,i),s=function(t,e){if(lC(e))return 0;var n=vC(t,e);return-1===n?t.length:n+1}(t,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){var a=null;e.payload.forEach((function(e){var n={payload:e,type:"value",prevKey:a,key:e.key};return a=e.key,t=[].concat(_toConsumableArray(t),[n]),!1}))}return t;case"child_added":if(o>-1){var u=t[o-1];(u&&u.key||null)!==r&&(t=t.filter((function(t){return t.payload.key!==n.key}))).splice(s,0,e)}else{if(null==r)return[e].concat(_toConsumableArray(t));(t=t.slice()).splice(s,0,e)}return t;case"child_removed":return t.filter((function(t){return t.payload.key!==n.key}));case"child_changed":return t.map((function(t){return t.payload.key===i?e:t}));case"child_moved":if(o>-1){var c=t.splice(o,1)[0];return(t=t.slice()).splice(s,0,c),t}return t;default:return t}}function gC(t){return(lC(t)||0===t.length)&&(t=["child_added","child_removed","child_changed","child_moved"]),t}function mC(t,e,n){return function(t,e,n){return pC(t,"value","once",n).pipe(wb((function(r){var i=[lf(r)];return e.forEach((function(e){return i.push(pC(t,e,"on",n))})),Q.apply(void 0,i).pipe(eb(yC,[]))})),nC())}(t,e=gC(e),n)}function _C(t,e,n){return Q.apply(void 0,_toConsumableArray((e=gC(e)).map((function(e){return pC(t,e,"on",n)}))))}function bC(t,e){return function(n,r){return dC(n,{stringCase:function(){return t.child(n)[e](r)},firebaseCase:function(){return n[e](r)},snapshotCase:function(){return n.ref[e](r)}})}}function wC(t,e){return function(){return pC(t,"value","on",e)}}var CC,kC,EC,SC,TC,OC,IC,xC,AC=new wt("angularfire2.realtimeDatabaseURL"),PC=((kC=function(){function t(e,n,r,i,o){_classCallCheck(this,t),this.schedulers=new Cf(o),this.keepUnstableUntilFirst=kf(this.schedulers),this.database=o.runOutsideAngular((function(){var t=Af(e,o,n);return cC.a&&Object(cC.a)(mf.a),t.database(r||void 0)}))}return _createClass(t,[{key:"list",value:function(t,e){var n=fC(this.database,t),r=n;return e&&(r=e(n)),function(t,e){var n,r=e.schedulers.outsideAngular,i=e.schedulers.ngZone.run((function(){return t.ref}));return{query:t,update:bC(i,"update"),set:bC(i,"set"),push:function(t){return i.push(t)},remove:(n=i,function(t){return t?dC(t,{stringCase:function(){return n.child(t).remove()},firebaseCase:function(){return t.remove()},snapshotCase:function(){return t.ref.remove()}}):n.remove()}),snapshotChanges:function(n){return mC(t,n,r).pipe(e.keepUnstableUntilFirst)},stateChanges:function(n){return _C(t,n,r).pipe(e.keepUnstableUntilFirst)},auditTrail:function(n){return function(t,e,n){return function(t,e,n){return function(t,e){return pC(t,"value","on",e).pipe(L((function(t){var e;return t.payload.forEach((function(t){return e=t.key,!1})),{data:t,lastKeyToLoad:e}})))}(t,n).pipe(function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){var n;return"function"==typeof e[e.length-1]&&(n=e.pop()),t.lift(new oC(e,n))}}(e),L((function(t){var e=_slicedToArray(t,2),n=e[0],r=e[1],i=n.lastKeyToLoad,o=r.map((function(t){return t.key}));return{actions:r,lastKeyToLoad:i,loadedKeys:o}})),(r=function(t){return-1===t.loadedKeys.indexOf(t.lastKeyToLoad)},function(t){return t.lift(new aC(r))}),L((function(t){return t.actions})));var r}(t,_C(t,e).pipe(eb((function(t,e){return[].concat(_toConsumableArray(t),[e])}),[])),n)}(t,n,r).pipe(e.keepUnstableUntilFirst)},valueChanges:function(n){return mC(t,n,r).pipe(L((function(t){return t.map((function(t){return t.payload.val()}))})),e.keepUnstableUntilFirst)}}}(r,this)}},{key:"object",value:function(t){var e,n,r=fC(this.database,t);return n=this,{query:e=r,snapshotChanges:function(){return wC(e,n.schedulers.outsideAngular)().pipe(n.keepUnstableUntilFirst)},update:function(t){return e.ref.update(t)},set:function(t){return e.ref.set(t)},remove:function(){return e.ref.remove()},valueChanges:function(){return wC(e,n.schedulers.outsideAngular)().pipe(n.keepUnstableUntilFirst,L((function(t){return t.payload.exists()?t.payload.val():null})))}}}},{key:"createPushId",value:function(){return this.database.ref().push().key}}]),t}()).\u0275fac=function(t){return new(t||kC)(be(Tf),be(Of,8),be(AC,8),be(ic),be(_c))},kC.\u0275prov=ft({factory:function(){return new kC(be(Tf),be(Of,8),be(AC,8),be(ic),be(_c))},token:kC,providedIn:"any"}),kC),RC=((CC=function t(){_classCallCheck(this,t)}).\u0275mod=re({type:CC}),CC.\u0275inj=dt({factory:function(t){return new(t||CC)},providers:[PC]}),CC),NC=new wt("angularfire2.functions.origin"),DC=new wt("angularfire2.functions.region"),zC=((SC=function t(e,r,i,o,s){_classCallCheck(this,t);var a=new Cf(i),u=lf(void 0).pipe(pf(a.outsideAngular),wb((function(){return n.e(7).then(n.bind(null,"iTTW"))})),L((function(){return Af(e,i,r)})),L((function(t){return t.functions(o||void 0)})),Gh((function(t){s&&t.useFunctionsEmulator(s)})),Fw({bufferSize:1,refCount:!1}));return this.httpsCallable=function(t){return function(e){return U(u).pipe(pf(a.insideAngular),wb((function(n){return n.httpsCallable(t)(e)})),L((function(t){return t.data})))}},Sf(this,u,i)}).\u0275fac=function(t){return new(t||SC)(be(Tf),be(Of,8),be(_c),be(DC,8),be(NC,8))},SC.\u0275prov=ft({factory:function(){return new SC(be(Tf),be(Of,8),be(_c),be(DC,8),be(NC,8))},token:SC,providedIn:"any"}),SC),jC=((EC=function t(){_classCallCheck(this,t)}).\u0275mod=re({type:EC}),EC.\u0275inj=dt({factory:function(t){return new(t||EC)},providers:[zC]}),EC),LC={locale:"zh-cn",Pagination:{items_per_page:"\u6761/\u9875",jump_to:"\u8df3\u81f3",jump_to_confirm:"\u786e\u5b9a",page:"\u9875",prev_page:"\u4e0a\u4e00\u9875",next_page:"\u4e0b\u4e00\u9875",prev_5:"\u5411\u524d 5 \u9875",next_5:"\u5411\u540e 5 \u9875",prev_3:"\u5411\u524d 3 \u9875",next_3:"\u5411\u540e 3 \u9875"},DatePicker:{lang:{placeholder:"\u8bf7\u9009\u62e9\u65e5\u671f",yearPlaceholder:"\u8bf7\u9009\u62e9\u5e74\u4efd",quarterPlaceholder:"\u8bf7\u9009\u62e9\u5b63\u5ea6",monthPlaceholder:"\u8bf7\u9009\u62e9\u6708\u4efd",weekPlaceholder:"\u8bf7\u9009\u62e9\u5468",rangePlaceholder:["\u5f00\u59cb\u65e5\u671f","\u7ed3\u675f\u65e5\u671f"],rangeYearPlaceholder:["\u5f00\u59cb\u5e74\u4efd","\u7ed3\u675f\u5e74\u4efd"],rangeMonthPlaceholder:["\u5f00\u59cb\u6708\u4efd","\u7ed3\u675f\u6708\u4efd"],rangeWeekPlaceholder:["\u5f00\u59cb\u5468","\u7ed3\u675f\u5468"],locale:"zh_CN",today:"\u4eca\u5929",now:"\u6b64\u523b",backToToday:"\u8fd4\u56de\u4eca\u5929",ok:"\u786e\u5b9a",timeSelect:"\u9009\u62e9\u65f6\u95f4",dateSelect:"\u9009\u62e9\u65e5\u671f",weekSelect:"\u9009\u62e9\u5468",clear:"\u6e05\u9664",month:"\u6708",year:"\u5e74",previousMonth:"\u4e0a\u4e2a\u6708 (\u7ffb\u9875\u4e0a\u952e)",nextMonth:"\u4e0b\u4e2a\u6708 (\u7ffb\u9875\u4e0b\u952e)",monthSelect:"\u9009\u62e9\u6708\u4efd",yearSelect:"\u9009\u62e9\u5e74\u4efd",decadeSelect:"\u9009\u62e9\u5e74\u4ee3",yearFormat:"YYYY\u5e74",dayFormat:"D\u65e5",dateFormat:"YYYY\u5e74M\u6708D\u65e5",dateTimeFormat:"YYYY\u5e74M\u6708D\u65e5 HH\u65f6mm\u5206ss\u79d2",previousYear:"\u4e0a\u4e00\u5e74 (Control\u952e\u52a0\u5de6\u65b9\u5411\u952e)",nextYear:"\u4e0b\u4e00\u5e74 (Control\u952e\u52a0\u53f3\u65b9\u5411\u952e)",previousDecade:"\u4e0a\u4e00\u5e74\u4ee3",nextDecade:"\u4e0b\u4e00\u5e74\u4ee3",previousCentury:"\u4e0a\u4e00\u4e16\u7eaa",nextCentury:"\u4e0b\u4e00\u4e16\u7eaa"},timePickerLocale:{placeholder:"\u8bf7\u9009\u62e9\u65f6\u95f4",rangePlaceholder:["\u5f00\u59cb\u65f6\u95f4","\u7ed3\u675f\u65f6\u95f4"]}},TimePicker:{placeholder:"\u8bf7\u9009\u62e9\u65f6\u95f4",rangePlaceholder:["\u5f00\u59cb\u65f6\u95f4","\u7ed3\u675f\u65f6\u95f4"]},Calendar:{lang:{placeholder:"\u8bf7\u9009\u62e9\u65e5\u671f",yearPlaceholder:"\u8bf7\u9009\u62e9\u5e74\u4efd",quarterPlaceholder:"\u8bf7\u9009\u62e9\u5b63\u5ea6",monthPlaceholder:"\u8bf7\u9009\u62e9\u6708\u4efd",weekPlaceholder:"\u8bf7\u9009\u62e9\u5468",rangePlaceholder:["\u5f00\u59cb\u65e5\u671f","\u7ed3\u675f\u65e5\u671f"],rangeYearPlaceholder:["\u5f00\u59cb\u5e74\u4efd","\u7ed3\u675f\u5e74\u4efd"],rangeMonthPlaceholder:["\u5f00\u59cb\u6708\u4efd","\u7ed3\u675f\u6708\u4efd"],rangeWeekPlaceholder:["\u5f00\u59cb\u5468","\u7ed3\u675f\u5468"],locale:"zh_CN",today:"\u4eca\u5929",now:"\u6b64\u523b",backToToday:"\u8fd4\u56de\u4eca\u5929",ok:"\u786e\u5b9a",timeSelect:"\u9009\u62e9\u65f6\u95f4",dateSelect:"\u9009\u62e9\u65e5\u671f",weekSelect:"\u9009\u62e9\u5468",clear:"\u6e05\u9664",month:"\u6708",year:"\u5e74",previousMonth:"\u4e0a\u4e2a\u6708 (\u7ffb\u9875\u4e0a\u952e)",nextMonth:"\u4e0b\u4e2a\u6708 (\u7ffb\u9875\u4e0b\u952e)",monthSelect:"\u9009\u62e9\u6708\u4efd",yearSelect:"\u9009\u62e9\u5e74\u4efd",decadeSelect:"\u9009\u62e9\u5e74\u4ee3",yearFormat:"YYYY\u5e74",dayFormat:"D\u65e5",dateFormat:"YYYY\u5e74M\u6708D\u65e5",dateTimeFormat:"YYYY\u5e74M\u6708D\u65e5 HH\u65f6mm\u5206ss\u79d2",previousYear:"\u4e0a\u4e00\u5e74 (Control\u952e\u52a0\u5de6\u65b9\u5411\u952e)",nextYear:"\u4e0b\u4e00\u5e74 (Control\u952e\u52a0\u53f3\u65b9\u5411\u952e)",previousDecade:"\u4e0a\u4e00\u5e74\u4ee3",nextDecade:"\u4e0b\u4e00\u5e74\u4ee3",previousCentury:"\u4e0a\u4e00\u4e16\u7eaa",nextCentury:"\u4e0b\u4e00\u4e16\u7eaa"},timePickerLocale:{placeholder:"\u8bf7\u9009\u62e9\u65f6\u95f4",rangePlaceholder:["\u5f00\u59cb\u65f6\u95f4","\u7ed3\u675f\u65f6\u95f4"]}},global:{placeholder:"\u8bf7\u9009\u62e9"},Table:{filterTitle:"\u7b5b\u9009",filterConfirm:"\u786e\u5b9a",filterReset:"\u91cd\u7f6e",selectAll:"\u5168\u9009\u5f53\u9875",selectInvert:"\u53cd\u9009\u5f53\u9875",selectionAll:"\u5168\u9009\u6240\u6709",sortTitle:"\u6392\u5e8f",expand:"\u5c55\u5f00\u884c",collapse:"\u5173\u95ed\u884c",triggerDesc:"\u70b9\u51fb\u964d\u5e8f",triggerAsc:"\u70b9\u51fb\u5347\u5e8f",cancelSort:"\u53d6\u6d88\u6392\u5e8f"},Modal:{okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88",justOkText:"\u77e5\u9053\u4e86"},Popconfirm:{cancelText:"\u53d6\u6d88",okText:"\u786e\u5b9a"},Transfer:{searchPlaceholder:"\u8bf7\u8f93\u5165\u641c\u7d22\u5185\u5bb9",itemUnit:"\u9879",itemsUnit:"\u9879"},Upload:{uploading:"\u6587\u4ef6\u4e0a\u4f20\u4e2d",removeFile:"\u5220\u9664\u6587\u4ef6",uploadError:"\u4e0a\u4f20\u9519\u8bef",previewFile:"\u9884\u89c8\u6587\u4ef6",downloadFile:"\u4e0b\u8f7d\u6587\u4ef6"},Empty:{description:"\u6682\u65e0\u6570\u636e"},Icon:{icon:"\u56fe\u6807"},Text:{edit:"\u7f16\u8f91",copy:"\u590d\u5236",copied:"\u590d\u5236\u6210\u529f",expand:"\u5c55\u5f00"},PageHeader:{back:"\u8fd4\u56de"},Form:{defaultValidateMessages:{default:"\u5b57\u6bb5\u9a8c\u8bc1\u9519\u8bef${label}",required:"\u8bf7\u8f93\u5165${label}",enum:"${label}\u5fc5\u987b\u662f\u5176\u4e2d\u4e00\u4e2a[${enum}]",whitespace:"${label}\u4e0d\u80fd\u4e3a\u7a7a\u5b57\u7b26",date:{format:"${label}\u65e5\u671f\u683c\u5f0f\u65e0\u6548",parse:"${label}\u4e0d\u80fd\u8f6c\u6362\u4e3a\u65e5\u671f",invalid:"${label}\u662f\u4e00\u4e2a\u65e0\u6548\u65e5\u671f"},types:{string:"${label}\u4e0d\u662f\u4e00\u4e2a\u6709\u6548\u7684${type}",method:"${label}\u4e0d\u662f\u4e00\u4e2a\u6709\u6548\u7684${type}",array:"${label}\u4e0d\u662f\u4e00\u4e2a\u6709\u6548\u7684${type}",object:"${label}\u4e0d\u662f\u4e00\u4e2a\u6709\u6548\u7684${type}",number:"${label}\u4e0d\u662f\u4e00\u4e2a\u6709\u6548\u7684${type}",date:"${label}\u4e0d\u662f\u4e00\u4e2a\u6709\u6548\u7684${type}",boolean:"${label}\u4e0d\u662f\u4e00\u4e2a\u6709\u6548\u7684${type}",integer:"${label}\u4e0d\u662f\u4e00\u4e2a\u6709\u6548\u7684${type}",float:"${label}\u4e0d\u662f\u4e00\u4e2a\u6709\u6548\u7684${type}",regexp:"${label}\u4e0d\u662f\u4e00\u4e2a\u6709\u6548\u7684${type}",email:"${label}\u4e0d\u662f\u4e00\u4e2a\u6709\u6548\u7684${type}",url:"${label}\u4e0d\u662f\u4e00\u4e2a\u6709\u6548\u7684${type}",hex:"${label}\u4e0d\u662f\u4e00\u4e2a\u6709\u6548\u7684${type}"},string:{len:"${label}\u987b\u4e3a${len}\u4e2a\u5b57\u7b26",min:"${label}\u6700\u5c11${min}\u4e2a\u5b57\u7b26",max:"${label}\u6700\u591a${max}\u4e2a\u5b57\u7b26",range:"${label}\u987b\u5728${min}-${max}\u5b57\u7b26\u4e4b\u95f4"},number:{len:"${label}\u5fc5\u987b\u7b49\u4e8e${len}",min:"${label}\u6700\u5c0f\u503c\u4e3a${min}",max:"${label}\u6700\u5927\u503c\u4e3a${max}",range:"${label}\u987b\u5728${min}-${max}\u4e4b\u95f4"},array:{len:"\u987b\u4e3a${len}\u4e2a${label}",min:"\u6700\u5c11${min}\u4e2a${label}",max:"\u6700\u591a${max}\u4e2a${label}",range:"${label}\u6570\u91cf\u987b\u5728${min}-${max}\u4e4b\u95f4"},pattern:{mismatch:"${label}\u4e0e\u6a21\u5f0f\u4e0d\u5339\u914d${pattern}"}}}},FC=new wt("nz-i18n"),MC=new wt("nz-date-locale"),VC=((OC=function(){function t(e,n){_classCallCheck(this,t),this._change=new Ag(this._locale),this.setLocale(e||LC),this.setDateLocale(n||null)}return _createClass(t,[{key:"translate",value:function(t,e){var n=this._getObjectPath(this._locale,t);return"string"==typeof n?(e&&Object.keys(e).forEach((function(t){return n=n.replace(new RegExp("%".concat(t,"%"),"g"),e[t])})),n):t}},{key:"setLocale",value:function(t){this._locale&&this._locale.locale===t.locale||(this._locale=t,this._change.next(t))}},{key:"getLocale",value:function(){return this._locale}},{key:"getLocaleId",value:function(){return this._locale?this._locale.locale:""}},{key:"setDateLocale",value:function(t){this.dateLocale=t}},{key:"getDateLocale",value:function(){return this.dateLocale}},{key:"getLocaleData",value:function(t,e){var n=t?this._getObjectPath(this._locale,t):this._locale;return n||e||Xf('Missing translations for "'.concat(t,'" in language "').concat(this._locale.locale,'".\nYou can use "NzI18nService.setLocale" as a temporary fix.\nWelcome to submit a pull request to help us optimize the translations!\nhttps://github.com/NG-ZORRO/ng-zorro-antd/blob/master/CONTRIBUTING.md')),n||e||{}}},{key:"_getObjectPath",value:function(t,e){for(var n=t,r=e.split("."),i=r.length,o=0;n&&o<i;)n=n[r[o++]];return o===i?n:null}},{key:"localeChange",get:function(){return this._change.asObservable()}}]),t}()).\u0275fac=function(t){return new(t||OC)(be(FC,8),be(MC,8))},OC.\u0275prov=ft({factory:function(){return new OC(be(FC,8),be(MC,8))},token:OC,providedIn:"root"}),OC),UC=((TC=function t(){_classCallCheck(this,t)}).\u0275mod=re({type:TC}),TC.\u0275inj=dt({factory:function(t){return new(t||TC)}}),TC),BC={locale:"en",Pagination:{items_per_page:"/ page",jump_to:"Go to",jump_to_confirm:"confirm",page:"",prev_page:"Previous Page",next_page:"Next Page",prev_5:"Previous 5 Pages",next_5:"Next 5 Pages",prev_3:"Previous 3 Pages",next_3:"Next 3 Pages"},DatePicker:{lang:{placeholder:"Select date",yearPlaceholder:"Select year",quarterPlaceholder:"Select quarter",monthPlaceholder:"Select month",weekPlaceholder:"Select week",rangePlaceholder:["Start date","End date"],rangeYearPlaceholder:["Start year","End year"],rangeMonthPlaceholder:["Start month","End month"],rangeWeekPlaceholder:["Start week","End week"],locale:"en_US",today:"Today",now:"Now",backToToday:"Back to today",ok:"Ok",clear:"Clear",month:"Month",year:"Year",timeSelect:"select time",dateSelect:"select date",weekSelect:"Choose a week",monthSelect:"Choose a month",yearSelect:"Choose a year",decadeSelect:"Choose a decade",yearFormat:"YYYY",dateFormat:"M/D/YYYY",dayFormat:"D",dateTimeFormat:"M/D/YYYY HH:mm:ss",monthBeforeYear:!0,previousMonth:"Previous month (PageUp)",nextMonth:"Next month (PageDown)",previousYear:"Last year (Control + left)",nextYear:"Next year (Control + right)",previousDecade:"Last decade",nextDecade:"Next decade",previousCentury:"Last century",nextCentury:"Next century"},timePickerLocale:{placeholder:"Select time",rangePlaceholder:["Start time","End time"]}},TimePicker:{placeholder:"Select time",rangePlaceholder:["Start time","End time"]},Calendar:{lang:{placeholder:"Select date",yearPlaceholder:"Select year",quarterPlaceholder:"Select quarter",monthPlaceholder:"Select month",weekPlaceholder:"Select week",rangePlaceholder:["Start date","End date"],rangeYearPlaceholder:["Start year","End year"],rangeMonthPlaceholder:["Start month","End month"],rangeWeekPlaceholder:["Start week","End week"],locale:"en_US",today:"Today",now:"Now",backToToday:"Back to today",ok:"Ok",clear:"Clear",month:"Month",year:"Year",timeSelect:"select time",dateSelect:"select date",weekSelect:"Choose a week",monthSelect:"Choose a month",yearSelect:"Choose a year",decadeSelect:"Choose a decade",yearFormat:"YYYY",dateFormat:"M/D/YYYY",dayFormat:"D",dateTimeFormat:"M/D/YYYY HH:mm:ss",monthBeforeYear:!0,previousMonth:"Previous month (PageUp)",nextMonth:"Next month (PageDown)",previousYear:"Last year (Control + left)",nextYear:"Next year (Control + right)",previousDecade:"Last decade",nextDecade:"Next decade",previousCentury:"Last century",nextCentury:"Next century"},timePickerLocale:{placeholder:"Select time",rangePlaceholder:["Start time","End time"]}},global:{placeholder:"Please select"},Table:{filterTitle:"Filter menu",filterConfirm:"OK",filterReset:"Reset",selectAll:"Select current page",selectInvert:"Invert current page",selectionAll:"Select all data",sortTitle:"Sort",expand:"Expand row",collapse:"Collapse row",triggerDesc:"Click sort by descend",triggerAsc:"Click sort by ascend",cancelSort:"Click to cancel sort"},Modal:{okText:"OK",cancelText:"Cancel",justOkText:"OK"},Popconfirm:{okText:"OK",cancelText:"Cancel"},Transfer:{titles:["",""],searchPlaceholder:"Search here",itemUnit:"item",itemsUnit:"items"},Upload:{uploading:"Uploading...",removeFile:"Remove file",uploadError:"Upload error",previewFile:"Preview file",downloadFile:"Download file"},Empty:{description:"No Data"},Icon:{icon:"icon"},Text:{edit:"Edit",copy:"Copy",copied:"Copied",expand:"Expand"},PageHeader:{back:"Back"},Form:{defaultValidateMessages:{default:"Field validation error ${label}",required:"Please enter ${label}",enum:"${label} must be one of [${enum}]",whitespace:"${label} cannot be a blank character",date:{format:"${label} date format is invalid",parse:"${label} cannot be converted to a date",invalid:"${label} is an invalid date"},types:{string:"${label} is not a valid ${type}",method:"${label} is not a valid ${type}",array:"${label} is not a valid ${type}",object:"${label} is not a valid ${type}",number:"${label} is not a valid ${type}",date:"${label} is not a valid ${type}",boolean:"${label} is not a valid ${type}",integer:"${label} is not a valid ${type}",float:"${label} is not a valid ${type}",regexp:"${label} is not a valid ${type}",email:"${label} is not a valid ${type}",url:"${label} is not a valid ${type}",hex:"${label} is not a valid ${type}"},string:{len:"${label} must be ${len} characters",min:"${label} at least ${min} characters",max:"${label} up to ${max} characters",range:"${label} must be between ${min}-${max} characters"},number:{len:"${label} must be equal to ${len}",min:"${label} minimum value is ${min}",max:"${label} maximum value is ${max}",range:"${label} must be between ${min}-${max}"},array:{len:"Must be ${len} ${label}",min:"At least ${min} ${label}",max:"At most ${max} ${label}",range:"The amount of ${label} must be between ${min}-${max}"},pattern:{mismatch:"${label} does not match the pattern ${pattern}"}}}},qC=((IC=function(){function t(e,n){_classCallCheck(this,t),this.viewContainer=e,this.templateRef=n,this.embeddedViewRef=null,this.context=new HC,this.nzStringTemplateOutletContext=null,this.nzStringTemplateOutlet=null}return _createClass(t,[{key:"recreateView",value:function(){this.viewContainer.clear();var t=this.nzStringTemplateOutlet instanceof su;this.embeddedViewRef=this.viewContainer.createEmbeddedView(t?this.nzStringTemplateOutlet:this.templateRef,t?this.nzStringTemplateOutletContext:this.context)}},{key:"updateContext",value:function(){var t=this.nzStringTemplateOutlet instanceof su?this.nzStringTemplateOutletContext:this.context,e=this.embeddedViewRef.context;if(t)for(var n=0,r=Object.keys(t);n<r.length;n++){var i=r[n];e[i]=t[i]}}},{key:"ngOnChanges",value:function(t){var e=t.nzStringTemplateOutletContext,n=t.nzStringTemplateOutlet;n&&(this.context.$implicit=n.currentValue),function(){var t=!1;if(n)if(n.firstChange)t=!0;else{var r=n.currentValue instanceof su;t=n.previousValue instanceof su||r}return e&&function(t){var e=Object.keys(t.previousValue||{}),n=Object.keys(t.currentValue||{});if(e.length===n.length){var r,i=_createForOfIteratorHelper(n);try{for(i.s();!(r=i.n()).done;){var o=r.value;if(-1===e.indexOf(o))return!0}}catch(s){i.e(s)}finally{i.f()}return!1}return!0}(e)||t}()?this.recreateView():this.updateContext()}}],[{key:"ngTemplateContextGuard",value:function(t,e){return!0}}]),t}()).\u0275fac=function(t){return new(t||IC)(bs(fu),bs(su))},IC.\u0275dir=oe({type:IC,selectors:[["","nzStringTemplateOutlet",""]],inputs:{nzStringTemplateOutletContext:"nzStringTemplateOutletContext",nzStringTemplateOutlet:"nzStringTemplateOutlet"},exportAs:["nzStringTemplateOutlet"],features:[vr]}),IC),HC=function t(){_classCallCheck(this,t)},WC=((xC=function t(){_classCallCheck(this,t)}).\u0275mod=re({type:xC}),xC.\u0275inj=dt({factory:function(t){return new(t||xC)},imports:[[Kl]]}),xC);function GC(t,e){if(1&t&&(Ts(0),Ss(1,"i",8),Os()),2&t){var n=js(3);Wi(1),ws("nzType",n.icon)}}function QC(t,e){if(1&t&&(Ts(0),ca(1),Os()),2&t){var n=e.$implicit,r=js(4);Wi(1),ha(" ",n(r.nzPercent)," ")}}var KC=function(t){return{$implicit:t}};function YC(t,e){if(1&t&&ms(0,QC,2,1,"ng-container",9),2&t){var n=js(3);ws("nzStringTemplateOutlet",n.formatter)("nzStringTemplateOutletContext",Ou(2,KC,n.nzPercent))}}function $C(t,e){if(1&t&&(ks(0,"span",5),ms(1,GC,2,1,"ng-container",6),ms(2,YC,1,4,"ng-template",null,7,Xu),Es()),2&t){var n=_s(3),r=js(2);Wi(1),ws("ngIf",("exception"===r.status||"success"===r.status)&&!r.nzFormat)("ngIfElse",n)}}function XC(t,e){1&t&&ms(0,$C,4,2,"span",4),2&t&&ws("ngIf",js().nzShowInfo)}function ZC(t,e){if(1&t&&Ss(0,"div",17),2&t){var n=js(4);Ys("width",n.nzSuccessPercent,"%")("border-radius","round"===n.nzStrokeLinecap?"100px":"0")("height",n.strokeWidth,"px")}}function JC(t,e){if(1&t&&(ks(0,"div",13),ks(1,"div",14),Ss(2,"div",15),ms(3,ZC,1,6,"div",16),Es(),Es()),2&t){var n=js(3);Wi(2),Ys("width",n.nzPercent,"%")("border-radius","round"===n.nzStrokeLinecap?"100px":"0")("background",n.isGradient?null:n.nzStrokeColor)("background-image",n.isGradient?n.lineGradient:null)("height",n.strokeWidth,"px"),Wi(1),ws("ngIf",n.nzSuccessPercent||0===n.nzSuccessPercent)}}function tk(t,e){}function ek(t,e){if(1&t&&(Ts(0),ms(1,JC,4,11,"div",11),ms(2,tk,0,0,"ng-template",12),Os()),2&t){var n=js(2),r=_s(1);Wi(1),ws("ngIf",!n.isSteps),Wi(1),ws("ngTemplateOutlet",r)}}function nk(t,e){1&t&&Ss(0,"div",20),2&t&&ws("ngStyle",e.$implicit)}function rk(t,e){}function ik(t,e){if(1&t&&(ks(0,"div",18),ms(1,nk,1,1,"div",19),ms(2,rk,0,0,"ng-template",12),Es()),2&t){var n=js(2),r=_s(1);Wi(1),ws("ngForOf",n.steps),Wi(1),ws("ngTemplateOutlet",r)}}function ok(t,e){if(1&t&&(ks(0,"div"),ms(1,ek,3,2,"ng-container",2),ms(2,ik,3,2,"div",10),Es()),2&t){var n=js();Wi(1),ws("ngIf",!n.isSteps),Wi(1),ws("ngIf",n.isSteps)}}function sk(t,e){if(1&t&&(En(),Ss(0,"stop")),2&t){var n=e.$implicit;ys("offset",n.offset)("stop-color",n.color)}}function ak(t,e){if(1&t&&(En(),ks(0,"defs"),ks(1,"linearGradient",24),ms(2,sk,1,2,"stop",25),Es(),Es()),2&t){var n=js(2);Wi(1),ws("id","gradient-"+n.gradientId),Wi(1),ws("ngForOf",n.circleGradient)}}function uk(t,e){if(1&t&&(En(),Ss(0,"path",26)),2&t){var n=e.$implicit,r=js(2);ws("ngStyle",n.strokePathStyle),ys("d",r.pathString)("stroke-linecap",r.nzStrokeLinecap)("stroke",n.stroke)("stroke-width",r.nzPercent?r.strokeWidth:0)}}function ck(t,e){1&t&&En()}function lk(t,e){if(1&t&&(ks(0,"div",14),En(),ks(1,"svg",21),ms(2,ak,3,2,"defs",2),Ss(3,"path",22),ms(4,uk,1,5,"path",23),Es(),ms(5,ck,0,0,"ng-template",12),Es()),2&t){var n=js(),r=_s(1);Ys("width",n.nzWidth,"px")("height",n.nzWidth,"px")("font-size",.15*n.nzWidth+6,"px"),$s("ant-progress-circle-gradient",n.isGradient),Wi(2),ws("ngIf",n.isGradient),Wi(1),ws("ngStyle",n.trailPathStyle),ys("stroke-width",n.strokeWidth)("d",n.pathString),Wi(1),ws("ngForOf",n.progressCirclePath)("ngForTrackBy",n.trackByFn),Wi(1),ws("ngTemplateOutlet",r)}}var hk,fk,dk,pk,vk=function(t){var e=[];return Object.keys(t).forEach((function(n){var r=t[n],i=+n.replace("%","");isNaN(i)||e.push({key:i,value:r})})),e=e.sort((function(t,e){return t.key-e.key}))},yk=0,gk=new Map([["success","check"],["exception","close"]]),mk=new Map([["normal","#108ee9"],["exception","#ff5500"],["success","#87d068"]]),_k=function(t){return t+"%"},bk=((fk=function(){function t(e){_classCallCheck(this,t),this.nzConfigService=e,this.nzShowInfo=!0,this.nzWidth=132,this.nzStrokeColor=void 0,this.nzSize="default",this.nzPercent=0,this.nzStrokeWidth=void 0,this.nzGapDegree=void 0,this.nzType="line",this.nzGapPosition="top",this.nzStrokeLinecap="round",this.steps=[],this.lineGradient=null,this.isGradient=!1,this.isSteps=!1,this.gradientId=yk++,this.progressCirclePath=[],this.trailPathStyle=null,this.trackByFn=function(t){return""+t},this.cachedStatus="normal",this.inferredStatus="normal",this.destroy$=new T}return _createClass(t,[{key:"ngOnChanges",value:function(t){var e=t.nzSteps,n=t.nzGapPosition,r=t.nzStrokeLinecap,i=t.nzStrokeColor,o=t.nzGapDegree,s=t.nzType,a=t.nzStatus,u=t.nzPercent,c=t.nzSuccessPercent;a&&(this.cachedStatus=this.nzStatus||this.cachedStatus),(u||c)&&(parseInt(this.nzPercent.toString(),10)>=100?(id(this.nzSuccessPercent)&&this.nzSuccessPercent>=100||void 0===this.nzSuccessPercent)&&(this.inferredStatus="success"):this.inferredStatus=this.cachedStatus),(a||u||c)&&this.updateIcon(),i&&this.setStrokeColor(),(n||r||o||s||u||i)&&this.getCirclePaths(),e&&(this.isSteps=id(e.currentValue),this.getSteps())}},{key:"ngOnInit",value:function(){var t=this;this.nzConfigService.getConfigChangeEventForComponent("progress").pipe(Np(this.destroy$)).subscribe((function(){t.updateIcon(),t.setStrokeColor(),t.getCirclePaths()}))}},{key:"ngOnDestroy",value:function(){this.destroy$.next(),this.destroy$.complete()}},{key:"updateIcon",value:function(){var t=gk.get(this.status);this.icon=t?t+(this.isCircleStyle?"-o":"-circle-fill"):""}},{key:"getSteps",value:function(){for(var t=Math.floor(this.nzSteps*(this.nzPercent/100)),e="small"===this.nzSize?2:14,n=0;n<this.nzSteps;n++){var r=void 0;n<=t-1&&(r=this.nzStrokeColor),this.steps.push({backgroundColor:""+r,width:e+"px",height:this.strokeWidth+"px"})}}},{key:"getCirclePaths",value:function(){var t=this;if(this.isCircleStyle){var e=id(this.nzSuccessPercent)?[this.nzSuccessPercent,this.nzPercent]:[this.nzPercent],n=50-this.strokeWidth/2,r=2*Math.PI*n,i=this.nzGapDegree||("circle"===this.nzType?0:75),o=0,s=-n,a=0,u=-2*n;switch(this.nzGapPosition||("circle"===this.nzType?"top":"bottom")){case"left":o=-n,s=0,a=2*n,u=0;break;case"right":o=n,s=0,a=-2*n,u=0;break;case"bottom":s=n,u=2*n}this.pathString="M 50,50 m ".concat(o,",").concat(s,"\n       a ").concat(n,",").concat(n," 0 1 1 ").concat(a,",").concat(-u,"\n       a ").concat(n,",").concat(n," 0 1 1 ").concat(-a,",").concat(u),this.trailPathStyle={strokeDasharray:"".concat(r-i,"px ").concat(r,"px"),strokeDashoffset:"-".concat(i/2,"px"),transition:"stroke-dashoffset .3s ease 0s, stroke-dasharray .3s ease 0s, stroke .3s"},this.progressCirclePath=e.map((function(n,o){var s=2===e.length&&0===o;return{stroke:t.isGradient&&!s?"url(#gradient-".concat(t.gradientId,")"):null,strokePathStyle:{stroke:t.isGradient?null:s?mk.get("success"):t.nzStrokeColor,transition:"stroke-dashoffset .3s ease 0s, stroke-dasharray .3s ease 0s, stroke .3s, stroke-width .06s ease .3s",strokeDasharray:"".concat((n||0)/100*(r-i),"px ").concat(r,"px"),strokeDashoffset:"-".concat(i/2,"px")}}})).reverse()}}},{key:"setStrokeColor",value:function(){var t,e,n,r,i,o,s,a,u=this.nzStrokeColor,c=this.isGradient=!!u&&"string"!=typeof u;c&&!this.isCircleStyle?this.lineGradient=(e=(t=u).from,n=void 0===e?"#1890ff":e,r=t.to,i=void 0===r?"#1890ff":r,o=t.direction,s=void 0===o?"to right":o,a=Object(Df.h)(t,["from","to","direction"]),0!==Object.keys(a).length?"linear-gradient(".concat(s,", ").concat(vk(a).map((function(t){var e=t.key,n=t.value;return"".concat(n," ").concat(e,"%")})).join(", "),")"):"linear-gradient(".concat(s,", ").concat(n,", ").concat(i,")")):c&&this.isCircleStyle?this.circleGradient=vk(this.nzStrokeColor).map((function(t){return{offset:t.key+"%",color:t.value}})):(this.lineGradient=null,this.circleGradient=[])}},{key:"formatter",get:function(){return this.nzFormat||_k}},{key:"status",get:function(){return this.nzStatus||this.inferredStatus}},{key:"strokeWidth",get:function(){return this.nzStrokeWidth||("line"===this.nzType&&"small"!==this.nzSize?8:6)}},{key:"isCircleStyle",get:function(){return"circle"===this.nzType||"dashboard"===this.nzType}}]),t}()).\u0275fac=function(t){return new(t||fk)(bs(qf))},fk.\u0275cmp=Jt({type:fk,selectors:[["nz-progress"]],inputs:{nzShowInfo:"nzShowInfo",nzWidth:"nzWidth",nzStrokeColor:"nzStrokeColor",nzSize:"nzSize",nzPercent:"nzPercent",nzStrokeWidth:"nzStrokeWidth",nzGapDegree:"nzGapDegree",nzType:"nzType",nzGapPosition:"nzGapPosition",nzStrokeLinecap:"nzStrokeLinecap",nzFormat:"nzFormat",nzSuccessPercent:"nzSuccessPercent",nzStatus:"nzStatus",nzSteps:"nzSteps"},exportAs:["nzProgress"],features:[vr],decls:5,vars:13,consts:[["progressInfoTemplate",""],[3,"ngClass"],[4,"ngIf"],["class","ant-progress-inner",3,"width","height","fontSize","ant-progress-circle-gradient",4,"ngIf"],["class","ant-progress-text",4,"ngIf"],[1,"ant-progress-text"],[4,"ngIf","ngIfElse"],["formatTemplate",""],["nz-icon","",3,"nzType"],[4,"nzStringTemplateOutlet","nzStringTemplateOutletContext"],["class","ant-progress-steps-outer",4,"ngIf"],["class","ant-progress-outer",4,"ngIf"],[3,"ngTemplateOutlet"],[1,"ant-progress-outer"],[1,"ant-progress-inner"],[1,"ant-progress-bg"],["class","ant-progress-success-bg",3,"width","border-radius","height",4,"ngIf"],[1,"ant-progress-success-bg"],[1,"ant-progress-steps-outer"],["class","ant-progress-steps-item",3,"ngStyle",4,"ngFor","ngForOf"],[1,"ant-progress-steps-item",3,"ngStyle"],["viewBox","0 0 100 100",1,"ant-progress-circle"],["stroke","#f3f3f3","fill-opacity","0",1,"ant-progress-circle-trail",3,"ngStyle"],["class","ant-progress-circle-path","fill-opacity","0",3,"ngStyle",4,"ngFor","ngForOf","ngForTrackBy"],["x1","100%","y1","0%","x2","0%","y2","0%",3,"id"],[4,"ngFor","ngForOf"],["fill-opacity","0",1,"ant-progress-circle-path",3,"ngStyle"]],template:function(t,e){1&t&&(ms(0,XC,1,1,"ng-template",null,0,Xu),ks(2,"div",1),ms(3,ok,3,2,"div",2),ms(4,lk,6,15,"div",3),Es()),2&t&&(Wi(2),$s("ant-progress-line","line"==e.nzType)("ant-progress-small","small"==e.nzSize)("ant-progress-show-info",e.nzShowInfo)("ant-progress-circle",e.isCircleStyle)("ant-progress-steps",e.isSteps),ws("ngClass","ant-progress ant-progress-status-"+e.status),Wi(1),ws("ngIf","line"===e.nzType),Wi(1),ws("ngIf",e.isCircleStyle))},directives:[xl,Nl,Pp,qC,Ql,Pl,Gl],encapsulation:2,changeDetection:0}),Object(Df.c)([Hf("progress"),Object(Df.f)("design:type",Boolean)],fk.prototype,"nzShowInfo",void 0),Object(Df.c)([Hf("progress"),Object(Df.f)("design:type",Object)],fk.prototype,"nzStrokeColor",void 0),Object(Df.c)([Hf("progress"),Object(Df.f)("design:type",String)],fk.prototype,"nzSize",void 0),Object(Df.c)([ud(),Object(Df.f)("design:type",Number)],fk.prototype,"nzSuccessPercent",void 0),Object(Df.c)([ud(),Object(Df.f)("design:type",Number)],fk.prototype,"nzPercent",void 0),Object(Df.c)([Hf("progress"),ud(),Object(Df.f)("design:type",Number)],fk.prototype,"nzStrokeWidth",void 0),Object(Df.c)([Hf("progress"),ud(),Object(Df.f)("design:type",Number)],fk.prototype,"nzGapDegree",void 0),Object(Df.c)([Hf("progress"),Object(Df.f)("design:type",String)],fk.prototype,"nzGapPosition",void 0),Object(Df.c)([Hf("progress"),Object(Df.f)("design:type",String)],fk.prototype,"nzStrokeLinecap",void 0),Object(Df.c)([ud(),Object(Df.f)("design:type",Number)],fk.prototype,"nzSteps",void 0),fk),wk=((hk=function t(){_classCallCheck(this,t)}).\u0275mod=re({type:hk}),hk.\u0275inj=dt({factory:function(t){return new(t||hk)},imports:[[Kl,Rp,WC]]}),hk),Ck=function(){var t=function t(){_classCallCheck(this,t)};return t.SLOW="0.3s",t.BASE="0.2s",t.FAST="0.1s",t}(),kk=function(){var t=function t(){_classCallCheck(this,t)};return t.EASE_BASE_OUT="cubic-bezier(0.7, 0.3, 0.1, 1)",t.EASE_BASE_IN="cubic-bezier(0.9, 0, 0.3, 0.7)",t.EASE_OUT="cubic-bezier(0.215, 0.61, 0.355, 1)",t.EASE_IN="cubic-bezier(0.55, 0.055, 0.675, 0.19)",t.EASE_IN_OUT="cubic-bezier(0.645, 0.045, 0.355, 1)",t.EASE_OUT_BACK="cubic-bezier(0.12, 0.4, 0.29, 1.46)",t.EASE_IN_BACK="cubic-bezier(0.71, -0.46, 0.88, 0.6)",t.EASE_IN_OUT_BACK="cubic-bezier(0.71, -0.46, 0.29, 1.46)",t.EASE_OUT_CIRC="cubic-bezier(0.08, 0.82, 0.17, 1)",t.EASE_IN_CIRC="cubic-bezier(0.6, 0.04, 0.98, 0.34)",t.EASE_IN_OUT_CIRC="cubic-bezier(0.78, 0.14, 0.15, 0.86)",t.EASE_OUT_QUINT="cubic-bezier(0.23, 1, 0.32, 1)",t.EASE_IN_QUINT="cubic-bezier(0.755, 0.05, 0.855, 0.06)",t.EASE_IN_OUT_QUINT="cubic-bezier(0.86, 0, 0.07, 1)",t}(),Ek=Hp("zoomBigMotion",[Yp("void => active",[Qp({opacity:0,transform:"scale(0.8)"}),Wp("".concat(Ck.BASE," ").concat(kk.EASE_OUT_CIRC),Qp({opacity:1,transform:"scale(1)"}))]),Yp("active => void",[Qp({opacity:1,transform:"scale(1)"}),Wp("".concat(Ck.BASE," ").concat(kk.EASE_IN_OUT_CIRC),Qp({opacity:0,transform:"scale(0.8)"}))])]),Sk=((pk=function(){function t(e,n,r){_classCallCheck(this,t),this.element=e,this.renderer=n,this.animationType=r,this.nzNoAnimation=!1}return _createClass(t,[{key:"ngOnChanges",value:function(){this.updateClass()}},{key:"ngAfterViewInit",value:function(){this.updateClass()}},{key:"updateClass",value:function(){var t=Kf(this.element);t&&(this.nzNoAnimation||"NoopAnimations"===this.animationType?this.renderer.addClass(t,"nz-animate-disabled"):this.renderer.removeClass(t,"nz-animate-disabled"))}}]),t}()).\u0275fac=function(t){return new(t||pk)(bs(Na),bs(za),bs(vg,8))},pk.\u0275dir=oe({type:pk,selectors:[["","nzNoAnimation",""]],inputs:{nzNoAnimation:"nzNoAnimation"},exportAs:["nzNoAnimation"],features:[vr]}),Object(Df.c)([ad(),Object(Df.f)("design:type",Boolean)],pk.prototype,"nzNoAnimation",void 0),pk),Tk=((dk=function t(){_classCallCheck(this,t)}).\u0275mod=re({type:dk}),dk.\u0275inj=dt({factory:function(t){return new(t||dk)},imports:[[Kl]]}),dk);function Ok(t,e,n,i){return r(n)&&(i=n,n=void 0),i?Ok(t,e,n).pipe(L((function(t){return u(t)?i.apply(void 0,_toConsumableArray(t)):i(t)}))):new b((function(r){!function t(e,n,r,i,o){var s;if(function(t){return t&&"function"==typeof t.addEventListener&&"function"==typeof t.removeEventListener}(e)){var a=e;e.addEventListener(n,r,o),s=function(){return a.removeEventListener(n,r,o)}}else if(function(t){return t&&"function"==typeof t.on&&"function"==typeof t.off}(e)){var u=e;e.on(n,r),s=function(){return u.off(n,r)}}else if(function(t){return t&&"function"==typeof t.addListener&&"function"==typeof t.removeListener}(e)){var c=e;e.addListener(n,r),s=function(){return c.removeListener(n,r)}}else{if(!e||!e.length)throw new TypeError("Invalid event target");for(var l=0,h=e.length;l<h;l++)t(e[l],n,r,i,o)}i.add(s)}(t,e,(function(t){r.next(arguments.length>1?Array.prototype.slice.call(arguments):t)}),r,n)}))}var Ik=function(){function t(e){_classCallCheck(this,t),this.durationSelector=e}return _createClass(t,[{key:"call",value:function(t,e){return e.subscribe(new xk(t,this.durationSelector))}}]),t}(),xk=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r){var i;return _classCallCheck(this,n),(i=e.call(this,t)).durationSelector=r,i.hasValue=!1,i}return _createClass(n,[{key:"_next",value:function(t){if(this.value=t,this.hasValue=!0,!this.throttled){var e;try{e=(0,this.durationSelector)(t)}catch(r){return this.destination.error(r)}var n=z(this,e);!n||n.closed?this.clearThrottle():this.add(this.throttled=n)}}},{key:"clearThrottle",value:function(){var t=this.value,e=this.hasValue,n=this.throttled;n&&(this.remove(n),this.throttled=null,n.unsubscribe()),e&&(this.value=null,this.hasValue=!1,this.destination.next(t))}},{key:"notifyNext",value:function(t,e,n,r){this.clearThrottle()}},{key:"notifyComplete",value:function(){this.clearThrottle()}}]),n}(j);function Ak(t){var e=t.index,n=t.period,r=t.subscriber;if(r.next(e),!r.closed){if(-1===n)return r.complete();t.index=e+1,this.schedule(t,n)}}function Pk(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Hh;return e=function(){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,r=-1;return rf(e)?r=Number(e)<1?1:Number(e):I(e)&&(n=e),I(n)||(n=Hh),new b((function(e){var i=rf(t)?t:+t-n.now();return n.schedule(Ak,i,{index:0,period:r,subscriber:e})}))}(t,n)},function(t){return t.lift(new Ik(e))}}var Rk,Nk,Dk,zk,jk,Lk,Fk=new wt("cdk-dir-doc",{providedIn:"root",factory:function(){return we(Zc)}}),Mk=((Lk=function(){function t(e){if(_classCallCheck(this,t),this.value="ltr",this.change=new Pu,e){var n=e.documentElement?e.documentElement.dir:null,r=(e.body?e.body.dir:null)||n;this.value="ltr"===r||"rtl"===r?r:"ltr"}}return _createClass(t,[{key:"ngOnDestroy",value:function(){this.change.complete()}}]),t}()).\u0275fac=function(t){return new(t||Lk)(be(Fk,8))},Lk.\u0275prov=ft({factory:function(){return new Lk(be(Fk,8))},token:Lk,providedIn:"root"}),Lk),Vk=((jk=function t(){_classCallCheck(this,t)}).\u0275mod=re({type:jk}),jk.\u0275inj=dt({factory:function(t){return new(t||jk)}}),jk),Uk=((zk=function(){function t(e,n,r){_classCallCheck(this,t),this._ngZone=e,this._platform=n,this._scrolled=new T,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=r}return _createClass(t,[{key:"register",value:function(t){var e=this;this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe((function(){return e._scrolled.next(t)})))}},{key:"deregister",value:function(t){var e=this.scrollContainers.get(t);e&&(e.unsubscribe(),this.scrollContainers.delete(t))}},{key:"scrolled",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20;return this._platform.isBrowser?new b((function(n){t._globalSubscription||t._addGlobalListener();var r=e>0?t._scrolled.pipe(Pk(e)).subscribe(n):t._scrolled.subscribe(n);return t._scrolledCount++,function(){r.unsubscribe(),t._scrolledCount--,t._scrolledCount||t._removeGlobalListener()}})):lf()}},{key:"ngOnDestroy",value:function(){var t=this;this._removeGlobalListener(),this.scrollContainers.forEach((function(e,n){return t.deregister(n)})),this._scrolled.complete()}},{key:"ancestorScrolled",value:function(t,e){var n=this.getAncestorScrollContainers(t);return this.scrolled(e).pipe(zf((function(t){return!t||n.indexOf(t)>-1})))}},{key:"getAncestorScrollContainers",value:function(t){var e=this,n=[];return this.scrollContainers.forEach((function(r,i){e._scrollableContainsElement(i,t)&&n.push(i)})),n}},{key:"_getDocument",value:function(){return this._document||document}},{key:"_getWindow",value:function(){return this._getDocument().defaultView||window}},{key:"_scrollableContainsElement",value:function(t,e){var n=e.nativeElement,r=t.getElementRef().nativeElement;do{if(n==r)return!0}while(n=n.parentElement);return!1}},{key:"_addGlobalListener",value:function(){var t=this;this._globalSubscription=this._ngZone.runOutsideAngular((function(){return Ok(t._getWindow().document,"scroll").subscribe((function(){return t._scrolled.next()}))}))}},{key:"_removeGlobalListener",value:function(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}]),t}()).\u0275fac=function(t){return new(t||zk)(be(_c),be(pd),be(Zc,8))},zk.\u0275prov=ft({factory:function(){return new zk(be(_c),be(pd),be(Zc,8))},token:zk,providedIn:"root"}),zk),Bk=((Dk=function(){function t(e,n,r){var i=this;_classCallCheck(this,t),this._platform=e,this._document=r,n.runOutsideAngular((function(){var t=i._getWindow();i._change=e.isBrowser?Q(Ok(t,"resize"),Ok(t,"orientationchange")):lf(),i._invalidateCache=i.change().subscribe((function(){return i._updateViewportSize()}))}))}return _createClass(t,[{key:"ngOnDestroy",value:function(){this._invalidateCache.unsubscribe()}},{key:"getViewportSize",value:function(){this._viewportSize||this._updateViewportSize();var t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}},{key:"getViewportRect",value:function(){var t=this.getViewportScrollPosition(),e=this.getViewportSize(),n=e.width,r=e.height;return{top:t.top,left:t.left,bottom:t.top+r,right:t.left+n,height:r,width:n}}},{key:"getViewportScrollPosition",value:function(){if(!this._platform.isBrowser)return{top:0,left:0};var t=this._getDocument(),e=this._getWindow(),n=t.documentElement,r=n.getBoundingClientRect();return{top:-r.top||t.body.scrollTop||e.scrollY||n.scrollTop||0,left:-r.left||t.body.scrollLeft||e.scrollX||n.scrollLeft||0}}},{key:"change",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20;return t>0?this._change.pipe(Pk(t)):this._change}},{key:"_getDocument",value:function(){return this._document||document}},{key:"_getWindow",value:function(){return this._getDocument().defaultView||window}},{key:"_updateViewportSize",value:function(){var t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}}]),t}()).\u0275fac=function(t){return new(t||Dk)(be(pd),be(_c),be(Zc,8))},Dk.\u0275prov=ft({factory:function(){return new Dk(be(pd),be(_c),be(Zc,8))},token:Dk,providedIn:"root"}),Dk),qk=((Nk=function t(){_classCallCheck(this,t)}).\u0275mod=re({type:Nk}),Nk.\u0275inj=dt({factory:function(t){return new(t||Nk)}}),Nk),Hk=((Rk=function t(){_classCallCheck(this,t)}).\u0275mod=re({type:Rk}),Rk.\u0275inj=dt({factory:function(t){return new(t||Rk)},imports:[[Vk,vd,qk],Vk,qk]}),Rk);function Wk(){throw Error("Host already has a portal attached")}var Gk,Qk,Kk=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"attach",value:function(t){return null==t&&function(){throw Error("Attempting to attach a portal to a null PortalOutlet")}(),t.hasAttached()&&Wk(),this._attachedHost=t,t.attach(this)}},{key:"detach",value:function(){var t=this._attachedHost;null==t?function(){throw Error("Attempting to detach a portal that is not attached to a host")}():(this._attachedHost=null,t.detach())}},{key:"setAttachedHost",value:function(t){this._attachedHost=t}},{key:"isAttached",get:function(){return null!=this._attachedHost}}]),t}(),Yk=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r,i,o){var s;return _classCallCheck(this,n),(s=e.call(this)).component=t,s.viewContainerRef=r,s.injector=i,s.componentFactoryResolver=o,s}return n}(Kk),$k=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r,i){var o;return _classCallCheck(this,n),(o=e.call(this)).templateRef=t,o.viewContainerRef=r,o.context=i,o}return _createClass(n,[{key:"attach",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.context;return this.context=e,_get(_getPrototypeOf(n.prototype),"attach",this).call(this,t)}},{key:"detach",value:function(){return this.context=void 0,_get(_getPrototypeOf(n.prototype),"detach",this).call(this)}},{key:"origin",get:function(){return this.templateRef.elementRef}}]),n}(Kk),Xk=function(t){_inherits(n,t);var e=_createSuper(n);function n(t){var r;return _classCallCheck(this,n),(r=e.call(this)).element=t instanceof Na?t.nativeElement:t,r}return n}(Kk),Zk=function(){function t(){_classCallCheck(this,t),this._isDisposed=!1,this.attachDomPortal=null}return _createClass(t,[{key:"hasAttached",value:function(){return!!this._attachedPortal}},{key:"attach",value:function(t){return t||function(){throw Error("Must provide a portal to attach")}(),this.hasAttached()&&Wk(),this._isDisposed&&function(){throw Error("This PortalOutlet has already been disposed")}(),t instanceof Yk?(this._attachedPortal=t,this.attachComponentPortal(t)):t instanceof $k?(this._attachedPortal=t,this.attachTemplatePortal(t)):this.attachDomPortal&&t instanceof Xk?(this._attachedPortal=t,this.attachDomPortal(t)):void function(){throw Error("Attempting to attach an unknown Portal type. BasePortalOutlet accepts either a ComponentPortal or a TemplatePortal.")}()}},{key:"detach",value:function(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}},{key:"dispose",value:function(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}},{key:"setDisposeFn",value:function(t){this._disposeFn=t}},{key:"_invokeDisposeFn",value:function(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}]),t}(),Jk=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r,i,o,s){var a,u;return _classCallCheck(this,n),(u=e.call(this)).outletElement=t,u._componentFactoryResolver=r,u._appRef=i,u._defaultInjector=o,u.attachDomPortal=function(t){if(!u._document)throw Error("Cannot attach DOM portal without _document constructor parameter");var e=t.element;if(!e.parentNode)throw Error("DOM portal content must be attached to a parent node.");var r=u._document.createComment("dom-portal");e.parentNode.insertBefore(r,e),u.outletElement.appendChild(e),_get((a=_assertThisInitialized(u),_getPrototypeOf(n.prototype)),"setDisposeFn",a).call(a,(function(){r.parentNode&&r.parentNode.replaceChild(e,r)}))},u._document=s,u}return _createClass(n,[{key:"attachComponentPortal",value:function(t){var e,n=this,r=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component);return t.viewContainerRef?(e=t.viewContainerRef.createComponent(r,t.viewContainerRef.length,t.injector||t.viewContainerRef.injector),this.setDisposeFn((function(){return e.destroy()}))):(e=r.create(t.injector||this._defaultInjector),this._appRef.attachView(e.hostView),this.setDisposeFn((function(){n._appRef.detachView(e.hostView),e.destroy()}))),this.outletElement.appendChild(this._getComponentRootNode(e)),e}},{key:"attachTemplatePortal",value:function(t){var e=this,n=t.viewContainerRef,r=n.createEmbeddedView(t.templateRef,t.context);return r.detectChanges(),r.rootNodes.forEach((function(t){return e.outletElement.appendChild(t)})),this.setDisposeFn((function(){var t=n.indexOf(r);-1!==t&&n.remove(t)})),r}},{key:"dispose",value:function(){_get(_getPrototypeOf(n.prototype),"dispose",this).call(this),null!=this.outletElement.parentNode&&this.outletElement.parentNode.removeChild(this.outletElement)}},{key:"_getComponentRootNode",value:function(t){return t.hostView.rootNodes[0]}}]),n}(Zk),tE=((Qk=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r,i){var o,s;return _classCallCheck(this,n),(s=e.call(this))._componentFactoryResolver=t,s._viewContainerRef=r,s._isInitialized=!1,s.attached=new Pu,s.attachDomPortal=function(t){if(!s._document)throw Error("Cannot attach DOM portal without _document constructor parameter");var e=t.element;if(!e.parentNode)throw Error("DOM portal content must be attached to a parent node.");var r=s._document.createComment("dom-portal");t.setAttachedHost(_assertThisInitialized(s)),e.parentNode.insertBefore(r,e),s._getRootNode().appendChild(e),_get((o=_assertThisInitialized(s),_getPrototypeOf(n.prototype)),"setDisposeFn",o).call(o,(function(){r.parentNode&&r.parentNode.replaceChild(e,r)}))},s._document=i,s}return _createClass(n,[{key:"ngOnInit",value:function(){this._isInitialized=!0}},{key:"ngOnDestroy",value:function(){_get(_getPrototypeOf(n.prototype),"dispose",this).call(this),this._attachedPortal=null,this._attachedRef=null}},{key:"attachComponentPortal",value:function(t){t.setAttachedHost(this);var e=null!=t.viewContainerRef?t.viewContainerRef:this._viewContainerRef,r=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component),i=e.createComponent(r,e.length,t.injector||e.injector);return e!==this._viewContainerRef&&this._getRootNode().appendChild(i.hostView.rootNodes[0]),_get(_getPrototypeOf(n.prototype),"setDisposeFn",this).call(this,(function(){return i.destroy()})),this._attachedPortal=t,this._attachedRef=i,this.attached.emit(i),i}},{key:"attachTemplatePortal",value:function(t){var e=this;t.setAttachedHost(this);var r=this._viewContainerRef.createEmbeddedView(t.templateRef,t.context);return _get(_getPrototypeOf(n.prototype),"setDisposeFn",this).call(this,(function(){return e._viewContainerRef.clear()})),this._attachedPortal=t,this._attachedRef=r,this.attached.emit(r),r}},{key:"_getRootNode",value:function(){var t=this._viewContainerRef.element.nativeElement;return t.nodeType===t.ELEMENT_NODE?t:t.parentNode}},{key:"portal",get:function(){return this._attachedPortal},set:function(t){(!this.hasAttached()||t||this._isInitialized)&&(this.hasAttached()&&_get(_getPrototypeOf(n.prototype),"detach",this).call(this),t&&_get(_getPrototypeOf(n.prototype),"attach",this).call(this,t),this._attachedPortal=t)}},{key:"attachedRef",get:function(){return this._attachedRef}}]),n}(Zk)).\u0275fac=function(t){return new(t||Qk)(bs(xa),bs(fu),bs(Zc))},Qk.\u0275dir=oe({type:Qk,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[is]}),Qk),eE=((Gk=function t(){_classCallCheck(this,t)}).\u0275mod=re({type:Gk}),Gk.\u0275inj=dt({factory:function(t){return new(t||Gk)}}),Gk),nE=function(){function t(e,n){_classCallCheck(this,t),this._parentInjector=e,this._customTokens=n}return _createClass(t,[{key:"get",value:function(t,e){var n=this._customTokens.get(t);return void 0!==n?n:this._parentInjector.get(t,e)}}]),t}(),rE=function(){function t(e,n){_classCallCheck(this,t),this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=n}return _createClass(t,[{key:"attach",value:function(){}},{key:"enable",value:function(){if(this._canBeEnabled()){var t=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=t.style.left||"",this._previousHTMLStyles.top=t.style.top||"",t.style.left=Qf(-this._previousScrollPosition.left),t.style.top=Qf(-this._previousScrollPosition.top),t.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}},{key:"disable",value:function(){if(this._isEnabled){var t=this._document.documentElement,e=t.style,n=this._document.body.style,r=e.scrollBehavior||"",i=n.scrollBehavior||"";this._isEnabled=!1,e.left=this._previousHTMLStyles.left,e.top=this._previousHTMLStyles.top,t.classList.remove("cdk-global-scrollblock"),e.scrollBehavior=n.scrollBehavior="auto",window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),e.scrollBehavior=r,n.scrollBehavior=i}}},{key:"_canBeEnabled",value:function(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;var t=this._document.body,e=this._viewportRuler.getViewportSize();return t.scrollHeight>e.height||t.scrollWidth>e.width}}]),t}();function iE(){return Error("Scroll strategy has already been attached.")}var oE=function(){function t(e,n,r,i){var o=this;_classCallCheck(this,t),this._scrollDispatcher=e,this._ngZone=n,this._viewportRuler=r,this._config=i,this._scrollSubscription=null,this._detach=function(){o.disable(),o._overlayRef.hasAttached()&&o._ngZone.run((function(){return o._overlayRef.detach()}))}}return _createClass(t,[{key:"attach",value:function(t){if(this._overlayRef)throw iE();this._overlayRef=t}},{key:"enable",value:function(){var t=this;if(!this._scrollSubscription){var e=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe((function(){var e=t._viewportRuler.getViewportScrollPosition().top;Math.abs(e-t._initialScrollPosition)>t._config.threshold?t._detach():t._overlayRef.updatePosition()}))):this._scrollSubscription=e.subscribe(this._detach)}}},{key:"disable",value:function(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}},{key:"detach",value:function(){this.disable(),this._overlayRef=null}}]),t}(),sE=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"enable",value:function(){}},{key:"disable",value:function(){}},{key:"attach",value:function(){}}]),t}();function aE(t,e){return e.some((function(e){return t.bottom<e.top||t.top>e.bottom||t.right<e.left||t.left>e.right}))}function uE(t,e){return e.some((function(e){return t.top<e.top||t.bottom>e.bottom||t.left<e.left||t.right>e.right}))}var cE,lE=function(){function t(e,n,r,i){_classCallCheck(this,t),this._scrollDispatcher=e,this._viewportRuler=n,this._ngZone=r,this._config=i,this._scrollSubscription=null}return _createClass(t,[{key:"attach",value:function(t){if(this._overlayRef)throw iE();this._overlayRef=t}},{key:"enable",value:function(){var t=this;this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe((function(){if(t._overlayRef.updatePosition(),t._config&&t._config.autoClose){var e=t._overlayRef.overlayElement.getBoundingClientRect(),n=t._viewportRuler.getViewportSize(),r=n.width,i=n.height;aE(e,[{width:r,height:i,bottom:i,right:r,top:0,left:0}])&&(t.disable(),t._ngZone.run((function(){return t._overlayRef.detach()})))}})))}},{key:"disable",value:function(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}},{key:"detach",value:function(){this.disable(),this._overlayRef=null}}]),t}(),hE=((cE=function t(e,n,r,i){var o=this;_classCallCheck(this,t),this._scrollDispatcher=e,this._viewportRuler=n,this._ngZone=r,this.noop=function(){return new sE},this.close=function(t){return new oE(o._scrollDispatcher,o._ngZone,o._viewportRuler,t)},this.block=function(){return new rE(o._viewportRuler,o._document)},this.reposition=function(t){return new lE(o._scrollDispatcher,o._viewportRuler,o._ngZone,t)},this._document=i}).\u0275fac=function(t){return new(t||cE)(be(Uk),be(Bk),be(_c),be(Zc))},cE.\u0275prov=ft({factory:function(){return new cE(be(Uk),be(Bk),be(_c),be(Zc))},token:cE,providedIn:"root"}),cE),fE=function t(e){if(_classCallCheck(this,t),this.scrollStrategy=new sE,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e)for(var n=0,r=Object.keys(e);n<r.length;n++){var i=r[n];void 0!==e[i]&&(this[i]=e[i])}},dE=function t(e,n,r,i,o){_classCallCheck(this,t),this.offsetX=r,this.offsetY=i,this.panelClass=o,this.originX=e.originX,this.originY=e.originY,this.overlayX=n.overlayX,this.overlayY=n.overlayY},pE=function t(e,n){_classCallCheck(this,t),this.connectionPair=e,this.scrollableViewProperties=n};function vE(t,e){if("top"!==e&&"bottom"!==e&&"center"!==e)throw Error("ConnectedPosition: Invalid ".concat(t,' "').concat(e,'". Expected "top", "bottom" or "center".'))}function yE(t,e){if("start"!==e&&"end"!==e&&"center"!==e)throw Error("ConnectedPosition: Invalid ".concat(t,' "').concat(e,'". Expected "start", "end" or "center".'))}var gE,mE,_E=((gE=function(){function t(e){var n=this;_classCallCheck(this,t),this._attachedOverlays=[],this._keydownListener=function(t){for(var e=n._attachedOverlays,r=e.length-1;r>-1;r--)if(e[r]._keydownEvents.observers.length>0){e[r]._keydownEvents.next(t);break}},this._document=e}return _createClass(t,[{key:"ngOnDestroy",value:function(){this._detach()}},{key:"add",value:function(t){this.remove(t),this._isAttached||(this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0),this._attachedOverlays.push(t)}},{key:"remove",value:function(t){var e=this._attachedOverlays.indexOf(t);e>-1&&this._attachedOverlays.splice(e,1),0===this._attachedOverlays.length&&this._detach()}},{key:"_detach",value:function(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}]),t}()).\u0275fac=function(t){return new(t||gE)(be(Zc))},gE.\u0275prov=ft({factory:function(){return new gE(be(Zc))},token:gE,providedIn:"root"}),gE),bE=!("undefined"==typeof window||!window||!window.__karma__&&!window.jasmine),wE=((mE=function(){function t(e,n){_classCallCheck(this,t),this._platform=n,this._document=e}return _createClass(t,[{key:"ngOnDestroy",value:function(){var t=this._containerElement;t&&t.parentNode&&t.parentNode.removeChild(t)}},{key:"getContainerElement",value:function(){return this._containerElement||this._createContainer(),this._containerElement}},{key:"_createContainer",value:function(){var t=this._platform?this._platform.isBrowser:"undefined"!=typeof window;if(t||bE)for(var e=this._document.querySelectorAll('.cdk-overlay-container[platform="server"], .cdk-overlay-container[platform="test"]'),n=0;n<e.length;n++)e[n].parentNode.removeChild(e[n]);var r=this._document.createElement("div");r.classList.add("cdk-overlay-container"),bE?r.setAttribute("platform","test"):t||r.setAttribute("platform","server"),this._document.body.appendChild(r),this._containerElement=r}}]),t}()).\u0275fac=function(t){return new(t||mE)(be(Zc),be(pd))},mE.\u0275prov=ft({factory:function(){return new mE(be(Zc),be(pd))},token:mE,providedIn:"root"}),mE),CE=function(){function t(e,n,r,i,o,s,a,u){var c=this;_classCallCheck(this,t),this._portalOutlet=e,this._host=n,this._pane=r,this._config=i,this._ngZone=o,this._keyboardDispatcher=s,this._document=a,this._location=u,this._backdropElement=null,this._backdropClick=new T,this._attachments=new T,this._detachments=new T,this._locationChanges=f.EMPTY,this._backdropClickHandler=function(t){return c._backdropClick.next(t)},this._keydownEvents=new T,i.scrollStrategy&&(this._scrollStrategy=i.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=i.positionStrategy}return _createClass(t,[{key:"attach",value:function(t){var e=this,n=this._portalOutlet.attach(t);return!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host),this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.asObservable().pipe(td(1)).subscribe((function(){e.hasAttached()&&e.updatePosition()})),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&this._location&&(this._locationChanges=this._location.subscribe((function(){return e.dispose()}))),n}},{key:"detach",value:function(){if(this.hasAttached()){this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();var t=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),t}}},{key:"dispose",value:function(){var t=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this.detachBackdrop(),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._host&&this._host.parentNode&&(this._host.parentNode.removeChild(this._host),this._host=null),this._previousHostParent=this._pane=null,t&&this._detachments.next(),this._detachments.complete()}},{key:"hasAttached",value:function(){return this._portalOutlet.hasAttached()}},{key:"backdropClick",value:function(){return this._backdropClick.asObservable()}},{key:"attachments",value:function(){return this._attachments.asObservable()}},{key:"detachments",value:function(){return this._detachments.asObservable()}},{key:"keydownEvents",value:function(){return this._keydownEvents.asObservable()}},{key:"getConfig",value:function(){return this._config}},{key:"updatePosition",value:function(){this._positionStrategy&&this._positionStrategy.apply()}},{key:"updatePositionStrategy",value:function(t){t!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=t,this.hasAttached()&&(t.attach(this),this.updatePosition()))}},{key:"updateSize",value:function(t){this._config=Object.assign(Object.assign({},this._config),t),this._updateElementSize()}},{key:"setDirection",value:function(t){this._config=Object.assign(Object.assign({},this._config),{direction:t}),this._updateElementDirection()}},{key:"addPanelClass",value:function(t){this._pane&&this._toggleClasses(this._pane,t,!0)}},{key:"removePanelClass",value:function(t){this._pane&&this._toggleClasses(this._pane,t,!1)}},{key:"getDirection",value:function(){var t=this._config.direction;return t?"string"==typeof t?t:t.value:"ltr"}},{key:"updateScrollStrategy",value:function(t){t!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=t,this.hasAttached()&&(t.attach(this),t.enable()))}},{key:"_updateElementDirection",value:function(){this._host.setAttribute("dir",this.getDirection())}},{key:"_updateElementSize",value:function(){if(this._pane){var t=this._pane.style;t.width=Qf(this._config.width),t.height=Qf(this._config.height),t.minWidth=Qf(this._config.minWidth),t.minHeight=Qf(this._config.minHeight),t.maxWidth=Qf(this._config.maxWidth),t.maxHeight=Qf(this._config.maxHeight)}}},{key:"_togglePointerEvents",value:function(t){this._pane.style.pointerEvents=t?"auto":"none"}},{key:"_attachBackdrop",value:function(){var t=this;this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular((function(){requestAnimationFrame((function(){t._backdropElement&&t._backdropElement.classList.add("cdk-overlay-backdrop-showing")}))})):this._backdropElement.classList.add("cdk-overlay-backdrop-showing")}},{key:"_updateStackingOrder",value:function(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}},{key:"detachBackdrop",value:function(){var t,e=this,n=this._backdropElement;if(n){var r=function r(){n&&(n.removeEventListener("click",e._backdropClickHandler),n.removeEventListener("transitionend",r),n.parentNode&&n.parentNode.removeChild(n)),e._backdropElement==n&&(e._backdropElement=null),e._config.backdropClass&&e._toggleClasses(n,e._config.backdropClass,!1),clearTimeout(t)};n.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular((function(){n.addEventListener("transitionend",r)})),n.style.pointerEvents="none",t=this._ngZone.runOutsideAngular((function(){return setTimeout(r,500)}))}}},{key:"_toggleClasses",value:function(t,e,n){var r=t.classList;Gf(e).forEach((function(t){t&&(n?r.add(t):r.remove(t))}))}},{key:"_detachContentWhenStable",value:function(){var t=this;this._ngZone.runOutsideAngular((function(){var e=t._ngZone.onStable.asObservable().pipe(Np(Q(t._attachments,t._detachments))).subscribe((function(){t._pane&&t._host&&0!==t._pane.children.length||(t._pane&&t._config.panelClass&&t._toggleClasses(t._pane,t._config.panelClass,!1),t._host&&t._host.parentElement&&(t._previousHostParent=t._host.parentElement,t._previousHostParent.removeChild(t._host)),e.unsubscribe())}))}))}},{key:"_disposeScrollStrategy",value:function(){var t=this._scrollStrategy;t&&(t.disable(),t.detach&&t.detach())}},{key:"overlayElement",get:function(){return this._pane}},{key:"backdropElement",get:function(){return this._backdropElement}},{key:"hostElement",get:function(){return this._host}}]),t}(),kE=/([A-Za-z%]+)$/,EE=function(){function t(e,n,r,i,o){_classCallCheck(this,t),this._viewportRuler=n,this._document=r,this._platform=i,this._overlayContainer=o,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new T,this._resizeSubscription=f.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges.asObservable(),this.setOrigin(e)}return _createClass(t,[{key:"attach",value:function(t){var e=this;if(this._overlayRef&&t!==this._overlayRef)throw Error("This position strategy is already attached to an overlay");this._validatePositions(),t.hostElement.classList.add("cdk-overlay-connected-position-bounding-box"),this._overlayRef=t,this._boundingBox=t.hostElement,this._pane=t.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe((function(){e._isInitialRender=!0,e.apply()}))}},{key:"apply",value:function(){if(!this._isDisposed&&this._platform.isBrowser)if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)this.reapplyLastPosition();else{this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect();var t,e,n=this._originRect,r=this._overlayRect,i=this._viewportRect,o=[],s=_createForOfIteratorHelper(this._preferredPositions);try{for(s.s();!(e=s.n()).done;){var a=e.value,u=this._getOriginPoint(n,a),c=this._getOverlayPoint(u,r,a),l=this._getOverlayFit(c,r,i,a);if(l.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(a,u);this._canFitWithFlexibleDimensions(l,c,i)?o.push({position:a,origin:u,overlayRect:r,boundingBoxRect:this._calculateBoundingBoxRect(u,a)}):(!t||t.overlayFit.visibleArea<l.visibleArea)&&(t={overlayFit:l,overlayPoint:c,originPoint:u,position:a,overlayRect:r})}}catch(g){s.e(g)}finally{s.f()}if(o.length){var h,f=null,d=-1,p=_createForOfIteratorHelper(o);try{for(p.s();!(h=p.n()).done;){var v=h.value,y=v.boundingBoxRect.width*v.boundingBoxRect.height*(v.position.weight||1);y>d&&(d=y,f=v)}}catch(g){p.e(g)}finally{p.f()}return this._isPushed=!1,void this._applyPosition(f.position,f.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(t.position,t.originPoint);this._applyPosition(t.position,t.originPoint)}}},{key:"detach",value:function(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}},{key:"dispose",value:function(){this._isDisposed||(this._boundingBox&&SE(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove("cdk-overlay-connected-position-bounding-box"),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}},{key:"reapplyLastPosition",value:function(){if(!this._isDisposed&&(!this._platform||this._platform.isBrowser)){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect();var t=this._lastPosition||this._preferredPositions[0],e=this._getOriginPoint(this._originRect,t);this._applyPosition(t,e)}}},{key:"withScrollableContainers",value:function(t){return this._scrollables=t,this}},{key:"withPositions",value:function(t){return this._preferredPositions=t,-1===t.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}},{key:"withViewportMargin",value:function(t){return this._viewportMargin=t,this}},{key:"withFlexibleDimensions",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._hasFlexibleDimensions=t,this}},{key:"withGrowAfterOpen",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._growAfterOpen=t,this}},{key:"withPush",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._canPush=t,this}},{key:"withLockedPosition",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._positionLocked=t,this}},{key:"setOrigin",value:function(t){return this._origin=t,this}},{key:"withDefaultOffsetX",value:function(t){return this._offsetX=t,this}},{key:"withDefaultOffsetY",value:function(t){return this._offsetY=t,this}},{key:"withTransformOriginOn",value:function(t){return this._transformOriginSelector=t,this}},{key:"_getOriginPoint",value:function(t,e){var n;if("center"==e.originX)n=t.left+t.width/2;else{var r=this._isRtl()?t.right:t.left,i=this._isRtl()?t.left:t.right;n="start"==e.originX?r:i}return{x:n,y:"center"==e.originY?t.top+t.height/2:"top"==e.originY?t.top:t.bottom}}},{key:"_getOverlayPoint",value:function(t,e,n){var r,i;return r="center"==n.overlayX?-e.width/2:"start"===n.overlayX?this._isRtl()?-e.width:0:this._isRtl()?0:-e.width,i="center"==n.overlayY?-e.height/2:"top"==n.overlayY?0:-e.height,{x:t.x+r,y:t.y+i}}},{key:"_getOverlayFit",value:function(t,e,n,r){var i=t.x,o=t.y,s=this._getOffset(r,"x"),a=this._getOffset(r,"y");s&&(i+=s),a&&(o+=a);var u=0-o,c=o+e.height-n.height,l=this._subtractOverflows(e.width,0-i,i+e.width-n.width),h=this._subtractOverflows(e.height,u,c),f=l*h;return{visibleArea:f,isCompletelyWithinViewport:e.width*e.height===f,fitsInViewportVertically:h===e.height,fitsInViewportHorizontally:l==e.width}}},{key:"_canFitWithFlexibleDimensions",value:function(t,e,n){if(this._hasFlexibleDimensions){var r=n.bottom-e.y,i=n.right-e.x,o=TE(this._overlayRef.getConfig().minHeight),s=TE(this._overlayRef.getConfig().minWidth),a=t.fitsInViewportHorizontally||null!=s&&s<=i;return(t.fitsInViewportVertically||null!=o&&o<=r)&&a}return!1}},{key:"_pushOverlayOnScreen",value:function(t,e,n){if(this._previousPushAmount&&this._positionLocked)return{x:t.x+this._previousPushAmount.x,y:t.y+this._previousPushAmount.y};var r,i,o=this._viewportRect,s=Math.max(t.x+e.width-o.right,0),a=Math.max(t.y+e.height-o.bottom,0),u=Math.max(o.top-n.top-t.y,0),c=Math.max(o.left-n.left-t.x,0);return r=e.width<=o.width?c||-s:t.x<this._viewportMargin?o.left-n.left-t.x:0,i=e.height<=o.height?u||-a:t.y<this._viewportMargin?o.top-n.top-t.y:0,this._previousPushAmount={x:r,y:i},{x:t.x+r,y:t.y+i}}},{key:"_applyPosition",value:function(t,e){if(this._setTransformOrigin(t),this._setOverlayElementStyles(e,t),this._setBoundingBoxStyles(e,t),t.panelClass&&this._addPanelClasses(t.panelClass),this._lastPosition=t,this._positionChanges.observers.length){var n=this._getScrollVisibility(),r=new pE(t,n);this._positionChanges.next(r)}this._isInitialRender=!1}},{key:"_setTransformOrigin",value:function(t){if(this._transformOriginSelector){var e,n=this._boundingBox.querySelectorAll(this._transformOriginSelector),r=t.overlayY;e="center"===t.overlayX?"center":this._isRtl()?"start"===t.overlayX?"right":"left":"start"===t.overlayX?"left":"right";for(var i=0;i<n.length;i++)n[i].style.transformOrigin="".concat(e," ").concat(r)}}},{key:"_calculateBoundingBoxRect",value:function(t,e){var n,r,i,o,s,a,u=this._viewportRect,c=this._isRtl();if("top"===e.overlayY)r=t.y,n=u.height-r+this._viewportMargin;else if("bottom"===e.overlayY)i=u.height-t.y+2*this._viewportMargin,n=u.height-i+this._viewportMargin;else{var l=Math.min(u.bottom-t.y+u.top,t.y),h=this._lastBoundingBoxSize.height;n=2*l,r=t.y-l,n>h&&!this._isInitialRender&&!this._growAfterOpen&&(r=t.y-h/2)}if("end"===e.overlayX&&!c||"start"===e.overlayX&&c)a=u.width-t.x+this._viewportMargin,o=t.x-this._viewportMargin;else if("start"===e.overlayX&&!c||"end"===e.overlayX&&c)s=t.x,o=u.right-t.x;else{var f=Math.min(u.right-t.x+u.left,t.x),d=this._lastBoundingBoxSize.width;o=2*f,s=t.x-f,o>d&&!this._isInitialRender&&!this._growAfterOpen&&(s=t.x-d/2)}return{top:r,left:s,bottom:i,right:a,width:o,height:n}}},{key:"_setBoundingBoxStyles",value:function(t,e){var n=this._calculateBoundingBoxRect(t,e);this._isInitialRender||this._growAfterOpen||(n.height=Math.min(n.height,this._lastBoundingBoxSize.height),n.width=Math.min(n.width,this._lastBoundingBoxSize.width));var r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{var i=this._overlayRef.getConfig().maxHeight,o=this._overlayRef.getConfig().maxWidth;r.height=Qf(n.height),r.top=Qf(n.top),r.bottom=Qf(n.bottom),r.width=Qf(n.width),r.left=Qf(n.left),r.right=Qf(n.right),r.alignItems="center"===e.overlayX?"center":"end"===e.overlayX?"flex-end":"flex-start",r.justifyContent="center"===e.overlayY?"center":"bottom"===e.overlayY?"flex-end":"flex-start",i&&(r.maxHeight=Qf(i)),o&&(r.maxWidth=Qf(o))}this._lastBoundingBoxSize=n,SE(this._boundingBox.style,r)}},{key:"_resetBoundingBoxStyles",value:function(){SE(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}},{key:"_resetOverlayElementStyles",value:function(){SE(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}},{key:"_setOverlayElementStyles",value:function(t,e){var n={},r=this._hasExactPosition(),i=this._hasFlexibleDimensions,o=this._overlayRef.getConfig();if(r){var s=this._viewportRuler.getViewportScrollPosition();SE(n,this._getExactOverlayY(e,t,s)),SE(n,this._getExactOverlayX(e,t,s))}else n.position="static";var a="",u=this._getOffset(e,"x"),c=this._getOffset(e,"y");u&&(a+="translateX(".concat(u,"px) ")),c&&(a+="translateY(".concat(c,"px)")),n.transform=a.trim(),o.maxHeight&&(r?n.maxHeight=Qf(o.maxHeight):i&&(n.maxHeight="")),o.maxWidth&&(r?n.maxWidth=Qf(o.maxWidth):i&&(n.maxWidth="")),SE(this._pane.style,n)}},{key:"_getExactOverlayY",value:function(t,e,n){var r={top:"",bottom:""},i=this._getOverlayPoint(e,this._overlayRect,t);this._isPushed&&(i=this._pushOverlayOnScreen(i,this._overlayRect,n));var o=this._overlayContainer.getContainerElement().getBoundingClientRect().top;return i.y-=o,"bottom"===t.overlayY?r.bottom=this._document.documentElement.clientHeight-(i.y+this._overlayRect.height)+"px":r.top=Qf(i.y),r}},{key:"_getExactOverlayX",value:function(t,e,n){var r={left:"",right:""},i=this._getOverlayPoint(e,this._overlayRect,t);return this._isPushed&&(i=this._pushOverlayOnScreen(i,this._overlayRect,n)),"right"===(this._isRtl()?"end"===t.overlayX?"left":"right":"end"===t.overlayX?"right":"left")?r.right=this._document.documentElement.clientWidth-(i.x+this._overlayRect.width)+"px":r.left=Qf(i.x),r}},{key:"_getScrollVisibility",value:function(){var t=this._getOriginRect(),e=this._pane.getBoundingClientRect(),n=this._scrollables.map((function(t){return t.getElementRef().nativeElement.getBoundingClientRect()}));return{isOriginClipped:uE(t,n),isOriginOutsideView:aE(t,n),isOverlayClipped:uE(e,n),isOverlayOutsideView:aE(e,n)}}},{key:"_subtractOverflows",value:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return n.reduce((function(t,e){return t-Math.max(e,0)}),t)}},{key:"_getNarrowedViewportRect",value:function(){var t=this._document.documentElement.clientWidth,e=this._document.documentElement.clientHeight,n=this._viewportRuler.getViewportScrollPosition();return{top:n.top+this._viewportMargin,left:n.left+this._viewportMargin,right:n.left+t-this._viewportMargin,bottom:n.top+e-this._viewportMargin,width:t-2*this._viewportMargin,height:e-2*this._viewportMargin}}},{key:"_isRtl",value:function(){return"rtl"===this._overlayRef.getDirection()}},{key:"_hasExactPosition",value:function(){return!this._hasFlexibleDimensions||this._isPushed}},{key:"_getOffset",value:function(t,e){return"x"===e?null==t.offsetX?this._offsetX:t.offsetX:null==t.offsetY?this._offsetY:t.offsetY}},{key:"_validatePositions",value:function(){if(!this._preferredPositions.length)throw Error("FlexibleConnectedPositionStrategy: At least one position is required.");this._preferredPositions.forEach((function(t){yE("originX",t.originX),vE("originY",t.originY),yE("overlayX",t.overlayX),vE("overlayY",t.overlayY)}))}},{key:"_addPanelClasses",value:function(t){var e=this;this._pane&&Gf(t).forEach((function(t){""!==t&&-1===e._appliedPanelClasses.indexOf(t)&&(e._appliedPanelClasses.push(t),e._pane.classList.add(t))}))}},{key:"_clearPanelClasses",value:function(){var t=this;this._pane&&(this._appliedPanelClasses.forEach((function(e){t._pane.classList.remove(e)})),this._appliedPanelClasses=[])}},{key:"_getOriginRect",value:function(){var t=this._origin;if(t instanceof Na)return t.nativeElement.getBoundingClientRect();if(t instanceof Element)return t.getBoundingClientRect();var e=t.width||0,n=t.height||0;return{top:t.y,bottom:t.y+n,left:t.x,right:t.x+e,height:n,width:e}}},{key:"positions",get:function(){return this._preferredPositions}}]),t}();function SE(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function TE(t){if("number"!=typeof t&&null!=t){var e=_slicedToArray(t.split(kE),2),n=e[0],r=e[1];return r&&"px"!==r?null:parseFloat(n)}return t||null}var OE,IE,xE,AE,PE,RE,NE=function(){function t(e,n,r,i,o,s,a){_classCallCheck(this,t),this._preferredPositions=[],this._positionStrategy=new EE(r,i,o,s,a).withFlexibleDimensions(!1).withPush(!1).withViewportMargin(0),this.withFallbackPosition(e,n)}return _createClass(t,[{key:"attach",value:function(t){this._overlayRef=t,this._positionStrategy.attach(t),this._direction&&(t.setDirection(this._direction),this._direction=null)}},{key:"dispose",value:function(){this._positionStrategy.dispose()}},{key:"detach",value:function(){this._positionStrategy.detach()}},{key:"apply",value:function(){this._positionStrategy.apply()}},{key:"recalculateLastPosition",value:function(){this._positionStrategy.reapplyLastPosition()}},{key:"withScrollableContainers",value:function(t){this._positionStrategy.withScrollableContainers(t)}},{key:"withFallbackPosition",value:function(t,e,n,r){var i=new dE(t,e,n,r);return this._preferredPositions.push(i),this._positionStrategy.withPositions(this._preferredPositions),this}},{key:"withDirection",value:function(t){return this._overlayRef?this._overlayRef.setDirection(t):this._direction=t,this}},{key:"withOffsetX",value:function(t){return this._positionStrategy.withDefaultOffsetX(t),this}},{key:"withOffsetY",value:function(t){return this._positionStrategy.withDefaultOffsetY(t),this}},{key:"withLockedPosition",value:function(t){return this._positionStrategy.withLockedPosition(t),this}},{key:"withPositions",value:function(t){return this._preferredPositions=t.slice(),this._positionStrategy.withPositions(this._preferredPositions),this}},{key:"setOrigin",value:function(t){return this._positionStrategy.setOrigin(t),this}},{key:"_isRtl",get:function(){return"rtl"===this._overlayRef.getDirection()}},{key:"onPositionChange",get:function(){return this._positionStrategy.positionChanges}},{key:"positions",get:function(){return this._preferredPositions}}]),t}(),DE=function(){function t(){_classCallCheck(this,t),this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._leftOffset="",this._rightOffset="",this._alignItems="",this._justifyContent="",this._width="",this._height=""}return _createClass(t,[{key:"attach",value:function(t){var e=t.getConfig();this._overlayRef=t,this._width&&!e.width&&t.updateSize({width:this._width}),this._height&&!e.height&&t.updateSize({height:this._height}),t.hostElement.classList.add("cdk-global-overlay-wrapper"),this._isDisposed=!1}},{key:"top",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this._bottomOffset="",this._topOffset=t,this._alignItems="flex-start",this}},{key:"left",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this._rightOffset="",this._leftOffset=t,this._justifyContent="flex-start",this}},{key:"bottom",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this._topOffset="",this._bottomOffset=t,this._alignItems="flex-end",this}},{key:"right",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this._leftOffset="",this._rightOffset=t,this._justifyContent="flex-end",this}},{key:"width",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this._overlayRef?this._overlayRef.updateSize({width:t}):this._width=t,this}},{key:"height",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this._overlayRef?this._overlayRef.updateSize({height:t}):this._height=t,this}},{key:"centerHorizontally",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.left(t),this._justifyContent="center",this}},{key:"centerVertically",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.top(t),this._alignItems="center",this}},{key:"apply",value:function(){if(this._overlayRef&&this._overlayRef.hasAttached()){var t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement.style,n=this._overlayRef.getConfig(),r=n.width,i=n.height,o=n.maxWidth,s=n.maxHeight,a=!("100%"!==r&&"100vw"!==r||o&&"100%"!==o&&"100vw"!==o),u=!("100%"!==i&&"100vh"!==i||s&&"100%"!==s&&"100vh"!==s);t.position=this._cssPosition,t.marginLeft=a?"0":this._leftOffset,t.marginTop=u?"0":this._topOffset,t.marginBottom=this._bottomOffset,t.marginRight=this._rightOffset,a?e.justifyContent="flex-start":"center"===this._justifyContent?e.justifyContent="center":"rtl"===this._overlayRef.getConfig().direction?"flex-start"===this._justifyContent?e.justifyContent="flex-end":"flex-end"===this._justifyContent&&(e.justifyContent="flex-start"):e.justifyContent=this._justifyContent,e.alignItems=u?"flex-start":this._alignItems}}},{key:"dispose",value:function(){if(!this._isDisposed&&this._overlayRef){var t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement,n=e.style;e.classList.remove("cdk-global-overlay-wrapper"),n.justifyContent=n.alignItems=t.marginTop=t.marginBottom=t.marginLeft=t.marginRight=t.position="",this._overlayRef=null,this._isDisposed=!0}}}]),t}(),zE=((IE=function(){function t(e,n,r,i){_classCallCheck(this,t),this._viewportRuler=e,this._document=n,this._platform=r,this._overlayContainer=i}return _createClass(t,[{key:"global",value:function(){return new DE}},{key:"connectedTo",value:function(t,e,n){return new NE(e,n,t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}},{key:"flexibleConnectedTo",value:function(t){return new EE(t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}]),t}()).\u0275fac=function(t){return new(t||IE)(be(Bk),be(Zc),be(pd),be(wE))},IE.\u0275prov=ft({factory:function(){return new IE(be(Bk),be(Zc),be(pd),be(wE))},token:IE,providedIn:"root"}),IE),jE=0,LE=((OE=function(){function t(e,n,r,i,o,s,a,u,c,l){_classCallCheck(this,t),this.scrollStrategies=e,this._overlayContainer=n,this._componentFactoryResolver=r,this._positionBuilder=i,this._keyboardDispatcher=o,this._injector=s,this._ngZone=a,this._document=u,this._directionality=c,this._location=l}return _createClass(t,[{key:"create",value:function(t){var e=this._createHostElement(),n=this._createPaneElement(e),r=this._createPortalOutlet(n),i=new fE(t);return i.direction=i.direction||this._directionality.value,new CE(r,e,n,i,this._ngZone,this._keyboardDispatcher,this._document,this._location)}},{key:"position",value:function(){return this._positionBuilder}},{key:"_createPaneElement",value:function(t){var e=this._document.createElement("div");return e.id="cdk-overlay-"+jE++,e.classList.add("cdk-overlay-pane"),t.appendChild(e),e}},{key:"_createHostElement",value:function(){var t=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(t),t}},{key:"_createPortalOutlet",value:function(t){return this._appRef||(this._appRef=this._injector.get(Fc)),new Jk(t,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}]),t}()).\u0275fac=function(t){return new(t||OE)(be(hE),be(wE),be(xa),be(zE),be(_E),be(ns),be(_c),be(Zc),be(Mk),be(ml,8))},OE.\u0275prov=ft({token:OE,factory:OE.\u0275fac}),OE),FE=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],ME=new wt("cdk-connected-overlay-scroll-strategy"),VE=((xE=function(){function t(e,n,r,i,o){_classCallCheck(this,t),this._overlay=e,this._dir=o,this._hasBackdrop=!1,this._lockPosition=!1,this._growAfterOpen=!1,this._flexibleDimensions=!1,this._push=!1,this._backdropSubscription=f.EMPTY,this.viewportMargin=0,this.open=!1,this.backdropClick=new Pu,this.positionChange=new Pu,this.attach=new Pu,this.detach=new Pu,this.overlayKeydown=new Pu,this._templatePortal=new $k(n,r),this._scrollStrategyFactory=i,this.scrollStrategy=this._scrollStrategyFactory()}return _createClass(t,[{key:"ngOnDestroy",value:function(){this._overlayRef&&this._overlayRef.dispose(),this._backdropSubscription.unsubscribe()}},{key:"ngOnChanges",value:function(t){this._position&&(this._updatePositionStrategy(this._position),this._overlayRef.updateSize({width:this.width,minWidth:this.minWidth,height:this.height,minHeight:this.minHeight}),t.origin&&this.open&&this._position.apply()),t.open&&(this.open?this._attachOverlay():this._detachOverlay())}},{key:"_createOverlay",value:function(){var t=this;this.positions&&this.positions.length||(this.positions=FE),this._overlayRef=this._overlay.create(this._buildConfig()),this._overlayRef.keydownEvents().subscribe((function(e){t.overlayKeydown.next(e),27!==e.keyCode||f_(e)||(e.preventDefault(),t._detachOverlay())}))}},{key:"_buildConfig",value:function(){var t=this._position=this.positionStrategy||this._createPositionStrategy(),e=new fE({direction:this._dir,positionStrategy:t,scrollStrategy:this.scrollStrategy,hasBackdrop:this.hasBackdrop});return(this.width||0===this.width)&&(e.width=this.width),(this.height||0===this.height)&&(e.height=this.height),(this.minWidth||0===this.minWidth)&&(e.minWidth=this.minWidth),(this.minHeight||0===this.minHeight)&&(e.minHeight=this.minHeight),this.backdropClass&&(e.backdropClass=this.backdropClass),this.panelClass&&(e.panelClass=this.panelClass),e}},{key:"_updatePositionStrategy",value:function(t){var e=this,n=this.positions.map((function(t){return{originX:t.originX,originY:t.originY,overlayX:t.overlayX,overlayY:t.overlayY,offsetX:t.offsetX||e.offsetX,offsetY:t.offsetY||e.offsetY,panelClass:t.panelClass||void 0}}));return t.setOrigin(this.origin.elementRef).withPositions(n).withFlexibleDimensions(this.flexibleDimensions).withPush(this.push).withGrowAfterOpen(this.growAfterOpen).withViewportMargin(this.viewportMargin).withLockedPosition(this.lockPosition).withTransformOriginOn(this.transformOriginSelector)}},{key:"_createPositionStrategy",value:function(){var t=this,e=this._overlay.position().flexibleConnectedTo(this.origin.elementRef);return this._updatePositionStrategy(e),e.positionChanges.subscribe((function(e){return t.positionChange.emit(e)})),e}},{key:"_attachOverlay",value:function(){var t=this;this._overlayRef?this._overlayRef.getConfig().hasBackdrop=this.hasBackdrop:this._createOverlay(),this._overlayRef.hasAttached()||(this._overlayRef.attach(this._templatePortal),this.attach.emit()),this.hasBackdrop?this._backdropSubscription=this._overlayRef.backdropClick().subscribe((function(e){t.backdropClick.emit(e)})):this._backdropSubscription.unsubscribe()}},{key:"_detachOverlay",value:function(){this._overlayRef&&(this._overlayRef.detach(),this.detach.emit()),this._backdropSubscription.unsubscribe()}},{key:"offsetX",get:function(){return this._offsetX},set:function(t){this._offsetX=t,this._position&&this._updatePositionStrategy(this._position)}},{key:"offsetY",get:function(){return this._offsetY},set:function(t){this._offsetY=t,this._position&&this._updatePositionStrategy(this._position)}},{key:"hasBackdrop",get:function(){return this._hasBackdrop},set:function(t){this._hasBackdrop=Wf(t)}},{key:"lockPosition",get:function(){return this._lockPosition},set:function(t){this._lockPosition=Wf(t)}},{key:"flexibleDimensions",get:function(){return this._flexibleDimensions},set:function(t){this._flexibleDimensions=Wf(t)}},{key:"growAfterOpen",get:function(){return this._growAfterOpen},set:function(t){this._growAfterOpen=Wf(t)}},{key:"push",get:function(){return this._push},set:function(t){this._push=Wf(t)}},{key:"overlayRef",get:function(){return this._overlayRef}},{key:"dir",get:function(){return this._dir?this._dir.value:"ltr"}}]),t}()).\u0275fac=function(t){return new(t||xE)(bs(LE),bs(su),bs(fu),bs(ME),bs(Mk,8))},xE.\u0275dir=oe({type:xE,selectors:[["","cdk-connected-overlay",""],["","connected-overlay",""],["","cdkConnectedOverlay",""]],inputs:{viewportMargin:["cdkConnectedOverlayViewportMargin","viewportMargin"],open:["cdkConnectedOverlayOpen","open"],scrollStrategy:["cdkConnectedOverlayScrollStrategy","scrollStrategy"],offsetX:["cdkConnectedOverlayOffsetX","offsetX"],offsetY:["cdkConnectedOverlayOffsetY","offsetY"],hasBackdrop:["cdkConnectedOverlayHasBackdrop","hasBackdrop"],lockPosition:["cdkConnectedOverlayLockPosition","lockPosition"],flexibleDimensions:["cdkConnectedOverlayFlexibleDimensions","flexibleDimensions"],growAfterOpen:["cdkConnectedOverlayGrowAfterOpen","growAfterOpen"],push:["cdkConnectedOverlayPush","push"],positions:["cdkConnectedOverlayPositions","positions"],origin:["cdkConnectedOverlayOrigin","origin"],positionStrategy:["cdkConnectedOverlayPositionStrategy","positionStrategy"],width:["cdkConnectedOverlayWidth","width"],height:["cdkConnectedOverlayHeight","height"],minWidth:["cdkConnectedOverlayMinWidth","minWidth"],minHeight:["cdkConnectedOverlayMinHeight","minHeight"],backdropClass:["cdkConnectedOverlayBackdropClass","backdropClass"],panelClass:["cdkConnectedOverlayPanelClass","panelClass"],transformOriginSelector:["cdkConnectedOverlayTransformOriginOn","transformOriginSelector"]},outputs:{backdropClick:"backdropClick",positionChange:"positionChange",attach:"attach",detach:"detach",overlayKeydown:"overlayKeydown"},exportAs:["cdkConnectedOverlay"],features:[vr]}),xE),UE={provide:ME,deps:[LE],useFactory:function(t){return function(){return t.scrollStrategies.reposition()}}},BE=((RE=function t(){_classCallCheck(this,t)}).\u0275mod=re({type:RE}),RE.\u0275inj=dt({factory:function(t){return new(t||RE)},providers:[LE,UE],imports:[[Vk,eE,Hk],Hk]}),RE),qE=((PE=function t(e){_classCallCheck(this,t),this.cdkConnectedOverlay=e,this.cdkConnectedOverlay.backdropClass="nz-overlay-transparent-backdrop"}).\u0275fac=function(t){return new(t||PE)(bs(VE))},PE.\u0275dir=oe({type:PE,selectors:[["","cdkConnectedOverlay","","nzConnectedOverlay",""]],exportAs:["nzConnectedOverlay"]}),PE),HE=((AE=function t(){_classCallCheck(this,t)}).\u0275mod=re({type:AE}),AE.\u0275inj=dt({factory:function(t){return new(t||AE)}}),AE),WE={top:new dE({originX:"center",originY:"top"},{overlayX:"center",overlayY:"bottom"}),topCenter:new dE({originX:"center",originY:"top"},{overlayX:"center",overlayY:"bottom"}),topLeft:new dE({originX:"start",originY:"top"},{overlayX:"start",overlayY:"bottom"}),topRight:new dE({originX:"end",originY:"top"},{overlayX:"end",overlayY:"bottom"}),right:new dE({originX:"end",originY:"center"},{overlayX:"start",overlayY:"center"}),rightTop:new dE({originX:"end",originY:"top"},{overlayX:"start",overlayY:"top"}),rightBottom:new dE({originX:"end",originY:"bottom"},{overlayX:"start",overlayY:"bottom"}),bottom:new dE({originX:"center",originY:"bottom"},{overlayX:"center",overlayY:"top"}),bottomCenter:new dE({originX:"center",originY:"bottom"},{overlayX:"center",overlayY:"top"}),bottomLeft:new dE({originX:"start",originY:"bottom"},{overlayX:"start",overlayY:"top"}),bottomRight:new dE({originX:"end",originY:"bottom"},{overlayX:"end",overlayY:"top"}),left:new dE({originX:"start",originY:"center"},{overlayX:"end",overlayY:"center"}),leftTop:new dE({originX:"start",originY:"top"},{overlayX:"end",overlayY:"top"}),leftBottom:new dE({originX:"start",originY:"bottom"},{overlayX:"end",overlayY:"bottom"})},GE=[WE.top,WE.right,WE.bottom,WE.left],QE=["overlay"];function KE(t,e){if(1&t&&(Ts(0),ca(1),Os()),2&t){var n=js(2);Wi(1),la(n.nzTitle)}}function YE(t,e){if(1&t&&(ks(0,"div",2),ks(1,"div",3),Ss(2,"div",4),ks(3,"div",5),ms(4,KE,2,1,"ng-container",6),Es(),Es(),Es()),2&t){var n=js();ws("ngClass",n._classMap)("ngStyle",n.nzOverlayStyle)("@.disabled",null==n.noAnimation?null:n.noAnimation.nzNoAnimation)("nzNoAnimation",null==n.noAnimation?null:n.noAnimation.nzNoAnimation)("@zoomBigMotion","active"),Wi(4),ws("nzStringTemplateOutlet",n.nzTitle)}}var $E,XE,ZE,JE,tS,eS=((tS=function(){function t(e,n,r,i,o){_classCallCheck(this,t),this.elementRef=e,this.hostView=n,this.resolver=r,this.renderer=i,this.noAnimation=o,this.specificVisibleChange=new Pu,this.nzTrigger="hover",this.nzPlacement="top",this.visible=!1,this.needProxyProperties=["noAnimation"],this.nzVisibleChange=new Pu,this.destroy$=new T,this.triggerDisposables=[]}return _createClass(t,[{key:"warnDeprecationIfNeeded",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"nz-tooltip",i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(t){var o="'".concat(e,"' of '").concat(r,"' is deprecated and will be removed in 10.0.0.\n      Please use '").concat(n,"' instead.");i&&(o+=" The same with 'nz-popover' and 'nz-popconfirm'."),Zf(o)}}},{key:"warnDeprecationByChanges",value:function(t){this.warnDeprecationIfNeeded(t.nzTitle&&!this.specificTitle&&!this.directiveNameTitle,"nzTitle","nzTooltipTitle"),this.warnDeprecationIfNeeded(t.nzContent&&!this.specificContent,"nzContent","nzPopoverContent","nz-popover",!1),this.warnDeprecationIfNeeded(t.nzPlacement&&!this.specificPlacement,"nzPlacement","nzTooltipPlacement"),this.warnDeprecationIfNeeded(t.nzTrigger&&!this.specificTrigger,"nzTrigger","nzTooltipTrigger"),this.warnDeprecationIfNeeded(t.nzVisible&&!this.specificVisible,"nzVisible","nzTooltipVisible"),this.warnDeprecationIfNeeded(t.nzMouseEnterDelay&&!this.specificMouseEnterDelay,"nzMouseEnterDelay","nzTooltipMouseEnterDelay"),this.warnDeprecationIfNeeded(t.nzMouseLeaveDelay&&!this.specificMouseLeaveDelay,"nzMouseLeaveDelay","nzTooltipMouseLeaveDelay"),this.warnDeprecationIfNeeded(t.nzOverlayClassName&&!this.specificOverlayClassName,"nzOverlayClassName","nzTooltipClassName"),this.warnDeprecationIfNeeded(t.nzOverlayStyle&&!this.specificOverlayStyle,"nzOverlayStyle","nzTooltipOverlayStyle")}},{key:"ngOnChanges",value:function(t){var e=t.nzTrigger,n=t.specificTrigger||e;n&&!n.isFirstChange()&&this.registerTriggers(),this.component&&this.updateChangedProperties(t),this.warnDeprecationByChanges(t)}},{key:"ngAfterViewInit",value:function(){this.createComponent(),this.registerTriggers()}},{key:"ngOnDestroy",value:function(){this.destroy$.next(),this.destroy$.complete(),this.clearTogglingTimer(),this.removeTriggerListeners()}},{key:"show",value:function(){var t;null===(t=this.component)||void 0===t||t.show()}},{key:"hide",value:function(){var t;null===(t=this.component)||void 0===t||t.hide()}},{key:"updatePosition",value:function(){this.component&&this.component.updatePosition()}},{key:"createComponent",value:function(){var t=this,e=this.hostView.createComponent(this.componentFactory);this.component=e.instance,this.renderer.removeChild(this.renderer.parentNode(this.elementRef.nativeElement),e.location.nativeElement),this.component.setOverlayOrigin({elementRef:this.specificOrigin||this.elementRef}),this.updateChangedProperties(this.needProxyProperties),this.component.nzVisibleChange.pipe(nC(),Np(this.destroy$)).subscribe((function(e){t.visible=e,t.specificVisibleChange.emit(e),t.nzVisibleChange.emit(e)}))}},{key:"registerTriggers",value:function(){var t,e=this,n=this.elementRef.nativeElement,r=this.trigger;this.removeTriggerListeners(),"hover"===r?(this.triggerDisposables.push(this.renderer.listen(n,"mouseenter",(function(){e.delayEnterLeave(!0,!0,e.mouseEnterDelay)}))),this.triggerDisposables.push(this.renderer.listen(n,"mouseleave",(function(){var n;e.delayEnterLeave(!0,!1,e.mouseLeaveDelay),(null===(n=e.component)||void 0===n?void 0:n.overlay.overlayRef)&&!t&&(t=e.component.overlay.overlayRef.overlayElement,e.triggerDisposables.push(e.renderer.listen(t,"mouseenter",(function(){e.delayEnterLeave(!1,!0)}))),e.triggerDisposables.push(e.renderer.listen(t,"mouseleave",(function(){e.delayEnterLeave(!1,!1)}))))})))):"focus"===r?(this.triggerDisposables.push(this.renderer.listen(n,"focus",(function(){return e.show()}))),this.triggerDisposables.push(this.renderer.listen(n,"blur",(function(){return e.hide()})))):"click"===r&&this.triggerDisposables.push(this.renderer.listen(n,"click",(function(t){t.preventDefault(),e.show()})))}},{key:"updatePropertiesByChanges",value:function(t){var e=this,n={specificTitle:["nzTitle",this.title],directiveNameTitle:["nzTitle",this.title],nzTitle:["nzTitle",this.title],specificContent:["nzContent",this.content],directiveNameContent:["nzContent",this.content],nzContent:["nzContent",this.content],specificTrigger:["nzTrigger",this.trigger],nzTrigger:["nzTrigger",this.trigger],specificPlacement:["nzPlacement",this.placement],nzPlacement:["nzPlacement",this.placement],specificVisible:["nzVisible",this.isVisible],nzVisible:["nzVisible",this.isVisible],specificMouseEnterDelay:["nzMouseEnterDelay",this.mouseEnterDelay],nzMouseEnterDelay:["nzMouseEnterDelay",this.mouseEnterDelay],specificMouseLeaveDelay:["nzMouseLeaveDelay",this.mouseLeaveDelay],nzMouseLeaveDelay:["nzMouseLeaveDelay",this.mouseLeaveDelay],specificOverlayClassName:["nzOverlayClassName",this.overlayClassName],nzOverlayClassName:["nzOverlayClassName",this.overlayClassName],specificOverlayStyle:["nzOverlayStyle",this.overlayStyle],nzOverlayStyle:["nzOverlayStyle",this.overlayStyle]};Object.keys(t).forEach((function(t){if(n[t]){var r=_slicedToArray(n[t],2),i=r[0],o=r[1];e.updateComponentValue(i,o)}}))}},{key:"updatePropertiesByArray",value:function(){this.updateComponentValue("nzTitle",this.title),this.updateComponentValue("nzContent",this.content),this.updateComponentValue("nzPlacement",this.placement),this.updateComponentValue("nzTrigger",this.trigger),this.updateComponentValue("nzVisible",this.isVisible),this.updateComponentValue("nzMouseEnterDelay",this.mouseEnterDelay),this.updateComponentValue("nzMouseLeaveDelay",this.mouseLeaveDelay),this.updateComponentValue("nzOverlayClassName",this.overlayClassName),this.updateComponentValue("nzOverlayStyle",this.overlayStyle)}},{key:"updateChangedProperties",value:function(t){var e,n=this,r=Array.isArray(t);(r?t:Object.keys(t)).forEach((function(t){-1!==n.needProxyProperties.indexOf(t)&&n.updateComponentValue(t,n[t])})),r?this.updatePropertiesByArray():this.updatePropertiesByChanges(t),null===(e=this.component)||void 0===e||e.updateByDirective()}},{key:"updateComponentValue",value:function(t,e){void 0!==e&&(this.component[t]=e)}},{key:"delayEnterLeave",value:function(t,e){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;this.delayTimer?this.clearTogglingTimer():r>0?this.delayTimer=setTimeout((function(){n.delayTimer=void 0,e?n.show():n.hide()}),1e3*r):e&&t?this.show():this.hide()}},{key:"removeTriggerListeners",value:function(){this.triggerDisposables.forEach((function(t){return t()})),this.triggerDisposables.length=0}},{key:"clearTogglingTimer",value:function(){this.delayTimer&&(clearTimeout(this.delayTimer),this.delayTimer=void 0)}},{key:"title",get:function(){return this.specificTitle||this.directiveNameTitle||this.nzTitle||null}},{key:"content",get:function(){return this.specificContent||this.directiveNameContent||this.nzContent||null}},{key:"placement",get:function(){return this.specificPlacement||this.nzPlacement}},{key:"trigger",get:function(){return void 0!==this.specificTrigger?this.specificTrigger:this.nzTrigger}},{key:"isVisible",get:function(){return this.specificVisible||this.nzVisible||!1}},{key:"mouseEnterDelay",get:function(){return this.specificMouseEnterDelay||this.nzMouseEnterDelay||.15}},{key:"mouseLeaveDelay",get:function(){return this.specificMouseLeaveDelay||this.nzMouseLeaveDelay||.1}},{key:"overlayClassName",get:function(){return this.specificOverlayClassName||this.nzOverlayClassName||null}},{key:"overlayStyle",get:function(){return this.specificOverlayStyle||this.nzOverlayStyle||null}}]),t}()).\u0275fac=function(t){return new(t||tS)(bs(Na),bs(fu),bs(xa),bs(za),bs(Sk))},tS.\u0275dir=oe({type:tS,inputs:{nzTrigger:"nzTrigger",nzPlacement:"nzPlacement",nzTitle:"nzTitle",nzContent:"nzContent",nzMouseEnterDelay:"nzMouseEnterDelay",nzMouseLeaveDelay:"nzMouseLeaveDelay",nzOverlayClassName:"nzOverlayClassName",nzOverlayStyle:"nzOverlayStyle",nzVisible:"nzVisible"},outputs:{nzVisibleChange:"nzVisibleChange"},features:[vr]}),tS),nS=((JE=function(){function t(e,n){_classCallCheck(this,t),this.cdr=e,this.noAnimation=n,this.nzVisibleChange=new T,this.nzTitle=null,this.nzContent=null,this.nzOverlayStyle={},this._visible=!1,this._trigger="hover",this.preferredPlacement="top",this._classMap={},this._hasBackdrop=!1,this._prefix="ant-tooltip-placement",this._positions=[].concat(GE)}return _createClass(t,[{key:"ngOnDestroy",value:function(){this.nzVisibleChange.complete()}},{key:"show",value:function(){this.nzVisible||this.isEmpty()||(this.nzVisible=!0,this.nzVisibleChange.next(!0),this.cdr.detectChanges())}},{key:"hide",value:function(){this.nzVisible&&(this.nzVisible=!1,this.nzVisibleChange.next(!1),this.cdr.detectChanges())}},{key:"updateByDirective",value:function(){var t=this;this.setClassMap(),this.cdr.detectChanges(),Promise.resolve().then((function(){t.updatePosition(),t.updateVisibilityByTitle()}))}},{key:"updatePosition",value:function(){this.origin&&this.overlay&&this.overlay.overlayRef&&this.overlay.overlayRef.updatePosition()}},{key:"onPositionChange",value:function(t){this.preferredPlacement=function(t){for(var e in WE)if(t.connectionPair.originX===WE[e].originX&&t.connectionPair.originY===WE[e].originY&&t.connectionPair.overlayX===WE[e].overlayX&&t.connectionPair.overlayY===WE[e].overlayY)return e}(t),this.setClassMap(),this.cdr.detectChanges()}},{key:"setClassMap",value:function(){var t;this._classMap=(_defineProperty(t={},this.nzOverlayClassName,!0),_defineProperty(t,"".concat(this._prefix,"-").concat(this.preferredPlacement),!0),t)}},{key:"setOverlayOrigin",value:function(t){this.origin=t,this.cdr.markForCheck()}},{key:"updateVisibilityByTitle",value:function(){this.isEmpty()&&this.hide()}},{key:"nzVisible",set:function(t){var e=od(t);this._visible!==e&&(this._visible=e,this.nzVisibleChange.next(e))},get:function(){return this._visible}},{key:"nzTrigger",set:function(t){this._trigger=t,this._hasBackdrop="click"===this._trigger},get:function(){return this._trigger}},{key:"nzPlacement",set:function(t){t!==this.preferredPlacement&&(this.preferredPlacement=t,this._positions=[WE[this.nzPlacement]].concat(_toConsumableArray(this._positions)))},get:function(){return this.preferredPlacement}}]),t}()).\u0275fac=function(t){return new(t||JE)(bs(eu),bs(Sk))},JE.\u0275dir=oe({type:JE,viewQuery:function(t,e){var n;1&t&&Hu(QE,!0),2&t&&Bu(n=Qu())&&(e.overlay=n.first)}}),JE),rS=((ZE=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r,i,o,s){var a;return _classCallCheck(this,n),(a=e.call(this,t,r,i,o,s)).specificVisibleChange=new Pu,a.componentFactory=a.resolver.resolveComponentFactory(iS),a}return n}(eS)).\u0275fac=function(t){return new(t||ZE)(bs(Na),bs(fu),bs(xa),bs(za),bs(Sk,9))},ZE.\u0275dir=oe({type:ZE,selectors:[["","nz-tooltip",""]],hostVars:2,hostBindings:function(t,e){2&t&&$s("ant-tooltip-open",e.visible)},inputs:{specificTitle:["nzTooltipTitle","specificTitle"],directiveNameTitle:["nz-tooltip","directiveNameTitle"],specificTrigger:["nzTooltipTrigger","specificTrigger"],specificPlacement:["nzTooltipPlacement","specificPlacement"],specificOrigin:["nzTooltipOrigin","specificOrigin"],specificVisible:["nzTooltipVisible","specificVisible"],specificMouseEnterDelay:["nzTooltipMouseEnterDelay","specificMouseEnterDelay"],specificMouseLeaveDelay:["nzTooltipMouseLeaveDelay","specificMouseLeaveDelay"],specificOverlayClassName:["nzTooltipOverlayClassName","specificOverlayClassName"],specificOverlayStyle:["nzTooltipOverlayStyle","specificOverlayStyle"]},outputs:{specificVisibleChange:"nzTooltipVisibleChange"},exportAs:["nzTooltip"],features:[is]}),ZE),iS=((XE=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r){var i;return _classCallCheck(this,n),(i=e.call(this,t,r)).noAnimation=r,i.nzTitle=null,i}return _createClass(n,[{key:"isEmpty",value:function(){return!((t=this.nzTitle)instanceof su||""!==t&&id(t));var t}}]),n}(nS)).\u0275fac=function(t){return new(t||XE)(bs(eu),bs(Sk,9))},XE.\u0275cmp=Jt({type:XE,selectors:[["nz-tooltip"]],inputs:{nzTitle:"nzTitle"},exportAs:["nzTooltipComponent"],features:[is],decls:2,vars:4,consts:[["cdkConnectedOverlay","","nzConnectedOverlay","",3,"cdkConnectedOverlayOrigin","cdkConnectedOverlayOpen","cdkConnectedOverlayHasBackdrop","cdkConnectedOverlayPositions","backdropClick","detach","positionChange"],["overlay","cdkConnectedOverlay"],[1,"ant-tooltip",3,"ngClass","ngStyle","nzNoAnimation"],[1,"ant-tooltip-content"],[1,"ant-tooltip-arrow"],[1,"ant-tooltip-inner"],[4,"nzStringTemplateOutlet"]],template:function(t,e){1&t&&(ms(0,YE,5,6,"ng-template",0,1,Xu),Ps("backdropClick",(function(){return e.hide()}))("detach",(function(){return e.hide()}))("positionChange",(function(t){return e.onPositionChange(t)}))),2&t&&ws("cdkConnectedOverlayOrigin",e.origin)("cdkConnectedOverlayOpen",e._visible)("cdkConnectedOverlayHasBackdrop",e._hasBackdrop)("cdkConnectedOverlayPositions",e._positions)},directives:[VE,qE,xl,Gl,Sk,qC],encapsulation:2,data:{animation:[Ek]},changeDetection:0}),XE),oS=(($E=function t(){_classCallCheck(this,t)}).\u0275mod=re({type:$E}),$E.\u0275inj=dt({factory:function(t){return new(t||$E)},imports:[[Kl,BE,WC,HE,Tk]]}),$E),sS=["file"],aS=["nz-upload-btn",""],uS=["*"];function cS(t,e){}var lS=function(t){return{$implicit:t}};function hS(t,e){if(1&t&&(ks(0,"div",17),ms(1,cS,0,0,"ng-template",18),Es()),2&t){var n=js(2).$implicit,r=_s(4);$s("ant-upload-list-item-file",!n.isUploading),Wi(1),ws("ngTemplateOutlet",r)("ngTemplateOutletContext",Ou(4,lS,n))}}function fS(t,e){if(1&t&&Ss(0,"img",21),2&t){var n=js(3).$implicit;ws("src",n.thumbUrl||n.url,cr),ys("alt",n.name)}}function dS(t,e){if(1&t){var n=Is();ks(0,"a",19),Ps("click",(function(t){Ye(n);var e=js(2).$implicit;return js().handlePreview(e,t)})),ms(1,fS,1,2,"img",20),Es()}if(2&t){js();var r=_s(5),i=js().$implicit;$s("ant-upload-list-item-file",!i.isImageUrl),ws("href",i.url||i.thumbUrl,cr),Wi(1),ws("ngIf",i.isImageUrl)("ngIfElse",r)}}function pS(t,e){}function vS(t,e){if(1&t&&(ks(0,"span",22),ms(1,pS,0,0,"ng-template",18),Es()),2&t){var n=js(2).$implicit,r=_s(4);Wi(1),ws("ngTemplateOutlet",r)("ngTemplateOutletContext",Ou(2,lS,n))}}function yS(t,e){}function gS(t,e){if(1&t&&ms(0,yS,0,0,"ng-template",18),2&t){var n=js(2).$implicit;ws("ngTemplateOutlet",_s(4))("ngTemplateOutletContext",Ou(2,lS,n))}}function mS(t,e){1&t&&(Ts(0,12),ms(1,hS,2,6,"div",13),ms(2,dS,2,5,"a",14),ms(3,vS,2,4,"span",15),Os(),ms(4,gS,1,4,"ng-template",null,16,Xu)),2&t&&(ws("ngSwitch",js().$implicit.iconType),Wi(1),ws("ngSwitchCase","uploading"),Wi(1),ws("ngSwitchCase","thumbnail"))}function _S(t,e){1&t&&(Ts(0),Ss(1,"i",27),Os())}function bS(t,e){if(1&t&&(Ts(0),ms(1,_S,2,0,"ng-container",23),Os()),2&t){var n=js(2).$implicit,r=_s(2);Wi(1),ws("ngIf",n.isUploading)("ngIfElse",r)}}function wS(t,e){if(1&t&&(Ts(0),ca(1),Os()),2&t){var n=js(5);Wi(1),la(n.locale.uploading)}}function CS(t,e){if(1&t&&(Ts(0),ms(1,wS,2,1,"ng-container",23),Os()),2&t){var n=js(2).$implicit,r=_s(2);Wi(1),ws("ngIf",n.isUploading)("ngIfElse",r)}}function kS(t,e){1&t&&Ss(0,"i",28),2&t&&ws("nzType",js(2).$implicit.isUploading?"loading":"paper-clip")}function ES(t,e){if(1&t&&(Ts(0),Ts(1,12),ms(2,bS,2,2,"ng-container",25),ms(3,CS,2,2,"ng-container",25),ms(4,kS,1,1,"i",26),Os(),Os()),2&t){var n=js(3);Wi(1),ws("ngSwitch",n.listType),Wi(1),ws("ngSwitchCase","picture"),Wi(1),ws("ngSwitchCase","picture-card")}}function SS(t,e){1&t&&Ss(0,"i",29),2&t&&ws("nzType",js().$implicit.isImageUrl?"picture":"file")}function TS(t,e){if(1&t&&(ms(0,ES,5,3,"ng-container",23),ms(1,SS,1,1,"ng-template",null,24,Xu)),2&t){var n=js(2);ws("ngIf",!n.iconRender)("ngIfElse",n.iconRender)}}function OS(t,e){}function IS(t,e){if(1&t&&(ks(0,"a",32),ms(1,OS,0,0,"ng-template",9),Es()),2&t){js(3);var n=_s(12);Vs("title",js().locale.downloadFile),Wi(1),ws("ngTemplateOutlet",n)}}function xS(t,e){}function AS(t,e){if(1&t&&(ks(0,"a",32),ms(1,xS,0,0,"ng-template",9),Es()),2&t){js(3);var n=_s(10);Vs("title",js().locale.removeFile),Wi(1),ws("ngTemplateOutlet",n)}}function PS(t,e){if(1&t&&(ks(0,"span"),ms(1,IS,2,2,"a",31),ms(2,AS,2,2,"a",31),Es()),2&t){var n=js(2).$implicit,r=js();i="picture"===r.listType?"picture":"",ta(Ft,Zs,gs(Qe(),"ant-upload-list-item-card-actions ",i,""),!0),Wi(1),ws("ngIf",n.showDownload),Wi(1),ws("ngIf",r.icons.showRemoveIcon)}var i}function RS(t,e){1&t&&ms(0,PS,3,5,"span",30),2&t&&ws("ngIf","picture-card"!==js(2).listType)}function NS(t,e){if(1&t){var n=Is();ks(0,"a",35),Ps("click",(function(t){Ye(n);var e=js(2).$implicit;return js().handlePreview(e,t)})),ca(1),Es()}if(2&t){var r=js(2).$implicit;ws("ngClass",r.listItemNameCls)("href",r.url,cr),ys("title",r.name)("download",r.linkProps&&r.linkProps.download),Wi(1),la(r.name)}}function DS(t,e){if(1&t){var n=Is();ks(0,"span",36),Ps("click",(function(t){Ye(n);var e=js(2).$implicit;return js().handlePreview(e,t)})),ca(1),Es()}if(2&t){var r=js(2).$implicit;ws("ngClass",r.listItemNameCls),ys("title",r.name),Wi(1),la(r.name)}}function zS(t,e){}function jS(t,e){if(1&t&&(ms(0,NS,2,5,"a",33),ms(1,DS,2,3,"span",34),ms(2,zS,0,0,"ng-template",9)),2&t){var n=js().$implicit,r=_s(6);ws("ngIf",n.url),Wi(1),ws("ngIf",!n.url),Wi(1),ws("ngTemplateOutlet",r)}}function LS(t,e){if(1&t){var n=Is();ks(0,"i",38),Ps("click",(function(t){Ye(n);var e=js(2).$implicit;return js().handleRemove(e,t)})),Es()}2&t&&Vs("title",js(3).locale.removeFile)}function FS(t,e){1&t&&ms(0,LS,1,1,"i",37),2&t&&ws("ngIf",js(2).icons.showRemoveIcon)}function MS(t,e){if(1&t){var n=Is();ks(0,"i",40),Ps("click",(function(){Ye(n);var t=js(2).$implicit;return js().handleDownload(t)})),Es()}2&t&&Vs("title",js(3).locale.downloadFile)}function VS(t,e){1&t&&ms(0,MS,1,1,"i",39),2&t&&ws("ngIf",js().$implicit.showDownload)}function US(t,e){}function BS(t,e){}var qS=function(){return{opacity:.5,"pointer-events":"none"}};function HS(t,e){if(1&t){var n=Is();ks(0,"a",43),Ps("click",(function(t){Ye(n);var e=js(2).$implicit;return js().handlePreview(e,t)})),Ss(1,"i",44),Es()}if(2&t){var r=js(2).$implicit;Vs("title",js().locale.previewFile),ws("href",r.url||r.thumbUrl,cr)("ngStyle",r.url||r.thumbUrl?null:Tu(3,qS))}}function WS(t,e){}function GS(t,e){}function QS(t,e){if(1&t&&(ks(0,"span",41),ms(1,HS,2,4,"a",42),ms(2,WS,0,0,"ng-template",9),ms(3,GS,0,0,"ng-template",9),Es()),2&t){js();var n=_s(12),r=_s(10),i=js();Wi(1),ws("ngIf",i.icons.showPreviewIcon),Wi(1),ws("ngTemplateOutlet",n),Wi(1),ws("ngTemplateOutlet",r)}}function KS(t,e){if(1&t&&(ks(0,"div",45),Ss(1,"nz-progress",46),Es()),2&t){var n=js().$implicit;Wi(1),ws("nzPercent",n.percent)("nzShowInfo",!1)("nzStrokeWidth",2)}}function YS(t,e){if(1&t&&(ks(0,"div",1),ms(1,mS,6,3,"ng-template",null,2,Xu),ms(3,TS,3,2,"ng-template",null,3,Xu),ms(5,RS,1,1,"ng-template",null,4,Xu),ms(7,jS,3,3,"ng-template",null,5,Xu),ms(9,FS,1,1,"ng-template",null,6,Xu),ms(11,VS,1,1,"ng-template",null,7,Xu),ks(13,"div",8),ks(14,"span"),ms(15,US,0,0,"ng-template",9),ms(16,BS,0,0,"ng-template",9),Es(),Es(),ms(17,QS,4,3,"span",10),ms(18,KS,2,3,"div",11),Es()),2&t){var n=e.$implicit,r=_s(2),i=_s(8),o=js();s=n.status,a=o.listType,ta(Ft,Zs,function(t,e,n,r,i,o){var s=function(t,e,n,r){var i=vs(t,e,n);return vs(t,e+1,r)||i}(t,on(),n,i);return an(2),s?"ant-upload-list-item ant-upload-list-item-"+ue(n)+" ant-upload-list-item-list-type-"+ue(i):Hi}(Qe(),0,s,0,a),!0),ws("@itemState",void 0)("nzTooltipTitle","error"===n.status?n.message:null),ys("data-key",n.key),Wi(15),ws("ngTemplateOutlet",r),Wi(1),ws("ngTemplateOutlet",i),Wi(1),ws("ngIf","picture-card"===o.listType&&!n.isUploading),Wi(1),ws("ngIf",n.isUploading)}var s,a}var $S=["uploadComp"],XS=["listComp"],ZS=function(){return[]};function JS(t,e){if(1&t&&Ss(0,"nz-upload-list",8,9),2&t){var n=js(2);Ys("display",n.nzShowUploadList?"":"none"),ws("locale",n.locale)("listType",n.nzListType)("items",n.nzFileList||Tu(12,ZS))("icons",n.nzShowUploadList)("iconRender",n.nzIconRender)("previewFile",n.nzPreviewFile)("previewIsImage",n.nzPreviewIsImage)("onPreview",n.nzPreview)("onRemove",n.onRemove)("onDownload",n.nzDownload)}}function tT(t,e){1&t&&(Ts(0,void 0,void 0),Os())}function eT(t,e){if(1&t&&(Ts(0),ms(1,tT,1,0,"ng-container",10),Os()),2&t){var n=js(2);Wi(1),ws("ngTemplateOutlet",n.nzFileListRender)("ngTemplateOutletContext",Ou(2,lS,n.nzFileList))}}function nT(t,e){if(1&t&&(ms(0,JS,2,13,"nz-upload-list",6),ms(1,eT,2,4,"ng-container",7)),2&t){var n=js();ws("ngIf",n.locale&&!n.nzFileListRender),Wi(1),ws("ngIf",n.nzFileListRender)}}function rT(t,e){1&t&&Ms(0)}function iT(t,e){}function oT(t,e){if(1&t&&(ks(0,"div",11),ks(1,"div",12,13),ms(3,iT,0,0,"ng-template",14),Es(),Es()),2&t){var n=js(),r=_s(3);Ys("display",n.nzShowButton?"":"none"),ws("ngClass",n.classList),Wi(1),ws("options",n._btnOptions),Wi(2),ws("ngTemplateOutlet",r)}}function sT(t,e){}function aT(t,e){}function uT(t,e){if(1&t){var n=Is();Ts(0),ks(1,"div",15),Ps("drop",(function(t){return Ye(n),js().fileDrop(t)}))("dragover",(function(t){return Ye(n),js().fileDrop(t)}))("dragleave",(function(t){return Ye(n),js().fileDrop(t)})),ks(2,"div",16,13),ks(4,"div",17),ms(5,sT,0,0,"ng-template",14),Es(),Es(),Es(),ms(6,aT,0,0,"ng-template",14),Os()}if(2&t){var r=js(),i=_s(3),o=_s(1);Wi(1),ws("ngClass",r.classList),Wi(1),ws("options",r._btnOptions),Wi(3),ws("ngTemplateOutlet",i),Wi(1),ws("ngTemplateOutlet",o)}}function cT(t,e){}function lT(t,e){}function hT(t,e){if(1&t&&(Ts(0),ms(1,cT,0,0,"ng-template",14),ms(2,lT,0,0,"ng-template",14),Os()),2&t){js(2);var n=_s(1),r=_s(5);Wi(1),ws("ngTemplateOutlet",n),Wi(1),ws("ngTemplateOutlet",r)}}function fT(t,e){if(1&t&&ms(0,hT,3,2,"ng-container",3),2&t){var n=js(),r=_s(10);ws("ngIf","picture-card"===n.nzListType)("ngIfElse",r)}}function dT(t,e){}function pT(t,e){}function vT(t,e){if(1&t&&(ms(0,dT,0,0,"ng-template",14),ms(1,pT,0,0,"ng-template",14)),2&t){js();var n=_s(5),r=_s(1);ws("ngTemplateOutlet",n),Wi(1),ws("ngTemplateOutlet",r)}}var yT,gT,mT,_T,bT=((yT=function(){function t(e){if(_classCallCheck(this,t),this.http=e,this.reqs={},this.destroy=!1,!e)throw new Error("Not found 'HttpClient', You can import 'HttpClientModule' in your root module.")}return _createClass(t,[{key:"onClick",value:function(){!this.options.disabled&&this.options.openFileDialogOnClick&&this.file.nativeElement.click()}},{key:"onKeyDown",value:function(t){this.options.disabled||"Enter"!==t.key&&13!==t.keyCode||this.onClick()}},{key:"onFileDrop",value:function(t){var e=this;if(this.options.disabled||"dragover"===t.type)t.preventDefault();else{if(this.options.directory)this.traverseFileTree(t.dataTransfer.items);else{var n=Array.prototype.slice.call(t.dataTransfer.files).filter((function(t){return e.attrAccept(t,e.options.accept)}));n.length&&this.uploadFiles(n)}t.preventDefault()}}},{key:"onChange",value:function(t){if(!this.options.disabled){var e=t.target;this.uploadFiles(e.files),e.value=""}}},{key:"traverseFileTree",value:function(t){var e,n=this,r=function t(e,r){e.isFile?e.file((function(t){n.attrAccept(t,n.options.accept)&&n.uploadFiles([t])})):e.isDirectory&&e.createReader().readEntries((function(n){var i,o=_createForOfIteratorHelper(n);try{for(o.s();!(i=o.n()).done;){var s=i.value;t(s,"".concat(r).concat(e.name,"/"))}}catch(a){o.e(a)}finally{o.f()}}))},i=_createForOfIteratorHelper(t);try{for(i.s();!(e=i.n()).done;)r(e.value.webkitGetAsEntry(),"")}catch(o){i.e(o)}finally{i.f()}}},{key:"attrAccept",value:function(t,e){if(t&&e){var n=Array.isArray(e)?e:e.split(","),r=""+t.name,i=""+t.type,o=i.replace(/\/.*$/,"");return n.some((function(t){var e=t.trim();return"."===e.charAt(0)?-1!==r.toLowerCase().indexOf(e.toLowerCase(),r.toLowerCase().length-e.toLowerCase().length):/\/\*$/.test(e)?o===e.replace(/\/.*$/,""):i===e}))}return!0}},{key:"attachUid",value:function(t){return t.uid||(t.uid=Math.random().toString(36).substring(2)),t}},{key:"uploadFiles",value:function(t){var e=this,n=lf(Array.prototype.slice.call(t));this.options.filters&&this.options.filters.forEach((function(t){n=n.pipe(wb((function(e){var n=t.fn(e);return n instanceof b?n:lf(n)})))})),n.subscribe((function(t){t.forEach((function(n){e.attachUid(n),e.upload(n,t)}))}),(function(t){Xf("Unhandled upload filter error",t)}))}},{key:"upload",value:function(t,e){var n=this;if(!this.options.beforeUpload)return this.post(t);var r=this.options.beforeUpload(t,e);if(r instanceof b)r.subscribe((function(e){var r=Object.prototype.toString.call(e);"[object File]"===r||"[object Blob]"===r?(n.attachUid(e),n.post(e)):"boolean"==typeof e&&!1!==e&&n.post(t)}),(function(t){Xf("Unhandled upload beforeUpload error",t)}));else if(!1!==r)return this.post(t)}},{key:"post",value:function(t){var e=this;if(!this.destroy){var n=lf(t),r=this.options,i=t.uid,o=r.action,s=r.data,a=r.headers,u=r.transformFile,c={action:"string"==typeof o?o:"",name:r.name,headers:a,file:t,postFile:t,data:s,withCredentials:r.withCredentials,onProgress:r.onProgress?function(e){r.onProgress(e,t)}:void 0,onSuccess:function(n,o){e.clean(i),r.onSuccess(n,t,o)},onError:function(n){e.clean(i),r.onError(n,t)}};if("function"==typeof o){var l=o(t);l instanceof b?n=n.pipe(wb((function(){return l})),L((function(e){return c.action=e,t}))):c.action=l}if("function"==typeof u){var h=u(t);n=n.pipe(wb((function(){return h instanceof b?h:lf(h)})))}if("function"==typeof s){var d=s(t);d instanceof b?n=n.pipe(wb((function(){return d})),L((function(e){return c.data=e,t}))):c.data=d}if("function"==typeof a){var p=a(t);p instanceof b?n=n.pipe(wb((function(){return p})),L((function(e){return c.headers=e,t}))):c.headers=p}n.subscribe((function(n){c.postFile=n;var o=(r.customRequest||e.xhr).call(e,c);o instanceof f||Xf("Must return Subscription type in '[nzCustomRequest]' property"),e.reqs[i]=o,r.onStart(t)}))}}},{key:"xhr",value:function(t){var e=this,n=new FormData;t.data&&Object.keys(t.data).map((function(e){n.append(e,t.data[e])})),n.append(t.name,t.postFile),t.headers||(t.headers={}),null!==t.headers["X-Requested-With"]?t.headers["X-Requested-With"]="XMLHttpRequest":delete t.headers["X-Requested-With"];var r=new Od("POST",t.action,n,{reportProgress:!0,withCredentials:t.withCredentials,headers:new bd(t.headers)});return this.http.request(r).subscribe((function(e){e.type===Id.UploadProgress?(e.total>0&&(e.percent=e.loaded/e.total*100),t.onProgress(e,t.file)):e instanceof Pd&&t.onSuccess(e.body,t.file,e)}),(function(n){e.abort(t.file),t.onError(n,t.file)}))}},{key:"clean",value:function(t){var e=this.reqs[t];e instanceof f&&e.unsubscribe(),delete this.reqs[t]}},{key:"abort",value:function(t){var e=this;t?this.clean(t&&t.uid):Object.keys(this.reqs).forEach((function(t){return e.clean(t)}))}},{key:"ngOnDestroy",value:function(){this.destroy=!0,this.abort()}}]),t}()).\u0275fac=function(t){return new(t||yT)(bs(qd,8))},yT.\u0275cmp=Jt({type:yT,selectors:[["","nz-upload-btn",""]],viewQuery:function(t,e){var n;1&t&&Hu(sS,!0),2&t&&Bu(n=Qu())&&(e.file=n.first)},hostVars:6,hostBindings:function(t,e){1&t&&Ps("click",(function(){return e.onClick()}))("keydown",(function(t){return e.onKeyDown(t)}))("drop",(function(t){return e.onFileDrop(t)}))("dragover",(function(t){return e.onFileDrop(t)})),2&t&&(ys("tabindex","0")("role","button"),$s("ant-upload",!0)("ant-upload-disabled",e.options.disabled))},inputs:{options:"options"},exportAs:["nzUploadBtn"],attrs:aS,ngContentSelectors:uS,decls:3,vars:4,consts:[["type","file",2,"display","none",3,"multiple","change"],["file",""]],template:function(t,e){1&t&&(Fs(),ks(0,"input",0,1),Ps("change",(function(t){return e.onChange(t)})),Es(),Ms(2)),2&t&&(ws("multiple",e.options.multiple),ys("accept",e.options.accept)("directory",e.options.directory?"directory":null)("webkitdirectory",e.options.directory?"webkitdirectory":null))},encapsulation:2}),yT),wT=function(t){return!!t&&0===t.indexOf("image/")},CT=((_T=function(){function t(e,n,r,i){_classCallCheck(this,t),this.cdr=e,this.doc=n,this.ngZone=r,this.platform=i,this.list=[],this.locale={},this.iconRender=null}return _createClass(t,[{key:"genErr",value:function(t){return t.response&&"string"==typeof t.response?t.response:t.error&&t.error.statusText||this.locale.uploadError}},{key:"extname",value:function(t){var e=t.split("/"),n=e[e.length-1].split(/#|\?/)[0];return(/\.[^./\\]*$/.exec(n)||[""])[0]}},{key:"isImageUrl",value:function(t){if(wT(t.type))return!0;var e=t.thumbUrl||t.url||"";if(!e)return!1;var n=this.extname(e);return!(!/^data:image\//.test(e)&&!/(webp|svg|png|gif|jpg|jpeg|jfif|bmp|dpg)$/i.test(n))||!/^data:/.test(e)&&!n}},{key:"getIconType",value:function(t){return this.showPic?t.isUploading||!t.thumbUrl&&!t.url?"uploading":"thumbnail":""}},{key:"previewImage",value:function(t){var e=this;return new Promise((function(n){wT(t.type)?e.ngZone.runOutsideAngular((function(){var r=e.doc.createElement("canvas");r.width=200,r.height=200,r.style.cssText="position: fixed; left: 0; top: 0; width: 200px; height: 200px; z-index: 9999; display: none;",e.doc.body.appendChild(r);var i=r.getContext("2d"),o=new Image;o.onload=function(){var t=o.width,s=o.height,a=200,u=200,c=0,l=0;t<s?l=-((u=s*(200/t))-a)/2:c=-((a=t*(200/s))-u)/2;try{i.drawImage(o,c,l,a,u)}catch(EN){}var h=r.toDataURL();e.doc.body.removeChild(r),n(h)},o.src=window.URL.createObjectURL(t)})):n("")}))}},{key:"genThumb",value:function(){var t=this;if(this.platform.isBrowser){var e=window;this.showPic&&"undefined"!=typeof document&&void 0!==e&&e.FileReader&&e.File&&this.list.filter((function(t){return t.originFileObj instanceof File&&void 0===t.thumbUrl})).forEach((function(e){e.thumbUrl="",(t.previewFile?t.previewFile(e).toPromise():t.previewImage(e.originFileObj)).then((function(n){e.thumbUrl=n,t.detectChanges()}))}))}}},{key:"listItemNameCls",value:function(t){return _defineProperty({"ant-upload-list-item-name":!0},"ant-upload-list-item-name-icon-count-"+[this.showDownload(t),this.icons.showRemoveIcon].filter((function(t){return t})).length,!0)}},{key:"showDownload",value:function(t){return!(!this.icons.showDownloadIcon||"done"!==t.status)}},{key:"fixData",value:function(){var t=this;this.list.forEach((function(e){e.isUploading="uploading"===e.status,e.message=t.genErr(e),e.linkProps="string"==typeof e.linkProps?JSON.parse(e.linkProps):e.linkProps,e.isImageUrl=t.previewIsImage?t.previewIsImage(e):t.isImageUrl(e),e.iconType=t.getIconType(e),e.listItemNameCls=t.listItemNameCls(e),e.showDownload=t.showDownload(e)}))}},{key:"handlePreview",value:function(t,e){if(this.onPreview)return e.preventDefault(),this.onPreview(t)}},{key:"handleRemove",value:function(t,e){e.preventDefault(),this.onRemove&&this.onRemove(t)}},{key:"handleDownload",value:function(t){"function"==typeof this.onDownload?this.onDownload(t):t.url&&window.open(t.url)}},{key:"detectChanges",value:function(){this.fixData(),this.cdr.detectChanges()}},{key:"ngOnChanges",value:function(){this.fixData(),this.genThumb()}},{key:"showPic",get:function(){return"picture"===this.listType||"picture-card"===this.listType}},{key:"items",set:function(t){this.list=t}}]),t}()).\u0275fac=function(t){return new(t||_T)(bs(eu),bs(Zc),bs(_c),bs(pd))},_T.\u0275cmp=Jt({type:_T,selectors:[["nz-upload-list"]],hostVars:8,hostBindings:function(t,e){2&t&&$s("ant-upload-list",!0)("ant-upload-list-text","text"===e.listType)("ant-upload-list-picture","picture"===e.listType)("ant-upload-list-picture-card","picture-card"===e.listType)},inputs:{locale:"locale",iconRender:"iconRender",items:"items",listType:"listType",icons:"icons",onPreview:"onPreview",onRemove:"onRemove",onDownload:"onDownload",previewFile:"previewFile",previewIsImage:"previewIsImage"},exportAs:["nzUploadList"],features:[vr],decls:1,vars:1,consts:[["nz-tooltip","",3,"class","nzTooltipTitle",4,"ngFor","ngForOf"],["nz-tooltip","",3,"nzTooltipTitle"],["icon",""],["iconNode",""],["downloadOrDelete",""],["preview",""],["removeIcon",""],["downloadIcon",""],[1,"ant-upload-list-item-info"],[3,"ngTemplateOutlet"],["class","ant-upload-list-item-actions",4,"ngIf"],["class","ant-upload-list-item-progress",4,"ngIf"],[3,"ngSwitch"],["class","ant-upload-list-item-thumbnail",3,"ant-upload-list-item-file",4,"ngSwitchCase"],["class","ant-upload-list-item-thumbnail","target","_blank","rel","noopener noreferrer",3,"ant-upload-list-item-file","href","click",4,"ngSwitchCase"],["class","ant-upload-text-icon",4,"ngSwitchDefault"],["noImageThumbTpl",""],[1,"ant-upload-list-item-thumbnail"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["target","_blank","rel","noopener noreferrer",1,"ant-upload-list-item-thumbnail",3,"href","click"],["class","ant-upload-list-item-image",3,"src",4,"ngIf","ngIfElse"],[1,"ant-upload-list-item-image",3,"src"],[1,"ant-upload-text-icon"],[4,"ngIf","ngIfElse"],["iconNodeFileIcon",""],[4,"ngSwitchCase"],["nz-icon","",3,"nzType",4,"ngSwitchDefault"],["nz-icon","","nzType","loading"],["nz-icon","",3,"nzType"],["nz-icon","","nzTheme","twotone",3,"nzType"],[3,"class",4,"ngIf"],[3,"title",4,"ngIf"],[3,"title"],["target","_blank","rel","noopener noreferrer",3,"ngClass","href","click",4,"ngIf"],[3,"ngClass","click",4,"ngIf"],["target","_blank","rel","noopener noreferrer",3,"ngClass","href","click"],[3,"ngClass","click"],["nz-icon","","nzType","delete",3,"title","click",4,"ngIf"],["nz-icon","","nzType","delete",3,"title","click"],["nz-icon","","nzType","download",3,"title","click",4,"ngIf"],["nz-icon","","nzType","download",3,"title","click"],[1,"ant-upload-list-item-actions"],["target","_blank","rel","noopener noreferrer",3,"href","title","ngStyle","click",4,"ngIf"],["target","_blank","rel","noopener noreferrer",3,"href","title","ngStyle","click"],["nz-icon","","nzType","eye"],[1,"ant-upload-list-item-progress"],["nzType","line",3,"nzPercent","nzShowInfo","nzStrokeWidth"]],template:function(t,e){1&t&&ms(0,YS,19,11,"div",0),2&t&&ws("ngForOf",e.list)},directives:[Pl,rS,Ql,Nl,ql,Hl,Wl,Pp,xl,Gl,bk],encapsulation:2,data:{animation:[Hp("itemState",[Yp(":enter",[Qp({height:"0",width:"0",opacity:0}),Wp(150,Qp({height:"*",width:"*",opacity:1}))]),Yp(":leave",[Wp(150,Qp({height:"0",width:"0",opacity:0}))])])]},changeDetection:0}),_T),kT=((mT=function(){function t(e,n){var r=this;_classCallCheck(this,t),this.cdr=e,this.i18n=n,this.nzType="select",this.nzLimit=0,this.nzSize=0,this.nzDirectory=!1,this.nzOpenFileDialogOnClick=!0,this.nzFilter=[],this.nzFileList=[],this.nzDisabled=!1,this.nzListType="text",this.nzMultiple=!1,this.nzName="file",this._showUploadList=!0,this.nzShowButton=!0,this.nzWithCredentials=!1,this.nzIconRender=null,this.nzFileListRender=null,this.nzChange=new Pu,this.nzFileListChange=new Pu,this.onStart=function(t){r.nzFileList||(r.nzFileList=[]);var e=r.fileToObject(t);e.status="uploading",r.nzFileList=r.nzFileList.concat(e),r.nzFileListChange.emit(r.nzFileList),r.nzChange.emit({file:e,fileList:r.nzFileList,type:"start"}),r.detectChangesList()},this.onProgress=function(t,e){var n=r.getFileItem(e,r.nzFileList);n.percent=t.percent,r.nzChange.emit({event:t,file:Object.assign({},n),fileList:r.nzFileList,type:"progress"}),r.detectChangesList()},this.onSuccess=function(t,e){var n=r.nzFileList,i=r.getFileItem(e,n);i.status="done",i.response=t,r.nzChange.emit({file:Object.assign({},i),fileList:n,type:"success"}),r.detectChangesList()},this.onError=function(t,e){var n=r.nzFileList,i=r.getFileItem(e,n);i.error=t,i.status="error",r.nzChange.emit({file:Object.assign({},i),fileList:n,type:"error"}),r.detectChangesList()},this.onRemove=function(t){r.uploadComp.abort(t),t.status="removed";var e="function"==typeof r.nzRemove?r.nzRemove(t):null==r.nzRemove||r.nzRemove;(e instanceof b?e:lf(e)).pipe(zf((function(t){return t}))).subscribe((function(){r.nzFileList=r.removeFileItem(t,r.nzFileList),r.nzChange.emit({file:t,fileList:r.nzFileList,type:"removed"}),r.nzFileListChange.emit(r.nzFileList),r.cdr.detectChanges()}))},this.prefixCls="ant-upload",this.classList=[]}return _createClass(t,[{key:"zipOptions",value:function(){var t=this;"boolean"==typeof this.nzShowUploadList&&this.nzShowUploadList&&(this.nzShowUploadList={showPreviewIcon:!0,showRemoveIcon:!0,showDownloadIcon:!0});var e=this.nzFilter.slice();if(this.nzMultiple&&this.nzLimit>0&&-1===e.findIndex((function(t){return"limit"===t.name}))&&e.push({name:"limit",fn:function(e){return e.slice(-t.nzLimit)}}),this.nzSize>0&&-1===e.findIndex((function(t){return"size"===t.name}))&&e.push({name:"size",fn:function(e){return e.filter((function(e){return e.size/1024<=t.nzSize}))}}),this.nzFileType&&this.nzFileType.length>0&&-1===e.findIndex((function(t){return"type"===t.name}))){var n=this.nzFileType.split(",");e.push({name:"type",fn:function(t){return t.filter((function(t){return~n.indexOf(t.type)}))}})}return this._btnOptions={disabled:this.nzDisabled,accept:this.nzAccept,action:this.nzAction,directory:this.nzDirectory,openFileDialogOnClick:this.nzOpenFileDialogOnClick,beforeUpload:this.nzBeforeUpload,customRequest:this.nzCustomRequest,data:this.nzData,headers:this.nzHeaders,name:this.nzName,multiple:this.nzMultiple,withCredentials:this.nzWithCredentials,filters:e,transformFile:this.nzTransformFile,onStart:this.onStart,onProgress:this.onProgress,onSuccess:this.onSuccess,onError:this.onError},this}},{key:"fileToObject",value:function(t){return{lastModified:t.lastModified,lastModifiedDate:t.lastModifiedDate,name:t.filename||t.name,size:t.size,type:t.type,uid:t.uid,response:t.response,error:t.error,percent:0,originFileObj:t}}},{key:"getFileItem",value:function(t,e){return e.filter((function(e){return e.uid===t.uid}))[0]}},{key:"removeFileItem",value:function(t,e){return e.filter((function(e){return e.uid!==t.uid}))}},{key:"fileDrop",value:function(t){t.type!==this.dragState&&(this.dragState=t.type,this.setClassMap())}},{key:"detectChangesList",value:function(){var t;this.cdr.detectChanges(),null===(t=this.listComp)||void 0===t||t.detectChanges()}},{key:"setClassMap",value:function(){var t=[];"drag"===this.nzType?(this.nzFileList.some((function(t){return"uploading"===t.status}))&&t.push(this.prefixCls+"-drag-uploading"),"dragover"===this.dragState&&t.push(this.prefixCls+"-drag-hover")):t=["".concat(this.prefixCls,"-select-").concat(this.nzListType)],this.classList=[this.prefixCls,"".concat(this.prefixCls,"-").concat(this.nzType)].concat(_toConsumableArray(t),[this.nzDisabled&&this.prefixCls+"-disabled"||""]).filter((function(t){return!!t})),this.cdr.detectChanges()}},{key:"ngOnInit",value:function(){var t=this;this.i18n$=this.i18n.localeChange.subscribe((function(){t.locale=t.i18n.getLocaleData("Upload"),t.detectChangesList()}))}},{key:"ngOnChanges",value:function(){this.zipOptions().setClassMap()}},{key:"ngOnDestroy",value:function(){this.i18n$.unsubscribe()}},{key:"nzShowUploadList",set:function(t){this._showUploadList="boolean"==typeof t?od(t):t},get:function(){return this._showUploadList}}]),t}()).\u0275fac=function(t){return new(t||mT)(bs(eu),bs(VC))},mT.\u0275cmp=Jt({type:mT,selectors:[["nz-upload"]],viewQuery:function(t,e){var n;1&t&&(Hu($S,!0),Hu(XS,!0)),2&t&&(Bu(n=Qu())&&(e.uploadComp=n.first),Bu(n=Qu())&&(e.listComp=n.first))},hostVars:2,hostBindings:function(t,e){2&t&&$s("ant-upload-picture-card-wrapper","picture-card"===e.nzListType)},inputs:{nzType:"nzType",nzLimit:"nzLimit",nzSize:"nzSize",nzDirectory:"nzDirectory",nzOpenFileDialogOnClick:"nzOpenFileDialogOnClick",nzFilter:"nzFilter",nzFileList:"nzFileList",nzDisabled:"nzDisabled",nzListType:"nzListType",nzMultiple:"nzMultiple",nzName:"nzName",nzShowButton:"nzShowButton",nzWithCredentials:"nzWithCredentials",nzIconRender:"nzIconRender",nzFileListRender:"nzFileListRender",nzShowUploadList:"nzShowUploadList",nzFileType:"nzFileType",nzAccept:"nzAccept",nzAction:"nzAction",nzBeforeUpload:"nzBeforeUpload",nzCustomRequest:"nzCustomRequest",nzData:"nzData",nzHeaders:"nzHeaders",nzRemove:"nzRemove",nzPreview:"nzPreview",nzPreviewFile:"nzPreviewFile",nzPreviewIsImage:"nzPreviewIsImage",nzTransformFile:"nzTransformFile",nzDownload:"nzDownload"},outputs:{nzChange:"nzChange",nzFileListChange:"nzFileListChange"},exportAs:["nzUpload"],features:[vr],ngContentSelectors:uS,decls:11,vars:2,consts:[["list",""],["con",""],["btn",""],[4,"ngIf","ngIfElse"],["select",""],["pic",""],[3,"display","locale","listType","items","icons","iconRender","previewFile","previewIsImage","onPreview","onRemove","onDownload",4,"ngIf"],[4,"ngIf"],[3,"locale","listType","items","icons","iconRender","previewFile","previewIsImage","onPreview","onRemove","onDownload"],["listComp",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"ngClass"],["nz-upload-btn","",3,"options"],["uploadComp",""],[3,"ngTemplateOutlet"],[3,"ngClass","drop","dragover","dragleave"],["nz-upload-btn","",1,"ant-upload-btn",3,"options"],[1,"ant-upload-drag-container"]],template:function(t,e){if(1&t&&(Fs(),ms(0,nT,2,2,"ng-template",null,0,Xu),ms(2,rT,1,0,"ng-template",null,1,Xu),ms(4,oT,4,5,"ng-template",null,2,Xu),ms(6,uT,7,4,"ng-container",3),ms(7,fT,1,2,"ng-template",null,4,Xu),ms(9,vT,2,2,"ng-template",null,5,Xu)),2&t){var n=_s(8);Wi(6),ws("ngIf","drag"===e.nzType)("ngIfElse",n)}},directives:[Nl,CT,Ql,xl,bT],encapsulation:2,changeDetection:0}),Object(Df.c)([ud(),Object(Df.f)("design:type",Object)],mT.prototype,"nzLimit",void 0),Object(Df.c)([ud(),Object(Df.f)("design:type",Object)],mT.prototype,"nzSize",void 0),Object(Df.c)([ad(),Object(Df.f)("design:type",Object)],mT.prototype,"nzDirectory",void 0),Object(Df.c)([ad(),Object(Df.f)("design:type",Object)],mT.prototype,"nzOpenFileDialogOnClick",void 0),Object(Df.c)([ad(),Object(Df.f)("design:type",Object)],mT.prototype,"nzDisabled",void 0),Object(Df.c)([ad(),Object(Df.f)("design:type",Object)],mT.prototype,"nzMultiple",void 0),Object(Df.c)([ad(),Object(Df.f)("design:type",Object)],mT.prototype,"nzShowButton",void 0),Object(Df.c)([ad(),Object(Df.f)("design:type",Object)],mT.prototype,"nzWithCredentials",void 0),mT),ET=((gT=function t(){_classCallCheck(this,t)}).\u0275mod=re({type:gT}),gT.\u0275inj=dt({factory:function(t){return new(t||gT)},imports:[[Kl,c_,vd,oS,wk,UC,Rp]]}),gT);function ST(t){return new b((function(e){var n;try{n=t()}catch(r){return void e.error(r)}return(n?U(n):cf()).subscribe(e)}))}var TT,OT,IT,xT=((IT=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"transform",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"px",n=+t;return isNaN(n)?""+t:"".concat(n).concat(e)}}]),t}()).\u0275fac=function(t){return new(t||IT)},IT.\u0275pipe={type:(OT={name:"nzToCssUnit",type:IT,pure:!0}).type,name:OT.name,factory:null,pure:!1!==OT.pure,onDestroy:OT.type.prototype.ngOnDestroy||null},IT),AT=((TT=function t(){_classCallCheck(this,t)}).\u0275mod=re({type:TT}),TT.\u0275inj=dt({factory:function(t){return new(t||TT)},imports:[[Kl]]}),TT),PT=["modalElement"];function RT(t,e){if(1&t){var n=Is();ks(0,"button",16),Ps("click",(function(){return Ye(n),js().onCloseClick()})),Es()}}function NT(t,e){if(1&t&&(Ts(0),Ss(1,"span",17),Os()),2&t){var n=js();Wi(1),ws("innerHTML",n.config.nzTitle,ur)}}function DT(t,e){}function zT(t,e){1&t&&Ss(0,"div",17),2&t&&ws("innerHTML",js().config.nzContent,ur)}function jT(t,e){if(1&t){var n=Is();ks(0,"button",18),Ps("click",(function(){return Ye(n),js().onCancel()})),ca(1),Es()}if(2&t){var r=js();ws("nzLoading",!!r.config.nzCancelLoading)("disabled",r.config.nzCancelDisabled),ys("cdkFocusInitial","cancel"===r.config.nzAutofocus||null),Wi(1),ha(" ",r.config.nzCancelText||r.locale.cancelText," ")}}function LT(t,e){if(1&t){var n=Is();ks(0,"button",19),Ps("click",(function(){return Ye(n),js().onOk()})),ca(1),Es()}if(2&t){var r=js();ws("nzType",r.config.nzOkType)("nzLoading",!!r.config.nzOkLoading)("disabled",r.config.nzOkDisabled),ys("cdkFocusInitial","ok"===r.config.nzAutofocus||null),Wi(1),ha(" ",r.config.nzOkText||r.locale.okText," ")}}function FT(t,e){if(1&t){var n=Is();ks(0,"button",9),Ps("click",(function(){return Ye(n),js().onCloseClick()})),Es()}}function MT(t,e){1&t&&Ss(0,"div",10)}function VT(t,e){}function UT(t,e){1&t&&Ss(0,"div",11),2&t&&ws("innerHTML",js().config.nzContent,ur)}function BT(t,e){if(1&t){var n=Is();ks(0,"div",12),Ps("cancelTriggered",(function(){return Ye(n),js().onCloseClick()}))("okTriggered",(function(){return Ye(n),js().onOkClick()})),Es()}2&t&&ws("modalRef",js().modalRef)}function qT(t,e){1&t&&Ms(0)}var HT=["*"],WT=["nz-modal-close",""];function GT(t,e){if(1&t&&(Ts(0),Ss(1,"i",2),Os()),2&t){var n=e.$implicit;Wi(1),ws("nzType",n)}}var QT=["nz-modal-footer",""];function KT(t,e){1&t&&Ss(0,"div",5),2&t&&ws("innerHTML",js(3).config.nzTitle,ur)}function YT(t,e){if(1&t){var n=Is();ks(0,"button",7),Ps("click",(function(){Ye(n);var t=e.$implicit;return js(4).onButtonClick(t)})),ca(1),Es()}if(2&t){var r=e.$implicit,i=js(4);ws("hidden",!i.getButtonCallableProp(r,"show"))("nzLoading",i.getButtonCallableProp(r,"loading"))("disabled",i.getButtonCallableProp(r,"disabled"))("nzType",r.type)("nzShape",r.shape)("nzSize",r.size)("nzGhost",r.ghost),Wi(1),ha(" ",r.label," ")}}function $T(t,e){if(1&t&&(Ts(0),ms(1,YT,2,8,"button",6),Os()),2&t){var n=js(3);Wi(1),ws("ngForOf",n.buttons)}}function XT(t,e){if(1&t&&(Ts(0),ms(1,KT,1,1,"div",3),ms(2,$T,2,1,"ng-container",4),Os()),2&t){var n=js(2);Wi(1),ws("ngIf",!n.buttonsFooter),Wi(1),ws("ngIf",n.buttonsFooter)}}function ZT(t,e){if(1&t&&(Ts(0),ms(1,XT,3,2,"ng-container",2),Os()),2&t){var n=js();Wi(1),ws("nzStringTemplateOutlet",n.config.nzFooter)}}function JT(t,e){if(1&t){var n=Is();ks(0,"button",10),Ps("click",(function(){return Ye(n),js(2).onCancel()})),ca(1),Es()}if(2&t){var r=js(2);ws("nzLoading",!!r.config.nzCancelLoading)("disabled",r.config.nzCancelDisabled),ys("cdkFocusInitial","cancel"===r.config.nzAutofocus||null),Wi(1),ha(" ",r.config.nzCancelText||r.locale.cancelText," ")}}function tO(t,e){if(1&t){var n=Is();ks(0,"button",11),Ps("click",(function(){return Ye(n),js(2).onOk()})),ca(1),Es()}if(2&t){var r=js(2);ws("nzType",r.config.nzOkType)("nzLoading",!!r.config.nzOkLoading)("disabled",r.config.nzOkDisabled),ys("cdkFocusInitial","ok"===r.config.nzAutofocus||null),Wi(1),ha(" ",r.config.nzOkText||r.locale.okText," ")}}function eO(t,e){if(1&t&&(ms(0,JT,2,4,"button",8),ms(1,tO,2,5,"button",9)),2&t){var n=js();ws("ngIf",null!==n.config.nzCancelText),Wi(1),ws("ngIf",null!==n.config.nzOkText)}}var nO=["nz-modal-title",""];function rO(t,e){if(1&t&&(Ts(0),Ss(1,"div",2),Os()),2&t){var n=js();Wi(1),ws("innerHTML",n.config.nzTitle,ur)}}var iO=function(){},oO=function t(){_classCallCheck(this,t),this.nzClosable=!0,this.nzOkLoading=!1,this.nzOkDisabled=!1,this.nzCancelDisabled=!1,this.nzCancelLoading=!1,this.nzNoAnimation=!1,this.nzAutofocus="auto",this.nzKeyboard=!0,this.nzZIndex=1e3,this.nzWidth=520,this.nzCloseIcon="close",this.nzOkType="primary",this.nzModalType="default",this.nzOnCancel=iO,this.nzOnOk=iO,this.nzIconType="question-circle"},sO={modalContainer:Hp("modalContainer",[Kp("void, exit",Qp({})),Kp("enter",Qp({})),Yp("* => enter",Wp(".24s",Qp({}))),Yp("* => void, * => exit",Wp(".2s",Qp({})))])};function aO(t,e,n){return void 0===t?void 0===e?n:e:t}function uO(t){return{nzMask:t.nzMask,nzMaskClosable:t.nzMaskClosable,nzClosable:t.nzClosable,nzOkLoading:t.nzOkLoading,nzOkDisabled:t.nzOkDisabled,nzCancelDisabled:t.nzCancelDisabled,nzCancelLoading:t.nzCancelLoading,nzKeyboard:t.nzKeyboard,nzNoAnimation:t.nzNoAnimation,nzContent:t.nzContent,nzComponentParams:t.nzComponentParams,nzFooter:t.nzFooter,nzGetContainer:t.nzGetContainer,nzZIndex:t.nzZIndex,nzWidth:t.nzWidth,nzWrapClassName:t.nzWrapClassName,nzClassName:t.nzClassName,nzStyle:t.nzStyle,nzTitle:t.nzTitle,nzCloseIcon:t.nzCloseIcon,nzMaskStyle:t.nzMaskStyle,nzBodyStyle:t.nzBodyStyle,nzOkText:t.nzOkText,nzCancelText:t.nzCancelText,nzOkType:t.nzOkType,nzIconType:t.nzIconType,nzModalType:t.nzModalType,nzOnOk:t.nzOnOk,nzOnCancel:t.nzOnCancel,nzAfterOpen:t.nzAfterOpen,nzAfterClose:t.nzAfterClose,nzCloseOnNavigation:t.nzCloseOnNavigation,nzAutofocus:t.nzAutofocus}}function cO(){throw Error("Attempting to attach modal content after content is already attached")}var lO,hO,fO,dO,pO,vO,yO,gO,mO=((fO=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r,i,o,s,a,u,c,l){var h;return _classCallCheck(this,n),(h=e.call(this)).elementRef=t,h.focusTrapFactory=r,h.cdr=i,h.render=o,h.overlayRef=s,h.nzConfigService=a,h.config=u,h.animationType=l,h.animationStateChanged=new Pu,h.containerClick=new Pu,h.cancelTriggered=new Pu,h.okTriggered=new Pu,h.state="enter",h.isStringContent=!1,h.elementFocusedBeforeModalWasOpened=null,h.mouseDown=!1,h.oldMaskStyle=null,h.destroy$=new T,h.document=c,h.isStringContent="string"==typeof u.nzContent,h.setContainer(),h.nzConfigService.getConfigChangeEventForComponent("modal").pipe(Np(h.destroy$)).subscribe((function(){h.updateMaskClassname()})),h}return _createClass(n,[{key:"onContainerClick",value:function(t){t.target===t.currentTarget&&!this.mouseDown&&this.showMask&&this.maskClosable&&this.containerClick.emit()}},{key:"onMousedown",value:function(){this.mouseDown=!0}},{key:"onMouseup",value:function(){var t=this;this.mouseDown&&setTimeout((function(){t.mouseDown=!1}))}},{key:"onCloseClick",value:function(){this.cancelTriggered.emit()}},{key:"onOkClick",value:function(){this.okTriggered.emit()}},{key:"attachComponentPortal",value:function(t){return this.portalOutlet.hasAttached()&&cO(),this.savePreviouslyFocusedElement(),this.setModalTransformOrigin(),this.portalOutlet.attachComponentPortal(t)}},{key:"attachTemplatePortal",value:function(t){return this.portalOutlet.hasAttached()&&cO(),this.savePreviouslyFocusedElement(),this.portalOutlet.attachTemplatePortal(t)}},{key:"attachStringContent",value:function(){this.savePreviouslyFocusedElement()}},{key:"getNativeElement",value:function(){return this.elementRef.nativeElement}},{key:"animationDisabled",value:function(){return this.config.nzNoAnimation||"NoopAnimations"===this.animationType}},{key:"setModalTransformOrigin",value:function(){var t=this.modalElementRef.nativeElement;if(this.elementFocusedBeforeModalWasOpened){var e=this.elementFocusedBeforeModalWasOpened.getBoundingClientRect(),n=function(t){if(!t.getClientRects().length)return{top:0,left:0};var e=t.getBoundingClientRect(),n=t.ownerDocument.defaultView;return{top:e.top+n.pageYOffset,left:e.left+n.pageXOffset}}(this.elementFocusedBeforeModalWasOpened);this.render.setStyle(t,"transform-origin","".concat(n.left+e.width/2-t.offsetLeft,"px ").concat(n.top+e.height/2-t.offsetTop,"px 0px"))}}},{key:"savePreviouslyFocusedElement",value:function(){var t=this;this.focusTrap||(this.focusTrap=this.focusTrapFactory.create(this.elementRef.nativeElement)),this.document&&(this.elementFocusedBeforeModalWasOpened=this.document.activeElement,this.elementRef.nativeElement.focus&&Promise.resolve().then((function(){return t.elementRef.nativeElement.focus()})))}},{key:"trapFocus",value:function(){var t=this.elementRef.nativeElement;if(this.config.nzAutofocus)this.focusTrap.focusInitialElementWhenReady().then();else{var e=this.document.activeElement;e===t||t.contains(e)||t.focus()}}},{key:"restoreFocus",value:function(){var t=this.elementFocusedBeforeModalWasOpened;if(t&&"function"==typeof t.focus){var e=this.document.activeElement,n=this.elementRef.nativeElement;e&&e!==this.document.body&&e!==n&&!n.contains(e)||t.focus()}this.focusTrap&&this.focusTrap.destroy()}},{key:"setEnterAnimationClass",value:function(){if(!this.animationDisabled()){this.setModalTransformOrigin();var t=this.modalElementRef.nativeElement,e=this.overlayRef.backdropElement;t.classList.add("zoom-enter"),t.classList.add("zoom-enter-active"),e&&(e.classList.add("fade-enter"),e.classList.add("fade-enter-active"))}}},{key:"setExitAnimationClass",value:function(){var t=this.modalElementRef.nativeElement;t.classList.add("zoom-leave"),t.classList.add("zoom-leave-active"),this.setMaskExitAnimationClass()}},{key:"setMaskExitAnimationClass",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.overlayRef.backdropElement;if(e){if(this.animationDisabled()||t)return void e.classList.remove("ant-modal-mask");e.classList.add("fade-leave"),e.classList.add("fade-leave-active")}}},{key:"cleanAnimationClass",value:function(){if(!this.animationDisabled()){var t=this.overlayRef.backdropElement,e=this.modalElementRef.nativeElement;t&&(t.classList.remove("fade-enter"),t.classList.remove("fade-enter-active")),e.classList.remove("zoom-enter"),e.classList.remove("zoom-enter-active"),e.classList.remove("zoom-leave"),e.classList.remove("zoom-leave-active")}}},{key:"bindBackdropStyle",value:function(){var t=this,e=this.overlayRef.backdropElement;if(e&&(this.oldMaskStyle&&(Object.keys(this.oldMaskStyle).forEach((function(n){t.render.removeStyle(e,n)})),this.oldMaskStyle=null),"object"==typeof this.config.nzMaskStyle&&Object.keys(this.config.nzMaskStyle).length)){var n=Object.assign({},this.config.nzMaskStyle);Object.keys(n).forEach((function(r){t.render.setStyle(e,r,n[r])})),this.oldMaskStyle=n}}},{key:"setContainer",value:function(){var t=this.getContainer();t&&this.render.appendChild(t,this.elementRef.nativeElement)}},{key:"resetContainer",value:function(){this.getContainer()&&this.render.appendChild(this.overlayRef.overlayElement,this.elementRef.nativeElement)}},{key:"getContainer",value:function(){var t=this.config.nzGetContainer,e="function"==typeof t?t():t;return e instanceof HTMLElement?e:null}},{key:"updateMaskClassname",value:function(){var t=this.overlayRef.backdropElement;t&&(this.showMask?t.classList.add("ant-modal-mask"):t.classList.remove("ant-modal-mask"))}},{key:"onAnimationDone",value:function(t){"enter"===t.toState?(this.setContainer(),this.trapFocus()):"exit"===t.toState&&this.restoreFocus(),this.cleanAnimationClass(),this.animationStateChanged.emit(t)}},{key:"onAnimationStart",value:function(t){"enter"===t.toState?(this.setEnterAnimationClass(),this.bindBackdropStyle()):"exit"===t.toState&&(this.resetContainer(),this.setExitAnimationClass()),this.animationStateChanged.emit(t)}},{key:"startExitAnimation",value:function(){this.state="exit",this.cdr.markForCheck()}},{key:"ngOnDestroy",value:function(){this.setMaskExitAnimationClass(!0),this.destroy$.next(),this.destroy$.complete()}},{key:"showMask",get:function(){var t=this.nzConfigService.getConfigForComponent("modal")||{};return!!aO(this.config.nzMask,t.nzMask,!0)}},{key:"maskClosable",get:function(){var t=this.nzConfigService.getConfigForComponent("modal")||{};return!!aO(this.config.nzMaskClosable,t.nzMaskClosable,!0)}}]),n}(Zk)).\u0275fac=function(t){!function(){throw new Error("invalid")}()},fO.\u0275dir=oe({type:fO,features:[is]}),fO),_O=((hO=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r,i,o,s,a,u,c,l,h){var f;return _classCallCheck(this,n),(f=e.call(this,r,i,o,s,a,u,c,l,h)).i18n=t,f.config=c,f.cancelTriggered=new Pu,f.okTriggered=new Pu,f.i18n.localeChange.pipe(Np(f.destroy$)).subscribe((function(){f.locale=f.i18n.getLocaleData("Modal")})),f}return _createClass(n,[{key:"onCancel",value:function(){this.cancelTriggered.emit()}},{key:"onOk",value:function(){this.okTriggered.emit()}}]),n}(mO)).\u0275fac=function(t){return new(t||hO)(bs(VC),bs(Na),bs(I_),bs(eu),bs(za),bs(CE),bs(qf),bs(oO),bs(Zc,8),bs(vg,8))},hO.\u0275cmp=Jt({type:hO,selectors:[["nz-modal-confirm-container"]],viewQuery:function(t,e){var n;1&t&&(qu(tE,!0),qu(PT,!0)),2&t&&(Bu(n=Qu())&&(e.portalOutlet=n.first),Bu(n=Qu())&&(e.modalElementRef=n.first))},hostAttrs:["tabindex","-1","role","dialog"],hostVars:6,hostBindings:function(t,e){1&t&&(Rs("@modalContainer.start",(function(t){return e.onAnimationStart(t)}))("@modalContainer.done",(function(t){return e.onAnimationDone(t)})),Ps("click",(function(t){return e.onContainerClick(t)}))("mouseup",(function(){return e.onMouseup()}))),2&t&&(fa("@.disabled",e.config.nzNoAnimation)("@modalContainer",e.state),Xs(e.config.nzWrapClassName?"ant-modal-wrap "+e.config.nzWrapClassName:"ant-modal-wrap"),Ys("z-index",e.config.nzZIndex))},outputs:{cancelTriggered:"cancelTriggered",okTriggered:"okTriggered"},exportAs:["nzModalConfirmContainer"],features:[is],decls:17,vars:13,consts:[["role","document",1,"ant-modal",3,"ngClass","ngStyle","mousedown"],["modalElement",""],[1,"ant-modal-content"],["nz-modal-close","",3,"click",4,"ngIf"],[1,"ant-modal-body",3,"ngStyle"],[1,"ant-modal-confirm-body-wrapper"],[1,"ant-modal-confirm-body"],["nz-icon","",3,"nzType"],[1,"ant-modal-confirm-title"],[4,"nzStringTemplateOutlet"],[1,"ant-modal-confirm-content"],["cdkPortalOutlet",""],[3,"innerHTML",4,"ngIf"],[1,"ant-modal-confirm-btns"],["nz-button","",3,"nzLoading","disabled","click",4,"ngIf"],["nz-button","",3,"nzType","nzLoading","disabled","click",4,"ngIf"],["nz-modal-close","",3,"click"],[3,"innerHTML"],["nz-button","",3,"nzLoading","disabled","click"],["nz-button","",3,"nzType","nzLoading","disabled","click"]],template:function(t,e){1&t&&(ks(0,"div",0,1),Ps("mousedown",(function(){return e.onMousedown()})),xu(2,"nzToCssUnit"),ks(3,"div",2),ms(4,RT,1,0,"button",3),ks(5,"div",4),ks(6,"div",5),ks(7,"div",6),Ss(8,"i",7),ks(9,"span",8),ms(10,NT,2,1,"ng-container",9),Es(),ks(11,"div",10),ms(12,DT,0,0,"ng-template",11),ms(13,zT,1,1,"div",12),Es(),Es(),ks(14,"div",13),ms(15,jT,2,4,"button",14),ms(16,LT,2,5,"button",15),Es(),Es(),Es(),Es(),Es()),2&t&&(Ys("width",Au(2,11,null==e.config?null:e.config.nzWidth)),ws("ngClass",e.config.nzClassName)("ngStyle",e.config.nzStyle),Wi(4),ws("ngIf",e.config.nzClosable),Wi(1),ws("ngStyle",e.config.nzBodyStyle),Wi(3),ws("nzType",e.config.nzIconType),Wi(2),ws("nzStringTemplateOutlet",e.config.nzTitle),Wi(3),ws("ngIf",e.isStringContent),Wi(2),ws("ngIf",null!==e.config.nzCancelText),Wi(1),ws("ngIf",null!==e.config.nzOkText))},directives:function(){return[xl,Gl,Nl,Up,Pp,qC,tE,SO,Ig,wg]},pipes:function(){return[xT]},encapsulation:2,data:{animation:[sO.modalContainer]}}),hO),bO=((lO=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r,i,o,s,a,u,c,l){var h;return _classCallCheck(this,n),(h=e.call(this,t,r,i,o,s,a,u,c,l)).config=u,h}return n}(mO)).\u0275fac=function(t){return new(t||lO)(bs(Na),bs(I_),bs(eu),bs(za),bs(CE),bs(qf),bs(oO),bs(Zc,8),bs(vg,8))},lO.\u0275cmp=Jt({type:lO,selectors:[["nz-modal-container"]],viewQuery:function(t,e){var n;1&t&&(qu(tE,!0),qu(PT,!0)),2&t&&(Bu(n=Qu())&&(e.portalOutlet=n.first),Bu(n=Qu())&&(e.modalElementRef=n.first))},hostAttrs:["tabindex","-1","role","dialog"],hostVars:6,hostBindings:function(t,e){1&t&&(Rs("@modalContainer.start",(function(t){return e.onAnimationStart(t)}))("@modalContainer.done",(function(t){return e.onAnimationDone(t)})),Ps("click",(function(t){return e.onContainerClick(t)}))("mouseup",(function(){return e.onMouseup()}))),2&t&&(fa("@.disabled",e.config.nzNoAnimation)("@modalContainer",e.state),Xs(e.config.nzWrapClassName?"ant-modal-wrap "+e.config.nzWrapClassName:"ant-modal-wrap"),Ys("z-index",e.config.nzZIndex))},exportAs:["nzModalContainer"],features:[is],decls:10,vars:11,consts:[["role","document",1,"ant-modal",3,"ngClass","ngStyle","mousedown"],["modalElement",""],[1,"ant-modal-content"],["nz-modal-close","",3,"click",4,"ngIf"],["nz-modal-title","",4,"ngIf"],[1,"ant-modal-body",3,"ngStyle"],["cdkPortalOutlet",""],[3,"innerHTML",4,"ngIf"],["nz-modal-footer","",3,"modalRef","cancelTriggered","okTriggered",4,"ngIf"],["nz-modal-close","",3,"click"],["nz-modal-title",""],[3,"innerHTML"],["nz-modal-footer","",3,"modalRef","cancelTriggered","okTriggered"]],template:function(t,e){1&t&&(ks(0,"div",0,1),Ps("mousedown",(function(){return e.onMousedown()})),xu(2,"nzToCssUnit"),ks(3,"div",2),ms(4,FT,1,0,"button",3),ms(5,MT,1,0,"div",4),ks(6,"div",5),ms(7,VT,0,0,"ng-template",6),ms(8,UT,1,1,"div",7),Es(),ms(9,BT,1,1,"div",8),Es(),Es()),2&t&&(Ys("width",Au(2,9,null==e.config?null:e.config.nzWidth)),ws("ngClass",e.config.nzClassName)("ngStyle",e.config.nzStyle),Wi(4),ws("ngIf",e.config.nzClosable),Wi(1),ws("ngIf",e.config.nzTitle),Wi(1),ws("ngStyle",e.config.nzBodyStyle),Wi(2),ws("ngIf",e.isStringContent),Wi(1),ws("ngIf",null!==e.config.nzFooter))},directives:function(){return[xl,Gl,Nl,tE,SO,AO,TO]},pipes:function(){return[xT]},encapsulation:2,data:{animation:[sO.modalContainer]}}),lO),wO=function(){function t(e,n,r){var i=this;_classCallCheck(this,t),this.overlayRef=e,this.config=n,this.containerInstance=r,this.componentInstance=null,this.state=0,this.afterClose=new T,this.afterOpen=new T,r.animationStateChanged.pipe(zf((function(t){return"done"===t.phaseName&&"enter"===t.toState})),td(1)).subscribe((function(){i.afterOpen.next(),i.afterOpen.complete(),n.nzAfterOpen instanceof Pu&&n.nzAfterOpen.emit()})),r.animationStateChanged.pipe(zf((function(t){return"done"===t.phaseName&&"exit"===t.toState})),td(1)).subscribe((function(){clearTimeout(i.closeTimeout),i._finishDialogClose()})),r.containerClick.pipe(td(1)).subscribe((function(){!i.config.nzCancelLoading&&!i.config.nzOkLoading&&i.trigger("cancel")})),e.keydownEvents().pipe(zf((function(t){return i.config.nzKeyboard&&!i.config.nzCancelLoading&&!i.config.nzOkLoading&&27===t.keyCode&&!f_(t)}))).subscribe((function(t){t.preventDefault(),i.trigger("cancel")})),r.cancelTriggered.subscribe((function(){return i.trigger("cancel")})),r.okTriggered.subscribe((function(){return i.trigger("ok")})),e.detachments().subscribe((function(){i.afterClose.next(i.result),i.afterClose.complete(),n.nzAfterClose instanceof Pu&&n.nzAfterClose.emit(i.result),i.componentInstance=null,i.overlayRef.dispose()}))}return _createClass(t,[{key:"getContentComponent",value:function(){return this.componentInstance}},{key:"getElement",value:function(){return this.containerInstance.getNativeElement()}},{key:"destroy",value:function(t){this.close(t)}},{key:"triggerOk",value:function(){this.trigger("ok")}},{key:"triggerCancel",value:function(){this.trigger("cancel")}},{key:"open",value:function(){}},{key:"close",value:function(t){var e=this;this.result=t,this.containerInstance.animationStateChanged.pipe(zf((function(t){return"start"===t.phaseName})),td(1)).subscribe((function(t){e.overlayRef.detachBackdrop(),e.closeTimeout=setTimeout((function(){e._finishDialogClose()}),t.totalTime+100)})),this.containerInstance.startExitAnimation(),this.state=1}},{key:"updateConfig",value:function(t){Object.assign(this.config,t),this.containerInstance.bindBackdropStyle(),this.containerInstance.cdr.markForCheck()}},{key:"getState",value:function(){return this.state}},{key:"getConfig",value:function(){return this.config}},{key:"getBackdropElement",value:function(){return this.overlayRef.backdropElement}},{key:"trigger",value:function(t){var e,n=this,r={ok:this.config.nzOnOk,cancel:this.config.nzOnCancel}[t],i={ok:"nzOkLoading",cancel:"nzCancelLoading"}[t];if(!this.config[i])if(r instanceof Pu)r.emit(this.getContentComponent());else if("function"==typeof r){var o=r(this.getContentComponent());if(cd(o)){this.config[i]=!0;var s=function(t){n.config[i]=!1,n.closeWhitResult(t)};o.then(s).catch(s)}else!1!==(e=o)&&n.close(e)}}},{key:"closeWhitResult",value:function(t){!1!==t&&this.close(t)}},{key:"_finishDialogClose",value:function(){this.state=2,this.overlayRef.dispose()}}]),t}(),CO=((gO=function(){function t(e,n,r,i){var o=this;_classCallCheck(this,t),this.overlay=e,this.injector=n,this.nzConfigService=r,this.parentModal=i,this.openModalsAtThisLevel=[],this.afterAllClosedAtThisLevel=new T,this.afterAllClose=ST((function(){return o.openModals.length?o._afterAllClosed:o._afterAllClosed.pipe(Fp(void 0))}))}return _createClass(t,[{key:"create",value:function(t){return this.open(t.nzContent,t)}},{key:"closeAll",value:function(){this.closeModals(this.openModals)}},{key:"confirm",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"confirm";return"nzFooter"in t&&Xf('The Confirm-Modal doesn\'t support "nzFooter", this property will be ignored.'),"nzWidth"in t||(t.nzWidth=416),"nzMaskClosable"in t||(t.nzMaskClosable=!1),t.nzModalType="confirm",t.nzClassName="ant-modal-confirm ant-modal-confirm-".concat(e," ").concat(t.nzClassName||""),this.create(t)}},{key:"info",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.confirmFactory(t,"info")}},{key:"success",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.confirmFactory(t,"success")}},{key:"error",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.confirmFactory(t,"error")}},{key:"warning",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.confirmFactory(t,"warning")}},{key:"open",value:function(t,e){var n=this,r=function(t,e){return Object.assign(Object.assign({},e),t)}(e||{},new oO),i=this.createOverlay(r),o=this.attachModalContainer(i,r),s=this.attachModalContent(t,o,i,r);return o.modalRef=s,this.openModals.push(s),s.afterClose.subscribe((function(){return n.removeOpenModal(s)})),s}},{key:"removeOpenModal",value:function(t){var e=this.openModals.indexOf(t);e>-1&&(this.openModals.splice(e,1),this.openModals.length||this._afterAllClosed.next())}},{key:"closeModals",value:function(t){for(var e=t.length;e--;)t[e].close(),this.openModals.length||this._afterAllClosed.next()}},{key:"createOverlay",value:function(t){var e=this.nzConfigService.getConfigForComponent("modal")||{},n=new fE({hasBackdrop:!0,scrollStrategy:this.overlay.scrollStrategies.block(),positionStrategy:this.overlay.position().global(),disposeOnNavigation:aO(t.nzCloseOnNavigation,e.nzCloseOnNavigation,!0)});return aO(t.nzMask,e.nzMask,!0)&&(n.backdropClass="ant-modal-mask"),this.overlay.create(n)}},{key:"attachModalContainer",value:function(t,e){var n=new nE(e&&e.nzViewContainerRef&&e.nzViewContainerRef.injector||this.injector,new WeakMap([[CE,t],[oO,e]])),r=new Yk("confirm"===e.nzModalType?_O:bO,e.nzViewContainerRef,n);return t.attach(r).instance}},{key:"attachModalContent",value:function(t,e,n,r){var i=new wO(n,r,e);if(t instanceof su)e.attachTemplatePortal(new $k(t,null,{$implicit:r.nzComponentParams,modalRef:i}));else if(id(t)&&"string"!=typeof t){var o=this.createInjector(i,r),s=e.attachComponentPortal(new Yk(t,r.nzViewContainerRef,o));Object.assign(s.instance,r.nzComponentParams),i.componentInstance=s.instance}else e.attachStringContent();return i}},{key:"createInjector",value:function(t,e){var n=e&&e.nzViewContainerRef&&e.nzViewContainerRef.injector,r=new WeakMap([[wO,t]]);return new nE(n||this.injector,r)}},{key:"confirmFactory",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;return"nzIconType"in t||(t.nzIconType={info:"info-circle",success:"check-circle",error:"close-circle",warning:"exclamation-circle"}[e]),"nzCancelText"in t||(t.nzCancelText=null),this.confirm(t,e)}},{key:"ngOnDestroy",value:function(){this.closeModals(this.openModalsAtThisLevel),this.afterAllClosedAtThisLevel.complete()}},{key:"openModals",get:function(){return this.parentModal?this.parentModal.openModals:this.openModalsAtThisLevel}},{key:"_afterAllClosed",get:function(){var t=this.parentModal;return t?t._afterAllClosed:this.afterAllClosedAtThisLevel}}]),t}()).\u0275fac=function(t){return new(t||gO)(be(LE),be(ns),be(qf),be(gO,12))},gO.\u0275prov=ft({token:gO,factory:gO.\u0275fac}),gO),kO=((yO=function t(e,n){_classCallCheck(this,t),this.nzModalRef=e,this.templateRef=n,this.nzModalRef&&this.nzModalRef.updateConfig({nzFooter:this.templateRef})}).\u0275fac=function(t){return new(t||yO)(bs(wO,8),bs(su))},yO.\u0275dir=oe({type:yO,selectors:[["","nzModalFooter",""]],exportAs:["nzModalFooter"]}),yO),EO=((vO=function(){function t(e,n,r){_classCallCheck(this,t),this.cdr=e,this.modal=n,this.viewContainerRef=r,this.nzVisible=!1,this.nzClosable=!0,this.nzOkLoading=!1,this.nzOkDisabled=!1,this.nzCancelDisabled=!1,this.nzCancelLoading=!1,this.nzKeyboard=!0,this.nzNoAnimation=!1,this.nzZIndex=1e3,this.nzWidth=520,this.nzCloseIcon="close",this.nzOkType="primary",this.nzIconType="question-circle",this.nzModalType="default",this.nzAutofocus="auto",this.nzOnOk=new Pu,this.nzOnCancel=new Pu,this.nzAfterOpen=new Pu,this.nzAfterClose=new Pu,this.nzVisibleChange=new Pu,this.modalRef=null}return _createClass(t,[{key:"open",value:function(){if(this.nzVisible||(this.nzVisible=!0,this.nzVisibleChange.emit(!0)),!this.modalRef){var t=this.getConfig();this.modalRef=this.modal.create(t)}}},{key:"close",value:function(t){this.nzVisible&&(this.nzVisible=!1,this.nzVisibleChange.emit(!1)),this.modalRef&&(this.modalRef.close(t),this.modalRef=null)}},{key:"destroy",value:function(t){this.close(t)}},{key:"triggerOk",value:function(){var t;null===(t=this.modalRef)||void 0===t||t.triggerOk()}},{key:"triggerCancel",value:function(){var t;null===(t=this.modalRef)||void 0===t||t.triggerCancel()}},{key:"getContentComponent",value:function(){var t;return null===(t=this.modalRef)||void 0===t?void 0:t.getContentComponent()}},{key:"getElement",value:function(){var t;return null===(t=this.modalRef)||void 0===t?void 0:t.getElement()}},{key:"getModalRef",value:function(){return this.modalRef}},{key:"setFooterWithTemplate",value:function(t){var e=this;this.nzFooter=t,this.modalRef&&Promise.resolve().then((function(){e.modalRef.updateConfig({nzFooter:e.nzFooter})})),this.cdr.markForCheck()}},{key:"getConfig",value:function(){var t=uO(this);return t.nzViewContainerRef=this.viewContainerRef,this.nzContent||(t.nzContent=this.contentTemplateRef),t}},{key:"ngOnChanges",value:function(t){var e=t.nzVisible,n=Object(Df.h)(t,["nzVisible"]);Object.keys(n).length&&this.modalRef&&this.modalRef.updateConfig(uO(this)),e&&(this.nzVisible?this.open():this.close())}},{key:"ngOnDestroy",value:function(){var t;null===(t=this.modalRef)||void 0===t||t._finishDialogClose()}},{key:"modalFooter",set:function(t){t&&t.templateRef&&this.setFooterWithTemplate(t.templateRef)}},{key:"afterOpen",get:function(){return this.nzAfterOpen.asObservable()}},{key:"afterClose",get:function(){return this.nzAfterClose.asObservable()}}]),t}()).\u0275fac=function(t){return new(t||vO)(bs(eu),bs(CO),bs(fu))},vO.\u0275cmp=Jt({type:vO,selectors:[["nz-modal"]],contentQueries:function(t,e,n){var r;1&t&&Gu(n,kO,!0),2&t&&Bu(r=Qu())&&(e.modalFooter=r.first)},viewQuery:function(t,e){var n;1&t&&qu(su,!0),2&t&&Bu(n=Qu())&&(e.contentTemplateRef=n.first)},inputs:{nzVisible:"nzVisible",nzClosable:"nzClosable",nzOkLoading:"nzOkLoading",nzOkDisabled:"nzOkDisabled",nzCancelDisabled:"nzCancelDisabled",nzCancelLoading:"nzCancelLoading",nzKeyboard:"nzKeyboard",nzNoAnimation:"nzNoAnimation",nzZIndex:"nzZIndex",nzWidth:"nzWidth",nzCloseIcon:"nzCloseIcon",nzOkType:"nzOkType",nzIconType:"nzIconType",nzModalType:"nzModalType",nzAutofocus:"nzAutofocus",nzOnOk:"nzOnOk",nzOnCancel:"nzOnCancel",nzFooter:"nzFooter",nzMask:"nzMask",nzMaskClosable:"nzMaskClosable",nzCloseOnNavigation:"nzCloseOnNavigation",nzContent:"nzContent",nzComponentParams:"nzComponentParams",nzGetContainer:"nzGetContainer",nzWrapClassName:"nzWrapClassName",nzClassName:"nzClassName",nzStyle:"nzStyle",nzTitle:"nzTitle",nzMaskStyle:"nzMaskStyle",nzBodyStyle:"nzBodyStyle",nzOkText:"nzOkText",nzCancelText:"nzCancelText"},outputs:{nzOnOk:"nzOnOk",nzOnCancel:"nzOnCancel",nzAfterOpen:"nzAfterOpen",nzAfterClose:"nzAfterClose",nzVisibleChange:"nzVisibleChange"},exportAs:["nzModal"],features:[vr],ngContentSelectors:HT,decls:1,vars:0,template:function(t,e){1&t&&(Fs(),ms(0,qT,1,0,"ng-template"))},encapsulation:2,changeDetection:0}),Object(Df.c)([ad(),Object(Df.f)("design:type",Boolean)],vO.prototype,"nzMask",void 0),Object(Df.c)([ad(),Object(Df.f)("design:type",Boolean)],vO.prototype,"nzMaskClosable",void 0),Object(Df.c)([ad(),Object(Df.f)("design:type",Boolean)],vO.prototype,"nzCloseOnNavigation",void 0),Object(Df.c)([ad(),Object(Df.f)("design:type",Boolean)],vO.prototype,"nzVisible",void 0),Object(Df.c)([ad(),Object(Df.f)("design:type",Boolean)],vO.prototype,"nzClosable",void 0),Object(Df.c)([ad(),Object(Df.f)("design:type",Boolean)],vO.prototype,"nzOkLoading",void 0),Object(Df.c)([ad(),Object(Df.f)("design:type",Boolean)],vO.prototype,"nzOkDisabled",void 0),Object(Df.c)([ad(),Object(Df.f)("design:type",Boolean)],vO.prototype,"nzCancelDisabled",void 0),Object(Df.c)([ad(),Object(Df.f)("design:type",Boolean)],vO.prototype,"nzCancelLoading",void 0),Object(Df.c)([ad(),Object(Df.f)("design:type",Boolean)],vO.prototype,"nzKeyboard",void 0),Object(Df.c)([ad(),Object(Df.f)("design:type",Object)],vO.prototype,"nzNoAnimation",void 0),vO),SO=((pO=function t(e){_classCallCheck(this,t),this.config=e}).\u0275fac=function(t){return new(t||pO)(bs(oO))},pO.\u0275cmp=Jt({type:pO,selectors:[["button","nz-modal-close",""]],hostAttrs:["aria-label","Close",1,"ant-modal-close"],exportAs:["NzModalCloseBuiltin"],attrs:WT,decls:2,vars:1,consts:[[1,"ant-modal-close-x"],[4,"nzStringTemplateOutlet"],["nz-icon","",1,"ant-modal-close-icon",3,"nzType"]],template:function(t,e){1&t&&(ks(0,"span",0),ms(1,GT,2,1,"ng-container",1),Es()),2&t&&(Wi(1),ws("nzStringTemplateOutlet",e.config.nzCloseIcon))},directives:[qC,Up,Pp],encapsulation:2,changeDetection:0}),pO),TO=((dO=function(){function t(e,n){var r=this;_classCallCheck(this,t),this.i18n=e,this.config=n,this.buttonsFooter=!1,this.buttons=[],this.cancelTriggered=new Pu,this.okTriggered=new Pu,this.destroy$=new T,Array.isArray(n.nzFooter)&&(this.buttonsFooter=!0,this.buttons=n.nzFooter.map(OO)),this.i18n.localeChange.pipe(Np(this.destroy$)).subscribe((function(){r.locale=r.i18n.getLocaleData("Modal")}))}return _createClass(t,[{key:"onCancel",value:function(){this.cancelTriggered.emit()}},{key:"onOk",value:function(){this.okTriggered.emit()}},{key:"getButtonCallableProp",value:function(t,e){var n=t[e],r=this.modalRef.getContentComponent();return"function"==typeof n?n.apply(t,r&&[r]):n}},{key:"onButtonClick",value:function(t){if(!this.getButtonCallableProp(t,"loading")){var e=this.getButtonCallableProp(t,"onClick");t.autoLoading&&cd(e)&&(t.loading=!0,e.then((function(){return t.loading=!1})).catch((function(){return t.loading=!1})))}}},{key:"ngOnDestroy",value:function(){this.destroy$.next(),this.destroy$.complete()}}]),t}()).\u0275fac=function(t){return new(t||dO)(bs(VC),bs(oO))},dO.\u0275cmp=Jt({type:dO,selectors:[["div","nz-modal-footer",""]],hostAttrs:[1,"ant-modal-footer"],inputs:{modalRef:"modalRef"},outputs:{cancelTriggered:"cancelTriggered",okTriggered:"okTriggered"},exportAs:["NzModalFooterBuiltin"],attrs:QT,decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["defaultFooterButtons",""],[4,"nzStringTemplateOutlet"],[3,"innerHTML",4,"ngIf"],[4,"ngIf"],[3,"innerHTML"],["nz-button","",3,"hidden","nzLoading","disabled","nzType","nzShape","nzSize","nzGhost","click",4,"ngFor","ngForOf"],["nz-button","",3,"hidden","nzLoading","disabled","nzType","nzShape","nzSize","nzGhost","click"],["nz-button","",3,"nzLoading","disabled","click",4,"ngIf"],["nz-button","",3,"nzType","nzLoading","disabled","click",4,"ngIf"],["nz-button","",3,"nzLoading","disabled","click"],["nz-button","",3,"nzType","nzLoading","disabled","click"]],template:function(t,e){if(1&t&&(ms(0,ZT,2,1,"ng-container",0),ms(1,eO,2,2,"ng-template",null,1,Xu)),2&t){var n=_s(2);ws("ngIf",e.config.nzFooter)("ngIfElse",n)}},directives:[Nl,qC,Pl,Ig,wg,Up],encapsulation:2}),dO);function OO(t){return Object.assign({type:null,size:"default",autoLoading:!0,show:!0,loading:!1,disabled:!1},t)}var IO,xO,AO=((xO=function t(e){_classCallCheck(this,t),this.config=e}).\u0275fac=function(t){return new(t||xO)(bs(oO))},xO.\u0275cmp=Jt({type:xO,selectors:[["div","nz-modal-title",""]],hostAttrs:[1,"ant-modal-header"],exportAs:["NzModalTitleBuiltin"],attrs:nO,decls:2,vars:1,consts:[[1,"ant-modal-title"],[4,"nzStringTemplateOutlet"],[3,"innerHTML"]],template:function(t,e){1&t&&(ks(0,"div",0),ms(1,rO,2,1,"ng-container",1),Es()),2&t&&(Wi(1),ws("nzStringTemplateOutlet",e.config.nzTitle))},directives:[qC],encapsulation:2,changeDetection:0}),xO),PO=((IO=function t(){_classCallCheck(this,t)}).\u0275mod=re({type:IO}),IO.\u0275inj=dt({factory:function(t){return new(t||IO)},providers:[CO],imports:[[Kl,BE,WC,eE,UC,xg,Rp,AT,Tk]]}),IO),RO=function(){return{width:"100%"}};function NO(t,e){1&t&&Ss(0,"img",6),2&t&&ws("src",js().previewImage,cr)("ngStyle",Tu(2,RO))}var DO,zO,jO,LO,FO,MO,VO,UO,BO,qO,HO=((DO=function(){function t(e,n){var r=this;_classCallCheck(this,t),this.http=e,this.firebase=n,this.fileList=[],this.metadata={contentType:"ck1",customMetadata:{imageType:"surprised"}},this.storage=this.firebase.storage(),this.previewImage="",this.previewVisible=!1,this.handlePreview=function(t){return Object(Df.b)(r,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.url||t.preview,e.t0){e.next=5;break}return e.next=4,function(t){return new Promise((function(e,n){var r=new FileReader;r.readAsDataURL(t),r.onload=function(){return e(r.result)},r.onerror=function(t){return n(t)}}))}(t.originFileObj);case 4:t.preview=e.sent;case 5:this.previewImage=t.url||t.preview,this.previewVisible=!0;case 7:case"end":return e.stop()}}),e,this)})))}}return _createClass(t,[{key:"ngOnInit",value:function(){}},{key:"onFileChange",value:function(t){var e=t.file.originFileObj,n=this.storage.ref();n.child(e.name+".jpg"),n.child("images/".concat(e.name,".jpg")).put(e,this.metadata).then((function(t){}))}}]),t}()).\u0275fac=function(t){return new(t||DO)(bs(qd),bs(If))},DO.\u0275cmp=Jt({type:DO,selectors:[["app-file-upload"]],decls:9,vars:6,consts:[[1,"clearfix"],["nzListType","picture-card","nzMultiple","true",3,"nzFileList","nzShowButton","nzPreview","nzFileListChange","nzChange"],["nz-icon","","nzType","plus"],[2,"margin-top","8px"],[3,"nzVisible","nzContent","nzFooter","nzOnCancel"],["modalContent",""],[3,"src","ngStyle"]],template:function(t,e){if(1&t&&(ks(0,"div",0),ks(1,"nz-upload",1),Ps("nzFileListChange",(function(t){return e.fileList=t}))("nzChange",(function(t){return e.onFileChange(t)})),ks(2,"div"),Ss(3,"i",2),ks(4,"div",3),ca(5,"Upload"),Es(),Es(),Es(),ks(6,"nz-modal",4),Ps("nzOnCancel",(function(){return e.previewVisible=!1})),ms(7,NO,1,3,"ng-template",null,5,Xu),Es(),Es()),2&t){var n=_s(8);Wi(1),ws("nzFileList",e.fileList)("nzShowButton",e.fileList.length<8)("nzPreview",e.handlePreview),Wi(5),ws("nzVisible",e.previewVisible)("nzContent",n)("nzFooter",null)}},directives:[kT,Up,Pp,EO,Gl],styles:[""]}),DO),WO=n("tAZD"),GO=n.n(WO),QO={},KO=function(){function t(e){_classCallCheck(this,t),this.resultSelector=e}return _createClass(t,[{key:"call",value:function(t,e){return e.subscribe(new YO(t,this.resultSelector))}}]),t}(),YO=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r){var i;return _classCallCheck(this,n),(i=e.call(this,t)).resultSelector=r,i.active=0,i.values=[],i.observables=[],i}return _createClass(n,[{key:"_next",value:function(t){this.values.push(QO),this.observables.push(t)}},{key:"_complete",value:function(){var t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(var n=0;n<e;n++){var r=t[n];this.add(z(this,r,r,n))}}}},{key:"notifyComplete",value:function(t){0==(this.active-=1)&&this.destination.complete()}},{key:"notifyNext",value:function(t,e,n,r,i){var o=this.values,s=this.toRespond?o[n]===QO?--this.toRespond:this.toRespond:0;o[n]=e,0===s&&(this.resultSelector?this._tryResultSelector(o):this.destination.next(o.slice()))}},{key:"_tryResultSelector",value:function(t){var e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}]),n}(j),$O=((qO=function t(){_classCallCheck(this,t)}).\u0275mod=re({type:qO}),qO.\u0275inj=dt({factory:function(t){return new(t||qO)}}),qO),XO=((BO=function t(){_classCallCheck(this,t)}).\u0275mod=re({type:BO}),BO.\u0275inj=dt({factory:function(t){return new(t||BO)},imports:[[Kl,vd]]}),BO),ZO=((UO=function t(){_classCallCheck(this,t)}).\u0275mod=re({type:UO}),UO.\u0275inj=dt({factory:function(t){return new(t||UO)},imports:[[Kl,Rp,WC]]}),UO),JO=((VO=function t(){_classCallCheck(this,t)}).\u0275mod=re({type:VO}),VO.\u0275inj=dt({factory:function(t){return new(t||VO)},imports:[[Kl,XO,vd]]}),VO),tI=((MO=function t(){_classCallCheck(this,t)}).\u0275mod=re({type:MO}),MO.\u0275inj=dt({factory:function(t){return new(t||MO)},imports:[[Kl,Rp,vd,WC]]}),MO),eI=((FO=function t(){_classCallCheck(this,t)}).\u0275mod=re({type:FO}),FO.\u0275inj=dt({factory:function(t){return new(t||FO)},imports:[[Kl,BE,c_,WC,Tk,tI]]}),FO),nI=((LO=function t(){_classCallCheck(this,t)}).\u0275mod=re({type:LO}),LO.\u0275inj=dt({factory:function(t){return new(t||LO)},imports:[[Kl,Rp,vd]]}),LO),rI=((jO=function t(){_classCallCheck(this,t)}).\u0275mod=re({type:jO}),jO.\u0275inj=dt({factory:function(t){return new(t||jO)},imports:[[Kl,vd]]}),jO),iI=((zO=function t(){_classCallCheck(this,t)}).\u0275mod=re({type:zO}),zO.\u0275inj=dt({factory:function(t){return new(t||zO)},imports:[[Kl,Lg,WC]]}),zO);function oI(t){return function(e){return 0===t?cf():e.lift(new sI(t))}}var sI=function(){function t(e){if(_classCallCheck(this,t),this.total=e,this.total<0)throw new Jf}return _createClass(t,[{key:"call",value:function(t,e){return e.subscribe(new aI(t,this.total))}}]),t}(),aI=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r){var i;return _classCallCheck(this,n),(i=e.call(this,t)).total=r,i.ring=new Array,i.count=0,i}return _createClass(n,[{key:"_next",value:function(t){var e=this.ring,n=this.total,r=this.count++;e.length<n?e.push(t):e[r%n]=t}},{key:"_complete",value:function(){var t=this.destination,e=this.count;if(e>0)for(var n=this.count>=this.total?this.total:this.count,r=this.ring,i=0;i<n;i++){var o=e++%n;t.next(r[o])}t.complete()}}]),n}(v),uI=function t(e,n){_classCallCheck(this,t),this.id=e,this.url=n},cI=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r){var i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"imperative",s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return _classCallCheck(this,n),(i=e.call(this,t,r)).navigationTrigger=o,i.restoredState=s,i}return _createClass(n,[{key:"toString",value:function(){return"NavigationStart(id: ".concat(this.id,", url: '").concat(this.url,"')")}}]),n}(uI),lI=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r,i){var o;return _classCallCheck(this,n),(o=e.call(this,t,r)).urlAfterRedirects=i,o}return _createClass(n,[{key:"toString",value:function(){return"NavigationEnd(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"')")}}]),n}(uI),hI=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r,i){var o;return _classCallCheck(this,n),(o=e.call(this,t,r)).reason=i,o}return _createClass(n,[{key:"toString",value:function(){return"NavigationCancel(id: ".concat(this.id,", url: '").concat(this.url,"')")}}]),n}(uI),fI=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r,i){var o;return _classCallCheck(this,n),(o=e.call(this,t,r)).error=i,o}return _createClass(n,[{key:"toString",value:function(){return"NavigationError(id: ".concat(this.id,", url: '").concat(this.url,"', error: ").concat(this.error,")")}}]),n}(uI),dI=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r,i,o){var s;return _classCallCheck(this,n),(s=e.call(this,t,r)).urlAfterRedirects=i,s.state=o,s}return _createClass(n,[{key:"toString",value:function(){return"RoutesRecognized(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),n}(uI),pI=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r,i,o){var s;return _classCallCheck(this,n),(s=e.call(this,t,r)).urlAfterRedirects=i,s.state=o,s}return _createClass(n,[{key:"toString",value:function(){return"GuardsCheckStart(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),n}(uI),vI=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r,i,o,s){var a;return _classCallCheck(this,n),(a=e.call(this,t,r)).urlAfterRedirects=i,a.state=o,a.shouldActivate=s,a}return _createClass(n,[{key:"toString",value:function(){return"GuardsCheckEnd(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,", shouldActivate: ").concat(this.shouldActivate,")")}}]),n}(uI),yI=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r,i,o){var s;return _classCallCheck(this,n),(s=e.call(this,t,r)).urlAfterRedirects=i,s.state=o,s}return _createClass(n,[{key:"toString",value:function(){return"ResolveStart(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),n}(uI),gI=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r,i,o){var s;return _classCallCheck(this,n),(s=e.call(this,t,r)).urlAfterRedirects=i,s.state=o,s}return _createClass(n,[{key:"toString",value:function(){return"ResolveEnd(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),n}(uI),mI=function(){function t(e){_classCallCheck(this,t),this.route=e}return _createClass(t,[{key:"toString",value:function(){return"RouteConfigLoadStart(path: ".concat(this.route.path,")")}}]),t}(),_I=function(){function t(e){_classCallCheck(this,t),this.route=e}return _createClass(t,[{key:"toString",value:function(){return"RouteConfigLoadEnd(path: ".concat(this.route.path,")")}}]),t}(),bI=function(){function t(e){_classCallCheck(this,t),this.snapshot=e}return _createClass(t,[{key:"toString",value:function(){return"ChildActivationStart(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),t}(),wI=function(){function t(e){_classCallCheck(this,t),this.snapshot=e}return _createClass(t,[{key:"toString",value:function(){return"ChildActivationEnd(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),t}(),CI=function(){function t(e){_classCallCheck(this,t),this.snapshot=e}return _createClass(t,[{key:"toString",value:function(){return"ActivationStart(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),t}(),kI=function(){function t(e){_classCallCheck(this,t),this.snapshot=e}return _createClass(t,[{key:"toString",value:function(){return"ActivationEnd(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),t}(),EI=function(){function t(e,n,r){_classCallCheck(this,t),this.routerEvent=e,this.position=n,this.anchor=r}return _createClass(t,[{key:"toString",value:function(){return"Scroll(anchor: '".concat(this.anchor,"', position: '").concat(this.position?"".concat(this.position[0],", ").concat(this.position[1]):null,"')")}}]),t}(),SI=function(){function t(e){_classCallCheck(this,t),this.params=e||{}}return _createClass(t,[{key:"has",value:function(t){return Object.prototype.hasOwnProperty.call(this.params,t)}},{key:"get",value:function(t){if(this.has(t)){var e=this.params[t];return Array.isArray(e)?e[0]:e}return null}},{key:"getAll",value:function(t){if(this.has(t)){var e=this.params[t];return Array.isArray(e)?e:[e]}return[]}},{key:"keys",get:function(){return Object.keys(this.params)}}]),t}();function TI(t){return new SI(t)}function OI(t){var e=Error("NavigationCancelingError: "+t);return e.ngNavigationCancelingError=!0,e}function II(t,e,n){var r=n.path.split("/");if(r.length>t.length)return null;if("full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;for(var i={},o=0;o<r.length;o++){var s=r[o],a=t[o];if(s.startsWith(":"))i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function xI(t,e){var n,r=Object.keys(t),i=Object.keys(e);if(!r||!i||r.length!=i.length)return!1;for(var o=0;o<r.length;o++)if(!AI(t[n=r[o]],e[n]))return!1;return!0}function AI(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;var n=_toConsumableArray(t).sort(),r=_toConsumableArray(e).sort();return n.every((function(t,e){return r[e]===t}))}return t===e}function PI(t){return Array.prototype.concat.apply([],t)}function RI(t){return t.length>0?t[t.length-1]:null}function NI(t,e){for(var n in t)t.hasOwnProperty(n)&&e(t[n],n)}function DI(t){return As(t)?t:xs(t)?U(Promise.resolve(t)):lf(t)}function zI(t,e,n){return n?function(t,e){return xI(t,e)}(t.queryParams,e.queryParams)&&function t(e,n){if(!MI(e.segments,n.segments))return!1;if(e.numberOfChildren!==n.numberOfChildren)return!1;for(var r in n.children){if(!e.children[r])return!1;if(!t(e.children[r],n.children[r]))return!1}return!0}(t.root,e.root):function(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every((function(n){return AI(t[n],e[n])}))}(t.queryParams,e.queryParams)&&function t(e,n){return function e(n,r,i){if(n.segments.length>i.length)return!!MI(n.segments.slice(0,i.length),i)&&!r.hasChildren();if(n.segments.length===i.length){if(!MI(n.segments,i))return!1;for(var o in r.children){if(!n.children[o])return!1;if(!t(n.children[o],r.children[o]))return!1}return!0}var s=i.slice(0,n.segments.length),a=i.slice(n.segments.length);return!!MI(n.segments,s)&&!!n.children.primary&&e(n.children.primary,r,a)}(e,n,n.segments)}(t.root,e.root)}var jI=function(){function t(e,n,r){_classCallCheck(this,t),this.root=e,this.queryParams=n,this.fragment=r}return _createClass(t,[{key:"toString",value:function(){return qI.serialize(this)}},{key:"queryParamMap",get:function(){return this._queryParamMap||(this._queryParamMap=TI(this.queryParams)),this._queryParamMap}}]),t}(),LI=function(){function t(e,n){var r=this;_classCallCheck(this,t),this.segments=e,this.children=n,this.parent=null,NI(n,(function(t,e){return t.parent=r}))}return _createClass(t,[{key:"hasChildren",value:function(){return this.numberOfChildren>0}},{key:"toString",value:function(){return HI(this)}},{key:"numberOfChildren",get:function(){return Object.keys(this.children).length}}]),t}(),FI=function(){function t(e,n){_classCallCheck(this,t),this.path=e,this.parameters=n}return _createClass(t,[{key:"toString",value:function(){return $I(this)}},{key:"parameterMap",get:function(){return this._parameterMap||(this._parameterMap=TI(this.parameters)),this._parameterMap}}]),t}();function MI(t,e){return t.length===e.length&&t.every((function(t,n){return t.path===e[n].path}))}function VI(t,e){var n=[];return NI(t.children,(function(t,r){"primary"===r&&(n=n.concat(e(t,r)))})),NI(t.children,(function(t,r){"primary"!==r&&(n=n.concat(e(t,r)))})),n}var UI=function t(){_classCallCheck(this,t)},BI=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"parse",value:function(t){var e=new ex(t);return new jI(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}},{key:"serialize",value:function(t){return"".concat("/"+function t(e,n){if(!e.hasChildren())return HI(e);if(n){var r=e.children.primary?t(e.children.primary,!1):"",i=[];return NI(e.children,(function(e,n){"primary"!==n&&i.push("".concat(n,":").concat(t(e,!1)))})),i.length>0?"".concat(r,"(").concat(i.join("//"),")"):r}var o=VI(e,(function(n,r){return"primary"===r?[t(e.children.primary,!1)]:["".concat(r,":").concat(t(n,!1))]}));return 1===Object.keys(e.children).length&&null!=e.children.primary?"".concat(HI(e),"/").concat(o[0]):"".concat(HI(e),"/(").concat(o.join("//"),")")}(t.root,!0)).concat((e=t.queryParams,n=Object.keys(e).map((function(t){var n=e[t];return Array.isArray(n)?n.map((function(e){return"".concat(GI(t),"=").concat(GI(e))})).join("&"):"".concat(GI(t),"=").concat(GI(n))})),n.length?"?"+n.join("&"):"")).concat("string"==typeof t.fragment?"#"+encodeURI(t.fragment):"");var e,n}}]),t}(),qI=new BI;function HI(t){return t.segments.map((function(t){return $I(t)})).join("/")}function WI(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function GI(t){return WI(t).replace(/%3B/gi,";")}function QI(t){return WI(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function KI(t){return decodeURIComponent(t)}function YI(t){return KI(t.replace(/\+/g,"%20"))}function $I(t){return"".concat(QI(t.path)).concat((e=t.parameters,Object.keys(e).map((function(t){return";".concat(QI(t),"=").concat(QI(e[t]))})).join("")));var e}var XI=/^[^\/()?;=#]+/;function ZI(t){var e=t.match(XI);return e?e[0]:""}var JI=/^[^=?&#]+/,tx=/^[^?&#]+/,ex=function(){function t(e){_classCallCheck(this,t),this.url=e,this.remaining=e}return _createClass(t,[{key:"parseRootSegment",value:function(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new LI([],{}):new LI([],this.parseChildren())}},{key:"parseQueryParams",value:function(){var t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}},{key:"parseFragment",value:function(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}},{key:"parseChildren",value:function(){if(""===this.remaining)return{};this.consumeOptional("/");var t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());var e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));var n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n.primary=new LI(t,e)),n}},{key:"parseSegment",value:function(){var t=ZI(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error("Empty path url segment cannot have parameters: '".concat(this.remaining,"'."));return this.capture(t),new FI(KI(t),this.parseMatrixParams())}},{key:"parseMatrixParams",value:function(){for(var t={};this.consumeOptional(";");)this.parseParam(t);return t}},{key:"parseParam",value:function(t){var e=ZI(this.remaining);if(e){this.capture(e);var n="";if(this.consumeOptional("=")){var r=ZI(this.remaining);r&&(n=r,this.capture(n))}t[KI(e)]=KI(n)}}},{key:"parseQueryParam",value:function(t){var e,n,r=(e=this.remaining,(n=e.match(JI))?n[0]:"");if(r){this.capture(r);var i="";if(this.consumeOptional("=")){var o=function(t){var e=t.match(tx);return e?e[0]:""}(this.remaining);o&&(i=o,this.capture(i))}var s=YI(r),a=YI(i);if(t.hasOwnProperty(s)){var u=t[s];Array.isArray(u)||(u=[u],t[s]=u),u.push(a)}else t[s]=a}}},{key:"parseParens",value:function(t){var e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){var n=ZI(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error("Cannot parse url '".concat(this.url,"'"));var i=void 0;n.indexOf(":")>-1?(i=n.substr(0,n.indexOf(":")),this.capture(i),this.capture(":")):t&&(i="primary");var o=this.parseChildren();e[i]=1===Object.keys(o).length?o.primary:new LI([],o),this.consumeOptional("//")}return e}},{key:"peekStartsWith",value:function(t){return this.remaining.startsWith(t)}},{key:"consumeOptional",value:function(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}},{key:"capture",value:function(t){if(!this.consumeOptional(t))throw new Error('Expected "'.concat(t,'".'))}}]),t}(),nx=function(){function t(e){_classCallCheck(this,t),this._root=e}return _createClass(t,[{key:"parent",value:function(t){var e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}},{key:"children",value:function(t){var e=rx(t,this._root);return e?e.children.map((function(t){return t.value})):[]}},{key:"firstChild",value:function(t){var e=rx(t,this._root);return e&&e.children.length>0?e.children[0].value:null}},{key:"siblings",value:function(t){var e=ix(t,this._root);return e.length<2?[]:e[e.length-2].children.map((function(t){return t.value})).filter((function(e){return e!==t}))}},{key:"pathFromRoot",value:function(t){return ix(t,this._root).map((function(t){return t.value}))}},{key:"root",get:function(){return this._root.value}}]),t}();function rx(t,e){if(t===e.value)return e;var n,r=_createForOfIteratorHelper(e.children);try{for(r.s();!(n=r.n()).done;){var i=rx(t,n.value);if(i)return i}}catch(o){r.e(o)}finally{r.f()}return null}function ix(t,e){if(t===e.value)return[e];var n,r=_createForOfIteratorHelper(e.children);try{for(r.s();!(n=r.n()).done;){var i=ix(t,n.value);if(i.length)return i.unshift(e),i}}catch(o){r.e(o)}finally{r.f()}return[]}var ox=function(){function t(e,n){_classCallCheck(this,t),this.value=e,this.children=n}return _createClass(t,[{key:"toString",value:function(){return"TreeNode(".concat(this.value,")")}}]),t}();function sx(t){var e={};return t&&t.children.forEach((function(t){return e[t.value.outlet]=t})),e}var ax=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r){var i;return _classCallCheck(this,n),(i=e.call(this,t)).snapshot=r,dx(_assertThisInitialized(i),t),i}return _createClass(n,[{key:"toString",value:function(){return this.snapshot.toString()}}]),n}(nx);function ux(t,e){var n=function(t,e){var n=new hx([],{},{},"",{},"primary",e,null,t.root,-1,{});return new fx("",new ox(n,[]))}(t,e),r=new Ag([new FI("",{})]),i=new Ag({}),o=new Ag({}),s=new Ag({}),a=new Ag(""),u=new cx(r,i,s,a,o,"primary",e,n.root);return u.snapshot=n.root,new ax(new ox(u,[]),n)}var cx=function(){function t(e,n,r,i,o,s,a,u){_classCallCheck(this,t),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this._futureSnapshot=u}return _createClass(t,[{key:"toString",value:function(){return this.snapshot?this.snapshot.toString():"Future(".concat(this._futureSnapshot,")")}},{key:"routeConfig",get:function(){return this._futureSnapshot.routeConfig}},{key:"root",get:function(){return this._routerState.root}},{key:"parent",get:function(){return this._routerState.parent(this)}},{key:"firstChild",get:function(){return this._routerState.firstChild(this)}},{key:"children",get:function(){return this._routerState.children(this)}},{key:"pathFromRoot",get:function(){return this._routerState.pathFromRoot(this)}},{key:"paramMap",get:function(){return this._paramMap||(this._paramMap=this.params.pipe(L((function(t){return TI(t)})))),this._paramMap}},{key:"queryParamMap",get:function(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(L((function(t){return TI(t)})))),this._queryParamMap}}]),t}();function lx(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"emptyOnly",n=t.pathFromRoot,r=0;if("always"!==e)for(r=n.length-1;r>=1;){var i=n[r],o=n[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(o.component)break;r--}}return function(t){return t.reduce((function(t,e){return{params:Object.assign(Object.assign({},t.params),e.params),data:Object.assign(Object.assign({},t.data),e.data),resolve:Object.assign(Object.assign({},t.resolve),e._resolvedData)}}),{params:{},data:{},resolve:{}})}(n.slice(r))}var hx=function(){function t(e,n,r,i,o,s,a,u,c,l,h){_classCallCheck(this,t),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=u,this._urlSegment=c,this._lastPathIndex=l,this._resolve=h}return _createClass(t,[{key:"toString",value:function(){return"Route(url:'".concat(this.url.map((function(t){return t.toString()})).join("/"),"', path:'").concat(this.routeConfig?this.routeConfig.path:"","')")}},{key:"root",get:function(){return this._routerState.root}},{key:"parent",get:function(){return this._routerState.parent(this)}},{key:"firstChild",get:function(){return this._routerState.firstChild(this)}},{key:"children",get:function(){return this._routerState.children(this)}},{key:"pathFromRoot",get:function(){return this._routerState.pathFromRoot(this)}},{key:"paramMap",get:function(){return this._paramMap||(this._paramMap=TI(this.params)),this._paramMap}},{key:"queryParamMap",get:function(){return this._queryParamMap||(this._queryParamMap=TI(this.queryParams)),this._queryParamMap}}]),t}(),fx=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r){var i;return _classCallCheck(this,n),(i=e.call(this,r)).url=t,dx(_assertThisInitialized(i),r),i}return _createClass(n,[{key:"toString",value:function(){return px(this._root)}}]),n}(nx);function dx(t,e){e.value._routerState=t,e.children.forEach((function(e){return dx(t,e)}))}function px(t){var e=t.children.length>0?" { ".concat(t.children.map(px).join(", ")," } "):"";return"".concat(t.value).concat(e)}function vx(t){if(t.snapshot){var e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,xI(e.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),e.fragment!==n.fragment&&t.fragment.next(n.fragment),xI(e.params,n.params)||t.params.next(n.params),function(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;++n)if(!xI(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.url.next(n.url),xI(e.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function yx(t,e){var n,r;return xI(t.params,e.params)&&MI(n=t.url,r=e.url)&&n.every((function(t,e){return xI(t.parameters,r[e].parameters)}))&&!(!t.parent!=!e.parent)&&(!t.parent||yx(t.parent,e.parent))}function gx(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function mx(t){return"object"==typeof t&&null!=t&&t.outlets}function _x(t,e,n,r,i){var o={};return r&&NI(r,(function(t,e){o[e]=Array.isArray(t)?t.map((function(t){return""+t})):""+t})),new jI(n.root===t?e:function t(e,n,r){var i={};return NI(e.children,(function(e,o){i[o]=e===n?r:t(e,n,r)})),new LI(e.segments,i)}(n.root,t,e),o,i)}var bx=function(){function t(e,n,r){if(_classCallCheck(this,t),this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&gx(r[0]))throw new Error("Root segment cannot have matrix parameters");var i=r.find(mx);if(i&&i!==RI(r))throw new Error("{outlets:{}} has to be the last command")}return _createClass(t,[{key:"toRoot",value:function(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}]),t}(),wx=function t(e,n,r){_classCallCheck(this,t),this.segmentGroup=e,this.processChildren=n,this.index=r};function Cx(t,e,n){if(t||(t=new LI([],{})),0===t.segments.length&&t.hasChildren())return kx(t,e,n);var r=function(t,e,n){for(var r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};i<t.segments.length;){if(r>=n.length)return o;var s=t.segments[i],a=n[r];if(mx(a))break;var u=""+a,c=r<n.length-1?n[r+1]:null;if(i>0&&void 0===u)break;if(u&&c&&"object"==typeof c&&void 0===c.outlets){if(!Ox(u,c,s))return o;r+=2}else{if(!Ox(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){var o=new LI(t.segments.slice(0,r.pathIndex),{});return o.children.primary=new LI(t.segments.slice(r.pathIndex),t.children),kx(o,0,i)}return r.match&&0===i.length?new LI(t.segments,{}):r.match&&!t.hasChildren()?Ex(t,e,n):r.match?kx(t,0,i):Ex(t,e,n)}function kx(t,e,n){if(0===n.length)return new LI(t.segments,{});var r=function(t){return mx(t[0])?t[0].outlets:{primary:t}}(n),i={};return NI(r,(function(n,r){null!==n&&(i[r]=Cx(t.children[r],e,n))})),NI(t.children,(function(t,e){void 0===r[e]&&(i[e]=t)})),new LI(t.segments,i)}function Ex(t,e,n){for(var r=t.segments.slice(0,e),i=0;i<n.length;){var o=n[i];if(mx(o)){var s=Sx(o.outlets);return new LI(r,s)}if(0===i&&gx(n[0]))r.push(new FI(t.segments[e].path,n[0])),i++;else{var a=mx(o)?o.outlets.primary:""+o,u=i<n.length-1?n[i+1]:null;a&&u&&gx(u)?(r.push(new FI(a,Tx(u))),i+=2):(r.push(new FI(a,{})),i++)}}return new LI(r,{})}function Sx(t){var e={};return NI(t,(function(t,n){null!==t&&(e[n]=Ex(new LI([],{}),0,t))})),e}function Tx(t){var e={};return NI(t,(function(t,n){return e[n]=""+t})),e}function Ox(t,e,n){return t==n.path&&xI(e,n.parameters)}var Ix=function(){function t(e,n,r,i){_classCallCheck(this,t),this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i}return _createClass(t,[{key:"activate",value:function(t){var e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),vx(this.futureState.root),this.activateChildRoutes(e,n,t)}},{key:"deactivateChildRoutes",value:function(t,e,n){var r=this,i=sx(e);t.children.forEach((function(t){var e=t.value.outlet;r.deactivateRoutes(t,i[e],n),delete i[e]})),NI(i,(function(t,e){r.deactivateRouteAndItsChildren(t,n)}))}},{key:"deactivateRoutes",value:function(t,e,n){var r=t.value,i=e?e.value:null;if(r===i)if(r.component){var o=n.getContext(r.outlet);o&&this.deactivateChildRoutes(t,e,o.children)}else this.deactivateChildRoutes(t,e,n);else i&&this.deactivateRouteAndItsChildren(e,n)}},{key:"deactivateRouteAndItsChildren",value:function(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}},{key:"detachAndStoreRouteSubtree",value:function(t,e){var n=e.getContext(t.value.outlet);if(n&&n.outlet){var r=n.outlet.detach(),i=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:r,route:t,contexts:i})}}},{key:"deactivateRouteAndOutlet",value:function(t,e){var n=this,r=e.getContext(t.value.outlet);if(r){var i=sx(t),o=t.value.component?r.children:e;NI(i,(function(t,e){return n.deactivateRouteAndItsChildren(t,o)})),r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated())}}},{key:"activateChildRoutes",value:function(t,e,n){var r=this,i=sx(e);t.children.forEach((function(t){r.activateRoutes(t,i[t.value.outlet],n),r.forwardEvent(new kI(t.value.snapshot))})),t.children.length&&this.forwardEvent(new wI(t.value.snapshot))}},{key:"activateRoutes",value:function(t,e,n){var r=t.value,i=e?e.value:null;if(vx(r),r===i)if(r.component){var o=n.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,o.children)}else this.activateChildRoutes(t,e,n);else if(r.component){var s=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){var a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),xx(a.route)}else{var u=function(t){for(var e=t.parent;e;e=e.parent){var n=e.routeConfig;if(n&&n._loadedConfig)return n._loadedConfig;if(n&&n.component)return null}return null}(r.snapshot),c=u?u.module.componentFactoryResolver:null;s.attachRef=null,s.route=r,s.resolver=c,s.outlet&&s.outlet.activateWith(r,c),this.activateChildRoutes(t,null,s.children)}}else this.activateChildRoutes(t,null,n)}}]),t}();function xx(t){vx(t.value),t.children.forEach(xx)}var Ax=function t(e,n){_classCallCheck(this,t),this.routes=e,this.module=n};function Px(t){return"function"==typeof t}function Rx(t){return t instanceof jI}var Nx=Symbol("INITIAL_VALUE");function Dx(){return wb((function(t){return(function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=null,i=null;return I(e[e.length-1])&&(i=e.pop()),"function"==typeof e[e.length-1]&&(r=e.pop()),1===e.length&&u(e[0])&&(e=e[0]),G(e,i).lift(new KO(r))}).apply(void 0,_toConsumableArray(t.map((function(t){return t.pipe(td(1),Fp(Nx))})))).pipe(eb((function(t,e){var n=!1;return e.reduce((function(t,r,i){if(t!==Nx)return t;if(r===Nx&&(n=!0),!n){if(!1===r)return r;if(i===e.length-1||Rx(r))return r}return t}),t)}),Nx),zf((function(t){return t!==Nx})),L((function(t){return Rx(t)?t:!0===t})),td(1))}))}var zx,jx=((zx=function t(){_classCallCheck(this,t)}).\u0275fac=function(t){return new(t||zx)},zx.\u0275cmp=Jt({type:zx,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,e){1&t&&Ss(0,"router-outlet")},directives:function(){return[xA]},encapsulation:2}),zx);function Lx(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=0;n<t.length;n++){var r=t[n];Fx(r,Mx(e,r))}}function Fx(t,e){t.children&&Lx(t.children,e)}function Mx(t,e){return e?t||e.path?t&&!e.path?t+"/":!t&&e.path?e.path:"".concat(t,"/").concat(e.path):"":t}function Vx(t){var e=t.children&&t.children.map(Vx),n=e?Object.assign(Object.assign({},t),{children:e}):Object.assign({},t);return!n.component&&(e||n.loadChildren)&&n.outlet&&"primary"!==n.outlet&&(n.component=jx),n}function Ux(t){return t.outlet||"primary"}var Bx=function t(e){_classCallCheck(this,t),this.segmentGroup=e||null},qx=function t(e){_classCallCheck(this,t),this.urlTree=e};function Hx(t){return new b((function(e){return e.error(new Bx(t))}))}function Wx(t){return new b((function(e){return e.error(new qx(t))}))}function Gx(t){return new b((function(e){return e.error(new Error("Only absolute redirects can have named outlets. redirectTo: '".concat(t,"'")))}))}var Qx=function(){function t(e,n,r,i,o){_classCallCheck(this,t),this.configLoader=n,this.urlSerializer=r,this.urlTree=i,this.config=o,this.allowRedirects=!0,this.ngModule=e.get(cu)}return _createClass(t,[{key:"apply",value:function(){var t=this;return this.expandSegmentGroup(this.ngModule,this.config,this.urlTree.root,"primary").pipe(L((function(e){return t.createUrlTree(e,t.urlTree.queryParams,t.urlTree.fragment)}))).pipe(up((function(e){if(e instanceof qx)return t.allowRedirects=!1,t.match(e.urlTree);if(e instanceof Bx)throw t.noMatchError(e);throw e})))}},{key:"match",value:function(t){var e=this;return this.expandSegmentGroup(this.ngModule,this.config,t.root,"primary").pipe(L((function(n){return e.createUrlTree(n,t.queryParams,t.fragment)}))).pipe(up((function(t){if(t instanceof Bx)throw e.noMatchError(t);throw t})))}},{key:"noMatchError",value:function(t){return new Error("Cannot match any routes. URL Segment: '".concat(t.segmentGroup,"'"))}},{key:"createUrlTree",value:function(t,e,n){var r=t.segments.length>0?new LI([],{primary:t}):t;return new jI(r,e,n)}},{key:"expandSegmentGroup",value:function(t,e,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(t,e,n).pipe(L((function(t){return new LI([],t)}))):this.expandSegment(t,n,e,n.segments,r,!0)}},{key:"expandChildren",value:function(t,e,n){var r=this;return function(n,i){if(0===Object.keys(n).length)return lf({});var o=[],s=[],a={};return NI(n,(function(n,i){var u,c,l=(u=i,c=n,r.expandSegmentGroup(t,e,c,u)).pipe(L((function(t){return a[i]=t})));"primary"===i?o.push(l):s.push(l)})),lf.apply(null,o.concat(s)).pipe(jp(),function(t,e){var n=arguments.length>=2;return function(r){return r.pipe(t?zf((function(e,n){return t(e,n,r)})):m,oI(1),n?Vw(e):qw((function(){return new Mw})))}}(),L((function(){return a})))}(n.children)}},{key:"expandSegment",value:function(t,e,n,r,i,o){var s=this,a=function(t){return t.reduce((function(t,e){var n=Ux(e);return t.has(n)?t.get(n).push(e):t.set(n,[e]),t}),new Map)}(n);a.has(i)||a.set(i,[]);return U(Array.from(a.entries()).map((function(n){var a=_slicedToArray(n,2),u=a[0],c=function(n){return U(n).pipe(gd((function(a){return s.expandSegmentAgainstRoute(t,e,n,a,r,i,o).pipe(up((function(t){if(t instanceof Bx)return lf(null);throw t})))})),Qw((function(t){return null!==t})),up((function(t){if(t instanceof Mw||"EmptyError"===t.name){if(s.noLeftoversInUrl(e,r,i))return lf(new LI([],{}));throw new Bx(e)}throw t})))}(a[1]);return u===i?c:c.pipe(L((function(){return null})),up((function(){return lf(null)})))}))).pipe((function(t){return t.lift(new KO(void 0))}),Qw(),L((function(t){return t.find((function(t){return null!==t}))})))}},{key:"noLeftoversInUrl",value:function(t,e,n){return 0===e.length&&!t.children[n]}},{key:"expandSegmentAgainstRoute",value:function(t,e,n,r,i,o,s){return Ux(r)!==o&&""!==r.path?Hx(e):void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,i):s&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o):Hx(e)}},{key:"expandSegmentAgainstRouteUsingRedirect",value:function(t,e,n,r,i,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o)}},{key:"expandWildCardWithParamsAgainstRouteUsingRedirect",value:function(t,e,n,r){var i=this,o=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?Wx(o):this.lineralizeSegments(n,o).pipe(B((function(n){var o=new LI(n,{});return i.expandSegment(t,o,e,n,r,!1)})))}},{key:"expandRegularSegmentAgainstRouteUsingRedirect",value:function(t,e,n,r,i,o){var s=this,a=Kx(e,r,i),u=a.matched,c=a.consumedSegments,l=a.lastChild,h=a.positionalParamSegments;if(!u)return Hx(e);var f=this.applyRedirectCommands(c,r.redirectTo,h);return r.redirectTo.startsWith("/")?Wx(f):this.lineralizeSegments(r,f).pipe(B((function(r){return s.expandSegment(t,e,n,r.concat(i.slice(l)),o,!1)})))}},{key:"matchSegmentAgainstRoute",value:function(t,e,n,r){var i=this;if("**"===n.path)return n.loadChildren?this.configLoader.load(t.injector,n).pipe(L((function(t){return n._loadedConfig=t,new LI(r,{})}))):lf(new LI(r,{}));var o=Kx(e,n,r),s=o.matched,a=o.consumedSegments,u=o.lastChild;if(!s)return Hx(e);var c=r.slice(u);return this.getChildConfig(t,n,r).pipe(B((function(t){var n=t.module,r=t.routes,o=function(t,e,n,r){return n.length>0&&function(t,e,n){return n.some((function(n){return $x(t,e,n)&&"primary"!==Ux(n)}))}(t,n,r)?{segmentGroup:Yx(new LI(e,function(t,e){var n={};n.primary=e;var r,i=_createForOfIteratorHelper(t);try{for(i.s();!(r=i.n()).done;){var o=r.value;""===o.path&&"primary"!==Ux(o)&&(n[Ux(o)]=new LI([],{}))}}catch(s){i.e(s)}finally{i.f()}return n}(r,new LI(n,t.children)))),slicedSegments:[]}:0===n.length&&function(t,e,n){return n.some((function(n){return $x(t,e,n)}))}(t,n,r)?{segmentGroup:Yx(new LI(t.segments,function(t,e,n,r){var i,o={},s=_createForOfIteratorHelper(n);try{for(s.s();!(i=s.n()).done;){var a=i.value;$x(t,e,a)&&!r[Ux(a)]&&(o[Ux(a)]=new LI([],{}))}}catch(u){s.e(u)}finally{s.f()}return Object.assign(Object.assign({},r),o)}(t,n,r,t.children))),slicedSegments:n}:{segmentGroup:t,slicedSegments:n}}(e,a,c,r),s=o.segmentGroup,u=o.slicedSegments;return 0===u.length&&s.hasChildren()?i.expandChildren(n,r,s).pipe(L((function(t){return new LI(a,t)}))):0===r.length&&0===u.length?lf(new LI(a,{})):i.expandSegment(n,s,r,u,"primary",!0).pipe(L((function(t){return new LI(a.concat(t.segments),t.children)})))})))}},{key:"getChildConfig",value:function(t,e,n){var r=this;return e.children?lf(new Ax(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?lf(e._loadedConfig):this.runCanLoadGuards(t.injector,e,n).pipe(B((function(n){return n?r.configLoader.load(t.injector,e).pipe(L((function(t){return e._loadedConfig=t,t}))):function(t){return new b((function(e){return e.error(OI("Cannot load children because the guard of the route \"path: '".concat(t.path,"'\" returned false")))}))}(e)}))):lf(new Ax([],t))}},{key:"runCanLoadGuards",value:function(t,e,n){var r=this,i=e.canLoad;return i&&0!==i.length?lf(i.map((function(r){var i,o=t.get(r);if(function(t){return t&&Px(t.canLoad)}(o))i=o.canLoad(e,n);else{if(!Px(o))throw new Error("Invalid CanLoad guard");i=o(e,n)}return DI(i)}))).pipe(Dx(),Gh((function(t){if(Rx(t)){var e=OI('Redirecting to "'.concat(r.urlSerializer.serialize(t),'"'));throw e.url=t,e}})),L((function(t){return!0===t}))):lf(!0)}},{key:"lineralizeSegments",value:function(t,e){for(var n=[],r=e.root;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return lf(n);if(r.numberOfChildren>1||!r.children.primary)return Gx(t.redirectTo);r=r.children.primary}}},{key:"applyRedirectCommands",value:function(t,e,n){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,n)}},{key:"applyRedirectCreatreUrlTree",value:function(t,e,n,r){var i=this.createSegmentGroup(t,e.root,n,r);return new jI(i,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}},{key:"createQueryParams",value:function(t,e){var n={};return NI(t,(function(t,r){if("string"==typeof t&&t.startsWith(":")){var i=t.substring(1);n[r]=e[i]}else n[r]=t})),n}},{key:"createSegmentGroup",value:function(t,e,n,r){var i=this,o=this.createSegments(t,e.segments,n,r),s={};return NI(e.children,(function(e,o){s[o]=i.createSegmentGroup(t,e,n,r)})),new LI(o,s)}},{key:"createSegments",value:function(t,e,n,r){var i=this;return e.map((function(e){return e.path.startsWith(":")?i.findPosParam(t,e,r):i.findOrReturn(e,n)}))}},{key:"findPosParam",value:function(t,e,n){var r=n[e.path.substring(1)];if(!r)throw new Error("Cannot redirect to '".concat(t,"'. Cannot find '").concat(e.path,"'."));return r}},{key:"findOrReturn",value:function(t,e){var n,r=0,i=_createForOfIteratorHelper(e);try{for(i.s();!(n=i.n()).done;){var o=n.value;if(o.path===t.path)return e.splice(r),o;r++}}catch(s){i.e(s)}finally{i.f()}return t}}]),t}();function Kx(t,e,n){if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}:{matched:!0,consumedSegments:[],lastChild:0,positionalParamSegments:{}};var r=(e.matcher||II)(n,t,e);return r?{matched:!0,consumedSegments:r.consumed,lastChild:r.consumed.length,positionalParamSegments:r.posParams}:{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}}function Yx(t){if(1===t.numberOfChildren&&t.children.primary){var e=t.children.primary;return new LI(t.segments.concat(e.segments),e.children)}return t}function $x(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path&&void 0!==n.redirectTo}var Xx=function t(e){_classCallCheck(this,t),this.path=e,this.route=this.path[this.path.length-1]},Zx=function t(e,n){_classCallCheck(this,t),this.component=e,this.route=n};function Jx(t,e,n){var r=function(t){if(!t)return null;for(var e=t.parent;e;e=e.parent){var n=e.routeConfig;if(n&&n._loadedConfig)return n._loadedConfig}return null}(e);return(r?r.module.injector:n).get(t)}function tA(t,e,n){var r=sx(t),i=t.value;NI(r,(function(t,r){tA(t,i.component?e?e.children.getContext(r):null:e,n)})),n.canDeactivateChecks.push(new Zx(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function eA(t,e){return null!==t&&e&&e(new CI(t)),lf(!0)}function nA(t,e){return null!==t&&e&&e(new bI(t)),lf(!0)}function rA(t,e,n){var r=e.routeConfig?e.routeConfig.canActivate:null;return r&&0!==r.length?lf(r.map((function(r){return ST((function(){var i,o=Jx(r,e,n);if(function(t){return t&&Px(t.canActivate)}(o))i=DI(o.canActivate(e,t));else{if(!Px(o))throw new Error("Invalid CanActivate guard");i=DI(o(e,t))}return i.pipe(Qw())}))}))).pipe(Dx()):lf(!0)}function iA(t,e,n){var r=e[e.length-1],i=e.slice(0,e.length-1).reverse().map((function(t){return function(t){var e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(t)})).filter((function(t){return null!==t})).map((function(e){return ST((function(){return lf(e.guards.map((function(i){var o,s=Jx(i,e.node,n);if(function(t){return t&&Px(t.canActivateChild)}(s))o=DI(s.canActivateChild(r,t));else{if(!Px(s))throw new Error("Invalid CanActivateChild guard");o=DI(s(r,t))}return o.pipe(Qw())}))).pipe(Dx())}))}));return lf(i).pipe(Dx())}var oA=function t(){_classCallCheck(this,t)},sA=function(){function t(e,n,r,i,o,s){_classCallCheck(this,t),this.rootComponentType=e,this.config=n,this.urlTree=r,this.url=i,this.paramsInheritanceStrategy=o,this.relativeLinkResolution=s}return _createClass(t,[{key:"recognize",value:function(){try{var t=cA(this.urlTree.root,[],[],this.config,this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,"primary"),n=new hx([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},"primary",this.rootComponentType,null,this.urlTree.root,-1,{}),r=new ox(n,e),i=new fx(this.url,r);return this.inheritParamsAndData(i._root),lf(i)}catch(o){return new b((function(t){return t.error(o)}))}}},{key:"inheritParamsAndData",value:function(t){var e=this,n=t.value,r=lx(n,this.paramsInheritanceStrategy);n.params=Object.freeze(r.params),n.data=Object.freeze(r.data),t.children.forEach((function(t){return e.inheritParamsAndData(t)}))}},{key:"processSegmentGroup",value:function(t,e,n){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,n)}},{key:"processChildren",value:function(t,e){var n,r=this,i=VI(e,(function(e,n){return r.processSegmentGroup(t,e,n)}));return n={},i.forEach((function(t){var e=n[t.value.outlet];if(e){var r=e.url.map((function(t){return t.toString()})).join("/"),i=t.value.url.map((function(t){return t.toString()})).join("/");throw new Error("Two segments cannot have the same outlet name: '".concat(r,"' and '").concat(i,"'."))}n[t.value.outlet]=t.value})),i.sort((function(t,e){return"primary"===t.value.outlet?-1:"primary"===e.value.outlet?1:t.value.outlet.localeCompare(e.value.outlet)})),i}},{key:"processSegment",value:function(t,e,n,r){var i,o=_createForOfIteratorHelper(t);try{for(o.s();!(i=o.n()).done;){var s=i.value;try{return this.processSegmentAgainstRoute(s,e,n,r)}catch(a){if(!(a instanceof oA))throw a}}}catch(u){o.e(u)}finally{o.f()}if(this.noLeftoversInUrl(e,n,r))return[];throw new oA}},{key:"noLeftoversInUrl",value:function(t,e,n){return 0===e.length&&!t.children[n]}},{key:"processSegmentAgainstRoute",value:function(t,e,n,r){if(t.redirectTo)throw new oA;if((t.outlet||"primary")!==r)throw new oA;var i,o=[],s=[];if("**"===t.path){var a=n.length>0?RI(n).parameters:{};i=new hx(n,a,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,fA(t),r,t.component,t,aA(e),uA(e)+n.length,dA(t))}else{var u=function(t,e,n){if(""===e.path){if("full"===e.pathMatch&&(t.hasChildren()||n.length>0))throw new oA;return{consumedSegments:[],lastChild:0,parameters:{}}}var r=(e.matcher||II)(n,t,e);if(!r)throw new oA;var i={};NI(r.posParams,(function(t,e){i[e]=t.path}));var o=r.consumed.length>0?Object.assign(Object.assign({},i),r.consumed[r.consumed.length-1].parameters):i;return{consumedSegments:r.consumed,lastChild:r.consumed.length,parameters:o}}(e,t,n);o=u.consumedSegments,s=n.slice(u.lastChild),i=new hx(o,u.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,fA(t),r,t.component,t,aA(e),uA(e)+o.length,dA(t))}var c=function(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(t),l=cA(e,o,s,c,this.relativeLinkResolution),h=l.segmentGroup,f=l.slicedSegments;if(0===f.length&&h.hasChildren()){var d=this.processChildren(c,h);return[new ox(i,d)]}if(0===c.length&&0===f.length)return[new ox(i,[])];var p=this.processSegment(c,h,f,"primary");return[new ox(i,p)]}}]),t}();function aA(t){for(var e=t;e._sourceSegment;)e=e._sourceSegment;return e}function uA(t){for(var e=t,n=e._segmentIndexShift?e._segmentIndexShift:0;e._sourceSegment;)n+=(e=e._sourceSegment)._segmentIndexShift?e._segmentIndexShift:0;return n-1}function cA(t,e,n,r,i){if(n.length>0&&function(t,e,n){return n.some((function(n){return lA(t,e,n)&&"primary"!==hA(n)}))}(t,n,r)){var o=new LI(e,function(t,e,n,r){var i={};i.primary=r,r._sourceSegment=t,r._segmentIndexShift=e.length;var o,s=_createForOfIteratorHelper(n);try{for(s.s();!(o=s.n()).done;){var a=o.value;if(""===a.path&&"primary"!==hA(a)){var u=new LI([],{});u._sourceSegment=t,u._segmentIndexShift=e.length,i[hA(a)]=u}}}catch(c){s.e(c)}finally{s.f()}return i}(t,e,r,new LI(n,t.children)));return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:[]}}if(0===n.length&&function(t,e,n){return n.some((function(n){return lA(t,e,n)}))}(t,n,r)){var s=new LI(t.segments,function(t,e,n,r,i,o){var s,a={},u=_createForOfIteratorHelper(r);try{for(u.s();!(s=u.n()).done;){var c=s.value;if(lA(t,n,c)&&!i[hA(c)]){var l=new LI([],{});l._sourceSegment=t,l._segmentIndexShift="legacy"===o?t.segments.length:e.length,a[hA(c)]=l}}}catch(h){u.e(h)}finally{u.f()}return Object.assign(Object.assign({},i),a)}(t,e,n,r,t.children,i));return s._sourceSegment=t,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:n}}var a=new LI(t.segments,t.children);return a._sourceSegment=t,a._segmentIndexShift=e.length,{segmentGroup:a,slicedSegments:n}}function lA(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path&&void 0===n.redirectTo}function hA(t){return t.outlet||"primary"}function fA(t){return t.data||{}}function dA(t){return t.resolve||{}}function pA(t){return function(e){return e.pipe(wb((function(e){var n=t(e);return n?U(n).pipe(L((function(){return e}))):U([e])})))}}var vA=function(t){_inherits(n,t);var e=_createSuper(n);function n(){return _classCallCheck(this,n),e.apply(this,arguments)}return n}(function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"shouldDetach",value:function(t){return!1}},{key:"store",value:function(t,e){}},{key:"shouldAttach",value:function(t){return!1}},{key:"retrieve",value:function(t){return null}},{key:"shouldReuseRoute",value:function(t,e){return t.routeConfig===e.routeConfig}}]),t}()),yA=new wt("ROUTES"),gA=function(){function t(e,n,r,i){_classCallCheck(this,t),this.loader=e,this.compiler=n,this.onLoadStartListener=r,this.onLoadEndListener=i}return _createClass(t,[{key:"load",value:function(t,e){var n=this;return this.onLoadStartListener&&this.onLoadStartListener(e),this.loadModuleFactory(e.loadChildren).pipe(L((function(r){n.onLoadEndListener&&n.onLoadEndListener(e);var i=r.create(t);return new Ax(PI(i.injector.get(yA)).map(Vx),i)})))}},{key:"loadModuleFactory",value:function(t){var e=this;return"string"==typeof t?U(this.loader.load(t)):DI(t()).pipe(B((function(t){return t instanceof lu?lf(t):U(e.compiler.compileModuleAsync(t))})))}}]),t}(),mA=function t(){_classCallCheck(this,t),this.outlet=null,this.route=null,this.resolver=null,this.children=new _A,this.attachRef=null},_A=function(){function t(){_classCallCheck(this,t),this.contexts=new Map}return _createClass(t,[{key:"onChildOutletCreated",value:function(t,e){var n=this.getOrCreateContext(t);n.outlet=e,this.contexts.set(t,n)}},{key:"onChildOutletDestroyed",value:function(t){var e=this.getContext(t);e&&(e.outlet=null)}},{key:"onOutletDeactivated",value:function(){var t=this.contexts;return this.contexts=new Map,t}},{key:"onOutletReAttached",value:function(t){this.contexts=t}},{key:"getOrCreateContext",value:function(t){var e=this.getContext(t);return e||(e=new mA,this.contexts.set(t,e)),e}},{key:"getContext",value:function(t){return this.contexts.get(t)||null}}]),t}(),bA=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"shouldProcessUrl",value:function(t){return!0}},{key:"extract",value:function(t){return t}},{key:"merge",value:function(t,e){return t}}]),t}();function wA(t){throw t}function CA(t,e,n){return e.parse("/")}function kA(t,e){return lf(null)}var EA,SA,TA,OA,IA=((SA=function(){function t(e,n,r,i,o,s,a,u){var c=this;_classCallCheck(this,t),this.rootComponentType=e,this.urlSerializer=n,this.rootContexts=r,this.location=i,this.config=u,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.lastLocationChangeInfo=null,this.navigationId=0,this.isNgZoneEnabled=!1,this.events=new T,this.errorHandler=wA,this.malformedUriErrorHandler=CA,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:kA,afterPreactivation:kA},this.urlHandlingStrategy=new bA,this.routeReuseStrategy=new vA,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.ngModule=o.get(cu),this.console=o.get(sc);var l=o.get(_c);this.isNgZoneEnabled=l instanceof _c,this.resetConfig(u),this.currentUrlTree=new jI(new LI([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new gA(s,a,(function(t){return c.triggerEvent(new mI(t))}),(function(t){return c.triggerEvent(new _I(t))})),this.routerState=ux(this.currentUrlTree,this.rootComponentType),this.transitions=new Ag({id:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}return _createClass(t,[{key:"setupNavigations",value:function(t){var e=this,n=this.events;return t.pipe(zf((function(t){return 0!==t.id})),L((function(t){return Object.assign(Object.assign({},t),{extractedUrl:e.urlHandlingStrategy.extract(t.rawUrl)})})),wb((function(t){var r,i,o,s=!1,a=!1;return lf(t).pipe(Gh((function(t){e.currentNavigation={id:t.id,initialUrl:t.currentRawUrl,extractedUrl:t.extractedUrl,trigger:t.source,extras:t.extras,previousNavigation:e.lastSuccessfulNavigation?Object.assign(Object.assign({},e.lastSuccessfulNavigation),{previousNavigation:null}):null}})),wb((function(t){var r,i,o,s,a=!e.navigated||t.extractedUrl.toString()!==e.browserUrlTree.toString();if(("reload"===e.onSameUrlNavigation||a)&&e.urlHandlingStrategy.shouldProcessUrl(t.rawUrl))return lf(t).pipe(wb((function(t){var r=e.transitions.getValue();return n.next(new cI(t.id,e.serializeUrl(t.extractedUrl),t.source,t.restoredState)),r!==e.transitions.getValue()?uf:[t]})),wb((function(t){return Promise.resolve(t)})),(r=e.ngModule.injector,i=e.configLoader,o=e.urlSerializer,s=e.config,function(t){return t.pipe(wb((function(t){return function(t,e,n,r,i){return new Qx(t,e,n,r,i).apply()}(r,i,o,t.extractedUrl,s).pipe(L((function(e){return Object.assign(Object.assign({},t),{urlAfterRedirects:e})})))})))}),Gh((function(t){e.currentNavigation=Object.assign(Object.assign({},e.currentNavigation),{finalUrl:t.urlAfterRedirects})})),function(t,n,r,i,o){return function(r){return r.pipe(B((function(r){return function(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"emptyOnly",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"legacy";return new sA(t,e,n,r,i,o).recognize()}(t,n,r.urlAfterRedirects,(s=r.urlAfterRedirects,e.serializeUrl(s)),i,o).pipe(L((function(t){return Object.assign(Object.assign({},r),{targetSnapshot:t})})));var s})))}}(e.rootComponentType,e.config,0,e.paramsInheritanceStrategy,e.relativeLinkResolution),Gh((function(t){"eager"===e.urlUpdateStrategy&&(t.extras.skipLocationChange||e.setBrowserUrl(t.urlAfterRedirects,!!t.extras.replaceUrl,t.id,t.extras.state),e.browserUrlTree=t.urlAfterRedirects)})),Gh((function(t){var r=new dI(t.id,e.serializeUrl(t.extractedUrl),e.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);n.next(r)})));if(a&&e.rawUrlTree&&e.urlHandlingStrategy.shouldProcessUrl(e.rawUrlTree)){var u=t.id,c=t.extractedUrl,l=t.source,h=t.restoredState,f=t.extras,d=new cI(u,e.serializeUrl(c),l,h);n.next(d);var p=ux(c,e.rootComponentType).snapshot;return lf(Object.assign(Object.assign({},t),{targetSnapshot:p,urlAfterRedirects:c,extras:Object.assign(Object.assign({},f),{skipLocationChange:!1,replaceUrl:!1})}))}return e.rawUrlTree=t.rawUrl,e.browserUrlTree=t.urlAfterRedirects,t.resolve(null),uf})),pA((function(t){var n=t.targetSnapshot,r=t.id,i=t.extractedUrl,o=t.rawUrl,s=t.extras,a=s.skipLocationChange,u=s.replaceUrl;return e.hooks.beforePreactivation(n,{navigationId:r,appliedUrlTree:i,rawUrlTree:o,skipLocationChange:!!a,replaceUrl:!!u})})),Gh((function(t){var n=new pI(t.id,e.serializeUrl(t.extractedUrl),e.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.triggerEvent(n)})),L((function(t){return Object.assign(Object.assign({},t),{guards:(n=t.targetSnapshot,r=t.currentSnapshot,i=e.rootContexts,o=n._root,function t(e,n,r,i){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{canDeactivateChecks:[],canActivateChecks:[]},s=sx(n);return e.children.forEach((function(e){!function(e,n,r,i){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{canDeactivateChecks:[],canActivateChecks:[]},s=e.value,a=n?n.value:null,u=r?r.getContext(e.value.outlet):null;if(a&&s.routeConfig===a.routeConfig){var c=function(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!MI(t.url,e.url);case"pathParamsOrQueryParamsChange":return!MI(t.url,e.url)||!xI(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!yx(t,e)||!xI(t.queryParams,e.queryParams);case"paramsChange":default:return!yx(t,e)}}(a,s,s.routeConfig.runGuardsAndResolvers);c?o.canActivateChecks.push(new Xx(i)):(s.data=a.data,s._resolvedData=a._resolvedData),t(e,n,s.component?u?u.children:null:r,i,o),c&&u&&u.outlet&&u.outlet.isActivated&&o.canDeactivateChecks.push(new Zx(u.outlet.component,a))}else a&&tA(n,u,o),o.canActivateChecks.push(new Xx(i)),t(e,null,s.component?u?u.children:null:r,i,o)}(e,s[e.value.outlet],r,i.concat([e.value]),o),delete s[e.value.outlet]})),NI(s,(function(t,e){return tA(t,r.getContext(e),o)})),o}(o,r?r._root:null,i,[o.value]))});var n,r,i,o})),function(t,e){return function(n){return n.pipe(B((function(n){var r=n.targetSnapshot,i=n.currentSnapshot,o=n.guards,s=o.canActivateChecks,a=o.canDeactivateChecks;return 0===a.length&&0===s.length?lf(Object.assign(Object.assign({},n),{guardsResult:!0})):function(t,e,n,r){return U(t).pipe(B((function(t){return function(t,e,n,r,i){var o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return o&&0!==o.length?lf(o.map((function(o){var s,a=Jx(o,e,i);if(function(t){return t&&Px(t.canDeactivate)}(a))s=DI(a.canDeactivate(t,e,n,r));else{if(!Px(a))throw new Error("Invalid CanDeactivate guard");s=DI(a(t,e,n,r))}return s.pipe(Qw())}))).pipe(Dx()):lf(!0)}(t.component,t.route,n,e,r)})),Qw((function(t){return!0!==t}),!0))}(a,r,i,t).pipe(B((function(n){return n&&"boolean"==typeof n?function(t,e,n,r){return U(e).pipe(gd((function(e){return U([nA(e.route.parent,r),eA(e.route,r),iA(t,e.path,n),rA(t,e.route,n)]).pipe(jp(),Qw((function(t){return!0!==t}),!0))})),Qw((function(t){return!0!==t}),!0))}(r,s,t,e):lf(n)})),L((function(t){return Object.assign(Object.assign({},n),{guardsResult:t})})))})))}}(e.ngModule.injector,(function(t){return e.triggerEvent(t)})),Gh((function(t){if(Rx(t.guardsResult)){var n=OI('Redirecting to "'.concat(e.serializeUrl(t.guardsResult),'"'));throw n.url=t.guardsResult,n}})),Gh((function(t){var n=new vI(t.id,e.serializeUrl(t.extractedUrl),e.serializeUrl(t.urlAfterRedirects),t.targetSnapshot,!!t.guardsResult);e.triggerEvent(n)})),zf((function(t){if(!t.guardsResult){e.resetUrlToCurrentUrlTree();var r=new hI(t.id,e.serializeUrl(t.extractedUrl),"");return n.next(r),t.resolve(!1),!1}return!0})),pA((function(t){if(t.guards.canActivateChecks.length)return lf(t).pipe(Gh((function(t){var n=new yI(t.id,e.serializeUrl(t.extractedUrl),e.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.triggerEvent(n)})),wb((function(t){var r,i,o=!1;return lf(t).pipe((r=e.paramsInheritanceStrategy,i=e.ngModule.injector,function(t){return t.pipe(B((function(t){var e=t.targetSnapshot,n=t.guards.canActivateChecks;if(!n.length)return lf(t);var o=0;return U(n).pipe(gd((function(t){return function(t,e,n,r){return function(t,e,n,r){var i=Object.keys(t);if(0===i.length)return lf({});var o={};return U(i).pipe(B((function(i){return function(t,e,n,r){var i=Jx(t,e,r);return DI(i.resolve?i.resolve(e,n):i(e,n))}(t[i],e,n,r).pipe(Gh((function(t){o[i]=t})))})),oI(1),B((function(){return Object.keys(o).length===i.length?lf(o):uf})))}(t._resolve,t,e,r).pipe(L((function(e){return t._resolvedData=e,t.data=Object.assign(Object.assign({},t.data),lx(t,n).resolve),null})))}(t.route,e,r,i)})),Gh((function(){return o++})),oI(1),B((function(e){return o===n.length?lf(t):uf})))})))}),Gh({next:function(){return o=!0},complete:function(){if(!o){var r=new hI(t.id,e.serializeUrl(t.extractedUrl),"At least one route resolver didn't emit any value.");n.next(r),t.resolve(!1)}}}))})),Gh((function(t){var n=new gI(t.id,e.serializeUrl(t.extractedUrl),e.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.triggerEvent(n)})))})),pA((function(t){var n=t.targetSnapshot,r=t.id,i=t.extractedUrl,o=t.rawUrl,s=t.extras,a=s.skipLocationChange,u=s.replaceUrl;return e.hooks.afterPreactivation(n,{navigationId:r,appliedUrlTree:i,rawUrlTree:o,skipLocationChange:!!a,replaceUrl:!!u})})),L((function(t){var n=function(t,e,n){var r=function t(e,n,r){if(r&&e.shouldReuseRoute(n.value,r.value.snapshot)){var i=r.value;i._futureSnapshot=n.value;var o=function(e,n,r){return n.children.map((function(n){var i,o=_createForOfIteratorHelper(r.children);try{for(o.s();!(i=o.n()).done;){var s=i.value;if(e.shouldReuseRoute(n.value,s.value.snapshot))return t(e,n,s)}}catch(a){o.e(a)}finally{o.f()}return t(e,n)}))}(e,n,r);return new ox(i,o)}var s=e.retrieve(n.value);if(s){var a=s.route;return function t(e,n){if(e.value.routeConfig!==n.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(e.children.length!==n.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");n.value._futureSnapshot=e.value;for(var r=0;r<e.children.length;++r)t(e.children[r],n.children[r])}(n,a),a}var u,c=new cx(new Ag((u=n.value).url),new Ag(u.params),new Ag(u.queryParams),new Ag(u.fragment),new Ag(u.data),u.outlet,u.component,u),l=n.children.map((function(n){return t(e,n)}));return new ox(c,l)}(t,e._root,n?n._root:void 0);return new ax(r,e)}(e.routeReuseStrategy,t.targetSnapshot,t.currentRouterState);return Object.assign(Object.assign({},t),{targetRouterState:n})})),Gh((function(t){e.currentUrlTree=t.urlAfterRedirects,e.rawUrlTree=e.urlHandlingStrategy.merge(e.currentUrlTree,t.rawUrl),e.routerState=t.targetRouterState,"deferred"===e.urlUpdateStrategy&&(t.extras.skipLocationChange||e.setBrowserUrl(e.rawUrlTree,!!t.extras.replaceUrl,t.id,t.extras.state),e.browserUrlTree=t.urlAfterRedirects)})),(r=e.rootContexts,i=e.routeReuseStrategy,o=function(t){return e.triggerEvent(t)},L((function(t){return new Ix(i,t.targetRouterState,t.currentRouterState,o).activate(r),t}))),Gh({next:function(){s=!0},complete:function(){s=!0}}),op((function(){if(!s&&!a){e.resetUrlToCurrentUrlTree();var r=new hI(t.id,e.serializeUrl(t.extractedUrl),"Navigation ID ".concat(t.id," is not equal to the current navigation id ").concat(e.navigationId));n.next(r),t.resolve(!1)}e.currentNavigation=null})),up((function(r){if(a=!0,(u=r)&&u.ngNavigationCancelingError){var i=Rx(r.url);i||(e.navigated=!0,e.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl));var o=new hI(t.id,e.serializeUrl(t.extractedUrl),r.message);n.next(o),i?setTimeout((function(){var n=e.urlHandlingStrategy.merge(r.url,e.rawUrlTree);return e.scheduleNavigation(n,"imperative",null,{skipLocationChange:t.extras.skipLocationChange,replaceUrl:"eager"===e.urlUpdateStrategy},{resolve:t.resolve,reject:t.reject,promise:t.promise})}),0):t.resolve(!1)}else{e.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl);var s=new fI(t.id,e.serializeUrl(t.extractedUrl),r);n.next(s);try{t.resolve(e.errorHandler(r))}catch(c){t.reject(c)}}var u;return uf})))})))}},{key:"resetRootComponentType",value:function(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}},{key:"getTransition",value:function(){var t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}},{key:"setTransition",value:function(t){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),t))}},{key:"initialNavigation",value:function(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}},{key:"setUpLocationChangeListener",value:function(){var t=this;this.locationSubscription||(this.locationSubscription=this.location.subscribe((function(e){var n=t.extractLocationChangeInfoFromEvent(e);t.shouldScheduleNavigation(t.lastLocationChangeInfo,n)&&setTimeout((function(){var e=n.source,r=n.state,i=n.urlTree,o={replaceUrl:!0};if(r){var s=Object.assign({},r);delete s.navigationId,0!==Object.keys(s).length&&(o.state=s)}t.scheduleNavigation(i,e,r,o)}),0),t.lastLocationChangeInfo=n})))}},{key:"extractLocationChangeInfoFromEvent",value:function(t){var e;return{source:"popstate"===t.type?"popstate":"hashchange",urlTree:this.parseUrl(t.url),state:(null===(e=t.state)||void 0===e?void 0:e.navigationId)?t.state:null,transitionId:this.getTransition().id}}},{key:"shouldScheduleNavigation",value:function(t,e){if(!t)return!0;var n=e.urlTree.toString()===t.urlTree.toString();return!(e.transitionId===t.transitionId&&n&&("hashchange"===e.source&&"popstate"===t.source||"popstate"===e.source&&"hashchange"===t.source))}},{key:"getCurrentNavigation",value:function(){return this.currentNavigation}},{key:"triggerEvent",value:function(t){this.events.next(t)}},{key:"resetConfig",value:function(t){Lx(t),this.config=t.map(Vx),this.navigated=!1,this.lastSuccessfulId=-1}},{key:"ngOnDestroy",value:function(){this.dispose()}},{key:"dispose",value:function(){this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0)}},{key:"createUrlTree",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.relativeTo,r=e.queryParams,i=e.fragment,o=e.queryParamsHandling,s=e.preserveFragment,a=n||this.routerState.root,u=s?this.currentUrlTree.fragment:i,c=null;switch(o){case"merge":c=Object.assign(Object.assign({},this.currentUrlTree.queryParams),r);break;case"preserve":c=this.currentUrlTree.queryParams;break;default:c=r||null}return null!==c&&(c=this.removeEmptyProps(c)),function(t,e,n,r,i){if(0===n.length)return _x(e.root,e.root,e,r,i);var o=function(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new bx(!0,0,t);var e=0,n=!1,r=t.reduce((function(t,r,i){if("object"==typeof r&&null!=r){if(r.outlets){var o={};return NI(r.outlets,(function(t,e){o[e]="string"==typeof t?t.split("/"):t})),[].concat(_toConsumableArray(t),[{outlets:o}])}if(r.segmentPath)return[].concat(_toConsumableArray(t),[r.segmentPath])}return"string"!=typeof r?[].concat(_toConsumableArray(t),[r]):0===i?(r.split("/").forEach((function(r,i){0==i&&"."===r||(0==i&&""===r?n=!0:".."===r?e++:""!=r&&t.push(r))})),t):[].concat(_toConsumableArray(t),[r])}),[]);return new bx(n,e,r)}(n);if(o.toRoot())return _x(e.root,new LI([],{}),e,r,i);var s=function(t,e,n){if(t.isAbsolute)return new wx(e.root,!0,0);if(-1===n.snapshot._lastPathIndex){var r=n.snapshot._urlSegment;return new wx(r,r===e.root,0)}var i=gx(t.commands[0])?0:1;return function(t,e,n){for(var r=t,i=e,o=n;o>i;){if(o-=i,!(r=r.parent))throw new Error("Invalid number of '../'");i=r.segments.length}return new wx(r,!1,i-o)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+i,t.numberOfDoubleDots)}(o,e,t),a=s.processChildren?kx(s.segmentGroup,s.index,o.commands):Cx(s.segmentGroup,s.index,o.commands);return _x(s.segmentGroup,a,e,r,i)}(a,this.currentUrlTree,t,c,u)}},{key:"navigateByUrl",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{skipLocationChange:!1},n=Rx(t)?t:this.parseUrl(t),r=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(r,"imperative",null,e)}},{key:"navigate",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{skipLocationChange:!1};return function(t){for(var e=0;e<t.length;e++){var n=t[e];if(null==n)throw new Error("The requested path contains ".concat(n," segment at index ").concat(e))}}(t),this.navigateByUrl(this.createUrlTree(t,e),e)}},{key:"serializeUrl",value:function(t){return this.urlSerializer.serialize(t)}},{key:"parseUrl",value:function(t){var e;try{e=this.urlSerializer.parse(t)}catch(n){e=this.malformedUriErrorHandler(n,this.urlSerializer,t)}return e}},{key:"isActive",value:function(t,e){if(Rx(t))return zI(this.currentUrlTree,t,e);var n=this.parseUrl(t);return zI(this.currentUrlTree,n,e)}},{key:"removeEmptyProps",value:function(t){return Object.keys(t).reduce((function(e,n){var r=t[n];return null!=r&&(e[n]=r),e}),{})}},{key:"processNavigations",value:function(){var t=this;this.navigations.subscribe((function(e){t.navigated=!0,t.lastSuccessfulId=e.id,t.events.next(new lI(e.id,t.serializeUrl(e.extractedUrl),t.serializeUrl(t.currentUrlTree))),t.lastSuccessfulNavigation=t.currentNavigation,t.currentNavigation=null,e.resolve(!0)}),(function(e){t.console.warn("Unhandled Navigation Error: ")}))}},{key:"scheduleNavigation",value:function(t,e,n,r,i){var o,s,a,u=this.getTransition(),c="imperative"!==e&&"imperative"===(null==u?void 0:u.source),l=(this.lastSuccessfulId===u.id||this.currentNavigation?u.rawUrl:u.urlAfterRedirects).toString()===t.toString();if(c&&l)return Promise.resolve(!0);i?(o=i.resolve,s=i.reject,a=i.promise):a=new Promise((function(t,e){o=t,s=e}));var h=++this.navigationId;return this.setTransition({id:h,source:e,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:r,resolve:o,reject:s,promise:a,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),a.catch((function(t){return Promise.reject(t)}))}},{key:"setBrowserUrl",value:function(t,e,n,r){var i=this.urlSerializer.serialize(t);r=r||{},this.location.isCurrentPathEqualTo(i)||e?this.location.replaceState(i,"",Object.assign(Object.assign({},r),{navigationId:n})):this.location.go(i,"",Object.assign(Object.assign({},r),{navigationId:n}))}},{key:"resetStateAndUrl",value:function(t,e,n){this.routerState=t,this.currentUrlTree=e,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()}},{key:"resetUrlToCurrentUrlTree",value:function(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",{navigationId:this.lastSuccessfulId})}},{key:"url",get:function(){return this.serializeUrl(this.currentUrlTree)}}]),t}()).\u0275fac=function(t){return new(t||SA)(be(Nt),be(UI),be(_A),be(ml),be(ns),be(Vc),be(yc),be(void 0))},SA.\u0275prov=ft({token:SA,factory:SA.\u0275fac}),SA),xA=((EA=function(){function t(e,n,r,i,o){_classCallCheck(this,t),this.parentContexts=e,this.location=n,this.resolver=r,this.changeDetector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new Pu,this.deactivateEvents=new Pu,this.name=i||"primary",e.onChildOutletCreated(this.name,this)}return _createClass(t,[{key:"ngOnDestroy",value:function(){this.parentContexts.onChildOutletDestroyed(this.name)}},{key:"ngOnInit",value:function(){if(!this.activated){var t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}},{key:"detach",value:function(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();var t=this.activated;return this.activated=null,this._activatedRoute=null,t}},{key:"attach",value:function(t,e){this.activated=t,this._activatedRoute=e,this.location.insert(t.hostView)}},{key:"deactivate",value:function(){if(this.activated){var t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}},{key:"activateWith",value:function(t,e){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;var n=(e=e||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,i=new AA(t,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}},{key:"isActivated",get:function(){return!!this.activated}},{key:"component",get:function(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}},{key:"activatedRoute",get:function(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}},{key:"activatedRouteData",get:function(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}}]),t}()).\u0275fac=function(t){return new(t||EA)(bs(_A),bs(fu),bs(xa),function(t,e){var n=t.attrs;if(n)for(var r=n.length,i=0;i<r;){var o=n[i];if(Ir(o))break;if(0===o)i+=2;else if("number"==typeof o)for(i++;i<r&&"string"==typeof n[i];)i++;else{if("name"===o)return n[i+1];i+=2}}return null}($e()),bs(eu))},EA.\u0275dir=oe({type:EA,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),EA),AA=function(){function t(e,n,r){_classCallCheck(this,t),this.route=e,this.childContexts=n,this.parent=r}return _createClass(t,[{key:"get",value:function(t,e){return t===cx?this.route:t===_A?this.childContexts:this.parent.get(t,e)}}]),t}(),PA=function t(){_classCallCheck(this,t)},RA=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"preload",value:function(t,e){return lf(null)}}]),t}(),NA=((OA=function(){function t(e,n,r,i,o){_classCallCheck(this,t),this.router=e,this.injector=i,this.preloadingStrategy=o,this.loader=new gA(n,r,(function(t){return e.triggerEvent(new mI(t))}),(function(t){return e.triggerEvent(new _I(t))}))}return _createClass(t,[{key:"setUpPreloading",value:function(){var t=this;this.subscription=this.router.events.pipe(zf((function(t){return t instanceof lI})),gd((function(){return t.preload()}))).subscribe((function(){}))}},{key:"preload",value:function(){var t=this.injector.get(cu);return this.processRoutes(t,this.router.config)}},{key:"ngOnDestroy",value:function(){this.subscription&&this.subscription.unsubscribe()}},{key:"processRoutes",value:function(t,e){var n,r=[],i=_createForOfIteratorHelper(e);try{for(i.s();!(n=i.n()).done;){var o=n.value;if(o.loadChildren&&!o.canLoad&&o._loadedConfig){var s=o._loadedConfig;r.push(this.processRoutes(s.module,s.routes))}else o.loadChildren&&!o.canLoad?r.push(this.preloadConfig(t,o)):o.children&&r.push(this.processRoutes(t,o.children))}}catch(a){i.e(a)}finally{i.f()}return U(r).pipe(W(),L((function(t){})))}},{key:"preloadConfig",value:function(t,e){var n=this;return this.preloadingStrategy.preload(e,(function(){return n.loader.load(t.injector,e).pipe(B((function(t){return e._loadedConfig=t,n.processRoutes(t.module,t.routes)})))}))}}]),t}()).\u0275fac=function(t){return new(t||OA)(be(IA),be(Vc),be(yc),be(ns),be(PA))},OA.\u0275prov=ft({token:OA,factory:OA.\u0275fac}),OA),DA=((TA=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};_classCallCheck(this,t),this.router=e,this.viewportScroller=n,this.options=r,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},r.scrollPositionRestoration=r.scrollPositionRestoration||"disabled",r.anchorScrolling=r.anchorScrolling||"disabled"}return _createClass(t,[{key:"init",value:function(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}},{key:"createScrollEvents",value:function(){var t=this;return this.router.events.subscribe((function(e){e instanceof cI?(t.store[t.lastId]=t.viewportScroller.getScrollPosition(),t.lastSource=e.navigationTrigger,t.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof lI&&(t.lastId=e.id,t.scheduleScrollEvent(e,t.router.parseUrl(e.urlAfterRedirects).fragment))}))}},{key:"consumeScrollEvents",value:function(){var t=this;return this.router.events.subscribe((function(e){e instanceof EI&&(e.position?"top"===t.options.scrollPositionRestoration?t.viewportScroller.scrollToPosition([0,0]):"enabled"===t.options.scrollPositionRestoration&&t.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===t.options.anchorScrolling?t.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==t.options.scrollPositionRestoration&&t.viewportScroller.scrollToPosition([0,0]))}))}},{key:"scheduleScrollEvent",value:function(t,e){this.router.triggerEvent(new EI(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,e))}},{key:"ngOnDestroy",value:function(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}]),t}()).\u0275fac=function(t){return new(t||TA)(be(IA),be(Xl),be(void 0))},TA.\u0275prov=ft({token:TA,factory:TA.\u0275fac}),TA),zA=new wt("ROUTER_CONFIGURATION"),jA=new wt("ROUTER_FORROOT_GUARD"),LA=[ml,{provide:UI,useClass:BI},{provide:IA,useFactory:function(t,e,n,r,i,o,s){var a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:{},u=arguments.length>8?arguments[8]:void 0,c=arguments.length>9?arguments[9]:void 0,l=new IA(null,t,e,n,r,i,o,PI(s));if(u&&(l.urlHandlingStrategy=u),c&&(l.routeReuseStrategy=c),function(t,e){t.errorHandler&&(e.errorHandler=t.errorHandler),t.malformedUriErrorHandler&&(e.malformedUriErrorHandler=t.malformedUriErrorHandler),t.onSameUrlNavigation&&(e.onSameUrlNavigation=t.onSameUrlNavigation),t.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=t.paramsInheritanceStrategy),t.relativeLinkResolution&&(e.relativeLinkResolution=t.relativeLinkResolution),t.urlUpdateStrategy&&(e.urlUpdateStrategy=t.urlUpdateStrategy)}(a,l),a.enableTracing){var h=$c();l.events.subscribe((function(t){h.logGroup("Router Event: "+t.constructor.name),h.log(t.toString()),h.log(t),h.logGroupEnd()}))}return l},deps:[UI,_A,ml,ns,Vc,yc,yA,zA,[function(){return function t(){_classCallCheck(this,t)}}(),new ot],[function(){return function t(){_classCallCheck(this,t)}}(),new ot]]},_A,{provide:cx,useFactory:function(t){return t.routerState.root},deps:[IA]},{provide:Vc,useClass:qc},NA,RA,function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"preload",value:function(t,e){return e().pipe(up((function(){return lf(null)})))}}]),t}(),{provide:zA,useValue:{enableTracing:!1}}];function FA(){return new Rc("Router",IA)}var MA,VA=((MA=function(){function t(e,n){_classCallCheck(this,t)}return _createClass(t,null,[{key:"forRoot",value:function(e,n){return{ngModule:t,providers:[LA,HA(e),{provide:jA,useFactory:qA,deps:[[IA,new ot,new at]]},{provide:zA,useValue:n||{}},{provide:ll,useFactory:BA,deps:[Jc,[new it(vl),new ot],zA]},{provide:DA,useFactory:UA,deps:[IA,Xl,zA]},{provide:PA,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:RA},{provide:Rc,multi:!0,useFactory:FA},[GA,{provide:Zu,multi:!0,useFactory:QA,deps:[GA]},{provide:OP,useFactory:KA,deps:[GA]},{provide:oc,multi:!0,useExisting:OP}]]}}},{key:"forChild",value:function(e){return{ngModule:t,providers:[HA(e)]}}}]),t}()).\u0275mod=re({type:MA}),MA.\u0275inj=dt({factory:function(t){return new(t||MA)(be(jA,8),be(IA,8))}}),MA);function UA(t,e,n){return n.scrollOffset&&e.setOffset(n.scrollOffset),new DA(t,e,n)}function BA(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n.useHash?new gl(t,e):new yl(t,e)}function qA(t){return"guarded"}function HA(t){return[{provide:Ct,multi:!0,useValue:t},{provide:yA,multi:!0,useValue:t}]}var WA,GA=((WA=function(){function t(e){_classCallCheck(this,t),this.injector=e,this.initNavigation=!1,this.resultOfPreactivationDone=new T}return _createClass(t,[{key:"appInitializer",value:function(){var t=this;return this.injector.get(nl,Promise.resolve(null)).then((function(){var e=null,n=new Promise((function(t){return e=t})),r=t.injector.get(IA),i=t.injector.get(zA);return"disabled"===i.initialNavigation?(r.setUpLocationChangeListener(),e(!0)):"enabled"===i.initialNavigation||"enabledBlocking"===i.initialNavigation?(r.hooks.afterPreactivation=function(){return t.initNavigation?lf(null):(t.initNavigation=!0,e(!0),t.resultOfPreactivationDone)},r.initialNavigation()):e(!0),n}))}},{key:"bootstrapListener",value:function(t){var e=this.injector.get(zA),n=this.injector.get(NA),r=this.injector.get(DA),i=this.injector.get(IA),o=this.injector.get(Fc);t===o.components[0]&&("enabledNonBlocking"!==e.initialNavigation&&void 0!==e.initialNavigation||i.initialNavigation(),n.setUpPreloading(),r.init(),i.resetRootComponentType(o.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}}]),t}()).\u0275fac=function(t){return new(t||WA)(be(ns))},WA.\u0275prov=ft({token:WA,factory:WA.\u0275fac}),WA);function QA(t){return t.appInitializer.bind(t)}function KA(t){return t.bootstrapListener.bind(t)}var YA,$A,XA,ZA,JA,tP,eP,nP,rP,iP,oP,sP,aP,uP,cP,lP,hP,fP,dP,pP,vP,yP,gP,mP,_P,bP,wP,CP,kP,EP,SP,TP,OP=new wt("Router Initializer"),IP=((TP=function t(){_classCallCheck(this,t)}).\u0275mod=re({type:TP}),TP.\u0275inj=dt({factory:function(t){return new(t||TP)},imports:[[Kl,vd,BE,Rp,Tk,WC]]}),TP),xP=((SP=function t(){_classCallCheck(this,t)}).\u0275mod=re({type:SP}),SP.\u0275inj=dt({factory:function(t){return new(t||SP)}}),SP),AP=((EP=function t(){_classCallCheck(this,t)}).\u0275mod=re({type:EP}),EP.\u0275inj=dt({factory:function(t){return new(t||EP)},imports:[[Kl,BE,c_,xg,IP,Rp,Tk,vd,HE,xP,WC],IP]}),EP),PP=((kP=function t(){_classCallCheck(this,t)}).\u0275mod=re({type:kP}),kP.\u0275inj=dt({factory:function(t){return new(t||kP)},imports:[[Kl,WC,BE,HE,AP,Rp]]}),kP),RP=((CP=function t(){_classCallCheck(this,t)}).\u0275mod=re({type:CP}),CP.\u0275inj=dt({factory:function(t){return new(t||CP)},imports:[[Kl,c_,UC,BE,Rp,HE,WC]]}),CP),NP=((wP=function t(){_classCallCheck(this,t)}).\u0275mod=re({type:wP}),wP.\u0275inj=dt({factory:function(t){return new(t||wP)},imports:[[Kl,c_,UC,RP,WC]]}),wP),DP=((bP=function t(){_classCallCheck(this,t)}).\u0275mod=re({type:bP}),bP.\u0275inj=dt({factory:function(t){return new(t||bP)},imports:[[Kl,c_,BE,NP,Rp,HE,Tk,WC,RP,xg,NP]]}),bP),zP=((_P=function t(){_classCallCheck(this,t)}).\u0275mod=re({type:_P}),_P.\u0275inj=dt({factory:function(t){return new(t||_P)},imports:[[Kl,eE,WC,UC]]}),_P),jP=((mP=function t(){_classCallCheck(this,t)}).\u0275mod=re({type:mP}),mP.\u0275inj=dt({factory:function(t){return new(t||mP)},imports:[[Kl,UC,c_,vd,BE,Rp,WC,zP,HE,Tk,Bp,Hk,U_]]}),mP),LP=((gP=function t(){_classCallCheck(this,t)}).\u0275mod=re({type:gP}),gP.\u0275inj=dt({factory:function(t){return new(t||gP)},imports:[[Kl,c_,UC,Y_,jP,NP]]}),gP),FP=((yP=function t(){_classCallCheck(this,t)}).\u0275mod=re({type:yP}),yP.\u0275inj=dt({factory:function(t){return new(t||yP)},imports:[[Kl,WC]]}),yP),MP=((vP=function t(){_classCallCheck(this,t)}).\u0275mod=re({type:vP}),vP.\u0275inj=dt({factory:function(t){return new(t||vP)},imports:[[Kl,vd]]}),vP),VP=((pP=function t(){_classCallCheck(this,t)}).\u0275mod=re({type:pP}),pP.\u0275inj=dt({factory:function(t){return new(t||pP)},imports:[[Kl]]}),pP),UP=((dP=function t(){_classCallCheck(this,t)}).\u0275mod=re({type:dP}),dP.\u0275inj=dt({factory:function(t){return new(t||dP)},imports:[[Kl,c_,BE,WC,zP,VP,Rp,tI,Tk,HE]]}),dP),BP=((fP=function t(){_classCallCheck(this,t)}).\u0275mod=re({type:fP}),fP.\u0275inj=dt({factory:function(t){return new(t||fP)},imports:[[Kl,c_,U_]]}),fP),qP=((hP=function t(){_classCallCheck(this,t)}).\u0275mod=re({type:hP}),hP.\u0275inj=dt({factory:function(t){return new(t||hP)},imports:[[Kl,Rp,WC]]}),hP),HP=((lP=function t(){_classCallCheck(this,t)}).\u0275mod=re({type:lP}),lP.\u0275inj=dt({factory:function(t){return new(t||lP)},imports:[[Kl,WC]]}),lP),WP=((cP=function t(){_classCallCheck(this,t)}).\u0275mod=re({type:cP}),cP.\u0275inj=dt({factory:function(t){return new(t||cP)},imports:[[Kl]]}),cP),GP=((uP=function t(){_classCallCheck(this,t)}).\u0275mod=re({type:uP}),uP.\u0275inj=dt({factory:function(t){return new(t||uP)},imports:[[Kl,WC,vd]]}),uP),QP=((aP=function t(){_classCallCheck(this,t)}).\u0275mod=re({type:aP}),aP.\u0275inj=dt({factory:function(t){return new(t||aP)},imports:[[Kl,WC]]}),aP),KP=((sP=function t(){_classCallCheck(this,t)}).\u0275mod=re({type:sP}),sP.\u0275inj=dt({factory:function(t){return new(t||sP)}}),sP),YP=((oP=function t(){_classCallCheck(this,t)}).\u0275mod=re({type:oP}),oP.\u0275inj=dt({factory:function(t){return new(t||oP)},imports:[[Kl,BE,eE,Rp,WC,Tk,KP]]}),oP),$P=((iP=function t(){_classCallCheck(this,t)}).\u0275mod=re({type:iP}),iP.\u0275inj=dt({factory:function(t){return new(t||iP)},imports:[[Kl,$O,vd]]}),iP),XP=((rP=function t(){_classCallCheck(this,t)}).\u0275mod=re({type:rP}),rP.\u0275inj=dt({factory:function(t){return new(t||rP)},imports:[[Kl,$P,Rp,$O,vd,WC],$P]}),rP),ZP=((nP=function t(){_classCallCheck(this,t)}).\u0275mod=re({type:nP}),nP.\u0275inj=dt({factory:function(t){return new(t||nP)},imports:[[Kl,c_,Rp]]}),nP),JP=((eP=function t(){_classCallCheck(this,t)}).\u0275mod=re({type:eP}),eP.\u0275inj=dt({factory:function(t){return new(t||eP)},imports:[[Kl,Rp,$O,vd]]}),eP),tR=((tP=function t(){_classCallCheck(this,t)}).\u0275mod=re({type:tP}),tP.\u0275inj=dt({factory:function(t){return new(t||tP)},imports:[[Kl,Qg,$P,nI,WC,zP]]}),tP),eR=((JA=function t(){_classCallCheck(this,t)}).\u0275mod=re({type:JA}),JA.\u0275inj=dt({factory:function(t){return new(t||JA)},imports:[[Kl,c_,BE,Rp]]}),JA),nR=((ZA=function t(){_classCallCheck(this,t)}).\u0275mod=re({type:ZA}),ZA.\u0275inj=dt({factory:function(t){return new(t||ZA)}}),ZA),rR=((XA=function t(){_classCallCheck(this,t)}).\u0275mod=re({type:XA}),XA.\u0275inj=dt({factory:function(t){return new(t||XA)},imports:[[Kl,BE,Rp,WC,nR]]}),XA),iR=(($A=function t(){_classCallCheck(this,t)}).\u0275mod=re({type:$A}),$A.\u0275inj=dt({factory:function(t){return new(t||$A)}}),$A),oR=((YA=function t(){_classCallCheck(this,t)}).\u0275mod=re({type:YA}),YA.\u0275inj=dt({factory:function(t){return new(t||YA)},imports:[[Kl,BE,Rp,WC,iR]]}),YA),sR=function(){if("undefined"!=typeof Map)return Map;function t(t,e){var n=-1;return t.some((function(t,r){return t[0]===e&&(n=r,!0)})),n}return function(){function e(){this.__entries__=[]}return Object.defineProperty(e.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),e.prototype.get=function(e){var n=t(this.__entries__,e),r=this.__entries__[n];return r&&r[1]},e.prototype.set=function(e,n){var r=t(this.__entries__,e);~r?this.__entries__[r][1]=n:this.__entries__.push([e,n])},e.prototype.delete=function(e){var n=this.__entries__,r=t(n,e);~r&&n.splice(r,1)},e.prototype.has=function(e){return!!~t(this.__entries__,e)},e.prototype.clear=function(){this.__entries__.splice(0)},e.prototype.forEach=function(t,e){void 0===e&&(e=null);for(var n=0,r=this.__entries__;n<r.length;n++){var i=r[n];t.call(e,i[1],i[0])}},e}()}(),aR="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,uR="undefined"!=typeof global&&global.Math===Math?global:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")(),cR="function"==typeof requestAnimationFrame?requestAnimationFrame.bind(uR):function(t){return setTimeout((function(){return t(Date.now())}),1e3/60)},lR=["top","right","bottom","left","width","height","size","weight"],hR="undefined"!=typeof MutationObserver,fR=function(){function t(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(t,e){var n=!1,r=!1,i=0;function o(){n&&(n=!1,t()),r&&a()}function s(){cR(o)}function a(){var t=Date.now();if(n){if(t-i<2)return;r=!0}else n=!0,r=!1,setTimeout(s,20);i=t}return a}(this.refresh.bind(this))}return t.prototype.addObserver=function(t){~this.observers_.indexOf(t)||this.observers_.push(t),this.connected_||this.connect_()},t.prototype.removeObserver=function(t){var e=this.observers_,n=e.indexOf(t);~n&&e.splice(n,1),!e.length&&this.connected_&&this.disconnect_()},t.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},t.prototype.updateObservers_=function(){var t=this.observers_.filter((function(t){return t.gatherActive(),t.hasActive()}));return t.forEach((function(t){return t.broadcastActive()})),t.length>0},t.prototype.connect_=function(){aR&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),hR?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},t.prototype.disconnect_=function(){aR&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},t.prototype.onTransitionEnd_=function(t){var e=t.propertyName,n=void 0===e?"":e;lR.some((function(t){return!!~n.indexOf(t)}))&&this.refresh()},t.getInstance=function(){return this.instance_||(this.instance_=new t),this.instance_},t.instance_=null,t}(),dR=function(t,e){for(var n=0,r=Object.keys(e);n<r.length;n++){var i=r[n];Object.defineProperty(t,i,{value:e[i],enumerable:!1,writable:!1,configurable:!0})}return t},pR=function(t){return t&&t.ownerDocument&&t.ownerDocument.defaultView||uR},vR=_R(0,0,0,0);function yR(t){return parseFloat(t)||0}function gR(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return e.reduce((function(e,n){return e+yR(t["border-"+n+"-width"])}),0)}var mR="undefined"!=typeof SVGGraphicsElement?function(t){return t instanceof pR(t).SVGGraphicsElement}:function(t){return t instanceof pR(t).SVGElement&&"function"==typeof t.getBBox};function _R(t,e,n,r){return{x:t,y:e,width:n,height:r}}var bR=function(){function t(t){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=_R(0,0,0,0),this.target=t}return t.prototype.isActive=function(){var t,e=(t=this.target,aR?mR(t)?function(t){var e=t.getBBox();return _R(0,0,e.width,e.height)}(t):function(t){var e=t.clientWidth,n=t.clientHeight;if(!e&&!n)return vR;var r=pR(t).getComputedStyle(t),i=function(t){for(var e={},n=0,r=["top","right","bottom","left"];n<r.length;n++){var i=r[n];e[i]=yR(t["padding-"+i])}return e}(r),o=i.left+i.right,s=i.top+i.bottom,a=yR(r.width),u=yR(r.height);if("border-box"===r.boxSizing&&(Math.round(a+o)!==e&&(a-=gR(r,"left","right")+o),Math.round(u+s)!==n&&(u-=gR(r,"top","bottom")+s)),!function(t){return t===pR(t).document.documentElement}(t)){var c=Math.round(a+o)-e,l=Math.round(u+s)-n;1!==Math.abs(c)&&(a-=c),1!==Math.abs(l)&&(u-=l)}return _R(i.left,i.top,a,u)}(t):vR);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},t.prototype.broadcastRect=function(){var t=this.contentRect_;return this.broadcastWidth=t.width,this.broadcastHeight=t.height,t},t}(),wR=function(t,e){var n,r,i,o,s,a,u,c=(r=(n=e).x,i=n.y,o=n.width,s=n.height,a="undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object,u=Object.create(a.prototype),dR(u,{x:r,y:i,width:o,height:s,top:i,right:r+o,bottom:s+i,left:r}),u);dR(this,{target:t,contentRect:c})},CR=function(){function t(t,e,n){if(this.activeObservations_=[],this.observations_=new sR,"function"!=typeof t)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=t,this.controller_=e,this.callbackCtx_=n}return t.prototype.observe=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(t instanceof pR(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)||(e.set(t,new bR(t)),this.controller_.addObserver(this),this.controller_.refresh())}},t.prototype.unobserve=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(t instanceof pR(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)&&(e.delete(t),e.size||this.controller_.removeObserver(this))}},t.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},t.prototype.gatherActive=function(){var t=this;this.clearActive(),this.observations_.forEach((function(e){e.isActive()&&t.activeObservations_.push(e)}))},t.prototype.broadcastActive=function(){if(this.hasActive()){var t=this.callbackCtx_,e=this.activeObservations_.map((function(t){return new wR(t.target,t.broadcastRect())}));this.callback_.call(t,e,t),this.clearActive()}},t.prototype.clearActive=function(){this.activeObservations_.splice(0)},t.prototype.hasActive=function(){return this.activeObservations_.length>0},t}(),kR="undefined"!=typeof WeakMap?new WeakMap:new sR,ER=function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=fR.getInstance(),r=new CR(e,n,this);kR.set(this,r)};["observe","unobserve","disconnect"].forEach((function(t){ER.prototype[t]=function(){var e;return(e=kR.get(this))[t].apply(e,arguments)}}));var SR,TR,OR,IR,xR,AR,PR,RR,NR,DR,zR,jR,LR,FR,MR,VR,UR,BR,qR,HR,WR,GR,QR,KR,YR,$R,XR=void 0!==uR.ResizeObserver?uR.ResizeObserver:ER,ZR=((QR=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"create",value:function(t){return void 0===XR?null:new XR(t)}}]),t}()).\u0275fac=function(t){return new(t||QR)},QR.\u0275prov=ft({factory:function(){return new QR},token:QR,providedIn:"root"}),QR),JR=((GR=function t(){_classCallCheck(this,t)}).\u0275mod=re({type:GR}),GR.\u0275inj=dt({factory:function(t){return new(t||GR)},providers:[ZR]}),GR),tN=((WR=function t(){_classCallCheck(this,t)}).\u0275mod=re({type:WR}),WR.\u0275inj=dt({factory:function(t){return new(t||WR)},imports:[[Kl,WC,Rp]]}),WR),eN=((HR=function t(){_classCallCheck(this,t)}).\u0275mod=re({type:HR}),HR.\u0275inj=dt({factory:function(t){return new(t||HR)},imports:[[Kl,c_,jP,UC,Rp]]}),HR),nN=((qR=function t(){_classCallCheck(this,t)}).\u0275mod=re({type:qR}),qR.\u0275inj=dt({factory:function(t){return new(t||qR)},imports:[[Kl,xg,BE,UC,Rp,WC,HE,Tk,oS]]}),qR),rN=((BR=function t(){_classCallCheck(this,t)}).\u0275mod=re({type:BR}),BR.\u0275inj=dt({factory:function(t){return new(t||BR)},imports:[[Kl,BE,WC,HE,Tk,oS]]}),BR),iN=((UR=function t(){_classCallCheck(this,t)}).\u0275mod=re({type:UR}),UR.\u0275inj=dt({factory:function(t){return new(t||UR)},imports:[[Kl,Rp,oS]]}),UR),oN=((VR=function t(){_classCallCheck(this,t)}).\u0275mod=re({type:VR}),VR.\u0275inj=dt({factory:function(t){return new(t||VR)},imports:[[Kl,WC,Rp]]}),VR),sN=((MR=function t(){_classCallCheck(this,t)}).\u0275mod=re({type:MR}),MR.\u0275inj=dt({factory:function(t){return new(t||MR)},imports:[[Kl]]}),MR),aN=((FR=function t(){_classCallCheck(this,t)}).\u0275mod=re({type:FR}),FR.\u0275inj=dt({factory:function(t){return new(t||FR)},imports:[[Kl,vd,oS]]}),FR),uN=((LR=function t(){_classCallCheck(this,t)}).\u0275mod=re({type:LR}),LR.\u0275inj=dt({factory:function(t){return new(t||LR)},imports:[[Kl,vd,WC,AT]]}),LR),cN=((jR=function t(){_classCallCheck(this,t)}).\u0275mod=re({type:jR}),jR.\u0275inj=dt({factory:function(t){return new(t||jR)},imports:[[Kl,Rp,WC]]}),jR),lN=((zR=function t(){_classCallCheck(this,t)}).\u0275mod=re({type:zR}),zR.\u0275inj=dt({factory:function(t){return new(t||zR)},imports:[[Kl,Cg,Rp,WC]]}),zR),hN=((DR=function t(){_classCallCheck(this,t)}).\u0275mod=re({type:DR}),DR.\u0275inj=dt({factory:function(t){return new(t||DR)},imports:[[IP,c_,WC,Y_,BP,AP,xg,Kl,vd,eN,JR,Qg,UC,Rp,zP,Hk]]}),DR),fN=((NR=function t(){_classCallCheck(this,t)}).\u0275mod=re({type:NR}),NR.\u0275inj=dt({factory:function(t){return new(t||NR)},imports:[[Kl,Lg,Rp,WC,vd]]}),NR),dN=((RR=function t(){_classCallCheck(this,t)}).\u0275mod=re({type:RR}),RR.\u0275inj=dt({factory:function(t){return new(t||RR)},imports:[[Kl,c_,Rp]]}),RR),pN=((PR=function t(){_classCallCheck(this,t)}).\u0275mod=re({type:PR}),PR.\u0275inj=dt({factory:function(t){return new(t||PR)},imports:[[Kl,vd,Rp,WC]]}),PR),vN=((AR=function t(){_classCallCheck(this,t)}).\u0275mod=re({type:AR}),AR.\u0275inj=dt({factory:function(t){return new(t||AR)},imports:[[Kl,c_,BP,xg,tI,UC,Rp,zP]]}),AR),yN=((xR=function t(){_classCallCheck(this,t)}).\u0275mod=re({type:xR}),xR.\u0275inj=dt({factory:function(t){return new(t||xR)},imports:[[Kl,WC,Rp,Tk,VP,Hk]]}),xR),gN=((IR=function t(){_classCallCheck(this,t)}).\u0275mod=re({type:IR}),IR.\u0275inj=dt({factory:function(t){return new(t||IR)},imports:[[Kl,BE,c_,jP,yN,Rp,zP,HE,Tk]]}),IR),mN=((OR=function t(){_classCallCheck(this,t)}).\u0275mod=re({type:OR}),OR.\u0275inj=dt({factory:function(t){return new(t||OR)}}),OR),_N=((TR=function t(){_classCallCheck(this,t)}).\u0275mod=re({type:TR}),TR.\u0275inj=dt({factory:function(t){return new(t||TR)},imports:[[Kl,Rp,oS,tI,UC,WP,mN],vd]}),TR),bN=((SR=function t(){_classCallCheck(this,t),Zf("The `NgZorroAntdModule` has been deprecated and will be removed in 10.0.0. Please use secondary entry instead.\ne.g. `import { NzButtonModule } from 'ng-zorro-antd/button';`")}).\u0275mod=re({type:SR}),SR.\u0275inj=dt({factory:function(t){return new(t||SR)},imports:[XO,ZO,JO,eI,nI,rI,iI,xg,PP,LP,FP,MP,UP,BP,qP,HP,DP,GP,QP,YP,AP,zP,XP,$P,UC,Rp,tI,ZP,JP,tR,eR,IP,rR,PO,Tk,oR,tN,eN,nN,rN,wk,Y_,iN,oN,jP,sN,aN,Qg,uN,cN,lN,hN,fN,dN,RP,pN,oS,WP,vN,yN,gN,_N,ET,Cg]}),SR);KR=GO.a,$R=void 0,"string"!=typeof(YR=void 0)&&($R=YR,YR=KR[ga.LocaleId]),YR=YR.toLowerCase().replace(/_/g,"-"),va[YR]=KR,$R&&(va[YR][ga.ExtraData]=$R);var wN,CN=[{component:HO,path:"file-upload"}],kN=((wN=function t(){_classCallCheck(this,t)}).\u0275mod=re({type:wN,bootstrap:[tb]}),wN.\u0275inj=dt({factory:function(t){return new(t||wN)},providers:[{provide:FC,useValue:BC}],imports:[[Fh,Nf.initializeApp(Kc),bb,Jw,Lw,eC,RC,jC,c_,ip,gg,bN,VA.forRoot(CN)]]}),wN);(function(){if(jn)throw new Error("Cannot enable prod mode after platform setup.");zn=!1})(),jh().bootstrapModule(kN).catch((function(t){return console.error(t)}))},zn8P:function(t,e){function n(t){return Promise.resolve().then((function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}))}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id="zn8P"}},[[0,0]]]);